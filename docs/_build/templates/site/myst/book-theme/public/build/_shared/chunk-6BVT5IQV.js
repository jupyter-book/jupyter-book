import{c as te}from"/myst_assets_folder/_shared/chunk-CUKUDK3R.js";import{a as It}from"/myst_assets_folder/_shared/chunk-3EBOCCHJ.js";import{A as ve,B as R,E as we,a as F,b as J,d as ee,i as ye,s as U,z as ue}from"/myst_assets_folder/_shared/chunk-4OEDG4JQ.js";import{f as St}from"/myst_assets_folder/_shared/chunk-OZE3FFNP.js";function Dt(i="node"){return{class:{type:String,doc:`Annotate the ${i} with a set of space-delimited class names.`}}}function Et(i="node"){return{label:{type:String,alias:["name"],doc:`Label the ${i} to be cross-referenced or explicitly linked to.`}}}function Ot(i="node"){return{enumerated:{type:Boolean,alias:["numbered"],doc:`Turn on/off the numbering for the specific ${i}`},enumerator:{type:String,alias:["number"],doc:`Explicitly set the ${i} number`}}}function m(i="node"){return{...Dt(i),...Et(i),...Ot(i)}}function Ct(i,e){var t;return typeof((t=i.options)===null||t===void 0?void 0:t.class)=="string"&&(e.class=i.options.class),e}function Tt(i,e){var t;let{label:n,identifier:r}=ee((t=i.options)===null||t===void 0?void 0:t.label)||{};return n&&(e.label=n),r&&(e.identifier=r),e}function At(i,e){var t,n;return typeof((t=i.options)===null||t===void 0?void 0:t.enumerated)=="boolean"&&(e.enumerated=i.options.enumerated),!((n=i.options)===null||n===void 0)&&n.enumerator&&(e.enumerator=i.options.enumerator),e}function h(i,e){return Ct(i,e),Tt(i,e),At(i,e),e}var be={name:"admonition",doc:'Callouts, or "admonitions", highlight a particular block of text that exists slightly apart from the narrative of your page, such as a note or a warning. \n\n The admonition kind can be determined by the directive name used (e.g. `:::{tip}` or `:::{note}`).',alias:["attention","caution","danger","error","important","hint","note","seealso","tip","warning"],arg:{type:"myst",doc:`The optional title of the admonition, if not supplied the admonition kind will be used.

Note that the argument parsing is different from Sphinx, which does not allow named admonitions to have custom titles.`},options:{...m("admonition"),class:{type:String,doc:'CSS classes to add to your admonition. Special classes include:\n\n- `dropdown`: turns the admonition into a `<details>` html element\n- `simple`: an admonition with "simple" styles\n- the name of an admonition, the first valid admonition name encountered will be used (e.g. `tip`). Note that if you provide conflicting class names, the first valid admonition name will be used.'},icon:{type:Boolean,doc:"Setting icon to false will hide the icon."},open:{type:Boolean,doc:"Turn the admonition into a dropdown, if it isn't already, and set the open state."}},body:{type:"myst",doc:"The body of the admonition. If there is no title and the body starts with bold text or a heading, that content will be used as the admonition title."},run(i){var e,t,n,r,s;let o=[];i.arg&&o.push({type:i.body?"admonitionTitle":"paragraph",children:i.arg}),i.body&&o.push(...i.body);let l={type:"admonition",kind:i.name!=="admonition"?i.name:void 0,children:o};return((e=i.options)===null||e===void 0?void 0:e.icon)===!1&&(l.icon=!1),h(i,l),typeof((t=i.options)===null||t===void 0?void 0:t.open)=="boolean"&&(!((n=l.class)===null||n===void 0)&&n.split(" ").includes("dropdown")||(l.class=`${(r=l.class)!==null&&r!==void 0?r:""} dropdown`.trim()),!((s=i.options)===null||s===void 0)&&s.open&&(l.open=!0)),[l]}};var xe={name:"bibliography",options:{...m("bibliography"),filter:{type:String}},run(i){var e;let t={type:"bibliography",filter:(e=i.options)===null||e===void 0?void 0:e.filter};return h(i,t),[t]}};var Se="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";var Ie=(i=21)=>{let e="",t=crypto.getRandomValues(new Uint8Array(i|=0));for(;i--;)e+=Se[t[i]&63];return e};function Rt(i,e,t){let{node:n}=i;if(!t)return;let r=new Set;for(let s of t.split(",")){let o=s.trim(),l=o.match(/^(\d+)\s*-\s*(\d+)$/);if(l){let c=Number(l[1]),u=Number(l[2]);if(c<=u){for(let f=c;f<=u;f++)r.add(f);continue}else{J(e,`Invalid emphasize-lines range "${o}" (start > end)`,{node:n,source:"code-block:options",ruleId:R.directiveOptionsCorrect});continue}}/^\d+$/.test(o)?r.add(Number(o)):o!==""&&J(e,`Invalid emphasize-lines value "${o}"`,{node:n,source:"code-block:options",ruleId:R.directiveOptionsCorrect})}if(r.size!==0)return Array.from(r).sort((s,o)=>s-o)}function fe(i,e,t){var n;let{options:r,node:s}=i;r?.["lineno-start"]!=null&&r?.["number-lines"]!=null&&J(e,'Cannot use both "lineno-start" and "number-lines"',{node:(n=U('mystOption[name="number-lines"]',s))!==null&&n!==void 0?n:s,source:"code-block:options",ruleId:R.directiveOptionsCorrect});let o=Rt(i,e,r?.["emphasize-lines"]),l=r?.["number-lines"],c=r?.linenos||r?.["lineno-start"]||r?.["lineno-match"]||l?!0:void 0,u=l!=null&&l>1?l:r?.["lineno-start"];r?.["lineno-match"]?u="match":(u==null||u<=1)&&(u=void 0);let f=r?.filename;return f?.toLowerCase()==="false"?f=void 0:!f&&t&&(f=t),{emphasizeLines:o,showLineNumbers:c,startingLineNumber:u,filename:f}}var de={caption:{type:"myst",doc:"A parsed caption for the code block."},linenos:{type:Boolean,doc:"Show line numbers"},"lineno-start":{type:Number,doc:"Start line numbering from a particular value, default is 1. If present, line numbering is activated."},"number-lines":{type:Number,doc:'Alternative for "lineno-start", turns on line numbering and can be an integer that is the start of the line numbering.'},"emphasize-lines":{type:String,doc:'Emphasize particular lines (comma-separated numbers which can include ranges), e.g. "3,5,7-9"'},filename:{type:String,doc:"Show the filename in addition to the rendered code. The `include` directive will use the filename by default, to turn off this default set the filename to `false`."}};function De(i,e,t){var n,r;if(!i)return;if(typeof i=="string"&&i.startsWith("[")&&i.endsWith("]"))try{return De(te.load(i),e,t)}catch{F(e,"Could not load tags for code-cell directive",{node:(n=U('mystOption[name="tags"]',t))!==null&&n!==void 0?n:t,source:"code-cell:tags",ruleId:R.directiveOptionsCorrect});return}if(typeof i=="string"){let o=i.split(/[,\s]/).map(l=>l.trim()).filter(l=>!!l);return o.length>0?o:void 0}if(!Array.isArray(i))return;let s=i;if(s&&Array.isArray(s)&&s.every(o=>typeof o=="string")){if(s.length>0)return s.map(o=>o.trim()).filter(o=>!!o)}else if(s){J(e,"tags in code-cell directive must be a list of strings",{node:(r=U('mystOption[name="tags"]',t))!==null&&r!==void 0?r:t,source:"code-cell:tags",ruleId:R.directiveOptionsCorrect});return}}var Ee={name:"code",doc:"A code-block environment with a language as the argument, and options for highlighting, showing line numbers, and an optional filename.",alias:["code-block","sourcecode"],arg:{type:String,doc:"Code language, for example `python` or `typescript`"},options:{...m("code"),...de},body:{type:String,doc:"The raw code to display for the code block."},run(i,e){var t;let n=fe(i,e),r={type:"code",lang:i.arg,...n,value:i.body};if(!(!((t=i.options)===null||t===void 0)&&t.caption))return h(i,r),[r];let s={type:"caption",children:[{type:"paragraph",children:i.options.caption}]},o={type:"container",kind:"code",children:[r,s]};return h(i,o),[o]}},Oe={name:"code-cell",doc:"An executable code cell",arg:{type:String,doc:"Language for execution and display, for example `python`. It will default to the language of the notebook or containing markdown file."},options:{...m("code-cell"),caption:{type:"myst",doc:"A parsed caption for the code output."},tags:{type:String,alias:["tag"],doc:"A comma-separated list of tags to add to the cell, for example, `remove-input` or `hide-cell`."}},body:{type:String,doc:"The code to be executed and displayed."},run(i,e){var t,n,r;let s={type:"code",lang:i.arg,executable:!0,value:(t=i.body)!==null&&t!==void 0?t:""},o={type:"output",id:Ie(),data:[]},l={type:"block",kind:we.code,children:[s,o],data:{}};h(i,l),!((n=i.options)===null||n===void 0)&&n.caption&&(l.data.caption=[{type:"paragraph",children:i.options.caption}]);let c=De((r=i.options)===null||r===void 0?void 0:r.tags,e,i.node);return c&&(l.data.tags=c),[l]}};var Ce={name:"dropdown",arg:{type:"myst"},options:{...m("dropdown"),open:{type:Boolean,doc:"When true, the dropdown starts open."}},body:{type:"myst",required:!0},run(i){var e;let t=[];i.arg&&t.push({type:"summary",children:i.arg}),t.push(...i.body);let n={type:"details",open:(e=i.options)===null||e===void 0?void 0:e.open,children:t};return h(i,n),[n]}};var Te={name:"embed",doc:"The embed directive allows you to duplicate content from another part of your project. This can also be done through the figure directive.",arg:{type:String,doc:"The label of the node that you are embedding.",required:!0},options:{...m("embed"),"remove-input":{type:Boolean,doc:"If embedding a Jupyter Notebook cell, remove the input of the cell."},"remove-output":{type:Boolean,doc:"If embedding a Jupyter Notebook cell, remove the output of the cell."}},run(i){var e,t;if(!i.arg)return[];let n=i.arg,r=n.startsWith("#")?n.substring(1):n,{label:s}=ee(r)||{};if(!s)return[];let o={type:"embed",source:{label:s},"remove-input":(e=i.options)===null||e===void 0?void 0:e["remove-input"],"remove-output":(t=i.options)===null||t===void 0?void 0:t["remove-output"]};return h(i,o),[o]}};var Ae={name:"figure",arg:{type:String,doc:"The filename of an image (e.g. `my-fig.png`), or an ID of a Jupyter Notebook cell (e.g. `#my-cell`)."},options:{...m("figure"),class:{type:String,alias:["figclass"],doc:"CSS classes to add to your figure. Special classes include:\n\n- `full-width`: changes the figure environment to cover two columns in LaTeX"},height:{type:String,doc:"The figure height, in CSS units, for example `4em` or `300px`.",alias:["h"]},width:{type:String,alias:["w","figwidth"],doc:"The figure width, in CSS units, for example `50%` or `300px`."},alt:{type:String,doc:"Alternative text for the image"},align:{type:String,doc:"The alignment of the image in the figure. Choose one of `left`, `center` or `right`"},"remove-input":{type:Boolean,doc:"If the argument is a notebook cell, use this flag to remove the input code from the cell."},"remove-output":{type:Boolean,doc:"If the argument is a notebook cell, use this flag to remove the output from the cell."},placeholder:{type:String,doc:"A placeholder image when using a notebook cell as the figure contents. This will be shown in place of the Jupyter output until an execution environment is attached. It will also be used in static outputs, such as a PDF output."},"no-subfigures":{type:Boolean,doc:"Disallow implicit subfigure creation from child nodes",alias:["no-subfig","no-subfigure"]},kind:{type:String,doc:'Override the figures "kind", which changes the enumeration to start counting independently for that kind. For example, `kind: "example"`. The default enumeration and referencing will be the capitalized `kind` followed by a number (e.g. "Example 1").'}},body:{type:"myst",doc:"If an argument is provided to the figure directive, the body will be the figure caption. You may also omit the figure directive argument and provide images in the body of the figure, these will be parsed into sub figures."},run(i){var e,t,n,r,s,o,l,c,u,f,d,_,y;let x=[];i.arg&&x.push({type:"image",url:i.arg,alt:(e=i.options)===null||e===void 0?void 0:e.alt,width:(t=i.options)===null||t===void 0?void 0:t.width,height:(n=i.options)===null||n===void 0?void 0:n.height,align:(r=i.options)===null||r===void 0?void 0:r.align,"remove-input":(s=i.options)===null||s===void 0?void 0:s["remove-input"],"remove-output":(o=i.options)===null||o===void 0?void 0:o["remove-output"]}),!((l=i.options)===null||l===void 0)&&l.placeholder&&x.push({type:"image",placeholder:!0,url:i.options.placeholder,alt:(c=i.options)===null||c===void 0?void 0:c.alt,width:(u=i.options)===null||u===void 0?void 0:u.width,height:(f=i.options)===null||f===void 0?void 0:f.height,align:(d=i.options)===null||d===void 0?void 0:d.align}),i.body&&x.push(...i.body);let g={type:"container",kind:((_=i.options)===null||_===void 0?void 0:_.kind)||"figure",children:x};return h(i,g),!((y=i.options)===null||y===void 0)&&y["no-subfigures"]&&(g.noSubcontainers=!0),[g]}};var Re={name:"iframe",arg:{type:String,doc:"The URL source (`src`) of the HTML iframe element.",required:!0},options:{...m("iframe"),width:{type:String,doc:"The iframe width, in CSS units, for example `50%` or `300px`."},align:{type:String,doc:"The alignment of the iframe in the page. Choose one of `left`, `center` or `right`"},title:{type:String,doc:"The title attribute for the iframe element, describing its content for accessibility."},placeholder:{type:String,doc:"A placeholder image for the iframe in static exports."}},body:{type:"myst",doc:"If provided, this will be the iframe caption."},run(i){var e,t,n,r,s,o,l,c;let u={type:"iframe",src:i.arg,width:(e=i.options)===null||e===void 0?void 0:e.width,align:(t=i.options)===null||t===void 0?void 0:t.align,title:(n=i.options)===null||n===void 0?void 0:n.title};if(!((r=i.options)===null||r===void 0)&&r.placeholder&&(u.children=[{type:"image",placeholder:!0,url:i.options.placeholder,alt:(s=i.options)===null||s===void 0?void 0:s.alt,width:(o=i.options)===null||o===void 0?void 0:o.width,height:(l=i.options)===null||l===void 0?void 0:l.height,align:(c=i.options)===null||c===void 0?void 0:c.align}]),!i.body)return h(i,u),[u];let f={type:"container",kind:"figure",children:[u,{type:"caption",children:i.body}]};return h(i,f),[f]}};var Ne={name:"image",arg:{type:String,doc:"The filename of an image (e.g. `my-fig.png`).",required:!0},options:{...m("image"),height:{type:String,doc:"The image height, in CSS units, for example `4em` or `300px`.",alias:["h"]},width:{type:String,alias:["w"],doc:"The image width, in CSS units, for example `50%` or `300px`."},alt:{type:String,doc:"Alternative text for the image"},align:{type:String,doc:"The alignment of the image. Choose one of `left`, `center` or `right`"},title:{type:String,doc:"Title text for the image"}},run(i){let{alt:e,height:t,width:n,align:r,title:s}=i.options||{},o={type:"image",url:i.arg,alt:e??(i.body?ye(i.body):void 0),title:s,height:t,width:n,align:r??"center"};return h(i,o),[o]}};var ke={name:"include",alias:["literalinclude"],doc:"Allows you to include the source or parsed version of a separate file into your document tree.",arg:{type:String,doc:"The file path, which is relative to the file from which it was referenced.",required:!0},options:{...m("include"),literal:{type:Boolean,doc:"Flag the include block as literal, and show the contents as a code block. This can also be set automatically by setting the `language` or using the `literalinclude` directive."},lang:{type:String,doc:"The language of the code to be highlighted as. If set, this automatically changes an `include` into a `literalinclude`.",alias:["language","code"]},...de,"start-line":{type:Number,doc:"Only the content starting from this line will be included. The first line has index 0 and negative values count from the end."},"start-at":{type:String,doc:"Only the content after and including the first occurrence of the specified text in the external data file will be included."},"start-after":{type:String,doc:"Only the content after the first occurrence of the specified text in the external data file will be included."},"end-line":{type:Number,doc:"Only the content up to (but excluding) this line will be included."},"end-at":{type:String,doc:"Only the content up to and including the first occurrence of the specified text in the external data file (but after any start-after text) will be included."},"end-before":{type:String,doc:"Only the content before the first occurrence of the specified text in the external data file (but after any start-after text) will be included."},lines:{type:String,doc:"Specify exactly which lines to include from the original file, starting at 1. For example, `1,3,5-10,20-` includes the lines 1, 3, 5 to 10 and lines 20 to the last line of the original file."},"lineno-match":{type:Boolean,doc:"Display the original line numbers, correct only when the selection consists of contiguous lines."}},run(i,e){var t,n,r,s,o,l,c,u,f,d,_,y,x,g;let D=i.name==="literalinclude"||!!(!((t=i.options)===null||t===void 0)&&t.literal)||!!(!((n=i.options)===null||n===void 0)&&n.lang),S=i.arg,I=(s=(r=i.options)===null||r===void 0?void 0:r.lang)!==null&&s!==void 0?s:Ft(S.split(".").pop()),b=D?fe(i,e,S.split(/\/|\\/).pop()):{},T=D?(o=i.options)===null||o===void 0?void 0:o.caption:void 0,E={};if(Fe(i,e,["start-at","start-line","start-after","lines"]),Fe(i,e,["end-at","end-line","end-before","lines"]),E.startAt=(l=i.options)===null||l===void 0?void 0:l["start-at"],E.startAfter=(c=i.options)===null||c===void 0?void 0:c["start-after"],E.endAt=(u=i.options)===null||u===void 0?void 0:u["end-at"],E.endBefore=(f=i.options)===null||f===void 0?void 0:f["end-before"],!((d=i.options)===null||d===void 0)&&d.lines)E.lines=Nt(e,(_=U('mystOption[name="lines"]',i.node))!==null&&_!==void 0?_:void 0,(y=i.options)===null||y===void 0?void 0:y.lines);else{let B=(x=i.options)===null||x===void 0?void 0:x["start-line"],G=(g=i.options)===null||g===void 0?void 0:g["end-line"],Y=[];B!=null&&Y.push(B),B==null&&G!=null&&Y.push(0),G!=null&&Y.push(G),Y.length>0&&(E.lines=[Y.map(v=>v>=0?v+1:v)])}let W=Object.values(E).some(B=>B!==void 0),Z={type:"include",file:S,literal:D,lang:I,caption:T,filter:W?E:void 0,...b};return h(i,Z),[Z]}};function Nt(i,e,t){if(t)return t.split(",").map(n=>{let r=n.trim(),s=r.match(/^([0-9]+)(?:\s*(-)\s*([0-9]+)?)?$/);if(!s){J(i,`Unknown lines match "${r}"`,{node:e,ruleId:R.directiveOptionsCorrect});return}let[,o,l,c]=s;return!l&&!c?Number.parseInt(o):l&&!c?[Number.parseInt(o)]:[Number.parseInt(o),Number.parseInt(c)]}).filter(n=>!!n)}function Fe(i,e,t){let{options:n,node:r}=i;if(!n)return;let s=new Set(t),o=new Set(Object.keys(n)),l=new Set([...s].filter(c=>o.has(c)));l.size>1&&J(e,`Conflicting options for directive: ["${[...l].join('", "')}"]`,{node:r,note:`Choose a single option out of ["${[...t].join('", "')}"]`,ruleId:R.directiveOptionsCorrect})}function Ft(i){var e;return(e={ts:"typescript",js:"javascript",mjs:"javascript",tex:"latex",py:"python",md:"markdown",yml:"yaml"}[i??""])!==null&&e!==void 0?e:i}function X(i,e,t,n){F(t,"Index entry definitions should not use :option: syntax",{node:n,note:`Replace ":${i}: ${e}" with "${i}: ${e}"`})}var Le={name:"index",arg:{type:String},options:{single:{type:String},pair:{type:String},triple:{type:String},see:{type:String},seealso:{type:String,alias:["seeAlso","see-also"]},label:{type:String,alias:["name"]}},body:{type:String},run(i,e){var t,n,r,s,o,l;let c={single:[],pair:[],triple:[],see:[],seealso:[]};i.arg&&ue(i.arg,c,e,i.node),!((t=i.options)===null||t===void 0)&&t.single&&(X("single",i.options.single,e,i.node),c.single.push(i.options.single)),!((n=i.options)===null||n===void 0)&&n.pair&&(X("pair",i.options.pair,e,i.node),c.pair.push(i.options.pair)),!((r=i.options)===null||r===void 0)&&r.triple&&(X("triple",i.options.triple,e,i.node),c.triple.push(i.options.triple)),!((s=i.options)===null||s===void 0)&&s.see&&(X("see",i.options.see,e,i.node),c.see.push(i.options.see)),!((o=i.options)===null||o===void 0)&&o.seealso&&(X("seealso",i.options.seealso,e,i.node),c.seealso.push(i.options.seealso)),i.body&&i.body.split(`
`).forEach(d=>{ue(d,c,e,i.node)});let u=ve(c,e,i.node);return[{type:"mystTarget",label:(l=i.options)===null||l===void 0?void 0:l.label,indexEntries:u}]}},Be={name:"show-index",alias:["genindex"],arg:{type:"myst",doc:"Heading to be included in index block"},run(i){var e;let t=[];if(i.arg){let n=i.arg;((e=n[0])===null||e===void 0?void 0:e.type)==="heading"?t.push(...n):t.push({type:"heading",depth:2,enumerated:!1,children:n})}return[{type:"genindex",children:t}]}};var Ue=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:{},$=[],k=[],kt=typeof Uint8Array<"u"?Uint8Array:Array,pe=!1;function Je(){pe=!0;for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,t=i.length;e<t;++e)$[e]=i[e],k[i.charCodeAt(e)]=e;k["-".charCodeAt(0)]=62,k["_".charCodeAt(0)]=63}function Lt(i){pe||Je();var e,t,n,r,s,o,l=i.length;if(l%4>0)throw new Error("Invalid string. Length must be a multiple of 4");s=i[l-2]==="="?2:i[l-1]==="="?1:0,o=new kt(l*3/4-s),n=s>0?l-4:l;var c=0;for(e=0,t=0;e<n;e+=4,t+=3)r=k[i.charCodeAt(e)]<<18|k[i.charCodeAt(e+1)]<<12|k[i.charCodeAt(e+2)]<<6|k[i.charCodeAt(e+3)],o[c++]=r>>16&255,o[c++]=r>>8&255,o[c++]=r&255;return s===2?(r=k[i.charCodeAt(e)]<<2|k[i.charCodeAt(e+1)]>>4,o[c++]=r&255):s===1&&(r=k[i.charCodeAt(e)]<<10|k[i.charCodeAt(e+1)]<<4|k[i.charCodeAt(e+2)]>>2,o[c++]=r>>8&255,o[c++]=r&255),o}function Bt(i){return $[i>>18&63]+$[i>>12&63]+$[i>>6&63]+$[i&63]}function Ut(i,e,t){for(var n,r=[],s=e;s<t;s+=3)n=(i[s]<<16)+(i[s+1]<<8)+i[s+2],r.push(Bt(n));return r.join("")}function $e(i){pe||Je();for(var e,t=i.length,n=t%3,r="",s=[],o=16383,l=0,c=t-n;l<c;l+=o)s.push(Ut(i,l,l+o>c?c:l+o));return n===1?(e=i[t-1],r+=$[e>>2],r+=$[e<<4&63],r+="=="):n===2&&(e=(i[t-2]<<8)+i[t-1],r+=$[e>>10],r+=$[e>>4&63],r+=$[e<<2&63],r+="="),s.push(r),s.join("")}function oe(i,e,t,n,r){var s,o,l=r*8-n-1,c=(1<<l)-1,u=c>>1,f=-7,d=t?r-1:0,_=t?-1:1,y=i[e+d];for(d+=_,s=y&(1<<-f)-1,y>>=-f,f+=l;f>0;s=s*256+i[e+d],d+=_,f-=8);for(o=s&(1<<-f)-1,s>>=-f,f+=n;f>0;o=o*256+i[e+d],d+=_,f-=8);if(s===0)s=1-u;else{if(s===c)return o?NaN:(y?-1:1)*(1/0);o=o+Math.pow(2,n),s=s-u}return(y?-1:1)*o*Math.pow(2,s-n)}function Ye(i,e,t,n,r,s){var o,l,c,u=s*8-r-1,f=(1<<u)-1,d=f>>1,_=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=n?0:s-1,x=n?1:-1,g=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(l=isNaN(e)?1:0,o=f):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+d>=1?e+=_/c:e+=_*Math.pow(2,1-d),e*c>=2&&(o++,c/=2),o+d>=f?(l=0,o=f):o+d>=1?(l=(e*c-1)*Math.pow(2,r),o=o+d):(l=e*Math.pow(2,d-1)*Math.pow(2,r),o=0));r>=8;i[t+y]=l&255,y+=x,l/=256,r-=8);for(o=o<<r|l,u+=r;u>0;i[t+y]=o&255,y+=x,o/=256,u-=8);i[t+y-x]|=g*128}var $t={}.toString,ze=Array.isArray||function(i){return $t.call(i)=="[object Array]"},qt=50;a.TYPED_ARRAY_SUPPORT=Ue.TYPED_ARRAY_SUPPORT!==void 0?Ue.TYPED_ARRAY_SUPPORT:!0;ie();function ie(){return a.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function P(i,e){if(ie()<e)throw new RangeError("Invalid typed array length");return a.TYPED_ARRAY_SUPPORT?(i=new Uint8Array(e),i.__proto__=a.prototype):(i===null&&(i=new a(e)),i.length=e),i}function a(i,e,t){if(!a.TYPED_ARRAY_SUPPORT&&!(this instanceof a))return new a(i,e,t);if(typeof i=="number"){if(typeof e=="string")throw new Error("If encoding is specified then the first argument must be a string");return me(this,i)}return je(this,i,e,t)}a.poolSize=8192;a._augment=function(i){return i.__proto__=a.prototype,i};function je(i,e,t,n){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer?Vt(i,e,t,n):typeof e=="string"?Pt(i,e,t):Jt(i,e)}a.from=function(i,e,t){return je(null,i,e,t)};a.TYPED_ARRAY_SUPPORT&&(a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&a[Symbol.species]);function Qe(i){if(typeof i!="number")throw new TypeError('"size" argument must be a number');if(i<0)throw new RangeError('"size" argument must not be negative')}function Mt(i,e,t,n){return Qe(e),e<=0?P(i,e):t!==void 0?typeof n=="string"?P(i,e).fill(t,n):P(i,e).fill(t):P(i,e)}a.alloc=function(i,e,t){return Mt(null,i,e,t)};function me(i,e){if(Qe(e),i=P(i,e<0?0:ge(e)|0),!a.TYPED_ARRAY_SUPPORT)for(var t=0;t<e;++t)i[t]=0;return i}a.allocUnsafe=function(i){return me(null,i)};a.allocUnsafeSlow=function(i){return me(null,i)};function Pt(i,e,t){if((typeof t!="string"||t==="")&&(t="utf8"),!a.isEncoding(t))throw new TypeError('"encoding" must be a valid string encoding');var n=He(e,t)|0;i=P(i,n);var r=i.write(e,t);return r!==n&&(i=i.slice(0,r)),i}function he(i,e){var t=e.length<0?0:ge(e.length)|0;i=P(i,t);for(var n=0;n<t;n+=1)i[n]=e[n]&255;return i}function Vt(i,e,t,n){if(e.byteLength,t<0||e.byteLength<t)throw new RangeError("'offset' is out of bounds");if(e.byteLength<t+(n||0))throw new RangeError("'length' is out of bounds");return t===void 0&&n===void 0?e=new Uint8Array(e):n===void 0?e=new Uint8Array(e,t):e=new Uint8Array(e,t,n),a.TYPED_ARRAY_SUPPORT?(i=e,i.__proto__=a.prototype):i=he(i,e),i}function Jt(i,e){if(q(e)){var t=ge(e.length)|0;return i=P(i,t),i.length===0||e.copy(i,0,0,t),i}if(e){if(typeof ArrayBuffer<"u"&&e.buffer instanceof ArrayBuffer||"length"in e)return typeof e.length!="number"||ai(e.length)?P(i,0):he(i,e);if(e.type==="Buffer"&&ze(e.data))return he(i,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function ge(i){if(i>=ie())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+ie().toString(16)+" bytes");return i|0}a.isBuffer=L;function q(i){return!!(i!=null&&i._isBuffer)}a.compare=function(e,t){if(!q(e)||!q(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,s=0,o=Math.min(n,r);s<o;++s)if(e[s]!==t[s]){n=e[s],r=t[s];break}return n<r?-1:r<n?1:0};a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};a.concat=function(e,t){if(!ze(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return a.alloc(0);var n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=a.allocUnsafe(t),s=0;for(n=0;n<e.length;++n){var o=e[n];if(!q(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,s),s+=o.length}return r};function He(i,e){if(q(i))return i.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(i)||i instanceof ArrayBuffer))return i.byteLength;typeof i!="string"&&(i=""+i);var t=i.length;if(t===0)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":case void 0:return ne(i).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return tt(i).length;default:if(n)return ne(i).length;e=(""+e).toLowerCase(),n=!0}}a.byteLength=He;function Yt(i,e,t){var n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(i||(i="utf8");;)switch(i){case"hex":return ei(this,e,t);case"utf8":case"utf-8":return Xe(this,e,t);case"ascii":return Zt(this,e,t);case"latin1":case"binary":return Kt(this,e,t);case"base64":return Gt(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ti(this,e,t);default:if(n)throw new TypeError("Unknown encoding: "+i);i=(i+"").toLowerCase(),n=!0}}a.prototype._isBuffer=!0;function Q(i,e,t){var n=i[e];i[e]=i[t],i[t]=n}a.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)Q(this,t,t+1);return this};a.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)Q(this,t,t+3),Q(this,t+1,t+2);return this};a.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)Q(this,t,t+7),Q(this,t+1,t+6),Q(this,t+2,t+5),Q(this,t+3,t+4);return this};a.prototype.toString=function(){var e=this.length|0;return e===0?"":arguments.length===0?Xe(this,0,e):Yt.apply(this,arguments)};a.prototype.equals=function(e){if(!q(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:a.compare(this,e)===0};a.prototype.inspect=function(){var e="",t=qt;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"};a.prototype.compare=function(e,t,n,r,s){if(!q(e))throw new TypeError("Argument must be a Buffer");if(t===void 0&&(t=0),n===void 0&&(n=e?e.length:0),r===void 0&&(r=0),s===void 0&&(s=this.length),t<0||n>e.length||r<0||s>this.length)throw new RangeError("out of range index");if(r>=s&&t>=n)return 0;if(r>=s)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,s>>>=0,this===e)return 0;for(var o=s-r,l=n-t,c=Math.min(o,l),u=this.slice(r,s),f=e.slice(t,n),d=0;d<c;++d)if(u[d]!==f[d]){o=u[d],l=f[d];break}return o<l?-1:l<o?1:0};function We(i,e,t,n,r){if(i.length===0)return-1;if(typeof t=="string"?(n=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,isNaN(t)&&(t=r?0:i.length-1),t<0&&(t=i.length+t),t>=i.length){if(r)return-1;t=i.length-1}else if(t<0)if(r)t=0;else return-1;if(typeof e=="string"&&(e=a.from(e,n)),q(e))return e.length===0?-1:qe(i,e,t,n,r);if(typeof e=="number")return e=e&255,a.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?r?Uint8Array.prototype.indexOf.call(i,e,t):Uint8Array.prototype.lastIndexOf.call(i,e,t):qe(i,[e],t,n,r);throw new TypeError("val must be string, number or Buffer")}function qe(i,e,t,n,r){var s=1,o=i.length,l=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(i.length<2||e.length<2)return-1;s=2,o/=2,l/=2,t/=2}function c(y,x){return s===1?y[x]:y.readUInt16BE(x*s)}var u;if(r){var f=-1;for(u=t;u<o;u++)if(c(i,u)===c(e,f===-1?0:u-f)){if(f===-1&&(f=u),u-f+1===l)return f*s}else f!==-1&&(u-=u-f),f=-1}else for(t+l>o&&(t=o-l),u=t;u>=0;u--){for(var d=!0,_=0;_<l;_++)if(c(i,u+_)!==c(e,_)){d=!1;break}if(d)return u}return-1}a.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1};a.prototype.indexOf=function(e,t,n){return We(this,e,t,n,!0)};a.prototype.lastIndexOf=function(e,t,n){return We(this,e,t,n,!1)};function zt(i,e,t,n){t=Number(t)||0;var r=i.length-t;n?(n=Number(n),n>r&&(n=r)):n=r;var s=e.length;if(s%2!==0)throw new TypeError("Invalid hex string");n>s/2&&(n=s/2);for(var o=0;o<n;++o){var l=parseInt(e.substr(o*2,2),16);if(isNaN(l))return o;i[t+o]=l}return o}function jt(i,e,t,n){return ae(ne(e,i.length-t),i,t,n)}function Ge(i,e,t,n){return ae(si(e),i,t,n)}function Qt(i,e,t,n){return Ge(i,e,t,n)}function Ht(i,e,t,n){return ae(tt(e),i,t,n)}function Wt(i,e,t,n){return ae(li(e,i.length-t),i,t,n)}a.prototype.write=function(e,t,n,r){if(t===void 0)r="utf8",n=this.length,t=0;else if(n===void 0&&typeof t=="string")r=t,n=this.length,t=0;else if(isFinite(t))t=t|0,isFinite(n)?(n=n|0,r===void 0&&(r="utf8")):(r=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var s=this.length-t;if((n===void 0||n>s)&&(n=s),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return zt(this,e,t,n);case"utf8":case"utf-8":return jt(this,e,t,n);case"ascii":return Ge(this,e,t,n);case"latin1":case"binary":return Qt(this,e,t,n);case"base64":return Ht(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Wt(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}};a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Gt(i,e,t){return e===0&&t===i.length?$e(i):$e(i.slice(e,t))}function Xe(i,e,t){t=Math.min(i.length,t);for(var n=[],r=e;r<t;){var s=i[r],o=null,l=s>239?4:s>223?3:s>191?2:1;if(r+l<=t){var c,u,f,d;switch(l){case 1:s<128&&(o=s);break;case 2:c=i[r+1],(c&192)===128&&(d=(s&31)<<6|c&63,d>127&&(o=d));break;case 3:c=i[r+1],u=i[r+2],(c&192)===128&&(u&192)===128&&(d=(s&15)<<12|(c&63)<<6|u&63,d>2047&&(d<55296||d>57343)&&(o=d));break;case 4:c=i[r+1],u=i[r+2],f=i[r+3],(c&192)===128&&(u&192)===128&&(f&192)===128&&(d=(s&15)<<18|(c&63)<<12|(u&63)<<6|f&63,d>65535&&d<1114112&&(o=d))}}o===null?(o=65533,l=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|o&1023),n.push(o),r+=l}return Xt(n)}var Me=4096;function Xt(i){var e=i.length;if(e<=Me)return String.fromCharCode.apply(String,i);for(var t="",n=0;n<e;)t+=String.fromCharCode.apply(String,i.slice(n,n+=Me));return t}function Zt(i,e,t){var n="";t=Math.min(i.length,t);for(var r=e;r<t;++r)n+=String.fromCharCode(i[r]&127);return n}function Kt(i,e,t){var n="";t=Math.min(i.length,t);for(var r=e;r<t;++r)n+=String.fromCharCode(i[r]);return n}function ei(i,e,t){var n=i.length;(!e||e<0)&&(e=0),(!t||t<0||t>n)&&(t=n);for(var r="",s=e;s<t;++s)r+=oi(i[s]);return r}function ti(i,e,t){for(var n=i.slice(e,t),r="",s=0;s<n.length;s+=2)r+=String.fromCharCode(n[s]+n[s+1]*256);return r}a.prototype.slice=function(e,t){var n=this.length;e=~~e,t=t===void 0?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);var r;if(a.TYPED_ARRAY_SUPPORT)r=this.subarray(e,t),r.__proto__=a.prototype;else{var s=t-e;r=new a(s,void 0);for(var o=0;o<s;++o)r[o]=this[o+e]}return r};function C(i,e,t){if(i%1!==0||i<0)throw new RangeError("offset is not uint");if(i+e>t)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUIntLE=function(e,t,n){e=e|0,t=t|0,n||C(e,t,this.length);for(var r=this[e],s=1,o=0;++o<t&&(s*=256);)r+=this[e+o]*s;return r};a.prototype.readUIntBE=function(e,t,n){e=e|0,t=t|0,n||C(e,t,this.length);for(var r=this[e+--t],s=1;t>0&&(s*=256);)r+=this[e+--t]*s;return r};a.prototype.readUInt8=function(e,t){return t||C(e,1,this.length),this[e]};a.prototype.readUInt16LE=function(e,t){return t||C(e,2,this.length),this[e]|this[e+1]<<8};a.prototype.readUInt16BE=function(e,t){return t||C(e,2,this.length),this[e]<<8|this[e+1]};a.prototype.readUInt32LE=function(e,t){return t||C(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};a.prototype.readUInt32BE=function(e,t){return t||C(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};a.prototype.readIntLE=function(e,t,n){e=e|0,t=t|0,n||C(e,t,this.length);for(var r=this[e],s=1,o=0;++o<t&&(s*=256);)r+=this[e+o]*s;return s*=128,r>=s&&(r-=Math.pow(2,8*t)),r};a.prototype.readIntBE=function(e,t,n){e=e|0,t=t|0,n||C(e,t,this.length);for(var r=t,s=1,o=this[e+--r];r>0&&(s*=256);)o+=this[e+--r]*s;return s*=128,o>=s&&(o-=Math.pow(2,8*t)),o};a.prototype.readInt8=function(e,t){return t||C(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};a.prototype.readInt16LE=function(e,t){t||C(e,2,this.length);var n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};a.prototype.readInt16BE=function(e,t){t||C(e,2,this.length);var n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};a.prototype.readInt32LE=function(e,t){return t||C(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};a.prototype.readInt32BE=function(e,t){return t||C(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};a.prototype.readFloatLE=function(e,t){return t||C(e,4,this.length),oe(this,e,!0,23,4)};a.prototype.readFloatBE=function(e,t){return t||C(e,4,this.length),oe(this,e,!1,23,4)};a.prototype.readDoubleLE=function(e,t){return t||C(e,8,this.length),oe(this,e,!0,52,8)};a.prototype.readDoubleBE=function(e,t){return t||C(e,8,this.length),oe(this,e,!1,52,8)};function N(i,e,t,n,r,s){if(!q(i))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<s)throw new RangeError('"value" argument is out of bounds');if(t+n>i.length)throw new RangeError("Index out of range")}a.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t=t|0,n=n|0,!r){var s=Math.pow(2,8*n)-1;N(this,e,t,n,s,0)}var o=1,l=0;for(this[t]=e&255;++l<n&&(o*=256);)this[t+l]=e/o&255;return t+n};a.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t=t|0,n=n|0,!r){var s=Math.pow(2,8*n)-1;N(this,e,t,n,s,0)}var o=n-1,l=1;for(this[t+o]=e&255;--o>=0&&(l*=256);)this[t+o]=e/l&255;return t+n};a.prototype.writeUInt8=function(e,t,n){return e=+e,t=t|0,n||N(this,e,t,1,255,0),a.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=e&255,t+1};function se(i,e,t,n){e<0&&(e=65535+e+1);for(var r=0,s=Math.min(i.length-t,2);r<s;++r)i[t+r]=(e&255<<8*(n?r:1-r))>>>(n?r:1-r)*8}a.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=t|0,n||N(this,e,t,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8):se(this,e,t,!0),t+2};a.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=t|0,n||N(this,e,t,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e&255):se(this,e,t,!1),t+2};function le(i,e,t,n){e<0&&(e=4294967295+e+1);for(var r=0,s=Math.min(i.length-t,4);r<s;++r)i[t+r]=e>>>(n?r:3-r)*8&255}a.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=t|0,n||N(this,e,t,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255):le(this,e,t,!0),t+4};a.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=t|0,n||N(this,e,t,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255):le(this,e,t,!1),t+4};a.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t=t|0,!r){var s=Math.pow(2,8*n-1);N(this,e,t,n,s-1,-s)}var o=0,l=1,c=0;for(this[t]=e&255;++o<n&&(l*=256);)e<0&&c===0&&this[t+o-1]!==0&&(c=1),this[t+o]=(e/l>>0)-c&255;return t+n};a.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t=t|0,!r){var s=Math.pow(2,8*n-1);N(this,e,t,n,s-1,-s)}var o=n-1,l=1,c=0;for(this[t+o]=e&255;--o>=0&&(l*=256);)e<0&&c===0&&this[t+o+1]!==0&&(c=1),this[t+o]=(e/l>>0)-c&255;return t+n};a.prototype.writeInt8=function(e,t,n){return e=+e,t=t|0,n||N(this,e,t,1,127,-128),a.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=e&255,t+1};a.prototype.writeInt16LE=function(e,t,n){return e=+e,t=t|0,n||N(this,e,t,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8):se(this,e,t,!0),t+2};a.prototype.writeInt16BE=function(e,t,n){return e=+e,t=t|0,n||N(this,e,t,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e&255):se(this,e,t,!1),t+2};a.prototype.writeInt32LE=function(e,t,n){return e=+e,t=t|0,n||N(this,e,t,4,2147483647,-2147483648),a.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):le(this,e,t,!0),t+4};a.prototype.writeInt32BE=function(e,t,n){return e=+e,t=t|0,n||N(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255):le(this,e,t,!1),t+4};function Ze(i,e,t,n,r,s){if(t+n>i.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function Ke(i,e,t,n,r){return r||Ze(i,e,t,4),Ye(i,e,t,n,23,4),t+4}a.prototype.writeFloatLE=function(e,t,n){return Ke(this,e,t,!0,n)};a.prototype.writeFloatBE=function(e,t,n){return Ke(this,e,t,!1,n)};function et(i,e,t,n,r){return r||Ze(i,e,t,8),Ye(i,e,t,n,52,8),t+8}a.prototype.writeDoubleLE=function(e,t,n){return et(this,e,t,!0,n)};a.prototype.writeDoubleBE=function(e,t,n){return et(this,e,t,!1,n)};a.prototype.copy=function(e,t,n,r){if(n||(n=0),!r&&r!==0&&(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var s=r-n,o;if(this===e&&n<t&&t<r)for(o=s-1;o>=0;--o)e[o+t]=this[o+n];else if(s<1e3||!a.TYPED_ARRAY_SUPPORT)for(o=0;o<s;++o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+s),t);return s};a.prototype.fill=function(e,t,n,r){if(typeof e=="string"){if(typeof t=="string"?(r=t,t=0,n=this.length):typeof n=="string"&&(r=n,n=this.length),e.length===1){var s=e.charCodeAt(0);s<256&&(e=s)}if(r!==void 0&&typeof r!="string")throw new TypeError("encoding must be a string");if(typeof r=="string"&&!a.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else typeof e=="number"&&(e=e&255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t=t>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);var o;if(typeof e=="number")for(o=t;o<n;++o)this[o]=e;else{var l=q(e)?e:ne(new a(e,r).toString()),c=l.length;for(o=0;o<n-t;++o)this[o+t]=l[o%c]}return this};var ii=/[^+\/0-9A-Za-z-_]/g;function ni(i){if(i=ri(i).replace(ii,""),i.length<2)return"";for(;i.length%4!==0;)i=i+"=";return i}function ri(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function oi(i){return i<16?"0"+i.toString(16):i.toString(16)}function ne(i,e){e=e||1/0;for(var t,n=i.length,r=null,s=[],o=0;o<n;++o){if(t=i.charCodeAt(o),t>55295&&t<57344){if(!r){if(t>56319){(e-=3)>-1&&s.push(239,191,189);continue}else if(o+1===n){(e-=3)>-1&&s.push(239,191,189);continue}r=t;continue}if(t<56320){(e-=3)>-1&&s.push(239,191,189),r=t;continue}t=(r-55296<<10|t-56320)+65536}else r&&(e-=3)>-1&&s.push(239,191,189);if(r=null,t<128){if((e-=1)<0)break;s.push(t)}else if(t<2048){if((e-=2)<0)break;s.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;s.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;s.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return s}function si(i){for(var e=[],t=0;t<i.length;++t)e.push(i.charCodeAt(t)&255);return e}function li(i,e){for(var t,n,r,s=[],o=0;o<i.length&&!((e-=2)<0);++o)t=i.charCodeAt(o),n=t>>8,r=t%256,s.push(r),s.push(n);return s}function tt(i){return Lt(ni(i))}function ae(i,e,t,n){for(var r=0;r<n&&!(r+t>=e.length||r>=i.length);++r)e[r+t]=i[r];return r}function ai(i){return i!==i}function L(i){return i!=null&&(!!i._isBuffer||it(i)||ci(i))}function it(i){return!!i.constructor&&typeof i.constructor.isBuffer=="function"&&i.constructor.isBuffer(i)}function ci(i){return typeof i.readFloatLE=="function"&&typeof i.slice=="function"&&it(i.slice(0,0))}var w=class extends Error{constructor(e,t,n,...r){Array.isArray(t)&&(t=t.join(" ").trim()),super(t),Error.captureStackTrace!==void 0&&Error.captureStackTrace(this,w),this.code=e;for(let s of r)for(let o in s){let l=s[o];this[o]=L(l)?l.toString(n.encoding):l==null?l:JSON.parse(JSON.stringify(l))}}},ui=function(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)},nt=function(i){let e=[];for(let t=0,n=i.length;t<n;t++){let r=i[t];if(r==null||r===!1)e[t]={disabled:!0};else if(typeof r=="string")e[t]={name:r};else if(ui(r)){if(typeof r.name!="string")throw new w("CSV_OPTION_COLUMNS_MISSING_NAME",["Option columns missing name:",`property "name" is required at position ${t}`,"when column is an object literal"]);e[t]=r}else throw new w("CSV_INVALID_COLUMN_DEFINITION",["Invalid column definition:","expect a string or a literal object,",`got ${JSON.stringify(r)} at position ${t}`])}return e},re=class{constructor(e=100){this.size=e,this.length=0,this.buf=a.allocUnsafe(e)}prepend(e){if(L(e)){let t=this.length+e.length;if(t>=this.size&&(this.resize(),t>=this.size))throw Error("INVALID_BUFFER_STATE");let n=this.buf;this.buf=a.allocUnsafe(this.size),e.copy(this.buf,0),n.copy(this.buf,e.length),this.length+=e.length}else{let t=this.length++;t===this.size&&this.resize();let n=this.clone();this.buf[0]=e,n.copy(this.buf,1,0,t)}}append(e){let t=this.length++;t===this.size&&this.resize(),this.buf[t]=e}clone(){return a.from(this.buf.slice(0,this.length))}resize(){let e=this.length;this.size=this.size*2;let t=a.allocUnsafe(this.size);this.buf.copy(t,0,0,e),this.buf=t}toString(e){return e?this.buf.slice(0,this.length).toString(e):Uint8Array.prototype.slice.call(this.buf.slice(0,this.length))}toJSON(){return this.toString("utf8")}reset(){this.length=0}},fi=12,di=13,hi=10,pi=32,mi=9,gi=function(i){return{bomSkipped:!1,bufBytesStart:0,castField:i.cast_function,commenting:!1,error:void 0,enabled:i.from_line===1,escaping:!1,escapeIsQuote:L(i.escape)&&L(i.quote)&&a.compare(i.escape,i.quote)===0,expectedRecordLength:Array.isArray(i.columns)?i.columns.length:void 0,field:new re(20),firstLineToHeaders:i.cast_first_line_to_header,needMoreDataSize:Math.max(i.comment!==null?i.comment.length:0,...i.delimiter.map(e=>e.length),i.quote!==null?i.quote.length:0),previousBuf:void 0,quoting:!1,stop:!1,rawBuffer:new re(100),record:[],recordHasError:!1,record_length:0,recordDelimiterMaxLength:i.record_delimiter.length===0?0:Math.max(...i.record_delimiter.map(e=>e.length)),trimChars:[a.from(" ",i.encoding)[0],a.from("	",i.encoding)[0]],wasQuoting:!1,wasRowDelimiter:!1,timchars:[a.from(a.from([di],"utf8").toString(),i.encoding),a.from(a.from([hi],"utf8").toString(),i.encoding),a.from(a.from([fi],"utf8").toString(),i.encoding),a.from(a.from([pi],"utf8").toString(),i.encoding),a.from(a.from([mi],"utf8").toString(),i.encoding)]}},_i=function(i){return i.replace(/([A-Z])/g,function(e,t){return"_"+t.toLowerCase()})},Pe=function(i){let e={};for(let n in i)e[_i(n)]=i[n];if(e.encoding===void 0||e.encoding===!0)e.encoding="utf8";else if(e.encoding===null||e.encoding===!1)e.encoding=null;else if(typeof e.encoding!="string"&&e.encoding!==null)throw new w("CSV_INVALID_OPTION_ENCODING",["Invalid option encoding:","encoding must be a string or null to return a buffer,",`got ${JSON.stringify(e.encoding)}`],e);if(e.bom===void 0||e.bom===null||e.bom===!1)e.bom=!1;else if(e.bom!==!0)throw new w("CSV_INVALID_OPTION_BOM",["Invalid option bom:","bom must be true,",`got ${JSON.stringify(e.bom)}`],e);if(e.cast_function=null,e.cast===void 0||e.cast===null||e.cast===!1||e.cast==="")e.cast=void 0;else if(typeof e.cast=="function")e.cast_function=e.cast,e.cast=!0;else if(e.cast!==!0)throw new w("CSV_INVALID_OPTION_CAST",["Invalid option cast:","cast must be true or a function,",`got ${JSON.stringify(e.cast)}`],e);if(e.cast_date===void 0||e.cast_date===null||e.cast_date===!1||e.cast_date==="")e.cast_date=!1;else if(e.cast_date===!0)e.cast_date=function(n){let r=Date.parse(n);return isNaN(r)?n:new Date(r)};else if(typeof e.cast_date!="function")throw new w("CSV_INVALID_OPTION_CAST_DATE",["Invalid option cast_date:","cast_date must be true or a function,",`got ${JSON.stringify(e.cast_date)}`],e);if(e.cast_first_line_to_header=null,e.columns===!0)e.cast_first_line_to_header=void 0;else if(typeof e.columns=="function")e.cast_first_line_to_header=e.columns,e.columns=!0;else if(Array.isArray(e.columns))e.columns=nt(e.columns);else if(e.columns===void 0||e.columns===null||e.columns===!1)e.columns=!1;else throw new w("CSV_INVALID_OPTION_COLUMNS",["Invalid option columns:","expect an array, a function or true,",`got ${JSON.stringify(e.columns)}`],e);if(e.group_columns_by_name===void 0||e.group_columns_by_name===null||e.group_columns_by_name===!1)e.group_columns_by_name=!1;else{if(e.group_columns_by_name!==!0)throw new w("CSV_INVALID_OPTION_GROUP_COLUMNS_BY_NAME",["Invalid option group_columns_by_name:","expect an boolean,",`got ${JSON.stringify(e.group_columns_by_name)}`],e);if(e.columns===!1)throw new w("CSV_INVALID_OPTION_GROUP_COLUMNS_BY_NAME",["Invalid option group_columns_by_name:","the `columns` mode must be activated."],e)}if(e.comment===void 0||e.comment===null||e.comment===!1||e.comment==="")e.comment=null;else if(typeof e.comment=="string"&&(e.comment=a.from(e.comment,e.encoding)),!L(e.comment))throw new w("CSV_INVALID_OPTION_COMMENT",["Invalid option comment:","comment must be a buffer or a string,",`got ${JSON.stringify(e.comment)}`],e);if(e.comment_no_infix===void 0||e.comment_no_infix===null||e.comment_no_infix===!1)e.comment_no_infix=!1;else if(e.comment_no_infix!==!0)throw new w("CSV_INVALID_OPTION_COMMENT",["Invalid option comment_no_infix:","value must be a boolean,",`got ${JSON.stringify(e.comment_no_infix)}`],e);let t=JSON.stringify(e.delimiter);if(Array.isArray(e.delimiter)||(e.delimiter=[e.delimiter]),e.delimiter.length===0)throw new w("CSV_INVALID_OPTION_DELIMITER",["Invalid option delimiter:","delimiter must be a non empty string or buffer or array of string|buffer,",`got ${t}`],e);if(e.delimiter=e.delimiter.map(function(n){if(n==null||n===!1)return a.from(",",e.encoding);if(typeof n=="string"&&(n=a.from(n,e.encoding)),!L(n)||n.length===0)throw new w("CSV_INVALID_OPTION_DELIMITER",["Invalid option delimiter:","delimiter must be a non empty string or buffer or array of string|buffer,",`got ${t}`],e);return n}),e.escape===void 0||e.escape===!0?e.escape=a.from('"',e.encoding):typeof e.escape=="string"?e.escape=a.from(e.escape,e.encoding):(e.escape===null||e.escape===!1)&&(e.escape=null),e.escape!==null&&!L(e.escape))throw new Error(`Invalid Option: escape must be a buffer, a string or a boolean, got ${JSON.stringify(e.escape)}`);if(e.from===void 0||e.from===null)e.from=1;else if(typeof e.from=="string"&&/\d+/.test(e.from)&&(e.from=parseInt(e.from)),Number.isInteger(e.from)){if(e.from<0)throw new Error(`Invalid Option: from must be a positive integer, got ${JSON.stringify(i.from)}`)}else throw new Error(`Invalid Option: from must be an integer, got ${JSON.stringify(e.from)}`);if(e.from_line===void 0||e.from_line===null)e.from_line=1;else if(typeof e.from_line=="string"&&/\d+/.test(e.from_line)&&(e.from_line=parseInt(e.from_line)),Number.isInteger(e.from_line)){if(e.from_line<=0)throw new Error(`Invalid Option: from_line must be a positive integer greater than 0, got ${JSON.stringify(i.from_line)}`)}else throw new Error(`Invalid Option: from_line must be an integer, got ${JSON.stringify(i.from_line)}`);if(e.ignore_last_delimiters===void 0||e.ignore_last_delimiters===null)e.ignore_last_delimiters=!1;else if(typeof e.ignore_last_delimiters=="number")e.ignore_last_delimiters=Math.floor(e.ignore_last_delimiters),e.ignore_last_delimiters===0&&(e.ignore_last_delimiters=!1);else if(typeof e.ignore_last_delimiters!="boolean")throw new w("CSV_INVALID_OPTION_IGNORE_LAST_DELIMITERS",["Invalid option `ignore_last_delimiters`:","the value must be a boolean value or an integer,",`got ${JSON.stringify(e.ignore_last_delimiters)}`],e);if(e.ignore_last_delimiters===!0&&e.columns===!1)throw new w("CSV_IGNORE_LAST_DELIMITERS_REQUIRES_COLUMNS",["The option `ignore_last_delimiters`","requires the activation of the `columns` option"],e);if(e.info===void 0||e.info===null||e.info===!1)e.info=!1;else if(e.info!==!0)throw new Error(`Invalid Option: info must be true, got ${JSON.stringify(e.info)}`);if(e.max_record_size===void 0||e.max_record_size===null||e.max_record_size===!1)e.max_record_size=0;else if(!(Number.isInteger(e.max_record_size)&&e.max_record_size>=0))if(typeof e.max_record_size=="string"&&/\d+/.test(e.max_record_size))e.max_record_size=parseInt(e.max_record_size);else throw new Error(`Invalid Option: max_record_size must be a positive integer, got ${JSON.stringify(e.max_record_size)}`);if(e.objname===void 0||e.objname===null||e.objname===!1)e.objname=void 0;else if(L(e.objname)){if(e.objname.length===0)throw new Error("Invalid Option: objname must be a non empty buffer");e.encoding===null||(e.objname=e.objname.toString(e.encoding))}else if(typeof e.objname=="string"){if(e.objname.length===0)throw new Error("Invalid Option: objname must be a non empty string")}else if(typeof e.objname!="number")throw new Error(`Invalid Option: objname must be a string or a buffer, got ${e.objname}`);if(e.objname!==void 0){if(typeof e.objname=="number"){if(e.columns!==!1)throw Error("Invalid Option: objname index cannot be combined with columns or be defined as a field")}else if(e.columns===!1)throw Error("Invalid Option: objname field must be combined with columns or be defined as an index")}if(e.on_record===void 0||e.on_record===null)e.on_record=void 0;else if(typeof e.on_record!="function")throw new w("CSV_INVALID_OPTION_ON_RECORD",["Invalid option `on_record`:","expect a function,",`got ${JSON.stringify(e.on_record)}`],e);if(e.on_skip!==void 0&&e.on_skip!==null&&typeof e.on_skip!="function")throw new Error(`Invalid Option: on_skip must be a function, got ${JSON.stringify(e.on_skip)}`);if(e.quote===null||e.quote===!1||e.quote==="")e.quote=null;else if(e.quote===void 0||e.quote===!0?e.quote=a.from('"',e.encoding):typeof e.quote=="string"&&(e.quote=a.from(e.quote,e.encoding)),!L(e.quote))throw new Error(`Invalid Option: quote must be a buffer or a string, got ${JSON.stringify(e.quote)}`);if(e.raw===void 0||e.raw===null||e.raw===!1)e.raw=!1;else if(e.raw!==!0)throw new Error(`Invalid Option: raw must be true, got ${JSON.stringify(e.raw)}`);if(e.record_delimiter===void 0)e.record_delimiter=[];else if(typeof e.record_delimiter=="string"||L(e.record_delimiter)){if(e.record_delimiter.length===0)throw new w("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a non empty string or buffer,",`got ${JSON.stringify(e.record_delimiter)}`],e);e.record_delimiter=[e.record_delimiter]}else if(!Array.isArray(e.record_delimiter))throw new w("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a string, a buffer or array of string|buffer,",`got ${JSON.stringify(e.record_delimiter)}`],e);if(e.record_delimiter=e.record_delimiter.map(function(n,r){if(typeof n!="string"&&!L(n))throw new w("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a string, a buffer or array of string|buffer",`at index ${r},`,`got ${JSON.stringify(n)}`],e);if(n.length===0)throw new w("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a non empty string or buffer",`at index ${r},`,`got ${JSON.stringify(n)}`],e);return typeof n=="string"&&(n=a.from(n,e.encoding)),n}),typeof e.relax_column_count!="boolean")if(e.relax_column_count===void 0||e.relax_column_count===null)e.relax_column_count=!1;else throw new Error(`Invalid Option: relax_column_count must be a boolean, got ${JSON.stringify(e.relax_column_count)}`);if(typeof e.relax_column_count_less!="boolean")if(e.relax_column_count_less===void 0||e.relax_column_count_less===null)e.relax_column_count_less=!1;else throw new Error(`Invalid Option: relax_column_count_less must be a boolean, got ${JSON.stringify(e.relax_column_count_less)}`);if(typeof e.relax_column_count_more!="boolean")if(e.relax_column_count_more===void 0||e.relax_column_count_more===null)e.relax_column_count_more=!1;else throw new Error(`Invalid Option: relax_column_count_more must be a boolean, got ${JSON.stringify(e.relax_column_count_more)}`);if(typeof e.relax_quotes!="boolean")if(e.relax_quotes===void 0||e.relax_quotes===null)e.relax_quotes=!1;else throw new Error(`Invalid Option: relax_quotes must be a boolean, got ${JSON.stringify(e.relax_quotes)}`);if(typeof e.skip_empty_lines!="boolean")if(e.skip_empty_lines===void 0||e.skip_empty_lines===null)e.skip_empty_lines=!1;else throw new Error(`Invalid Option: skip_empty_lines must be a boolean, got ${JSON.stringify(e.skip_empty_lines)}`);if(typeof e.skip_records_with_empty_values!="boolean")if(e.skip_records_with_empty_values===void 0||e.skip_records_with_empty_values===null)e.skip_records_with_empty_values=!1;else throw new Error(`Invalid Option: skip_records_with_empty_values must be a boolean, got ${JSON.stringify(e.skip_records_with_empty_values)}`);if(typeof e.skip_records_with_error!="boolean")if(e.skip_records_with_error===void 0||e.skip_records_with_error===null)e.skip_records_with_error=!1;else throw new Error(`Invalid Option: skip_records_with_error must be a boolean, got ${JSON.stringify(e.skip_records_with_error)}`);if(e.rtrim===void 0||e.rtrim===null||e.rtrim===!1)e.rtrim=!1;else if(e.rtrim!==!0)throw new Error(`Invalid Option: rtrim must be a boolean, got ${JSON.stringify(e.rtrim)}`);if(e.ltrim===void 0||e.ltrim===null||e.ltrim===!1)e.ltrim=!1;else if(e.ltrim!==!0)throw new Error(`Invalid Option: ltrim must be a boolean, got ${JSON.stringify(e.ltrim)}`);if(e.trim===void 0||e.trim===null||e.trim===!1)e.trim=!1;else if(e.trim!==!0)throw new Error(`Invalid Option: trim must be a boolean, got ${JSON.stringify(e.trim)}`);if(e.trim===!0&&i.ltrim!==!1?e.ltrim=!0:e.ltrim!==!0&&(e.ltrim=!1),e.trim===!0&&i.rtrim!==!1?e.rtrim=!0:e.rtrim!==!0&&(e.rtrim=!1),e.to===void 0||e.to===null)e.to=-1;else if(typeof e.to=="string"&&/\d+/.test(e.to)&&(e.to=parseInt(e.to)),Number.isInteger(e.to)){if(e.to<=0)throw new Error(`Invalid Option: to must be a positive integer greater than 0, got ${JSON.stringify(i.to)}`)}else throw new Error(`Invalid Option: to must be an integer, got ${JSON.stringify(i.to)}`);if(e.to_line===void 0||e.to_line===null)e.to_line=-1;else if(typeof e.to_line=="string"&&/\d+/.test(e.to_line)&&(e.to_line=parseInt(e.to_line)),Number.isInteger(e.to_line)){if(e.to_line<=0)throw new Error(`Invalid Option: to_line must be a positive integer greater than 0, got ${JSON.stringify(i.to_line)}`)}else throw new Error(`Invalid Option: to_line must be an integer, got ${JSON.stringify(i.to_line)}`);return e},Ve=function(i){return i.every(e=>e==null||e.toString&&e.toString().trim()==="")},yi=13,vi=10,H={utf8:a.from([239,187,191]),utf16le:a.from([255,254])},wi=function(i={}){let e={bytes:0,comment_lines:0,empty_lines:0,invalid_field_length:0,lines:1,records:0},t=Pe(i);return{info:e,original_options:i,options:t,state:gi(t),__needMoreData:function(n,r,s){if(s)return!1;let{encoding:o,escape:l,quote:c}=this.options,{quoting:u,needMoreDataSize:f,recordDelimiterMaxLength:d}=this.state,_=r-n-1,y=Math.max(f,d===0?a.from(`\r
`,o).length:d,u?(l===null?0:l.length)+c.length:0,u?c.length+d:0);return _<y},parse:function(n,r,s,o){let{bom:l,comment_no_infix:c,encoding:u,from_line:f,ltrim:d,max_record_size:_,raw:y,relax_quotes:x,rtrim:g,skip_empty_lines:D,to:S,to_line:I}=this.options,{comment:b,escape:T,quote:E,record_delimiter:W}=this.options,{bomSkipped:Z,previousBuf:B,rawBuffer:G,escapeIsQuote:Y}=this.state,v;if(B===void 0)if(n===void 0){o();return}else v=n;else B!==void 0&&n===void 0?v=B:v=a.concat([B,n]);if(Z===!1)if(l===!1)this.state.bomSkipped=!0;else if(v.length<3){if(r===!1){this.state.previousBuf=v;return}}else{for(let O in H)if(H[O].compare(v,0,H[O].length)===0){let V=H[O].length;this.state.bufBytesStart+=V,v=v.slice(V),this.options=Pe({...this.original_options,encoding:O}),{comment:b,escape:T,quote:E}=this.options;break}this.state.bomSkipped=!0}let ce=v.length,p;for(p=0;p<ce&&!this.__needMoreData(p,ce,r);p++){if(this.state.wasRowDelimiter===!0&&(this.info.lines++,this.state.wasRowDelimiter=!1),I!==-1&&this.info.lines>I){this.state.stop=!0,o();return}this.state.quoting===!1&&W.length===0&&this.__autoDiscoverRecordDelimiter(v,p)&&(W=this.options.record_delimiter);let O=v[p];if(y===!0&&G.append(O),(O===yi||O===vi)&&this.state.wasRowDelimiter===!1&&(this.state.wasRowDelimiter=!0),this.state.escaping===!0)this.state.escaping=!1;else{if(T!==null&&this.state.quoting===!0&&this.__isEscape(v,p,O)&&p+T.length<ce)if(Y){if(this.__isQuote(v,p+T.length)){this.state.escaping=!0,p+=T.length-1;continue}}else{this.state.escaping=!0,p+=T.length-1;continue}if(this.state.commenting===!1&&this.__isQuote(v,p))if(this.state.quoting===!0){let A=v[p+E.length],z=g&&this.__isCharTrimable(v,p+E.length),M=b!==null&&this.__compareBytes(b,v,p+E.length,A),j=this.__isDelimiter(v,p+E.length,A),K=W.length===0?this.__autoDiscoverRecordDelimiter(v,p+E.length):this.__isRecordDelimiter(A,v,p+E.length);if(T!==null&&this.__isEscape(v,p,O)&&this.__isQuote(v,p+T.length))p+=T.length-1;else if(!A||j||K||M||z){this.state.quoting=!1,this.state.wasQuoting=!0,p+=E.length-1;continue}else if(x===!1){let _e=this.__error(new w("CSV_INVALID_CLOSING_QUOTE",["Invalid Closing Quote:",`got "${String.fromCharCode(A)}"`,`at line ${this.info.lines}`,"instead of delimiter, record delimiter, trimable character","(if activated) or comment"],this.options,this.__infoField()));if(_e!==void 0)return _e}else this.state.quoting=!1,this.state.wasQuoting=!0,this.state.field.prepend(E),p+=E.length-1}else if(this.state.field.length!==0){if(x===!1){let A=this.__infoField(),z=Object.keys(H).map(j=>H[j].equals(this.state.field.toString())?j:!1).filter(Boolean)[0],M=this.__error(new w("INVALID_OPENING_QUOTE",["Invalid Opening Quote:",`a quote is found on field ${JSON.stringify(A.column)} at line ${A.lines}, value is ${JSON.stringify(this.state.field.toString(u))}`,z?`(${z} bom)`:void 0],this.options,A,{field:this.state.field}));if(M!==void 0)return M}}else{this.state.quoting=!0,p+=E.length-1;continue}if(this.state.quoting===!1){let A=this.__isRecordDelimiter(O,v,p);if(A!==0){if(this.state.commenting&&this.state.wasQuoting===!1&&this.state.record.length===0&&this.state.field.length===0)this.info.comment_lines++;else{if(this.state.enabled===!1&&this.info.lines+(this.state.wasRowDelimiter===!0?1:0)>=f){this.state.enabled=!0,this.__resetField(),this.__resetRecord(),p+=A-1;continue}if(D===!0&&this.state.wasQuoting===!1&&this.state.record.length===0&&this.state.field.length===0){this.info.empty_lines++,p+=A-1;continue}this.info.bytes=this.state.bufBytesStart+p;let j=this.__onField();if(j!==void 0)return j;this.info.bytes=this.state.bufBytesStart+p+A;let K=this.__onRecord(s);if(K!==void 0)return K;if(S!==-1&&this.info.records>=S){this.state.stop=!0,o();return}}this.state.commenting=!1,p+=A-1;continue}if(this.state.commenting)continue;if(b!==null&&(c===!1||this.state.record.length===0&&this.state.field.length===0)&&this.__compareBytes(b,v,p,O)!==0){this.state.commenting=!0;continue}let z=this.__isDelimiter(v,p,O);if(z!==0){this.info.bytes=this.state.bufBytesStart+p;let M=this.__onField();if(M!==void 0)return M;p+=z-1;continue}}}if(this.state.commenting===!1&&_!==0&&this.state.record_length+this.state.field.length>_)return this.__error(new w("CSV_MAX_RECORD_SIZE",["Max Record Size:","record exceed the maximum number of tolerated bytes",`of ${_}`,`at line ${this.info.lines}`],this.options,this.__infoField()));let V=d===!1||this.state.quoting===!0||this.state.field.length!==0||!this.__isCharTrimable(v,p),xt=g===!1||this.state.wasQuoting===!1;if(V===!0&&xt===!0)this.state.field.append(O);else{if(g===!0&&!this.__isCharTrimable(v,p))return this.__error(new w("CSV_NON_TRIMABLE_CHAR_AFTER_CLOSING_QUOTE",["Invalid Closing Quote:","found non trimable byte after quote",`at line ${this.info.lines}`],this.options,this.__infoField()));V===!1&&(p+=this.__isCharTrimable(v,p)-1);continue}}if(r===!0)if(this.state.quoting===!0){let O=this.__error(new w("CSV_QUOTE_NOT_CLOSED",["Quote Not Closed:",`the parsing is finished with an opening quote at line ${this.info.lines}`],this.options,this.__infoField()));if(O!==void 0)return O}else if(this.state.wasQuoting===!0||this.state.record.length!==0||this.state.field.length!==0){this.info.bytes=this.state.bufBytesStart+p;let O=this.__onField();if(O!==void 0)return O;let V=this.__onRecord(s);if(V!==void 0)return V}else this.state.wasRowDelimiter===!0?this.info.empty_lines++:this.state.commenting===!0&&this.info.comment_lines++;else this.state.bufBytesStart+=p,this.state.previousBuf=v.slice(p);this.state.wasRowDelimiter===!0&&(this.info.lines++,this.state.wasRowDelimiter=!1)},__onRecord:function(n){let{columns:r,group_columns_by_name:s,encoding:o,info:l,from:c,relax_column_count:u,relax_column_count_less:f,relax_column_count_more:d,raw:_,skip_records_with_empty_values:y}=this.options,{enabled:x,record:g}=this.state;if(x===!1)return this.__resetRecord();let D=g.length;if(r===!0){if(y===!0&&Ve(g)){this.__resetRecord();return}return this.__firstLineToColumns(g)}if(r===!1&&this.info.records===0&&(this.state.expectedRecordLength=D),D!==this.state.expectedRecordLength){let S=r===!1?new w("CSV_RECORD_INCONSISTENT_FIELDS_LENGTH",["Invalid Record Length:",`expect ${this.state.expectedRecordLength},`,`got ${D} on line ${this.info.lines}`],this.options,this.__infoField(),{record:g}):new w("CSV_RECORD_INCONSISTENT_COLUMNS",["Invalid Record Length:",`columns length is ${r.length},`,`got ${D} on line ${this.info.lines}`],this.options,this.__infoField(),{record:g});if(u===!0||f===!0&&D<this.state.expectedRecordLength||d===!0&&D>this.state.expectedRecordLength)this.info.invalid_field_length++,this.state.error=S;else{let I=this.__error(S);if(I)return I}}if(y===!0&&Ve(g)){this.__resetRecord();return}if(this.state.recordHasError===!0){this.__resetRecord(),this.state.recordHasError=!1;return}if(this.info.records++,c===1||this.info.records>=c){let{objname:S}=this.options;if(r!==!1){let I={};for(let b=0,T=g.length;b<T;b++)r[b]===void 0||r[b].disabled||(s===!0&&I[r[b].name]!==void 0?Array.isArray(I[r[b].name])?I[r[b].name]=I[r[b].name].concat(g[b]):I[r[b].name]=[I[r[b].name],g[b]]:I[r[b].name]=g[b]);if(_===!0||l===!0){let b=Object.assign({record:I},_===!0?{raw:this.state.rawBuffer.toString(o)}:{},l===!0?{info:this.__infoRecord()}:{}),T=this.__push(S===void 0?b:[I[S],b],n);if(T)return T}else{let b=this.__push(S===void 0?I:[I[S],I],n);if(b)return b}}else if(_===!0||l===!0){let I=Object.assign({record:g},_===!0?{raw:this.state.rawBuffer.toString(o)}:{},l===!0?{info:this.__infoRecord()}:{}),b=this.__push(S===void 0?I:[g[S],I],n);if(b)return b}else{let I=this.__push(S===void 0?g:[g[S],g],n);if(I)return I}}this.__resetRecord()},__firstLineToColumns:function(n){let{firstLineToHeaders:r}=this.state;try{let s=r===void 0?n:r.call(null,n);if(!Array.isArray(s))return this.__error(new w("CSV_INVALID_COLUMN_MAPPING",["Invalid Column Mapping:","expect an array from column function,",`got ${JSON.stringify(s)}`],this.options,this.__infoField(),{headers:s}));let o=nt(s);this.state.expectedRecordLength=o.length,this.options.columns=o,this.__resetRecord();return}catch(s){return s}},__resetRecord:function(){this.options.raw===!0&&this.state.rawBuffer.reset(),this.state.error=void 0,this.state.record=[],this.state.record_length=0},__onField:function(){let{cast:n,encoding:r,rtrim:s,max_record_size:o}=this.options,{enabled:l,wasQuoting:c}=this.state;if(l===!1)return this.__resetField();let u=this.state.field.toString(r);if(s===!0&&c===!1&&(u=u.trimRight()),n===!0){let[f,d]=this.__cast(u);if(f!==void 0)return f;u=d}this.state.record.push(u),o!==0&&typeof u=="string"&&(this.state.record_length+=u.length),this.__resetField()},__resetField:function(){this.state.field.reset(),this.state.wasQuoting=!1},__push:function(n,r){let{on_record:s}=this.options;if(s!==void 0){let o=this.__infoRecord();try{n=s.call(null,n,o)}catch(l){return l}if(n==null)return}r(n)},__cast:function(n){let{columns:r,relax_column_count:s}=this.options;if(Array.isArray(r)===!0&&s&&this.options.columns.length<=this.state.record.length)return[void 0,void 0];if(this.state.castField!==null)try{let l=this.__infoField();return[void 0,this.state.castField.call(null,n,l)]}catch(l){return[l]}if(this.__isFloat(n))return[void 0,parseFloat(n)];if(this.options.cast_date!==!1){let l=this.__infoField();return[void 0,this.options.cast_date.call(null,n,l)]}return[void 0,n]},__isCharTrimable:function(n,r){return((o,l)=>{let{timchars:c}=this.state;e:for(let u=0;u<c.length;u++){let f=c[u];for(let d=0;d<f.length;d++)if(f[d]!==o[l+d])continue e;return f.length}return 0})(n,r)},__isFloat:function(n){return n-parseFloat(n)+1>=0},__compareBytes:function(n,r,s,o){if(n[0]!==o)return 0;let l=n.length;for(let c=1;c<l;c++)if(n[c]!==r[s+c])return 0;return l},__isDelimiter:function(n,r,s){let{delimiter:o,ignore_last_delimiters:l}=this.options;if(l===!0&&this.state.record.length===this.options.columns.length-1)return 0;if(l!==!1&&typeof l=="number"&&this.state.record.length===l-1)return 0;e:for(let c=0;c<o.length;c++){let u=o[c];if(u[0]===s){for(let f=1;f<u.length;f++)if(u[f]!==n[r+f])continue e;return u.length}}return 0},__isRecordDelimiter:function(n,r,s){let{record_delimiter:o}=this.options,l=o.length;e:for(let c=0;c<l;c++){let u=o[c],f=u.length;if(u[0]===n){for(let d=1;d<f;d++)if(u[d]!==r[s+d])continue e;return u.length}}return 0},__isEscape:function(n,r,s){let{escape:o}=this.options;if(o===null)return!1;let l=o.length;if(o[0]===s){for(let c=0;c<l;c++)if(o[c]!==n[r+c])return!1;return!0}return!1},__isQuote:function(n,r){let{quote:s}=this.options;if(s===null)return!1;let o=s.length;for(let l=0;l<o;l++)if(s[l]!==n[r+l])return!1;return!0},__autoDiscoverRecordDelimiter:function(n,r){let{encoding:s}=this.options,o=[a.from(`\r
`,s),a.from(`
`,s),a.from("\r",s)];e:for(let l=0;l<o.length;l++){let c=o[l].length;for(let u=0;u<c;u++)if(o[l][u]!==n[r+u])continue e;return this.options.record_delimiter.push(o[l]),this.state.recordDelimiterMaxLength=o[l].length,o[l].length}return 0},__error:function(n){let{encoding:r,raw:s,skip_records_with_error:o}=this.options,l=typeof n=="string"?new Error(n):n;if(o){this.state.recordHasError=!0,this.options.on_skip!==void 0&&this.options.on_skip(l,s?this.state.rawBuffer.toString(r):void 0);return}else return l},__infoDataSet:function(){return{...this.info,columns:this.options.columns}},__infoRecord:function(){let{columns:n,raw:r,encoding:s}=this.options;return{...this.__infoDataSet(),error:this.state.error,header:n===!0,index:this.state.record.length,raw:r?this.state.rawBuffer.toString(s):void 0}},__infoField:function(){let{columns:n}=this.options,r=Array.isArray(n);return{...this.__infoRecord(),column:r===!0?n.length>this.state.record.length?n[this.state.record.length].name:null:this.state.record.length,quoting:this.state.wasQuoting}}}},rt=function(i,e={}){typeof i=="string"&&(i=a.from(i));let t=e&&e.objname?{}:[],n=wi(e),r=c=>{n.options.objname===void 0?t.push(c):t[c[0]]=c[1]},s=()=>{},o=n.parse(i,!1,r,s);if(o!==void 0)throw o;let l=n.parse(void 0,!0,r,s);if(l!==void 0)throw l;return t};var st={name:"table",arg:{type:"myst",doc:"An optional table caption"},options:{...m("table"),class:{type:String,doc:"CSS classes to add to your table. Special classes include:\n\n- `full-width`: changes the table environment to cover two columns in LaTeX"},align:{type:String}},body:{type:"myst",required:!0},run(i){let e=[];i.arg&&e.push({type:"caption",children:[{type:"paragraph",children:i.arg}]}),e.push(...i.body);let t={type:"container",kind:"table",children:e};return h(i,t),[t]}},lt={name:"list-table",arg:{type:"myst",doc:"An optional table caption"},options:{...m("list table"),"header-rows":{type:Number},class:{type:String,doc:"CSS classes to add to your table. Special classes include:\n\n- `full-width`: changes the table environment to cover two columns in LaTeX"},align:{type:String}},body:{type:"myst",required:!0},validate(i,e){var t;let n={...i},r=i.body;return r.length!==1||r[0].type!=="list"?(F(e,"list-table directive must have one list as body",{node:i.node,ruleId:R.directiveBodyCorrect}),n.body=[]):(t=r[0].children)===null||t===void 0||t.forEach(s=>{var o,l;n.body.length&&(s.type!=="listItem"||((o=s.children)===null||o===void 0?void 0:o.length)!==1||((l=s.children[0])===null||l===void 0?void 0:l.type)!=="list")&&(F(e,"list-table directive must have a list of lists",{node:i.node,ruleId:R.directiveBodyCorrect}),n.body=[])}),n},run(i){var e,t,n;let r=[];i.arg&&r.push({type:"caption",children:[{type:"paragraph",children:i.arg}]});let s=((e=i.body[0])===null||e===void 0?void 0:e.children)||[],o=((t=i.options)===null||t===void 0?void 0:t["header-rows"])||0,l={type:"table",align:(n=i.options)===null||n===void 0?void 0:n.align,children:s.map(u=>{var f,d;let y={type:"tableRow",children:(((d=(f=u.children)===null||f===void 0?void 0:f[0])===null||d===void 0?void 0:d.children)||[]).map(x=>({type:"tableCell",header:o>0?!0:void 0,children:x.children}))};return o-=1,y})};r.push(l);let c={type:"container",kind:"table",children:r};return h(i,c),[c]}};function ot(i,e,t){var n,r,s;let o=(n=t?.delim)!==null&&n!==void 0?n:",";return rt(i,{delimiter:o==="tab"?"	":o==="space"?" ":o,ltrim:!t?.keepspace,escape:(r=t?.escape)!==null&&r!==void 0?r:'"',quote:(s=t?.quote)!==null&&s!==void 0?s:'"'}).map((c,u)=>c.map(f=>{let d=e.parseMyst(f,u);return U("*:root > paragraph:only-child",d)}))}var at={name:"csv-table",doc:'The "csv-table" directive is used to create a table from CSV (comma-separated values) data.',arg:{type:"myst",doc:"An optional table caption"},options:{...m("CSV table"),header:{type:String,doc:"Supplemental data for the table header, added independently of and before any header-rows from the main CSV data. Must use the same CSV format as the main CSV data."},"header-rows":{type:Number,doc:"The number of rows of CSV data to use in the table header. Defaults to 0."},class:{type:String,doc:"CSS classes to add to your table. Special classes include:\n\n- `full-width`: changes the table environment to cover two columns in LaTeX"},align:{type:String},delim:{type:String,doc:'The character used to separate data fields. The special values "tab" and "space" are converted to the respective whitespace characters. Defaults to "," (comma)'},keepspace:{type:Boolean,doc:"Treat whitespace immediately following the delimiter as significant. The default is to ignore such whitespace."},quote:{type:String,doc:'The character used to quote fields containing special characters, such as the delimiter, quotes, or new-line characters. Must be a single character, defaults to `"` (a double quote)\\\nFor example, `First cell, "These commas, for example, are escaped", Next cell`'},escape:{type:String,doc:'A character used to escape the delimiter or quote characters from the CSV parser. Must be a single character, defaults to `"` (a double quote) default is a double quote\\\nFor example, `First cell, "These quotes"", for example, are escaped", Next cell`'}},body:{type:String,doc:"The CSV content",required:!0},run(i,e,t){var n,r,s,o,l;let c=[];i.arg&&c.push({type:"caption",children:[{type:"paragraph",children:i.arg}]});let u=[];if(((n=i.options)===null||n===void 0?void 0:n.header)!==void 0){let x=[];try{x=ot(i.options.header,t,i.options)}catch{F(e,"csv-table directive header must be valid CSV-formatted MyST",{node:(r=U('mystOption[name="header"]',i.node))!==null&&r!==void 0?r:i.node,ruleId:R.directiveOptionsCorrect})}u.push(...x.map(g=>({type:"tableRow",children:g.map(D=>{var S;return{type:"tableCell",header:!0,children:(S=D?.children)!==null&&S!==void 0?S:[]}})})))}let f=[];try{f=ot(i.body,t,i.options)}catch{F(e,"csv-table directive body must be valid CSV-formatted MyST",{node:(s=U("mystDirectiveBody",i.node))!==null&&s!==void 0?s:i.node,ruleId:R.directiveBodyCorrect})}let d=((o=i.options)===null||o===void 0?void 0:o["header-rows"])||0;u.push(...f.map(x=>{let g={type:"tableRow",children:x.map(D=>{var S;return{type:"tableCell",header:d>0?!0:void 0,children:(S=D?.children)!==null&&S!==void 0?S:[]}})};return d-=1,g}));let _={type:"table",align:(l=i.options)===null||l===void 0?void 0:l.align,children:u},y={type:"container",kind:"table",children:[...c,_]};return h(i,y),[y]}};var ct={name:"aside",alias:["margin","sidebar","topic"],arg:{type:"myst",doc:"An optional title"},options:{...m("aside")},body:{type:"myst",required:!0},run(i){let e=[...i.body];i.arg&&e.unshift({type:"admonitionTitle",children:i.arg});let t={type:"aside",kind:i.name=="aside"||i.name=="margin"?void 0:i.name,children:e};return h(i,t),[t]}};var ut={name:"glossary",body:{type:"myst",required:!0},options:{...m("glossary")},run(i){let e={type:"glossary",children:i.body};return h(i,e),[e]}};var ft={name:"math",options:{...m("math"),typst:{type:String,doc:"Typst-specific math content. If not provided, LaTeX content will be converted to Typst."}},body:{type:String,required:!0},run(i){var e;let t=h(i,{type:"math",value:i.body});return i.node.tight&&(t.tight=i.node.tight),!((e=i.options)===null||e===void 0)&&e.typst&&(t.typst=i.options.typst),[t]}};var dt={name:"mdast",arg:{type:String,required:!0},options:{...m("mdast")},run(i){let e={type:"mdast",id:i.arg};return h(i,e),[e]}};var ht={name:"mermaid",options:{...m("mermaid")},body:{type:String,required:!0},run(i){return[h(i,{type:"mermaid",value:i.body})]}};var pt={name:"myst",doc:"Demonstrate some MyST code in an editable code block that displays its output/result interactively. Limited to built-in functionality, as parsing and rendering is done in the browser without access to plugin code or project configuration.",options:{...m("myst"),numbering:{type:String}},body:{type:String,required:!0},run(i){var e;let t;if(!((e=i.options)===null||e===void 0)&&e.numbering)try{t=te.load(i.options.numbering)}catch{}let n={type:"myst",numbering:t,value:i.body};return h(i,n),[n]}};var mt=St(It(),1);var gt={name:"blockquote",alias:["epigraph","pull-quote"],doc:"Block quotes are used to indicate that the enclosed content forms an extended quotation. They may be followed by an inscription or attribution formed of a paragraph beginning with `--`, `---`, or an em-dash.",options:{...m("blockquote"),class:{type:String,doc:"CSS classes to add to your blockquote. Special classes include:\n\n- `pull-quote`: used for a blockquote node which should attract attention\n- `epigraph`: used for a blockquote node that are usually found at the beginning of a document"}},body:{type:"myst",doc:"The body of the quote, which may contain a special attribution paragraph that is turned into a caption"},run(i){var e;let t=[];i.body&&t.push(...i.body);let n={type:"container",kind:"quote",children:[{type:"blockquote",children:t}]};h(i,n);let r=(e=i.options)===null||e===void 0?void 0:e.class;return n.class=(0,mt.default)({[r]:r,[i.name]:i.name!=="blockquote"}),[n]}};var _t={name:"raw",doc:'Allows you to include non-markdown text in your document. If the argument "latex" is provided, the text will be parsed as latex; otherwise, it will be included as raw text.',arg:{type:String,doc:'Format of directive content - for now, only "latex" is valid'},body:{type:String,doc:"Raw content to be parsed"},run(i){var e,t;let n=(e=i.arg)!==null&&e!==void 0?e:"",r=(t=i.body)!==null&&t!==void 0?t:"",s=["tex","latex"].includes(n)?`
${r}
`:void 0,o=["typst","typ"].includes(n)?`
${r}
`:void 0;return[{type:"raw",lang:n,tex:s,typst:o,value:r}]}},yt={name:"raw:latex",alias:["raw:tex"],doc:"Allows you to include tex in your document that will only be included in tex exports",body:{type:String,doc:"Raw tex content"},run(i){let e="tex",t=i.body,n=t?`
${t}
`:"";return[{type:"raw",lang:e,tex:n}]}},vt={name:"raw:typst",alias:["raw:typ"],doc:"Allows you to include typst in your document that will only be included in typst exports",body:{type:String,doc:"Raw typst content"},run(i){let e="typst",t=i.body,n=t?`
${t}
`:"";return[{type:"raw",lang:e,typst:n}]}};var wt={name:"div",options:{...m("div")},body:{type:"myst"},run(i){let e={type:"div"};return i.body&&(e.children=i.body),h(i,e),[e]}};var bi=["project","page","section"],bt={name:"toc",doc:"Inserts table of contents in the page. This may be for the project (each page has an entry), the current page (each heading has an entry), or the current section (only headings in the section have an entry).",alias:["tableofcontents","table-of-contents","toctree","contents"],arg:{type:"myst",doc:"Heading to be included with table of contents"},options:{context:{type:String,doc:"Table of Contents context; one of project, page, or section",alias:["kind"]},depth:{type:Number,doc:"Number of levels to include in Table of Contents; by default, all levels will be included",alias:["maxdepth"]},...m("toc")},run(i,e){var t,n,r;let s=!((t=i.options)===null||t===void 0)&&t.context?i.options.context:i.name==="contents"?"section":"project";bi.includes(s)||(F(e,`Unknown context for ${i.name} directive: ${s}`),s="project");let o=(n=i.options)===null||n===void 0?void 0:n.depth;o!=null&&o<1&&(F(e,"Table of Contents 'depth' must be a number greater than 0"),o=void 0);let l=[];if(i.arg){let u=i.arg;((r=u[0])===null||r===void 0?void 0:r.type)==="heading"?l.push(...u):l.push({type:"heading",depth:2,enumerated:!1,children:u})}let c={type:"toc",kind:s,depth:o,children:l};return h(i,c),[c]}};var Xn=[be,xe,at,Ee,Oe,Ce,Te,gt,Ae,Re,Ne,ke,Le,Be,st,lt,ct,ut,ft,dt,ht,pt,_t,yt,vt,wt,bt];export{m as a,h as b,Xn as c};
