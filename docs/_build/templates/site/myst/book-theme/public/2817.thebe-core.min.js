/*! For license information please see 2817.thebe-core.min.js.LICENSE.txt */
(self.webpackChunkthebe_core=self.webpackChunkthebe_core||[]).push([[2817],{22817:(e,t,n)=>{"use strict";n.d(t,{Component:()=>Hr});var i=n(14830),s=n(83173),r=n(29587),o=n(79066);function a(e,t){return({state:n,dispatch:i})=>{if(n.readOnly)return!1;let s=e(t,n);return!!s&&(i(n.update(s)),!0)}}const l=a(p,0),h=a(d,0),c=a(((e,t)=>d(e,t,function(e){let t=[];for(let n of e.selection.ranges){let i=e.doc.lineAt(n.from),s=n.to<=i.to?i:e.doc.lineAt(n.to),r=t.length-1;r>=0&&t[r].to>i.from?t[r].to=s.to:t.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:s.to})}return t}(t))),0);function u(e,t){let n=e.languageDataAt("commentTokens",t);return n.length?n[0]:{}}const f=50;function d(e,t,n=t.selection.ranges){let i=n.map((e=>u(t,e.from).block));if(!i.every((e=>e)))return null;let s=n.map(((e,n)=>function(e,{open:t,close:n},i,s){let r,o,a=e.sliceDoc(i-f,i),l=e.sliceDoc(s,s+f),h=/\s*$/.exec(a)[0].length,c=/^\s*/.exec(l)[0].length,u=a.length-h;if(a.slice(u-t.length,u)==t&&l.slice(c,c+n.length)==n)return{open:{pos:i-h,margin:h&&1},close:{pos:s+c,margin:c&&1}};s-i<=2*f?r=o=e.sliceDoc(i,s):(r=e.sliceDoc(i,i+f),o=e.sliceDoc(s-f,s));let d=/^\s*/.exec(r)[0].length,p=/\s*$/.exec(o)[0].length,m=o.length-p-n.length;return r.slice(d,d+t.length)==t&&o.slice(m,m+n.length)==n?{open:{pos:i+d+t.length,margin:/\s/.test(r.charAt(d+t.length))?1:0},close:{pos:s-p-n.length,margin:/\s/.test(o.charAt(m-1))?1:0}}:null}(t,i[n],e.from,e.to)));if(2!=e&&!s.every((e=>e)))return{changes:t.changes(n.map(((e,t)=>s[t]?[]:[{from:e.from,insert:i[t].open+" "},{from:e.to,insert:" "+i[t].close}])))};if(1!=e&&s.some((e=>e))){let e=[];for(let t,n=0;n<s.length;n++)if(t=s[n]){let s=i[n],{open:r,close:o}=t;e.push({from:r.pos-s.open.length,to:r.pos+r.margin},{from:o.pos-o.margin,to:o.pos+s.close.length})}return{changes:e}}return null}function p(e,t,n=t.selection.ranges){let i=[],s=-1;for(let{from:e,to:r}of n){let n=i.length,o=1e9,a=u(t,e).line;if(a){for(let n=e;n<=r;){let l=t.doc.lineAt(n);if(l.from>s&&(e==r||r>l.from)){s=l.from;let e=/^\s*/.exec(l.text)[0].length,t=e==l.length,n=l.text.slice(e,e+a.length)==a?e:-1;e<l.text.length&&e<o&&(o=e),i.push({line:l,comment:n,token:a,indent:e,empty:t,single:!1})}n=l.to+1}if(o<1e9)for(let e=n;e<i.length;e++)i[e].indent<i[e].line.text.length&&(i[e].indent=o);i.length==n+1&&(i[n].single=!0)}}if(2!=e&&i.some((e=>e.comment<0&&(!e.empty||e.single)))){let e=[];for(let{line:t,token:n,indent:s,empty:r,single:o}of i)!o&&r||e.push({from:t.from+s,insert:n+" "});let n=t.changes(e);return{changes:n,selection:t.selection.map(n,1)}}if(1!=e&&i.some((e=>e.comment>=0))){let e=[];for(let{line:t,comment:n,token:s}of i)if(n>=0){let i=t.from+n,r=i+s.length;" "==t.text[r-t.from]&&r++,e.push({from:i,to:r})}return{changes:e}}return null}const m=i.YH.define(),g=i.sj.define();class b{constructor(e,t,n,i,s){this.changes=e,this.effects=t,this.mapped=n,this.startSelection=i,this.selectionsAfter=s}setSelAfter(e){return new b(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,n;return{changes:null===(e=this.changes)||void 0===e?void 0:e.toJSON(),mapped:null===(t=this.mapped)||void 0===t?void 0:t.toJSON(),startSelection:null===(n=this.startSelection)||void 0===n?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map((e=>e.toJSON()))}}static fromJSON(e){return new b(e.changes&&i.VR.fromJSON(e.changes),[],e.mapped&&i.Gu.fromJSON(e.mapped),e.startSelection&&i.OF.fromJSON(e.startSelection),e.selectionsAfter.map(i.OF.fromJSON))}static fromTransaction(e,t){let n=x;for(let t of e.startState.facet(g)){let i=t(e);i.length&&(n=n.concat(i))}return!n.length&&e.changes.empty?null:new b(e.changes.invert(e.startState.doc),n,void 0,t||e.startState.selection,x)}static selection(e){return new b(void 0,x,void 0,void 0,e)}}function y(e,t,n,i){let s=t+1>n+20?t-n-1:0,r=e.slice(s,t);return r.push(i),r}function v(e,t){return e.length?t.length?e.concat(t):e:t}const x=[];function w(e){let t=e[e.length-1],n=e.slice();return n[e.length-1]=t.setSelAfter(t.selectionsAfter.slice(0,t.selectionsAfter.length-1)),n}function k(e,t){if(!e.length)return e;let n=e.length,i=x;for(;n;){let s=S(e[n-1],t,i);if(s.changes&&!s.changes.empty||s.effects.length){let t=e.slice(0,n);return t[n-1]=s,t}t=s.mapped,n--,i=s.selectionsAfter}return i.length?[b.selection(i)]:x}function S(e,t,n){let s=v(e.selectionsAfter.length?e.selectionsAfter.map((e=>e.map(t))):x,n);if(!e.changes)return b.selection(s);let r=e.changes.map(t),o=t.mapDesc(e.changes,!0),a=e.mapped?e.mapped.composeDesc(o):o;return new b(r,i.Pe.mapEffects(e.effects,t),a,e.startSelection.map(o),s)}const C=/^(input\.type|delete)($|\.)/;class A{constructor(e,t,n=0,i=void 0){this.done=e,this.undone=t,this.prevTime=n,this.prevUserEvent=i}isolate(){return this.prevTime?new A(this.done,this.undone):this}addChanges(e,t,n,s,r){let o=this.done,a=o[o.length-1];return o=a&&a.changes&&!a.changes.empty&&e.changes&&(!n||C.test(n))&&(!a.selectionsAfter.length&&t-this.prevTime<s.newGroupDelay&&s.joinToEvent(r,function(e,t){let n=[],i=!1;return e.iterChangedRanges(((e,t)=>n.push(e,t))),t.iterChangedRanges(((e,t,s,r)=>{for(let e=0;e<n.length;){let t=n[e++],o=n[e++];r>=t&&s<=o&&(i=!0)}})),i}(a.changes,e.changes))||"input.type.compose"==n)?y(o,o.length-1,s.minDepth,new b(e.changes.compose(a.changes),v(i.Pe.mapEffects(e.effects,a.changes),a.effects),a.mapped,a.startSelection,x)):y(o,o.length,s.minDepth,e),new A(o,x,t,n)}addSelection(e,t,n,i){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:x;return s.length>0&&t-this.prevTime<i&&n==this.prevUserEvent&&n&&/^select($|\.)/.test(n)&&(r=s[s.length-1],o=e,r.ranges.length==o.ranges.length&&0===r.ranges.filter(((e,t)=>e.empty!=o.ranges[t].empty)).length)?this:new A(function(e,t){if(e.length){let n=e[e.length-1],i=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-200));return i.length&&i[i.length-1].eq(t)?e:(i.push(t),y(e,e.length-1,1e9,n.setSelAfter(i)))}return[b.selection([t])]}(this.done,e),this.undone,t,n);var r,o}addMapping(e){return new A(k(this.done,e),k(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,n){let i=0==e?this.done:this.undone;if(0==i.length)return null;let s=i[i.length-1],r=s.selectionsAfter[0]||t.selection;if(n&&s.selectionsAfter.length)return t.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:m.of({side:e,rest:w(i),selection:r}),userEvent:0==e?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let n=1==i.length?x:i.slice(0,i.length-1);return s.mapped&&(n=k(n,s.mapped)),t.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:m.of({side:e,rest:n,selection:r}),filter:!1,userEvent:0==e?"undo":"redo",scrollIntoView:!0})}return null}}function O(e,t){return i.OF.create(e.ranges.map(t),e.mainIndex)}function M(e,t){return e.update({selection:t,scrollIntoView:!0,userEvent:"select"})}function _({state:e,dispatch:t},n){let i=O(e.selection,n);return!i.eq(e.selection,!0)&&(t(M(e,i)),!0)}function T(e,t){return i.OF.cursor(t?e.to:e.from)}function E(e,t){return _(e,(n=>n.empty?e.moveByChar(n,t):T(n,t)))}function N(e){return e.textDirectionAt(e.state.selection.main.head)==s.OP.LTR}A.empty=new A(x,x);const D=e=>E(e,!N(e)),P=e=>E(e,N(e));function R(e,t){return _(e,(n=>n.empty?e.moveByGroup(n,t):T(n,t)))}function j(e,t,n){if(t.type.prop(n))return!0;let i=t.to-t.from;return i&&(i>2||/[^\s,.;:]/.test(e.sliceDoc(t.from,t.to)))||t.firstChild}function L(e,t,n){let s,a,l=(0,r.mv)(e).resolveInner(t.head),h=n?o.uY.closedBy:o.uY.openedBy;for(let i=t.head;;){let t=n?l.childAfter(i):l.childBefore(i);if(!t)break;j(e,t,h)?l=t:i=n?t.to:t.from}return a=l.type.prop(h)&&(s=n?(0,r.jU)(e,l.from,1):(0,r.jU)(e,l.to,-1))&&s.matched?n?s.end.to:s.end.from:n?l.to:l.from,i.OF.cursor(a,n?-1:1)}function B(e,t){return _(e,(n=>{if(!n.empty)return T(n,t);let i=e.moveVertically(n,t);return i.head!=n.head?i:e.moveToLineBoundary(n,t)}))}"undefined"!=typeof Intl&&Intl.Segmenter;const I=e=>B(e,!1),F=e=>B(e,!0);function $(e){let t,n=e.scrollDOM.clientHeight<e.scrollDOM.scrollHeight-2,i=0,r=0;if(n){for(let t of e.state.facet(s.Lz.scrollMargins)){let n=t(e);(null==n?void 0:n.top)&&(i=Math.max(null==n?void 0:n.top,i)),(null==n?void 0:n.bottom)&&(r=Math.max(null==n?void 0:n.bottom,r))}t=e.scrollDOM.clientHeight-i-r}else t=(e.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:i,marginBottom:r,selfScroll:n,height:Math.max(e.defaultLineHeight,t-5)}}function z(e,t){let n,i=$(e),{state:r}=e,o=O(r.selection,(n=>n.empty?e.moveVertically(n,t,i.height):T(n,t)));if(o.eq(r.selection))return!1;if(i.selfScroll){let t=e.coordsAtPos(r.selection.main.head),a=e.scrollDOM.getBoundingClientRect(),l=a.top+i.marginTop,h=a.bottom-i.marginBottom;t&&t.top>l&&t.bottom<h&&(n=s.Lz.scrollIntoView(o.main.head,{y:"start",yMargin:t.top-l}))}return e.dispatch(M(r,o),{effects:n}),!0}const H=e=>z(e,!1),q=e=>z(e,!0);function V(e,t,n){let s=e.lineBlockAt(t.head),r=e.moveToLineBoundary(t,n);if(r.head==t.head&&r.head!=(n?s.to:s.from)&&(r=e.moveToLineBoundary(t,n,!1)),!n&&r.head==s.from&&s.length){let n=/^\s*/.exec(e.state.sliceDoc(s.from,Math.min(s.from+100,s.to)))[0].length;n&&t.head!=s.from+n&&(r=i.OF.cursor(s.from+n))}return r}function W(e,t){let n=O(e.state.selection,(e=>{let n=t(e);return i.OF.range(e.anchor,n.head,n.goalColumn,n.bidiLevel||void 0)}));return!n.eq(e.state.selection)&&(e.dispatch(M(e.state,n)),!0)}function G(e,t){return W(e,(n=>e.moveByChar(n,t)))}const U=e=>G(e,!N(e)),K=e=>G(e,N(e));function J(e,t){return W(e,(n=>e.moveByGroup(n,t)))}function Y(e,t){return W(e,(n=>e.moveVertically(n,t)))}const X=e=>Y(e,!1),Q=e=>Y(e,!0);function Z(e,t){return W(e,(n=>e.moveVertically(n,t,$(e).height)))}const ee=e=>Z(e,!1),te=e=>Z(e,!0),ne=({state:e,dispatch:t})=>(t(M(e,{anchor:0})),!0),ie=({state:e,dispatch:t})=>(t(M(e,{anchor:e.doc.length})),!0),se=({state:e,dispatch:t})=>(t(M(e,{anchor:e.selection.main.anchor,head:0})),!0),re=({state:e,dispatch:t})=>(t(M(e,{anchor:e.selection.main.anchor,head:e.doc.length})),!0),oe=({state:e,dispatch:t})=>{let n=e.selection,s=null;return n.ranges.length>1?s=i.OF.create([n.main]):n.main.empty||(s=i.OF.create([i.OF.cursor(n.main.head)])),!!s&&(t(M(e,s)),!0)};function ae(e,t){if(e.state.readOnly)return!1;let n="delete.selection",{state:r}=e,o=r.changeByRange((s=>{let{from:r,to:o}=s;if(r==o){let i=t(s);i<r?(n="delete.backward",i=le(e,i,!1)):i>r&&(n="delete.forward",i=le(e,i,!0)),r=Math.min(r,i),o=Math.max(o,i)}else r=le(e,r,!1),o=le(e,o,!0);return r==o?{range:s}:{changes:{from:r,to:o},range:i.OF.cursor(r,r<s.head?-1:1)}}));return!o.changes.empty&&(e.dispatch(r.update(o,{scrollIntoView:!0,userEvent:n,effects:"delete.selection"==n?s.Lz.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function le(e,t,n){if(e instanceof s.Lz)for(let i of e.state.facet(s.Lz.atomicRanges).map((t=>t(e))))i.between(t,t,((e,i)=>{e<t&&i>t&&(t=n?i:e)}));return t}const he=(e,t,n)=>ae(e,(s=>{let o,a,l=s.from,{state:h}=e,c=h.doc.lineAt(l);if(n&&!t&&l>c.from&&l<c.from+200&&!/[^ \t]/.test(o=c.text.slice(0,l-c.from))){if("\t"==o[o.length-1])return l-1;let e=(0,i.y$)(o,h.tabSize)%(0,r.tp)(h)||(0,r.tp)(h);for(let t=0;t<e&&" "==o[o.length-1-t];t++)l--;a=l}else a=(0,i.zK)(c.text,l-c.from,t,t)+c.from,a==l&&c.number!=(t?h.doc.lines:1)?a+=t?1:-1:!t&&/[\ufe00-\ufe0f]/.test(c.text.slice(a-c.from,l-c.from))&&(a=(0,i.zK)(c.text,a-c.from,!1,!1)+c.from);return a})),ce=e=>he(e,!1,!0),ue=e=>he(e,!0,!1),fe=(e,t)=>ae(e,(n=>{let s=n.head,{state:r}=e,o=r.doc.lineAt(s),a=r.charCategorizer(s);for(let e=null;;){if(s==(t?o.to:o.from)){s==n.head&&o.number!=(t?r.doc.lines:1)&&(s+=t?1:-1);break}let l=(0,i.zK)(o.text,s-o.from,t)+o.from,h=o.text.slice(Math.min(s,l)-o.from,Math.max(s,l)-o.from),c=a(h);if(null!=e&&c!=e)break;" "==h&&s==n.head||(e=c),s=l}return s})),de=e=>fe(e,!1);function pe(e){let t=[],n=-1;for(let i of e.selection.ranges){let s=e.doc.lineAt(i.from),r=e.doc.lineAt(i.to);if(i.empty||i.to!=r.from||(r=e.doc.lineAt(i.to-1)),n>=s.number){let e=t[t.length-1];e.to=r.to,e.ranges.push(i)}else t.push({from:s.from,to:r.to,ranges:[i]});n=r.number+1}return t}function me(e,t,n){if(e.readOnly)return!1;let s=[],r=[];for(let t of pe(e)){if(n?t.to==e.doc.length:0==t.from)continue;let o=e.doc.lineAt(n?t.to+1:t.from-1),a=o.length+1;if(n){s.push({from:t.to,to:o.to},{from:t.from,insert:o.text+e.lineBreak});for(let n of t.ranges)r.push(i.OF.range(Math.min(e.doc.length,n.anchor+a),Math.min(e.doc.length,n.head+a)))}else{s.push({from:o.from,to:t.from},{from:t.to,insert:e.lineBreak+o.text});for(let e of t.ranges)r.push(i.OF.range(e.anchor-a,e.head-a))}}return!!s.length&&(t(e.update({changes:s,scrollIntoView:!0,selection:i.OF.create(r,e.selection.mainIndex),userEvent:"move.line"})),!0)}function ge(e,t,n){if(e.readOnly)return!1;let i=[];for(let t of pe(e))n?i.push({from:t.from,insert:e.doc.slice(t.from,t.to)+e.lineBreak}):i.push({from:t.to,insert:e.lineBreak+e.doc.slice(t.from,t.to)});return t(e.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const be=ve(!1),ye=ve(!0);function ve(e){return({state:t,dispatch:n})=>{if(t.readOnly)return!1;let s=t.changeByRange((n=>{let{from:s,to:a}=n,l=t.doc.lineAt(s),h=!e&&s==a&&function(e,t){if(/\(\)|\[\]|\{\}/.test(e.sliceDoc(t-1,t+1)))return{from:t,to:t};let n,i=(0,r.mv)(e).resolveInner(t),s=i.childBefore(t),a=i.childAfter(t);return s&&a&&s.to<=t&&a.from>=t&&(n=s.type.prop(o.uY.closedBy))&&n.indexOf(a.name)>-1&&e.doc.lineAt(s.to).from==e.doc.lineAt(a.from).from&&!/\S/.test(e.sliceDoc(s.to,a.from))?{from:s.to,to:a.from}:null}(t,s);e&&(s=a=(a<=l.to?l:t.doc.lineAt(a)).to);let c=new r.KB(t,{simulateBreak:s,simulateDoubleBreak:!!h}),u=(0,r._v)(c,s);for(null==u&&(u=(0,i.y$)(/^\s*/.exec(t.doc.lineAt(s).text)[0],t.tabSize));a<l.to&&/\s/.test(l.text[a-l.from]);)a++;h?({from:s,to:a}=h):s>l.from&&s<l.from+100&&!/\S/.test(l.text.slice(0,s))&&(s=l.from);let f=["",(0,r.EI)(t,u)];return h&&f.push((0,r.EI)(t,c.lineIndent(l.from,-1))),{changes:{from:s,to:a,insert:i.EY.of(f)},range:i.OF.cursor(s+1+f[1].length)}}));return n(t.update(s,{scrollIntoView:!0,userEvent:"input"})),!0}}function xe(e,t){let n=-1;return e.changeByRange((s=>{let r=[];for(let i=s.from;i<=s.to;){let o=e.doc.lineAt(i);o.number>n&&(s.empty||s.to>o.from)&&(t(o,r,s),n=o.number),i=o.to+1}let o=e.changes(r);return{changes:r,range:i.OF.range(o.mapPos(s.anchor,1),o.mapPos(s.head,1))}}))}const we=({state:e,dispatch:t})=>!e.readOnly&&(t(e.update(xe(e,((t,n)=>{n.push({from:t.from,insert:e.facet(r.Xt)})})),{userEvent:"input.indent"})),!0),ke=({state:e,dispatch:t})=>!e.readOnly&&(t(e.update(xe(e,((t,n)=>{let s=/^\s*/.exec(t.text)[0];if(!s)return;let o=(0,i.y$)(s,e.tabSize),a=0,l=(0,r.EI)(e,Math.max(0,o-(0,r.tp)(e)));for(;a<s.length&&a<l.length&&s.charCodeAt(a)==l.charCodeAt(a);)a++;n.push({from:t.from+a,to:t.from+s.length,insert:l.slice(a)})})),{userEvent:"delete.dedent"})),!0),Se=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:e=>_(e,(t=>L(e.state,t,!N(e)))),shift:e=>W(e,(t=>L(e.state,t,!N(e))))},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:e=>_(e,(t=>L(e.state,t,N(e)))),shift:e=>W(e,(t=>L(e.state,t,N(e))))},{key:"Alt-ArrowUp",run:({state:e,dispatch:t})=>me(e,t,!1)},{key:"Shift-Alt-ArrowUp",run:({state:e,dispatch:t})=>ge(e,t,!1)},{key:"Alt-ArrowDown",run:({state:e,dispatch:t})=>me(e,t,!0)},{key:"Shift-Alt-ArrowDown",run:({state:e,dispatch:t})=>ge(e,t,!0)},{key:"Escape",run:oe},{key:"Mod-Enter",run:ye},{key:"Alt-l",mac:"Ctrl-l",run:({state:e,dispatch:t})=>{let n=pe(e).map((({from:t,to:n})=>i.OF.range(t,Math.min(n+1,e.doc.length))));return t(e.update({selection:i.OF.create(n),userEvent:"select"})),!0}},{key:"Mod-i",run:({state:e,dispatch:t})=>{let n=O(e.selection,(t=>{var n;for(let s=(0,r.mv)(e).resolveStack(t.from,1);s;s=s.next){let{node:e}=s;if((e.from<t.from&&e.to>=t.to||e.to>t.to&&e.from<=t.from)&&(null===(n=e.parent)||void 0===n?void 0:n.parent))return i.OF.range(e.to,e.from)}return t}));return t(M(e,n)),!0},preventDefault:!0},{key:"Mod-[",run:ke},{key:"Mod-]",run:we},{key:"Mod-Alt-\\",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=Object.create(null),i=new r.KB(e,{overrideIndentation:e=>{let t=n[e];return null==t?-1:t}}),s=xe(e,((t,s,o)=>{let a=(0,r._v)(i,t.from);if(null==a)return;/\S/.test(t.text)||(a=0);let l=/^\s*/.exec(t.text)[0],h=(0,r.EI)(e,a);(l!=h||o.from<t.from+l.length)&&(n[t.from]=a,s.push({from:t.from,to:t.from+l.length,insert:h}))}));return s.changes.empty||t(e.update(s,{userEvent:"indent"})),!0}},{key:"Shift-Mod-k",run:e=>{if(e.state.readOnly)return!1;let{state:t}=e,n=t.changes(pe(t).map((({from:e,to:n})=>(e>0?e--:n<t.doc.length&&n++,{from:e,to:n})))),i=O(t.selection,(t=>{let n;if(e.lineWrapping){let i=e.lineBlockAt(t.head),s=e.coordsAtPos(t.head,t.assoc||1);s&&(n=i.bottom+e.documentTop-s.bottom+e.defaultLineHeight/2)}return e.moveVertically(t,!0,n)})).map(n);return e.dispatch({changes:n,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0}},{key:"Shift-Mod-\\",run:({state:e,dispatch:t})=>function(e,t,n){let s=!1,o=O(e.selection,(t=>{let o=(0,r.jU)(e,t.head,-1)||(0,r.jU)(e,t.head,1)||t.head>0&&(0,r.jU)(e,t.head-1,1)||t.head<e.doc.length&&(0,r.jU)(e,t.head+1,-1);if(!o||!o.end)return t;s=!0;let a=o.start.from==t.head?o.end.to:o.end.from;return n?i.OF.range(t.anchor,a):i.OF.cursor(a)}));return!!s&&(t(M(e,o)),!0)}(e,t,!1)},{key:"Mod-/",run:e=>{let{state:t}=e,n=t.doc.lineAt(t.selection.main.from),i=u(e.state,n.from);return i.line?l(e):!!i.block&&c(e)}},{key:"Alt-A",run:h},{key:"Ctrl-m",mac:"Shift-Alt-m",run:e=>(e.setTabFocusMode(),!0)}].concat([{key:"ArrowLeft",run:D,shift:U,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:e=>R(e,!N(e)),shift:e=>J(e,!N(e)),preventDefault:!0},{mac:"Cmd-ArrowLeft",run:e=>_(e,(t=>V(e,t,!N(e)))),shift:e=>W(e,(t=>V(e,t,!N(e)))),preventDefault:!0},{key:"ArrowRight",run:P,shift:K,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:e=>R(e,N(e)),shift:e=>J(e,N(e)),preventDefault:!0},{mac:"Cmd-ArrowRight",run:e=>_(e,(t=>V(e,t,N(e)))),shift:e=>W(e,(t=>V(e,t,N(e)))),preventDefault:!0},{key:"ArrowUp",run:I,shift:X,preventDefault:!0},{mac:"Cmd-ArrowUp",run:ne,shift:se},{mac:"Ctrl-ArrowUp",run:H,shift:ee},{key:"ArrowDown",run:F,shift:Q,preventDefault:!0},{mac:"Cmd-ArrowDown",run:ie,shift:re},{mac:"Ctrl-ArrowDown",run:q,shift:te},{key:"PageUp",run:H,shift:ee},{key:"PageDown",run:q,shift:te},{key:"Home",run:e=>_(e,(t=>V(e,t,!1))),shift:e=>W(e,(t=>V(e,t,!1))),preventDefault:!0},{key:"Mod-Home",run:ne,shift:se},{key:"End",run:e=>_(e,(t=>V(e,t,!0))),shift:e=>W(e,(t=>V(e,t,!0))),preventDefault:!0},{key:"Mod-End",run:ie,shift:re},{key:"Enter",run:be},{key:"Mod-a",run:({state:e,dispatch:t})=>(t(e.update({selection:{anchor:0,head:e.doc.length},userEvent:"select"})),!0)},{key:"Backspace",run:ce,shift:ce},{key:"Delete",run:ue},{key:"Mod-Backspace",mac:"Alt-Backspace",run:de},{key:"Mod-Delete",mac:"Alt-Delete",run:e=>fe(e,!0)},{mac:"Mod-Backspace",run:e=>ae(e,(t=>{let n=e.moveToLineBoundary(t,!1).head;return t.head>n?n:Math.max(0,t.head-1)}))},{mac:"Mod-Delete",run:e=>ae(e,(t=>{let n=e.moveToLineBoundary(t,!0).head;return t.head<n?n:Math.min(e.state.doc.length,t.head+1)}))}].concat([{key:"Ctrl-b",run:D,shift:U,preventDefault:!0},{key:"Ctrl-f",run:P,shift:K},{key:"Ctrl-p",run:I,shift:X},{key:"Ctrl-n",run:F,shift:Q},{key:"Ctrl-a",run:e=>_(e,(t=>i.OF.cursor(e.lineBlockAt(t.head).from,1))),shift:e=>W(e,(t=>i.OF.cursor(e.lineBlockAt(t.head).from)))},{key:"Ctrl-e",run:e=>_(e,(t=>i.OF.cursor(e.lineBlockAt(t.head).to,-1))),shift:e=>W(e,(t=>i.OF.cursor(e.lineBlockAt(t.head).to)))},{key:"Ctrl-d",run:ue},{key:"Ctrl-h",run:ce},{key:"Ctrl-k",run:e=>ae(e,(t=>{let n=e.lineBlockAt(t.head).to;return t.head<n?n:Math.min(e.state.doc.length,t.head+1)}))},{key:"Ctrl-Alt-h",run:de},{key:"Ctrl-o",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=e.changeByRange((e=>({changes:{from:e.from,to:e.to,insert:i.EY.of(["",""])},range:i.OF.cursor(e.from)})));return t(e.update(n,{scrollIntoView:!0,userEvent:"input"})),!0}},{key:"Ctrl-t",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=e.changeByRange((t=>{if(!t.empty||0==t.from||t.from==e.doc.length)return{range:t};let n=t.from,s=e.doc.lineAt(n),r=n==s.from?n-1:(0,i.zK)(s.text,n-s.from,!1)+s.from,o=n==s.to?n+1:(0,i.zK)(s.text,n-s.from,!0)+s.from;return{changes:{from:r,to:o,insert:e.doc.slice(n,o).append(e.doc.slice(r,n))},range:i.OF.cursor(o)}}));return!n.changes.empty&&(t(e.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)}},{key:"Ctrl-v",run:q}].map((e=>({mac:e.key,run:e.run,shift:e.shift})))));var Ce=n(75764);new Ce.Token("@jupyterlab/codeeditor:IEditorServices","A service for the text editor provider\n  for the application. Use this to create new text editors and host them in your\n  UI elements."),new Ce.Token("@jupyterlab/codeeditor:IPositionModel","A service to handle an code editor cursor position.");const Ae="[data-jp-code-runner]";var Oe;!function(e){e.indentMoreOrInsertTab=function(e){var t;if(null===(t=e.dom.parentElement)||void 0===t?void 0:t.classList.contains("jp-mod-completer-enabled"))return!1;const n={state:e.state,dispatch:e.dispatch},i=e.state.selection.main.from;if(i!=e.state.selection.main.to)return we(n);const s=e.state.doc.lineAt(i),r=e.state.doc.slice(s.from,i).toString();return/^\s*$/.test(r)?we(n):(({state:e,dispatch:t})=>e.selection.ranges.some((e=>!e.empty))?we({state:e,dispatch:t}):(t(e.update(e.replaceSelection("\t"),{scrollIntoView:!0,userEvent:"input"})),!0))(n)},e.completerOrInsertNewLine=function(e){var t;if(null===(t=e.dom.parentElement)||void 0===t?void 0:t.classList.contains("jp-mod-completer-active"))return!1;if(e.dom.closest('[data-jp-interaction-mode="terminal"]'))return!1;const n={state:e.state,dispatch:e.dispatch};return be(n)},e.preventNewLineOnRun=function(e){return!!e.dom.closest(Ae)},e.insertBlankLineOnRun=function(e){if(e.dom.closest(Ae))return!1;{const t={state:e.state,dispatch:e.dispatch};return ye(t)}},e.simplifySelectionAndMaybeSwitchToCommandMode=function(e){const t={state:e.state,dispatch:e.dispatch},n=oe(t);return!e.dom.closest(".jp-mod-editMode .jp-Cell.jp-mod-active")&&n},e.dedentIfNotLaunchingTooltip=function(e){return!e.dom.closest(".jp-CodeMirrorEditor:not(.jp-mod-has-primary-selection):not(.jp-mod-in-leading-whitespace):not(.jp-mod-completer-active)")&&ke(e)}}(Oe||(Oe={}));var Me=n(38571),_e=n(77213),Te=n(10509);const Ee=i.sj.define({combine:e=>(0,i.QR)(e,{fontFamily:null,fontSize:null,lineHeight:null},{fontFamily:(e,t)=>null!=e?e:t,fontSize:(e,t)=>null!=e?e:t,lineHeight:(e,t)=>null!=e?e:t})});function Ne(e){const{fontFamily:t,fontSize:n,lineHeight:i}=e.state.facet(Ee);let s="";return n&&(s+=`font-size: ${n}px !important;`),t&&(s+=`font-family: ${t} !important;`),i&&(s+=`line-height: ${i.toString()} !important`),{style:s}}var De=n(49913);const Pe="InlineMathDollar",Re="InlineMathBracket",je="BlockMathDollar",Le="BlockMathBracket",Be={[Pe]:1,[Re]:3,[je]:2,[Le]:3};Object.keys(Be).reduce(((e,t)=>(e[t]={mark:`${t}Mark`,resolve:t},e)),{});const Ie="cm-rulers",Fe=s.Lz.baseTheme({[`.${Ie}`]:{borderRight:"1px dotted gray",opacity:.7}}),$e=i.sj.define({combine:e=>e.reduce(((e,t)=>e.concat(t.filter(((n,i)=>!e.includes(n)&&i==t.lastIndexOf(n))))),[])}),ze=s.Z9.fromClass(class{constructor(e){var t,n;this.rulersContainer=e.dom.appendChild(document.createElement("div")),this.rulersContainer.style.cssText="\n                position: absolute;\n                left: 0;\n                top: 0;\n                width: 100%;\n                height: 100%;\n                pointer-events: none;\n                overflow: hidden;\n            ";const i=e.defaultCharacterWidth,s=e.state.facet($e),r=null!==(n=null===(t=e.scrollDOM.querySelector(".cm-gutters"))||void 0===t?void 0:t.clientWidth)&&void 0!==n?n:0;this.rulers=s.map((e=>{const t=this.rulersContainer.appendChild(document.createElement("div"));return t.classList.add(Ie),t.style.cssText=`\n                position: absolute;\n                left: ${r+e*i}px;\n                height: 100%;\n            `,t.style.width="6px",t}))}update(e){var t,n;const i=e.view.state.facet($e);if(e.viewportChanged||e.geometryChanged||!Ce.JSONExt.deepEqual(i,e.startState.facet($e))){const s=null!==(n=null===(t=e.view.scrollDOM.querySelector(".cm-gutters"))||void 0===t?void 0:t.clientWidth)&&void 0!==n?n:0,r=e.view.defaultCharacterWidth;this.rulers.forEach(((e,t)=>{e.style.left=`${s+i[t]*r}px`}))}}destroy(){this.rulers.forEach((e=>{e.remove()})),this.rulersContainer.remove()}}),He=i.sj.define({combine:e=>e[e.length-1]}),qe=i.YH.define();function Ve(){var e=arguments[0];"string"==typeof e&&(e=document.createElement(e));var t=1,n=arguments[1];if(n&&"object"==typeof n&&null==n.nodeType&&!Array.isArray(n)){for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){var s=n[i];"string"==typeof s?e.setAttribute(i,s):null!=s&&(e[i]=s)}t++}for(;t<arguments.length;t++)We(e,arguments[t]);return e}function We(e,t){if("string"==typeof t)e.appendChild(document.createTextNode(t));else if(null==t);else if(null!=t.nodeType)e.appendChild(t);else{if(!Array.isArray(t))throw new RangeError("Unsupported child node: "+t);for(var n=0;n<t.length;n++)We(e,t[n])}}s.Z9.fromClass(class{constructor(e){this.conf=e.state.facet(He),this._observer=(t,n)=>{var i;if(n.origin!==this.conf){const n=t.delta,s=[];let r=0;for(let e=0;e<n.length;e++){const t=n[e];null!=t.insert?s.push({from:r,to:r,insert:t.insert}):null!=t.delete?(s.push({from:r,to:r+t.delete,insert:""}),r+=t.delete):r+=null!==(i=t.retain)&&void 0!==i?i:0}e.dispatch({changes:s,annotations:[qe.of(this.conf)]})}},this._ytext=this.conf.ytext,this._ytext.observe(this._observer)}update(e){if(!e.docChanged||e.transactions.length>0&&e.transactions[0].annotation(qe)===this.conf)return;const t=this.conf.ytext;t.doc.transact((()=>{let n=0;e.changes.iterChanges(((e,i,s,r,o)=>{const a=o.sliceString(0,o.length,"\n");e!==i&&t.delete(e+n,i-e),a.length>0&&t.insert(e+n,a),n+=a.length-(i-e)}))}),this.conf)}destroy(){this._ytext.unobserve(this._observer)}});const Ge="function"==typeof String.prototype.normalize?e=>e.normalize("NFKD"):e=>e;class Ue{constructor(e,t,n=0,i=e.length,s,r){this.test=r,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(n,i),this.bufferStart=n,this.normalize=s?e=>s(Ge(e)):Ge,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return(0,i.vS)(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=(0,i.MK)(e),n=this.bufferStart+this.bufferPos;this.bufferPos+=(0,i.Fh)(e);let s=this.normalize(t);for(let e=0,i=n;;e++){let r=s.charCodeAt(e),o=this.match(r,i,this.bufferPos+this.bufferStart);if(e==s.length-1){if(o)return this.value=o,this;break}i==n&&e<t.length&&t.charCodeAt(e)==r&&i++}}}match(e,t,n){let i=null;for(let t=0;t<this.matches.length;t+=2){let s=this.matches[t],r=!1;this.query.charCodeAt(s)==e&&(s==this.query.length-1?i={from:this.matches[t+1],to:n}:(this.matches[t]++,r=!0)),r||(this.matches.splice(t,2),t-=2)}return this.query.charCodeAt(0)==e&&(1==this.query.length?i={from:t,to:n}:this.matches.push(1,t)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}}"undefined"!=typeof Symbol&&(Ue.prototype[Symbol.iterator]=function(){return this});const Ke={from:-1,to:-1,match:/.*/.exec("")},Je="gm"+(null==/x/.unicode?"":"u");class Ye{constructor(e,t,n,i=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=Ke,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new Ze(e,t,n,i,s);this.re=new RegExp(t,Je+((null==n?void 0:n.ignoreCase)?"i":"")),this.test=null==n?void 0:n.test,this.iter=e.iter();let r=e.lineAt(i);this.curLineStart=r.from,this.matchPos=et(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let n=this.curLineStart+t.index,i=n+t[0].length;if(this.matchPos=et(this.text,i+(n==i?1:0)),n==this.curLineStart+this.curLine.length&&this.nextLine(),(n<i||n>this.value.to)&&(!this.test||this.test(n,i,t)))return this.value={from:n,to:i,match:t},this;e=this.matchPos-this.curLineStart}else{if(!(this.curLineStart+this.curLine.length<this.to))return this.done=!0,this;this.nextLine(),e=0}}}}const Xe=new WeakMap;class Qe{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,n){let i=Xe.get(e);if(!i||i.from>=n||i.to<=t){let i=new Qe(t,e.sliceString(t,n));return Xe.set(e,i),i}if(i.from==t&&i.to==n)return i;let{text:s,from:r}=i;return r>t&&(s=e.sliceString(t,r)+s,r=t),i.to<n&&(s+=e.sliceString(i.to,n)),Xe.set(e,new Qe(r,s)),new Qe(t,s.slice(t-r,n-r))}}class Ze{constructor(e,t,n,i,s){this.text=e,this.to=s,this.done=!1,this.value=Ke,this.matchPos=et(e,i),this.re=new RegExp(t,Je+((null==n?void 0:n.ignoreCase)?"i":"")),this.test=null==n?void 0:n.test,this.flat=Qe.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let e=this.flat.from+t.index,n=e+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(e,n,t)))return this.value={from:e,to:n,match:t},this.matchPos=et(this.text,n+(e==n?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Qe.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+2*this.flat.text.length))}}}function et(e,t){if(t>=e.length)return t;let n,i=e.lineAt(t);for(;t<i.to&&(n=i.text.charCodeAt(t-i.from))>=56320&&n<57344;)t++;return t}"undefined"!=typeof Symbol&&(Ye.prototype[Symbol.iterator]=Ze.prototype[Symbol.iterator]=function(){return this});const tt=i.sj.define({combine:e=>(0,i.QR)(e,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new Et(e),scrollToMatch:e=>s.Lz.scrollIntoView(e)})});class nt{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||function(e){try{return new RegExp(e,Je),!0}catch(e){return!1}}(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,((e,t)=>"n"==t?"\n":"r"==t?"\r":"t"==t?"\t":"\\"))}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new ht(this):new rt(this)}getCursor(e,t=0,n){let s=e.doc?e:i.$t.create({doc:e});return null==n&&(n=s.doc.length),this.regexp?ot(this,s,t,n):st(this,s,t,n)}}class it{constructor(e){this.spec=e}}function st(e,t,n,s){return new Ue(t.doc,e.unquoted,n,s,e.caseSensitive?void 0:e=>e.toLowerCase(),e.wholeWord?(r=t.doc,o=t.charCategorizer(t.selection.main.head),(e,t,n,s)=>((s>e||s+n.length<t)&&(s=Math.max(0,e-2),n=r.sliceString(s,Math.min(r.length,t+2))),!(o(at(n,e-s))==i.Je.Word&&o(lt(n,e-s))==i.Je.Word||o(lt(n,t-s))==i.Je.Word&&o(at(n,t-s))==i.Je.Word))):void 0);var r,o}class rt extends it{constructor(e){super(e)}nextMatch(e,t,n){let i=st(this.spec,e,n,e.doc.length).nextOverlapping();return i.done&&(i=st(this.spec,e,0,t).nextOverlapping()),i.done?null:i.value}prevMatchInRange(e,t,n){for(let i=n;;){let n=Math.max(t,i-1e4-this.spec.unquoted.length),s=st(this.spec,e,n,i),r=null;for(;!s.nextOverlapping().done;)r=s.value;if(r)return r;if(n==t)return null;i-=1e4}}prevMatch(e,t,n){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,n,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let n=st(this.spec,e,0,e.doc.length),i=[];for(;!n.next().done;){if(i.length>=t)return null;i.push(n.value)}return i}highlight(e,t,n,i){let s=st(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(n+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}function ot(e,t,n,s){return new Ye(t.doc,e.search,{ignoreCase:!e.caseSensitive,test:e.wholeWord?(r=t.charCategorizer(t.selection.main.head),(e,t,n)=>!n[0].length||(r(at(n.input,n.index))!=i.Je.Word||r(lt(n.input,n.index))!=i.Je.Word)&&(r(lt(n.input,n.index+n[0].length))!=i.Je.Word||r(at(n.input,n.index+n[0].length))!=i.Je.Word)):void 0},n,s);var r}function at(e,t){return e.slice((0,i.zK)(e,t,!1),t)}function lt(e,t){return e.slice(t,(0,i.zK)(e,t))}class ht extends it{nextMatch(e,t,n){let i=ot(this.spec,e,n,e.doc.length).next();return i.done&&(i=ot(this.spec,e,0,t).next()),i.done?null:i.value}prevMatchInRange(e,t,n){for(let i=1;;i++){let s=Math.max(t,n-1e4*i),r=ot(this.spec,e,s,n),o=null;for(;!r.next().done;)o=r.value;if(o&&(s==t||o.from>s+10))return o;if(s==t)return null}}prevMatch(e,t,n){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,n,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,((t,n)=>"$"==n?"$":"&"==n?e.match[0]:"0"!=n&&+n<e.match.length?e.match[n]:t))}matchAll(e,t){let n=ot(this.spec,e,0,e.doc.length),i=[];for(;!n.next().done;){if(i.length>=t)return null;i.push(n.value)}return i}highlight(e,t,n,i){let s=ot(this.spec,e,Math.max(0,t-250),Math.min(n+250,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}const ct=i.Pe.define(),ut=i.Pe.define(),ft=i.sU.define({create:e=>new dt(At(e).create(),null),update(e,t){for(let n of t.effects)n.is(ct)?e=new dt(n.value.create(),e.panel):n.is(ut)&&(e=new dt(e.query,n.value?Ct:null));return e},provide:e=>s.S7.from(e,(e=>e.panel))});class dt{constructor(e,t){this.query=e,this.panel=t}}const pt=s.NZ.mark({class:"cm-searchMatch"}),mt=s.NZ.mark({class:"cm-searchMatch cm-searchMatch-selected"}),gt=s.Z9.fromClass(class{constructor(e){this.view=e,this.decorations=this.highlight(e.state.field(ft))}update(e){let t=e.state.field(ft);(t!=e.startState.field(ft)||e.docChanged||e.selectionSet||e.viewportChanged)&&(this.decorations=this.highlight(t))}highlight({query:e,panel:t}){if(!t||!e.spec.valid)return s.NZ.none;let{view:n}=this,r=new i.vB;for(let t=0,i=n.visibleRanges,s=i.length;t<s;t++){let{from:o,to:a}=i[t];for(;t<s-1&&a>i[t+1].from-500;)a=i[++t].to;e.highlight(n.state,o,a,((e,t)=>{let i=n.state.selection.ranges.some((n=>n.from==e&&n.to==t));r.add(e,t,i?mt:pt)}))}return r.finish()}},{decorations:e=>e.decorations});function bt(e){return t=>{let n=t.state.field(ft,!1);return n&&n.query.spec.valid?e(t,n):_t(t)}}const yt=bt(((e,{query:t})=>{let{to:n}=e.state.selection.main,s=t.nextMatch(e.state,n,n);if(!s)return!1;let r=i.OF.single(s.from,s.to),o=e.state.facet(tt);return e.dispatch({selection:r,effects:[Rt(e,s),o.scrollToMatch(r.main,e)],userEvent:"select.search"}),Mt(e),!0})),vt=bt(((e,{query:t})=>{let{state:n}=e,{from:s}=n.selection.main,r=t.prevMatch(n,s,s);if(!r)return!1;let o=i.OF.single(r.from,r.to),a=e.state.facet(tt);return e.dispatch({selection:o,effects:[Rt(e,r),a.scrollToMatch(o.main,e)],userEvent:"select.search"}),Mt(e),!0})),xt=bt(((e,{query:t})=>{let n=t.matchAll(e.state,1e3);return!(!n||!n.length||(e.dispatch({selection:i.OF.create(n.map((e=>i.OF.range(e.from,e.to)))),userEvent:"select.search.matches"}),0))})),wt=({state:e,dispatch:t})=>{let n=e.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:s,to:r}=n.main,o=[],a=0;for(let t=new Ue(e.doc,e.sliceDoc(s,r));!t.next().done;){if(o.length>1e3)return!1;t.value.from==s&&(a=o.length),o.push(i.OF.range(t.value.from,t.value.to))}return t(e.update({selection:i.OF.create(o,a),userEvent:"select.search.matches"})),!0},kt=bt(((e,{query:t})=>{let{state:n}=e,{from:r,to:o}=n.selection.main;if(n.readOnly)return!1;let a=t.nextMatch(n,r,r);if(!a)return!1;let l,h,c=[],u=[];if(a.from==r&&a.to==o&&(h=n.toText(t.getReplacement(a)),c.push({from:a.from,to:a.to,insert:h}),a=t.nextMatch(n,a.from,a.to),u.push(s.Lz.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(r).number)+"."))),a){let t=0==c.length||c[0].from>=a.to?0:a.to-a.from-h.length;l=i.OF.single(a.from-t,a.to-t),u.push(Rt(e,a)),u.push(n.facet(tt).scrollToMatch(l.main,e))}return e.dispatch({changes:c,selection:l,effects:u,userEvent:"input.replace"}),!0})),St=bt(((e,{query:t})=>{if(e.state.readOnly)return!1;let n=t.matchAll(e.state,1e9).map((e=>{let{from:n,to:i}=e;return{from:n,to:i,insert:t.getReplacement(e)}}));if(!n.length)return!1;let i=e.state.phrase("replaced $ matches",n.length)+".";return e.dispatch({changes:n,effects:s.Lz.announce.of(i),userEvent:"input.replace.all"}),!0}));function Ct(e){return e.state.facet(tt).createPanel(e)}function At(e,t){var n,i,s,r,o;let a=e.selection.main,l=a.empty||a.to>a.from+100?"":e.sliceDoc(a.from,a.to);if(t&&!l)return t;let h=e.facet(tt);return new nt({search:(null!==(n=null==t?void 0:t.literal)&&void 0!==n?n:h.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:null!==(i=null==t?void 0:t.caseSensitive)&&void 0!==i?i:h.caseSensitive,literal:null!==(s=null==t?void 0:t.literal)&&void 0!==s?s:h.literal,regexp:null!==(r=null==t?void 0:t.regexp)&&void 0!==r?r:h.regexp,wholeWord:null!==(o=null==t?void 0:t.wholeWord)&&void 0!==o?o:h.wholeWord})}function Ot(e){let t=(0,s.ld)(e,Ct);return t&&t.dom.querySelector("[main-field]")}function Mt(e){let t=Ot(e);t&&t==e.root.activeElement&&t.select()}const _t=e=>{let t=e.state.field(ft,!1);if(t&&t.panel){let n=Ot(e);if(n&&n!=e.root.activeElement){let i=At(e.state,t.query.spec);i.valid&&e.dispatch({effects:ct.of(i)}),n.focus(),n.select()}}else e.dispatch({effects:[ut.of(!0),t?ct.of(At(e.state,t.query.spec)):i.Pe.appendConfig.of(Lt)]});return!0},Tt=e=>{let t=e.state.field(ft,!1);if(!t||!t.panel)return!1;let n=(0,s.ld)(e,Ct);return n&&n.dom.contains(e.root.activeElement)&&e.focus(),e.dispatch({effects:ut.of(!1)}),!0};class Et{constructor(e){this.view=e;let t=this.query=e.state.field(ft).query.spec;function n(e,t,n){return Ve("button",{class:"cm-button",name:e,onclick:t,type:"button"},n)}this.commit=this.commit.bind(this),this.searchField=Ve("input",{value:t.search,placeholder:Nt(e,"Find"),"aria-label":Nt(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Ve("input",{value:t.replace,placeholder:Nt(e,"Replace"),"aria-label":Nt(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Ve("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=Ve("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=Ve("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit}),this.dom=Ve("div",{onkeydown:e=>this.keydown(e),class:"cm-search"},[this.searchField,n("next",(()=>yt(e)),[Nt(e,"next")]),n("prev",(()=>vt(e)),[Nt(e,"previous")]),n("select",(()=>xt(e)),[Nt(e,"all")]),Ve("label",null,[this.caseField,Nt(e,"match case")]),Ve("label",null,[this.reField,Nt(e,"regexp")]),Ve("label",null,[this.wordField,Nt(e,"by word")]),...e.state.readOnly?[]:[Ve("br"),this.replaceField,n("replace",(()=>kt(e)),[Nt(e,"replace")]),n("replaceAll",(()=>St(e)),[Nt(e,"replace all")])],Ve("button",{name:"close",onclick:()=>Tt(e),"aria-label":Nt(e,"close"),type:"button"},["Ã—"])])}commit(){let e=new nt({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:ct.of(e)}))}keydown(e){(0,s.TS)(this.view,e,"search-panel")?e.preventDefault():13==e.keyCode&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?vt:yt)(this.view)):13==e.keyCode&&e.target==this.replaceField&&(e.preventDefault(),kt(this.view))}update(e){for(let t of e.transactions)for(let e of t.effects)e.is(ct)&&!e.value.eq(this.query)&&this.setQuery(e.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(tt).top}}function Nt(e,t){return e.state.phrase(t)}const Dt=30,Pt=/[\s\.,:;?!]/;function Rt(e,{from:t,to:n}){let i=e.state.doc.lineAt(t),r=e.state.doc.lineAt(n).to,o=Math.max(i.from,t-Dt),a=Math.min(r,n+Dt),l=e.state.sliceDoc(o,a);if(o!=i.from)for(let e=0;e<Dt;e++)if(!Pt.test(l[e+1])&&Pt.test(l[e])){l=l.slice(e);break}if(a!=r)for(let e=l.length-1;e>l.length-Dt;e--)if(!Pt.test(l[e-1])&&Pt.test(l[e])){l=l.slice(0,e);break}return s.Lz.announce.of(`${e.state.phrase("current match")}. ${l} ${e.state.phrase("on line")} ${i.number}.`)}const jt=s.Lz.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),Lt=[ft,i.Nb.low(gt),jt];class Bt{constructor({baseConfiguration:e,config:t,defaultExtensions:n}={}){this._configChanged=new Me.Signal(this),this._disposed=new Me.Signal(this),this._isDisposed=!1,this._immutables=new Set,this._baseConfig=null!=e?e:{},this._config=null!=t?t:{},this._configurableBuilderMap=new Map(n);const i=Object.keys(this._config).concat(Object.keys(this._baseConfig));this._immutables=new Set([...this._configurableBuilderMap.keys()].filter((e=>!i.includes(e))))}get configChanged(){return this._configChanged}get disposed(){return this._disposed}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,this._disposed.emit(),Me.Signal.clearData(this))}getOption(e){var t;return null!==(t=this._config[e])&&void 0!==t?t:this._baseConfig[e]}hasOption(e){return Object.keys(this._config).includes(e)||Object.keys(this._baseConfig).includes(e)}setOption(e,t){this._config[e]!==t&&(this._config[e]=t,this._configChanged.emit({[e]:t}))}setBaseOptions(e){const t=this._getChangedOptions(e,this._baseConfig);if(t.length>0){this._baseConfig=e;const n=Object.keys(this._config),i=t.filter((e=>!n.includes(e)));i.length>0&&this._configChanged.emit(i.reduce(((e,t)=>(e[t]=this._baseConfig[t],e)),{}))}}setOptions(e){const t=this._getChangedOptions(e,this._config);t.length>0&&(this._config={...e},this._configChanged.emit(t.reduce(((e,t)=>{var n;return e[t]=null!==(n=this._config[t])&&void 0!==n?n:this._baseConfig[t],e}),{})))}reconfigureExtension(e,t,n){const i=this.getEffect(e.state,t,n);i&&e.dispatch({effects:[i]})}reconfigureExtensions(e,t){const n=Object.keys(t).filter((e=>this.has(e))).map((n=>this.getEffect(e.state,n,t[n])));e.dispatch({effects:n.filter((e=>null!==e))})}injectExtension(e,t){e.dispatch({effects:i.Pe.appendConfig.of(t)})}getInitialExtensions(){const e={...this._baseConfig,...this._config},t=[...this._immutables].map((e=>{var t;return null===(t=this.get(e))||void 0===t?void 0:t.instance(void 0)})).filter((e=>e));for(const n of Object.keys(e)){const i=this.get(n);if(i){const s=e[n];t.push(i.instance(s))}}return t}get(e){return this._configurableBuilderMap.get(e)}has(e){return this._configurableBuilderMap.has(e)}getEffect(e,t,n){var i;const s=this.get(t);return null!==(i=null==s?void 0:s.reconfigure(n))&&void 0!==i?i:null}_getChangedOptions(e,t){const n=new Array,i=new Array;for(const[s,r]of Object.entries(e))i.push(s),t[s]!==r&&n.push(s);return n.push(...Object.keys(t).filter((e=>!i.includes(e)))),n}}class It{constructor(){this.configurationBuilder=new Map,this.configurationSchema={},this.defaultOptions={},this.handlers=new Set,this.immutableExtensions=new Set,this._baseConfiguration={}}get baseConfiguration(){return{...this.defaultOptions,...this._baseConfiguration}}set baseConfiguration(e){if(!Ce.JSONExt.deepEqual(e,this._baseConfiguration)){this._baseConfiguration=e;for(const e of this.handlers)e.setBaseOptions(this.baseConfiguration)}}get defaultConfiguration(){return Object.freeze({...this.defaultOptions})}get settingsSchema(){return Object.freeze(Ce.JSONExt.deepCopy(this.configurationSchema))}addExtension(e){var t;if(this.configurationBuilder.has(e.name))throw new Error(`Extension named ${e.name} is already registered.`);this.configurationBuilder.set(e.name,e),void 0!==e.default&&(this.defaultOptions[e.name]=e.default),e.schema&&(this.configurationSchema[e.name]={default:null!==(t=e.default)&&void 0!==t?t:null,...e.schema},this.defaultOptions[e.name]=this.configurationSchema[e.name].default)}createNew(e){const t=new Array;for(const[n,i]of this.configurationBuilder.entries()){const s=i.factory(e);s&&t.push([n,s])}const n=new Bt({baseConfiguration:this.baseConfiguration,config:e.config,defaultExtensions:t});return this.handlers.add(n),n.disposed.connect((()=>{this.handlers.delete(n)})),n}}var Ft;!function(e){class t{constructor(e){this._compartment=new i.xx,this._builder=e}instance(e){return this._compartment.of(this._builder(e))}reconfigure(e){return this._compartment.reconfigure(this._builder(e))}}class n{constructor(e){this._extension=e}instance(){return this._extension}reconfigure(){return null}}function o(e){return new t(e)}function a(e,n=[]){return new t((t=>t?e:n))}function l(e){return new n(e)}e.createConfigurableExtension=o,e.createConditionalExtension=a,e.createImmutableExtension=l,e.getDefaultExtensions=function(e={}){const{themes:t,translator:n}=e,h=(null!=n?n:Te.wK).load("jupyterlab"),c=[Object.freeze({name:"autoClosingBrackets",default:!1,factory:()=>a((0,_e.wm)()),schema:{type:"boolean",title:h.__("Auto Closing Brackets")}}),Object.freeze({name:"codeFolding",default:!1,factory:()=>a((0,r.Lv)()),schema:{type:"boolean",title:h.__("Code Folding")}}),Object.freeze({name:"cursorBlinkRate",default:1200,factory:()=>o((e=>(0,s.VH)({cursorBlinkRate:e}))),schema:{type:"number",title:h.__("Cursor blinking rate"),description:h.__("Half-period in milliseconds used for cursor blinking. The default blink rate is 1200ms. By setting this to zero, blinking can be disabled.")}}),Object.freeze({name:"highlightActiveLine",default:!1,factory:()=>a((0,s.dz)()),schema:{type:"boolean",title:h.__("Highlight the active line")}}),Object.freeze({name:"highlightSpecialCharacters",default:!0,factory:()=>a((0,s.N$)()),schema:{type:"boolean",title:h.__("Highlight special characters")}}),Object.freeze({name:"highlightTrailingWhitespace",default:!1,factory:()=>a((0,s.wu)()),schema:{type:"boolean",title:h.__("Highlight trailing white spaces")}}),Object.freeze({name:"highlightWhitespace",default:!1,factory:()=>a((0,s.Yq)()),schema:{type:"boolean",title:h.__("Highlight white spaces")}}),Object.freeze({name:"indentUnit",default:"4",factory:()=>o((e=>"Tab"==e?r.Xt.of("\t"):r.Xt.of(" ".repeat(parseInt(e,10))))),schema:{type:"string",title:h.__("Indentation unit"),description:h.__("The indentation is a `Tab` or the number of spaces. This defaults to 4 spaces."),enum:["Tab","1","2","4","8"]}}),Object.freeze({name:"keymap",default:[{key:"Mod-Enter",run:Oe.insertBlankLineOnRun},{key:"Enter",run:Oe.completerOrInsertNewLine},{key:"Escape",run:Oe.simplifySelectionAndMaybeSwitchToCommandMode},...Se.filter((e=>!["Mod-Enter","Shift-Mod-k","Mod-/","Alt-A","Escape","Enter"].includes(e.key))),{key:"Tab",run:Oe.indentMoreOrInsertTab,shift:Oe.dedentIfNotLaunchingTooltip}],factory:()=>o((e=>s.w4.of(e)))}),Object.freeze({name:"lineNumbers",default:!0,factory:()=>a((0,s.$K)()),schema:{type:"boolean",title:h.__("Line Numbers")}}),Object.freeze({name:"lineWrap",factory:()=>a(s.Lz.lineWrapping),default:!0,schema:{type:"boolean",title:h.__("Line Wrap")}}),Object.freeze({name:"matchBrackets",default:!0,factory:()=>a([(0,r.SG)(),i.Nb.high(s.w4.of(_e.Bc))]),schema:{type:"boolean",title:h.__("Match Brackets")}}),Object.freeze({name:"rectangularSelection",default:!0,factory:()=>a([(0,s.D4)(),(0,s.HJ)()]),schema:{type:"boolean",title:h.__("Rectangular selection"),description:h.__("Rectangular (block) selection can be created by dragging the mouse pointer while holding the left mouse button and the Alt key. When the Alt key is pressed, a crosshair cursor will appear, indicating that the rectangular selection mode is active.")}}),Object.freeze({name:"readOnly",default:!1,factory:()=>o((e=>[i.$t.readOnly.of(e),e?s.Lz.editorAttributes.of({class:"jp-mod-readOnly"}):[]]))}),Object.freeze({name:"rulers",default:[],factory:()=>o((e=>e.length>0?function(e){return[Fe,$e.of(e),ze]}(e):[])),schema:{type:"array",title:h.__("Rulers"),items:{type:"number",minimum:0}}}),Object.freeze({name:"extendSelection",default:!0,factory:()=>a(s.w4.of([{key:"Mod-Shift-l",run:wt,preventDefault:!0}]))}),Object.freeze({name:"searchWithCM",default:!1,factory:()=>a(s.w4.of([{key:"Mod-f",run:_t,scope:"editor search-panel"},{key:"F3",run:yt,shift:vt,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:yt,shift:vt,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Tt,scope:"editor search-panel"}]))}),Object.freeze({name:"scrollPastEnd",default:!1,factory:e=>e.inline?null:a((0,s.BE)())}),Object.freeze({name:"smartIndent",default:!0,factory:()=>a((0,r.WD)()),schema:{type:"boolean",title:h.__("Smart Indentation")}}),Object.freeze({name:"tabFocusable",default:!0,factory:()=>a(s.Lz.contentAttributes.of({tabIndex:"0"}),s.Lz.contentAttributes.of({tabIndex:"-1"}))}),Object.freeze({name:"tabSize",default:4,factory:()=>o((e=>i.$t.tabSize.of(e))),schema:{type:"number",title:h.__("Tab size")}}),Object.freeze({name:"tooltips",factory:()=>l((0,s.vX)({position:"absolute",parent:document.body}))}),Object.freeze({name:"allowMultipleSelections",default:!0,factory:()=>o((e=>i.$t.allowMultipleSelections.of(e))),schema:{type:"boolean",title:h.__("Multiple selections")}}),Object.freeze({name:"customStyles",factory:()=>o((e=>function(e){return[Ee.of(e),s.Lz.editorAttributes.of(Ne)]}(e))),default:{fontFamily:null,fontSize:null,lineHeight:null},schema:{title:h.__("Custom editor styles"),type:"object",properties:{fontFamily:{type:["string","null"],title:h.__("Font Family")},fontSize:{type:["number","null"],minimum:1,maximum:100,title:h.__("Font Size")},lineHeight:{type:["number","null"],title:h.__("Line Height")}},additionalProperties:!1}})];return t&&c.push(Object.freeze({name:"theme",default:"jupyter",factory:()=>o((e=>t.getTheme(e))),schema:{type:"string",title:h.__("Theme"),description:h.__("CodeMirror theme")}})),n&&c.push(Object.freeze({name:"translation",default:{"Control character":h.__("Control character"),"Selection deleted":h.__("Selection deleted"),"Folded lines":h.__("Folded lines"),"Unfolded lines":h.__("Unfolded lines"),to:h.__("to"),"folded code":h.__("folded code"),unfold:h.__("unfold"),"Fold line":h.__("Fold line"),"Unfold line":h.__("Unfold line"),"Go to line":h.__("Go to line"),go:h.__("go"),Find:h.__("Find"),Replace:h.__("Replace"),next:h.__("next"),previous:h.__("previous"),all:h.__("all"),"match case":h.__("match case"),replace:h.__("replace"),"replace all":h.__("replace all"),close:h.__("close"),"current match":h.__("current match"),"replaced $ matches":h.__("replaced $ matches"),"replaced match on line $":h.__("replaced match on line $"),"on line":h.__("on line"),Completions:h.__("Completions"),Diagnostics:h.__("Diagnostics"),"No diagnostics":h.__("No diagnostics")},factory:()=>o((e=>i.$t.phrases.of(e)))})),c}}(It||(It={})),(Ft||(Ft={})).defaultMimeType="text/plain";var $t=n(88925),zt=n(73643);class Ht{constructor(e){this.start=e}}class qt extends Ht{constructor(e,t,n,i,s,r,o,a,l,h,c,u,f,d,p){super(e),this.rules=t,this.topRules=n,this.tokens=i,this.localTokens=s,this.context=r,this.externalTokens=o,this.externalSpecializers=a,this.externalPropSources=l,this.precedences=h,this.mainSkip=c,this.scopedSkip=u,this.dialects=f,this.externalProps=d,this.autoDelim=p}toString(){return Object.values(this.rules).join("\n")}}class Vt extends Ht{constructor(e,t,n,i,s){super(e),this.id=t,this.props=n,this.params=i,this.expr=s}toString(){return this.id.name+(this.params.length?`<${this.params.join()}>`:"")+" -> "+this.expr}}class Wt extends Ht{constructor(e,t){super(e),this.items=t}}class Gt extends Ht{constructor(e,t){super(e),this.items=t}}class Ut extends Ht{constructor(e,t,n){super(e),this.a=t,this.b=n}}class Kt extends Ht{constructor(e,t,n,i,s){super(e),this.precedences=t,this.conflicts=n,this.rules=i,this.literals=s}}class Jt extends Ht{constructor(e,t,n,i){super(e),this.precedences=t,this.rules=n,this.fallback=i}}class Yt extends Ht{constructor(e,t,n){super(e),this.literal=t,this.props=n}}class Xt extends Ht{constructor(e,t,n){super(e),this.id=t,this.source=n}}class Qt extends Ht{constructor(e,t,n,i){super(e),this.id=t,this.source=n,this.tokens=i}}class Zt extends Ht{constructor(e,t,n,i,s,r){super(e),this.type=t,this.token=n,this.id=i,this.source=s,this.tokens=r}}class en extends Ht{constructor(e,t,n){super(e),this.id=t,this.source=n}}class tn extends Ht{constructor(e,t,n,i){super(e),this.id=t,this.externalID=n,this.source=i}}class nn extends Ht{constructor(e,t){super(e),this.name=t}toString(){return this.name}}class sn extends Ht{walk(e){return e(this)}eq(e){return!1}}sn.prototype.prec=10;class rn extends sn{constructor(e,t,n){super(e),this.id=t,this.args=n}toString(){return this.id.name+(this.args.length?`<${this.args.join()}>`:"")}eq(e){return this.id.name==e.id.name&&vn(this.args,e.args)}walk(e){let t=mn(this.args,e);return e(t==this.args?this:new rn(this.start,this.id,t))}}class on extends sn{constructor(e,t,n,i,s){super(e),this.type=t,this.props=n,this.token=i,this.content=s}toString(){return`@${this.type}[${this.props.join(",")}]<${this.token}, ${this.content}>`}eq(e){return this.type==e.type&&xn.eqProps(this.props,e.props)&&yn(this.token,e.token)&&yn(this.content,e.content)}walk(e){let t=this.token.walk(e),n=this.content.walk(e);return e(t==this.token&&n==this.content?this:new on(this.start,this.type,this.props,t,n))}}class an extends sn{constructor(e,t){super(e),this.rule=t}toString(){let e=this.rule;return`${e.id}${e.props.length?`[${e.props.join(",")}]`:""} { ${e.expr} }`}eq(e){let t=this.rule,n=e.rule;return yn(t.expr,n.expr)&&t.id.name==n.id.name&&xn.eqProps(t.props,n.props)}walk(e){let t=this.rule,n=t.expr.walk(e);return e(n==t.expr?this:new an(this.start,new Vt(t.start,t.id,t.props,[],n)))}}class ln extends sn{constructor(e,t){super(e),this.exprs=t}toString(){return this.exprs.map((e=>kn(e,this))).join(" | ")}eq(e){return vn(this.exprs,e.exprs)}walk(e){let t=mn(this.exprs,e);return e(t==this.exprs?this:new ln(this.start,t))}}ln.prototype.prec=1;class hn extends sn{constructor(e,t,n,i=!1){super(e),this.exprs=t,this.markers=n,this.empty=i}toString(){return this.empty?"()":this.exprs.map((e=>kn(e,this))).join(" ")}eq(e){return vn(this.exprs,e.exprs)&&this.markers.every(((t,n)=>{let i=e.markers[n];return t.length==i.length&&t.every(((e,t)=>e.eq(i[t])))}))}walk(e){let t=mn(this.exprs,e);return e(t==this.exprs?this:new hn(this.start,t,this.markers,this.empty&&!t.length))}}hn.prototype.prec=2;class cn extends Ht{constructor(e,t,n){super(e),this.id=t,this.type=n}toString(){return("ambig"==this.type?"~":"!")+this.id.name}eq(e){return this.id.name==e.id.name&&this.type==e.type}}class un extends sn{constructor(e,t,n){super(e),this.expr=t,this.kind=n}toString(){return kn(this.expr,this)+this.kind}eq(e){return yn(this.expr,e.expr)&&this.kind==e.kind}walk(e){let t=this.expr.walk(e);return e(t==this.expr?this:new un(this.start,t,this.kind))}}un.prototype.prec=3;class fn extends sn{constructor(e,t){super(e),this.value=t}toString(){return JSON.stringify(this.value)}eq(e){return this.value==e.value}}class dn extends sn{constructor(e,t,n){super(e),this.ranges=t,this.inverted=n}toString(){return`[${this.inverted?"^":""}${this.ranges.map((([e,t])=>String.fromCodePoint(e)+(t==e+1?"":"-"+String.fromCodePoint(t))))}]`}eq(e){return this.inverted==e.inverted&&this.ranges.length==e.ranges.length&&this.ranges.every((([t,n],i)=>{let[s,r]=e.ranges[i];return t==s&&n==r}))}}class pn extends sn{constructor(e){super(e)}toString(){return"_"}eq(){return!0}}function mn(e,t){let n=null;for(let i=0;i<e.length;i++){let s=e[i].walk(t);s==e[i]||n||(n=e.slice(0,i)),n&&n.push(s)}return n||e}const gn={asciiLetter:[[65,91],[97,123]],asciiLowercase:[[97,123]],asciiUppercase:[[65,91]],digit:[[48,58]],whitespace:[[9,14],[32,33],[133,134],[160,161],[5760,5761],[8192,8203],[8232,8234],[8239,8240],[8287,8288],[12288,12289]],eof:[[65535,65535]]};class bn extends sn{constructor(e,t){super(e),this.type=t}toString(){return"@"+this.type}eq(e){return this.type==e.type}}function yn(e,t){return e.constructor==t.constructor&&e.eq(t)}function vn(e,t){return e.length==t.length&&e.every(((e,n)=>yn(e,t[n])))}class xn extends Ht{constructor(e,t,n,i){super(e),this.at=t,this.name=n,this.value=i}eq(e){return this.name==e.name&&this.value.length==e.value.length&&this.value.every(((t,n)=>t.value==e.value[n].value&&t.name==e.value[n].name))}toString(){let e=(this.at?"@":"")+this.name;if(this.value.length){e+="=";for(let{name:t,value:n}of this.value)e+=t?`{${t}}`:/[^\w-]/.test(n)?JSON.stringify(n):n}return e}static eqProps(e,t){return e.length==t.length&&e.every(((e,n)=>e.eq(t[n])))}}class wn extends Ht{constructor(e,t,n){super(e),this.value=t,this.name=n}}function kn(e,t){return e.prec<t.prec?"("+e.toString()+")":e.toString()}class Sn extends Error{}function Cn(e){for(let t in e)return!0;return!1}let An=0;class On{constructor(e,t,n,i={}){this.name=e,this.flags=t,this.nodeName=n,this.props=i,this.hash=++An,this.id=-1,this.rules=[]}toString(){return this.name}get nodeType(){return this.top||null!=this.nodeName||Cn(this.props)||this.repeated}get terminal(){return(1&this.flags)>0}get eof(){return(4&this.flags)>0}get error(){return"error"in this.props}get top(){return(2&this.flags)>0}get interesting(){return this.flags>0||null!=this.nodeName}get repeated(){return(16&this.flags)>0}set preserve(e){this.flags=e?8|this.flags:-9&this.flags}get preserve(){return(8&this.flags)>0}set inline(e){this.flags=e?32|this.flags:-33&this.flags}get inline(){return(32&this.flags)>0}cmp(e){return this.hash-e.hash}}class Mn{constructor(){this.terms=[],this.names=Object.create(null),this.tops=[],this.eof=this.term("â„",null,5),this.error=this.term("âš ","âš ",8)}term(e,t,n=0,i={}){let s=new On(e,n,t,i);return this.terms.push(s),this.names[e]=s,s}makeTop(e,t){const n=this.term("@top",e,2,t);return this.tops.push(n),n}makeTerminal(e,t,n={}){return this.term(e,t,1,n)}makeNonTerminal(e,t,n={}){return this.term(e,t,0,n)}makeRepeat(e){return this.term(e,null,16)}uniqueName(e){for(let t=0;;t++){let n=t?`${e}-${t}`:e;if(!this.names[n])return n}}finish(e){for(let t of e)t.name.rules.push(t);this.terms=this.terms.filter((t=>t.terminal||t.preserve||e.some((e=>e.name==t||e.parts.includes(t)))));let t={},n=[this.error];this.error.id=0;let i=1;for(let e of this.terms)e.id<0&&e.nodeType&&!e.repeated&&(e.id=i++,n.push(e));let s=i;for(let e of this.terms)e.repeated&&(e.id=i++,n.push(e));this.eof.id=i++;for(let e of this.terms)e.id<0&&(e.id=i++),e.name&&(t[e.id]=e.name);if(i>=65534)throw new Sn("Too many terms");return{nodeTypes:n,names:t,minRepeatTerm:s,maxTerm:i-1}}}function _n(e,t,n){if(e.length!=t.length)return e.length-t.length;for(let i=0;i<e.length;i++){let s=n(e[i],t[i]);if(s)return s}return 0}const Tn=[];class En{constructor(e,t=Tn,n=0){this.precedence=e,this.ambigGroups=t,this.cut=n}join(e){return this==En.none||this==e?e:e==En.none?this:new En(Math.max(this.precedence,e.precedence),Nn(this.ambigGroups,e.ambigGroups),Math.max(this.cut,e.cut))}cmp(e){return this.precedence-e.precedence||_n(this.ambigGroups,e.ambigGroups,((e,t)=>e<t?-1:e>t?1:0))||this.cut-e.cut}}function Nn(e,t){if(0==e.length||e==t)return t;if(0==t.length)return e;let n=e.slice();for(let i of t)e.includes(i)||n.push(i);return n.sort()}En.none=new En(0);let Dn=0;class Pn{constructor(e,t,n,i){this.name=e,this.parts=t,this.conflicts=n,this.skip=i,this.id=Dn++}cmp(e){return this.id-e.id}cmpNoName(e){return this.parts.length-e.parts.length||this.skip.hash-e.skip.hash||this.parts.reduce(((t,n,i)=>t||n.cmp(e.parts[i])),0)||_n(this.conflicts,e.conflicts,((e,t)=>e.cmp(t)))}toString(){return this.name+" -> "+this.parts.join(" ")}get isRepeatWrap(){return this.name.repeated&&2==this.parts.length&&this.parts[0]==this.name}sameReduce(e){return this.name==e.name&&this.parts.length==e.parts.length&&this.isRepeatWrap==e.isRepeatWrap}}class Rn{constructor(e,t,n){this.from=e,this.to=t,this.target=n}toString(){return`-> ${this.target.id}[label=${JSON.stringify(this.from<0?"Îµ":jn(this.from)+(this.to>this.from+1?"-"+jn(this.to-1):""))}]`}}function jn(e){return e>65535?"âˆž":10==e?"\\n":13==e?"\\r":e<32||e>=55296&&e<57343?"\\u{"+e.toString(16)+"}":String.fromCharCode(e)}function Ln(e,t,n){if(e.edges.length!=t.edges.length)return!1;for(let i=0;i<e.edges.length;i++){let s=e.edges[i],r=t.edges[i];if(s.from!=r.from||s.to!=r.to||n[s.target.id]!=n[r.target.id])return!1}return!0}function Bn(e,t,n){for(let t of e)for(let e=0;e<t.edges.length;e++){let i=t.edges[e],s=n[i.target.id][0];s!=i.target&&(t.edges[e]=new Rn(i.from,i.to,s))}return n[t.id][0]}let In=1,Fn=class e{constructor(e=[],t=In++){this.accepting=e,this.id=t,this.edges=[]}edge(e,t,n){this.edges.push(new Rn(e,t,n))}nullEdge(e){this.edge(-1,-1,e)}compile(){let t=Object.create(null),n=0,i=function i(s){let r=t[Hn(s)]=new e(s.reduce(((e,t)=>Nn(e,t.accepting)),[]),n++),o=[];for(let e of s)for(let t of e.edges)t.from>=0&&o.push(t);let a=function(e){let t=[],n=[];for(let n of e)t.includes(n.from)||t.push(n.from),t.includes(n.to)||t.push(n.to);t.sort(((e,t)=>e-t));for(let i=1;i<t.length;i++){let s=t[i-1],r=t[i],o=[];for(let t of e)if(t.to>s&&t.from<r)for(let e of t.target.closure())o.includes(e)||o.push(e);o.length&&n.push(new qn(s,r,o))}let i=e.filter((e=>65535==e.from&&65535==e.to));if(i.length){let e=[];for(let t of i)for(let n of t.target.closure())e.includes(n)||e.push(n);e.length&&n.push(new qn(65535,65535,e))}return n}(o);for(let e of a){let n=e.targets.sort(((e,t)=>e.id-t.id));r.edge(e.from,e.to,t[Hn(n)]||i(n))}return r}(this.closure().sort(((e,t)=>e.id-t.id)));return function(e,t){let n=Object.create(null),i=Object.create(null);for(let t of e){let e=Hn(t.accepting),s=i[e]||(i[e]=[]);s.push(t),n[t.id]=s}for(;;){let i=!1,s=Object.create(null);for(let t of e){if(s[t.id])continue;let e=n[t.id];if(1==e.length){s[e[0].id]=e;continue}let r=[];e:for(let t of e){for(let e of r)if(Ln(t,e[0],n)){e.push(t);continue e}r.push([t])}r.length>1&&(i=!0);for(let e of r)for(let t of e)s[t.id]=e}if(!i)return Bn(e,t,n);n=s}}(Object.values(t),i)}closure(){let e=[],t=Object.create(null);return function n(i){if(!t[i.id]){t[i.id]=!0,(i.edges.some((e=>e.from>=0))||i.accepting.length>0&&!i.edges.some((e=>function(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}(i.accepting,e.target.accepting))))&&e.push(i);for(let e of i.edges)e.from<0&&n(e.target)}}(this),e}findConflicts(e){let t=[],n=this.cycleTerms();function i(e,n,i,s,r){e.id<n.id&&([e,n]=[n,e],i=-i);let o=t.find((t=>t.a==e&&t.b==n));o?o.soft!=i&&(o.soft=0):t.push(new $n(e,n,i,zn(s),r&&zn(r)))}return this.reachable(((t,s)=>{if(0!=t.accepting.length){for(let e=0;e<t.accepting.length;e++)for(let n=e+1;n<t.accepting.length;n++)i(t.accepting[e],t.accepting[n],0,s);t.reachable(((r,o)=>{if(r!=t)for(let a of r.accepting){let r=n.includes(a);for(let l of t.accepting)a!=l&&i(a,l,r||n.includes(l)||!e(a,l)?0:1,s,s.concat(o))}}))}})),t}cycleTerms(){let e=[];this.reachable((t=>{for(let{target:n}of t.edges)e.push(t,n)}));let t=new Map,n=[];for(let i=0;i<e.length;){let s=e[i++],r=e[i++],o=t.get(s);if(o||t.set(s,o=[]),!o.includes(r))if(s==r)n.includes(s)||n.push(s);else{for(let t of o)e.push(s,t);o.push(r)}}let i=[];for(let e of n)for(let t of e.accepting)i.includes(t)||i.push(t);return i}reachable(e){let t=[],n=[];!function i(s){e(s,n),t.push(s);for(let e of s.edges)t.includes(e.target)||(n.push(e),i(e.target),n.pop())}(this)}toString(){let e="digraph {\n";return this.reachable((t=>{t.accepting.length&&(e+=`  ${t.id} [label=${JSON.stringify(t.accepting.join())}];\n`);for(let n of t.edges)e+=`  ${t.id} ${n};\n`})),e+"}"}toArray(e,t){let n=[],i=[];this.reachable((s=>{let r=i.length,o=r+3+2*s.accepting.length;n[s.id]=r,i.push(s.stateMask(e),o,s.edges.length),s.accepting.sort(((e,n)=>t.indexOf(e.id)-t.indexOf(n.id)));for(let t of s.accepting)i.push(t.id,e[t.id]||65535);for(let e of s.edges)i.push(e.from,e.to,-e.target.id-1)}));for(let e=0;e<i.length;e++)i[e]<0&&(i[e]=n[-i[e]-1]);if(i.length>Math.pow(2,16))throw new Sn("Tokenizer tables too big to represent with 16-bit offsets.");return Uint16Array.from(i)}stateMask(e){let t=0;return this.reachable((n=>{for(let i of n.accepting)t|=e[i.id]||65535})),t}},$n=class{constructor(e,t,n,i,s){this.a=e,this.b=t,this.soft=n,this.exampleA=i,this.exampleB=s}};function zn(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n].from);return t}function Hn(e){let t="";for(let n of e)t.length&&(t+="-"),t+=n.id;return t}class qn{constructor(e,t,n){this.from=e,this.to=t,this.targets=n}}let Vn=/[\w_-]+/gy;try{Vn=/[\p{Alphabetic}\d_-]+/guy}catch(e){}const Wn=[];class Gn{constructor(e,t=null){this.string=e,this.fileName=t,this.type="sof",this.value=null,this.start=0,this.end=0,this.next()}lineInfo(e){for(let t=1,n=0;;){let i=this.string.indexOf("\n",n);if(!(i>-1&&i<e))return{line:t,ch:e-n};++t,n=i+1}}message(e,t=-1){let n=this.fileName||"";if(t>-1){let e=this.lineInfo(t);n+=(n?" ":"")+e.line+":"+e.ch}return n?e+` (${n})`:e}raise(e,t=-1){throw new Sn(this.message(e,t))}match(e,t){let n=t.exec(this.string.slice(e));return n?e+n[0].length:-1}next(){let e=this.match(this.end,/^(\s|\/\/.*|\/\*[^]*?\*\/)*/);if(e==this.string.length)return this.set("eof",null,e,e);let t=this.string[e];if('"'==t){let t=this.match(e+1,/^(\\.|[^"\\])*"/);return-1==t&&this.raise("Unterminated string literal",e),this.set("string",mi(this.string.slice(e+1,t-1)),e,t)}if("'"==t){let t=this.match(e+1,/^(\\.|[^'\\])*'/);return-1==t&&this.raise("Unterminated string literal",e),this.set("string",mi(this.string.slice(e+1,t-1)),e,t)}if("@"==t){Vn.lastIndex=e+1;let t=Vn.exec(this.string);return t?this.set("at",t[0],e,e+1+t[0].length):this.raise("@ without a name",e)}if("$"!=t&&"!"!=t||"["!=this.string[e+1]){if(/[\[\]()!~+*?{}<>\.,|:$=]/.test(t))return this.set(t,null,e,e+1);{Vn.lastIndex=e;let n=Vn.exec(this.string);return n?this.set("id",n[0],e,e+n[0].length):this.raise("Unexpected character "+JSON.stringify(t),e)}}{let t=this.match(e+2,/^(?:\\.|[^\]\\])*\]/);return-1==t&&this.raise("Unterminated character set",e),this.set("set",this.string.slice(e+2,t-1),e,t)}}set(e,t,n,i){this.type=e,this.value=t,this.start=n,this.end=i}eat(e,t=null){return this.type==e&&(null==t||this.value===t)&&(this.next(),!0)}unexpected(){return this.raise(`Unexpected token '${this.string.slice(this.start,this.end)}'`,this.start)}expect(e,t=null){let n=this.value;return(this.type!=e||null!=t&&n!==t)&&this.unexpected(),this.next(),n}parse(){return function(e){let t=e.start,n=[],i=null,s=null,r=[],o=null,a=[],l=[],h=null,c=[],u=[],f=[],d=[],p=[],m=!1,g=!1;for(;"eof"!=e.type;){let t=e.start;if(e.eat("at","top"))"id"!=e.type&&e.raise("Top rules must have a name",e.start),p.push(Un(e,si(e))),m=!0;else if("at"==e.type&&"tokens"==e.value)s?e.raise("Multiple @tokens declaractions",e.start):s=oi(e);else if(e.eat("at","local"))e.expect("id","tokens"),r.push(ai(e,t));else if(e.eat("at","context")){h&&e.raise("Multiple @context declarations",t);let n=si(e);e.expect("id","from");let i=e.expect("string");h=new Xt(t,n,i)}else if(e.eat("at","external"))e.eat("id","tokens")?c.push(ui(e,t)):e.eat("id","prop")?f.push(pi(e,t)):e.eat("id","extend")?u.push(fi(e,"extend",t)):e.eat("id","specialize")?u.push(fi(e,"specialize",t)):e.eat("id","propSource")?d.push(di(e,t)):e.unexpected();else if(e.eat("at","dialects")){e.expect("{");for(let t=!0;!e.eat("}");t=!1)t||e.eat(","),l.push(si(e))}else if("at"==e.type&&"precedence"==e.value)i&&e.raise("Multiple precedence declarations",e.start),i=ri(e);else if(e.eat("at","detectDelim"))g=!0;else if(e.eat("at","skip")){let t=Yn(e);if("{"==e.type){e.next();let n=[],i=[];for(;!e.eat("}");)e.eat("at","top")?(i.push(Un(e,si(e))),m=!0):n.push(Un(e));a.push({expr:t,topRules:i,rules:n})}else o&&e.raise("Multiple top-level skip declarations",e.start),o=t}else n.push(Un(e))}return m?new qt(t,n,p,s,r,h,c,u,d,i,o,a,l,f,g):e.raise("Missing @top declaration")}(this)}}function Un(e,t){let n=t?t.start:e.start,i=t||si(e),s=Kn(e),r=[];if(e.eat("<"))for(;!e.eat(">");)r.length&&e.expect(","),r.push(si(e));let o=Yn(e);return new Vt(n,i,s,r,o)}function Kn(e){if("["!=e.type)return Wn;let t=[];for(e.expect("[");!e.eat("]");)t.length&&e.expect(","),t.push(Jn(e));return t}function Jn(e){let t=e.start,n=[],i=e.value,s="at"==e.type;if(e.eat("at")||e.eat("id")||e.unexpected(),e.eat("="))for(;;)if("string"==e.type||"id"==e.type)n.push(new wn(e.start,e.value,null)),e.next();else if(e.eat("."))n.push(new wn(e.start,".",null));else{if(!e.eat("{"))break;n.push(new wn(e.start,null,e.expect("id"))),e.expect("}")}return new xn(t,s,i,n)}function Yn(e){e.expect("{");let t=ii(e);return e.expect("}"),t}const Xn="ï·š";function Qn(e){let t=e.start;if(e.eat("(")){if(e.eat(")"))return new hn(t,Wn,[Wn,Wn]);let n=ii(e);return e.expect(")"),n}if("string"==e.type){let n=e.value;return e.next(),0==n.length?new hn(t,Wn,[Wn,Wn]):new fn(t,n)}if(e.eat("id","_"))return new pn(t);if("set"==e.type){let n=e.value,i="!"==e.string[e.start],s=mi(n.replace(/\\.|-|"/g,(e=>"-"==e?Xn:'"'==e?'\\"':e))),r=[];for(let t=0;t<s.length;){let n=s.codePointAt(t);if(t+=n>65535?2:1,t<s.length-1&&s[t]==Xn){let i=s.codePointAt(t+1);t+=i>65535?3:2,i<n&&e.raise("Invalid character range",e.start),Zn(e,r,n,i+1)}else n==Xn.charCodeAt(0)&&(n=45),Zn(e,r,n,n+1)}return e.next(),new dn(t,r.sort(((e,t)=>e[0]-t[0])),i)}if("at"!=e.type||"specialize"!=e.value&&"extend"!=e.value){if("at"==e.type&&gn.hasOwnProperty(e.value)){let t=new bn(e.start,e.value);return e.next(),t}if("["==e.type){let n=Un(e,new nn(t,"_anon"));return n.params.length&&e.raise("Inline rules can't have parameters",n.start),new an(t,n)}{let n=si(e);if("["==e.type||"{"==e.type){let i=Un(e,n);return i.params.length&&e.raise("Inline rules can't have parameters",i.start),new an(t,i)}if(e.eat(".")&&"std"==n.name&&gn.hasOwnProperty(e.value)){let n=new bn(t,e.value);return e.next(),n}return new rn(t,n,function(e){let t=[];if(e.eat("<"))for(;!e.eat(">");)t.length&&e.expect(","),t.push(ii(e));return t}(e))}}{let{start:t,value:n}=e;e.next();let i=Kn(e);e.expect("<");let s,r=ii(e);return e.eat(",")?s=ii(e):r instanceof fn?s=r:e.raise(`@${n} requires two arguments when its first argument isn't a literal string`),e.expect(">"),new on(t,n,i,r,s)}}function Zn(e,t,n,i){t.every((([e,t])=>t<=n||e>=i))||e.raise("Overlapping character range",e.start),t.push([n,i])}function ei(e){let t=e.start,n=Qn(e);for(;;){let i=e.type;if(!(e.eat("*")||e.eat("?")||e.eat("+")))return n;n=new un(t,n,i)}}function ti(e){return"}"==e.type||")"==e.type||"|"==e.type||"/"==e.type||"/\\"==e.type||"{"==e.type||","==e.type||">"==e.type}function ni(e){let t=e.start,n=[],i=[Wn];do{for(;;){let t,n=e.start;if(e.eat("~"))t="ambig";else{if(!e.eat("!"))break;t="prec"}i[i.length-1]=i[i.length-1].concat(new cn(n,si(e),t))}if(ti(e))break;n.push(ei(e)),i.push(Wn)}while(!ti(e));return 1==n.length&&i.every((e=>0==e.length))?n[0]:new hn(t,n,i,!n.length)}function ii(e){let t=e.start,n=ni(e);if(!e.eat("|"))return n;let i=[n];do{i.push(ni(e))}while(e.eat("|"));let s=i.find((e=>e instanceof hn&&e.empty));return s&&e.raise("Empty expression in choice operator. If this is intentional, use () to make it explicit.",s.start),new ln(t,i)}function si(e){"id"!=e.type&&e.unexpected();let t=e.start,n=e.value;return e.next(),new nn(t,n)}function ri(e){let t=e.start;e.next(),e.expect("{");let n=[];for(;!e.eat("}");)n.length&&e.eat(","),n.push({id:si(e),type:e.eat("at","left")?"left":e.eat("at","right")?"right":e.eat("at","cut")?"cut":null});return new Wt(t,n)}function oi(e){let t=e.start;e.next(),e.expect("{");let n=[],i=[],s=[],r=[];for(;!e.eat("}");)"at"==e.type&&"precedence"==e.value?s.push(li(e)):"at"==e.type&&"conflict"==e.value?r.push(hi(e)):"string"==e.type?i.push(new Yt(e.start,e.expect("string"),Kn(e))):n.push(Un(e));return new Kt(t,s,r,n,i)}function ai(e,t){e.expect("{");let n=[],i=[],s=null;for(;!e.eat("}");)"at"==e.type&&"precedence"==e.value?i.push(li(e)):e.eat("at","else")&&!s?s={id:si(e),props:Kn(e)}:n.push(Un(e));return new Jt(t,i,n,s)}function li(e){let t=e.start;e.next(),e.expect("{");let n=[];for(;!e.eat("}");){n.length&&e.eat(",");let t=Qn(e);t instanceof fn||t instanceof rn?n.push(t):e.raise("Invalid expression in token precedences",t.start)}return new Gt(t,n)}function hi(e){let t=e.start;e.next(),e.expect("{");let n=Qn(e);n instanceof fn||n instanceof rn||e.raise("Invalid expression in token conflict",n.start),e.eat(",");let i=Qn(e);return i instanceof fn||i instanceof rn||e.raise("Invalid expression in token conflict",i.start),e.expect("}"),new Ut(t,n,i)}function ci(e){let t=[];for(e.expect("{");!e.eat("}");){t.length&&e.eat(",");let n=si(e),i=Kn(e);t.push({id:n,props:i})}return t}function ui(e,t){let n=si(e);e.expect("id","from");let i=e.expect("string");return new Qt(t,n,i,ci(e))}function fi(e,t,n){let i=Yn(e),s=si(e);e.expect("id","from");let r=e.expect("string");return new Zt(n,t,i,s,r,ci(e))}function di(e,t){let n=si(e);return e.expect("id","from"),new en(t,n,e.expect("string"))}function pi(e,t){let n=si(e),i=e.eat("id","as")?si(e):n;e.expect("id","from");let s=e.expect("string");return new tn(t,i,n,s)}function mi(e){let t,n=/\\(?:u\{([\da-f]+)\}|u([\da-f]{4})|x([\da-f]{2})|([ntbrf0])|(.))|[^]/giy,i="";for(;t=n.exec(e);){let[e,n,s,r,o,a]=t;i+=n||s||r?String.fromCodePoint(parseInt(n||s||r,16)):o?"n"==o?"\n":"t"==o?"\t":"0"==o?"\0":"r"==o?"\r":"f"==o?"\f":"\b":a||e}return i}function gi(e,t){return(e<<5)+e+t}function bi(e,t){for(let n=0;n<t.length;n++)e=gi(e,t.charCodeAt(n));return e}const yi="undefined"!=typeof process&&{}.LOG||"",vi=/\btime\b/.test(yi),xi=vi?(e,t)=>{let n=Date.now(),i=t();return console.log(`${e} (${((Date.now()-n)/1e3).toFixed(2)}s)`),i}:(e,t)=>t();class wi{constructor(e,t,n,i,s,r){this.rule=e,this.pos=t,this.ahead=n,this.ambigAhead=i,this.skipAhead=s,this.via=r,this.hash=0}finish(){let e=gi(gi(this.rule.id,this.pos),this.skipAhead.hash);for(let t of this.ahead)e=gi(e,t.hash);for(let t of this.ambigAhead)e=bi(e,t);return this.hash=e,this}get next(){return this.pos<this.rule.parts.length?this.rule.parts[this.pos]:null}advance(){return new wi(this.rule,this.pos+1,this.ahead,this.ambigAhead,this.skipAhead,this.via).finish()}get skip(){return this.pos==this.rule.parts.length?this.skipAhead:this.rule.skip}cmp(e){return this.rule.cmp(e.rule)||this.pos-e.pos||this.skipAhead.hash-e.skipAhead.hash||_n(this.ahead,e.ahead,((e,t)=>e.cmp(t)))||_n(this.ambigAhead,e.ambigAhead,Ci)}eqSimple(e){return e.rule==this.rule&&e.pos==this.pos}toString(){let e=this.rule.parts.map((e=>e.name));return e.splice(this.pos,0,"Â·"),`${this.rule.name} -> ${e.join(" ")}`}eq(e){return this==e||this.hash==e.hash&&this.rule==e.rule&&this.pos==e.pos&&this.skipAhead==e.skipAhead&&Mi(this.ahead,e.ahead)&&Mi(this.ambigAhead,e.ambigAhead)}trail(e=60){let t=[];for(let e=this;e;e=e.via)for(let n=e.pos-1;n>=0;n--)t.push(e.rule.parts[n]);let n=t.reverse().join(" ");return n.length>e&&(n=n.slice(n.length-e).replace(/.*? /,"â€¦ ")),n}conflicts(e=this.pos){let t=this.rule.conflicts[e];return e==this.rule.parts.length&&this.ambigAhead.length&&(t=t.join(new En(0,this.ambigAhead))),t}static addOrigins(e,t){let n=e.slice();for(let e=0;e<n.length;e++){let i=n[e];if(0==i.pos)for(let e of t)e.next!=i.rule.name||n.includes(e)||n.push(e)}return n}}function ki(e){let t=En.none;for(let n of e)t=t.join(n.conflicts());return t}function Si(e,t){for(let n of e)if(n.rule.name.repeated)for(let e of t)if(e.rule.name==n.rule.name){if(n.rule.isRepeatWrap&&2==n.pos)return 1;if(e.rule.isRepeatWrap&&2==e.pos)return-1}return 0}function Ci(e,t){return e<t?-1:e>t?1:0}function Ai(e,t,n,i){let s=[];for(let n=t+1;n<e.parts.length;n++){let t=e.parts[n],r=!1;if(t.terminal)Pi(t,s);else for(let e of i[t.name])null==e?r=!0:Pi(e,s);if(!r)return s}for(let e of n)Pi(e,s);return s}function Oi(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0}function Mi(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}class _i{constructor(e,t){this.term=e,this.target=t}eq(e){return e instanceof _i&&this.term==e.term&&e.target.id==this.target.id}cmp(e){return e instanceof Ti?-1:this.term.id-e.term.id||this.target.id-e.target.id}matches(e,t){return e instanceof _i&&t[e.target.id]==t[this.target.id]}toString(){return"s"+this.target.id}map(e,t){let n=t[e[this.target.id]];return n==this.target?this:new _i(this.term,n)}}class Ti{constructor(e,t){this.term=e,this.rule=t}eq(e){return e instanceof Ti&&this.term==e.term&&e.rule.sameReduce(this.rule)}cmp(e){return e instanceof _i?1:this.term.id-e.term.id||this.rule.name.id-e.rule.name.id||this.rule.parts.length-e.rule.parts.length}matches(e,t){return e instanceof Ti&&e.rule.sameReduce(this.rule)}toString(){return`${this.rule.name.name}(${this.rule.parts.length})`}map(){return this}}function Ei(e){let t=5381;for(let n of e)t=gi(t,n.hash);return t}class Ni{constructor(e){this.first=e,this.conflicts=[]}}class Di{constructor(e,t,n=0,i,s=Ei(t),r=null){this.id=e,this.set=t,this.flags=n,this.skip=i,this.hash=s,this.startRule=r,this.actions=[],this.actionPositions=[],this.goto=[],this.tokenGroup=-1,this.defaultReduce=null,this._actionsByTerm=null}toString(){let e=this.actions.map((e=>e.term+"="+e)).join(",")+(this.goto.length?" | "+this.goto.map((e=>e.term+"="+e)).join(","):"");return this.id+": "+this.set.filter((e=>e.pos>0)).join()+(this.defaultReduce?`\n  always ${this.defaultReduce.name}(${this.defaultReduce.parts.length})`:e.length?"\n  "+e:"")}addActionInner(e,t){e:for(let n=0;n<this.actions.length;n++){let i=this.actions[n];if(i.term==e.term){if(i.eq(e))return null;let s=wi.addOrigins(t,this.set),r=wi.addOrigins(this.actionPositions[n],this.set),o=ki(s),a=ki(r),l=Si(s,r)||o.precedence-a.precedence;if(l>0){this.actions.splice(n,1),this.actionPositions.splice(n,1),n--;continue e}if(l<0)return null;if(o.ambigGroups.some((e=>a.ambigGroups.includes(e))))continue e;return i}}return this.actions.push(e),this.actionPositions.push(t),null}addAction(e,t,n){let i=this.addActionInner(e,t);if(i){let s,r=this.actionPositions[this.actions.indexOf(i)][0],o=[t[0].rule.name,r.rule.name];if(n.conflicts.some((e=>e.rules.some((e=>o.includes(e))))))return;s=i instanceof _i?`shift/reduce conflict between\n  ${r}\nand\n  ${t[0].rule}`:`reduce/reduce conflict between\n  ${r.rule}\nand\n  ${t[0].rule}`,s+=`\nWith input:\n  ${t[0].trail(70)} Â· ${e.term} â€¦`,i instanceof _i&&(s+=function(e,t,n){let i=e,s=[];for(;;){for(let e=i.pos-1;e>=0;e--)s.push(i.rule.parts[e]);if(!i.via)break;i=i.via}s.reverse();let r=new Set;return function i(o,a,l){if(a==s.length&&l&&!o.next)return`\nThe reduction of ${e.rule.name} is allowed before ${t} because of this rule:\n  ${l}`;for(let e;e=o.next;){if(a<s.length&&e==s[a]){let e=i(o.advance(),a+1,l);if(e)return e}let h=o.rule.parts[o.pos+1],c=o.pos+1==o.rule.parts.length?l:null;h&&(h.terminal?h==t:n[h.name].includes(t))&&(c=o.advance());for(let t of e.rules){let n=(t.id<<5)+a+(c?555:0);if(!r.has(n)){r.add(n);let s=i(new wi(t,0,[],[],e,o),a,c);if(s)return s}}if(e.terminal||!n[e.name].includes(null))break;o=o.advance()}return""}(i,0,null)}(t[0],i.term,n.first)),s+=function(e,t){if(e.eqSimple(t))return"";function n(e,t){let n=[];for(let i=t.via;!i.eqSimple(e);i=i.via)n.push(i);return n.length?(n.unshift(t),n.reverse().map(((e,n)=>"\n"+"  ".repeat(n+1)+(e==t?"":"via ")+e)).join("")):""}for(let i=e;i;i=i.via)for(let s=t;s;s=s.via)if(i.eqSimple(s))return"\nShared origin: "+i+n(i,e)+n(i,t);return""}(r,t[0]),n.conflicts.push(new ji(s,o))}}getGoto(e){return this.goto.find((t=>t.term==e))}hasSet(e){return Oi(this.set,e)}actionsByTerm(){let e=this._actionsByTerm;if(!e){this._actionsByTerm=e=Object.create(null);for(let t of this.actions)(e[t.term.id]||(e[t.term.id]=[])).push(t)}return e}finish(){if(this.actions.length){let e=this.actions[0];if(e instanceof Ti){let{rule:t}=e;this.actions.every((e=>e instanceof Ti&&e.rule.sameReduce(t)))&&(this.defaultReduce=t)}}this.actions.sort(((e,t)=>e.cmp(t))),this.goto.sort(((e,t)=>e.cmp(t)))}eq(e){let t=this.defaultReduce,n=e.defaultReduce;return t||n?!(!t||!n)&&t.sameReduce(n):this.skip==e.skip&&this.tokenGroup==e.tokenGroup&&Oi(this.actions,e.actions)&&Oi(this.goto,e.goto)}}function Pi(e,t){t.includes(e)||t.push(e)}class Ri{constructor(e,t){this.set=e,this.state=t}}class ji{constructor(e,t){this.error=e,this.rules=t}}function Li(e){let t=null,n=1;for(let i of e){let e=i.rule.conflicts[i.pos-1].cut;e<n||((!t||e>n)&&(n=e,t=[]),t.push(i))}return t||e}function Bi(e,t,n){for(let i of e.goto)for(let e of t.goto)if(i.term==e.term&&n[i.target.id]!=n[e.target.id])return!1;let i=t.actionsByTerm();for(let t of e.actions){let s=i[t.term.id];if(s&&s.some((e=>!e.matches(t,n)))){if(1==s.length)return!1;let i=e.actionsByTerm()[t.term.id];if(i.length!=s.length||i.some((e=>!s.some((t=>e.matches(t,n))))))return!1}}return!0}function Ii(e,t){let n=[];for(let i of e){let e=t[i.id];n[e]||(n[e]=new Di(e,i.set,0,i.skip,i.hash,i.startRule),n[e].tokenGroup=i.tokenGroup,n[e].defaultReduce=i.defaultReduce)}for(let i of e){let e=n[t[i.id]];e.flags|=i.flags;for(let s=0;s<i.actions.length;s++){let r=i.actions[s].map(t,n);e.actions.some((e=>e.eq(r)))||(e.actions.push(r),e.actionPositions.push(i.actionPositions[s]))}for(let s of i.goto){let i=s.map(t,n);e.goto.some((e=>e.eq(i)))||e.goto.push(i)}}return n}class Fi{constructor(e,t){this.origin=e,this.members=[t]}}function $i(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].eqSimple(t[n]))return!1;return!0}const zi=[];function Hi(e){let t=e+32;return t>=34&&t++,t>=92&&t++,String.fromCharCode(t)}function qi(e,t=65535){if(e>t)throw new Error("Trying to encode a number that's too big: "+e);if(65535==e)return String.fromCharCode(126);let n="";for(let t=46;;t=0){let i=e%46,s=e-i;if(n=Hi(i+t)+n,0==s)break;e=s/46}return n}function Vi(e,t=65535){let n='"'+qi(e.length,4294967295);for(let i=0;i<e.length;i++)n+=qi(e[i],t);return n+='"',n}const Wi=[];class Gi{constructor(e,t){this.terms=e,this.conflicts=t}concat(e){if(this==Gi.none)return e;if(e==Gi.none)return this;let t=null;if(this.conflicts||e.conflicts){t=this.conflicts?this.conflicts.slice():this.ensureConflicts();let n=e.ensureConflicts();t[t.length-1]=t[t.length-1].join(n[0]);for(let e=1;e<n.length;e++)t.push(n[e])}return new Gi(this.terms.concat(e.terms),t)}withConflicts(e,t){if(t==En.none)return this;let n=this.conflicts?this.conflicts.slice():this.ensureConflicts();return n[e]=n[e].join(t),new Gi(this.terms,n)}ensureConflicts(){if(this.conflicts)return this.conflicts;let e=[];for(let t=0;t<=this.terms.length;t++)e.push(En.none);return e}}function Ui(...e){return new Gi(e,null)}Gi.none=new Gi(Wi,null);class Ki{constructor(e,t,n){this.id=e,this.args=t,this.term=n}matches(e){return this.id==e.id.name&&vn(e.args,this.args)}matchesRepeat(e){return"+"==this.id&&yn(e.expr,this.args[0])}}class Ji{constructor(e,t){this.options=t,this.terms=new Mn,this.specialized=Object.create(null),this.tokenOrigins=Object.create(null),this.rules=[],this.built=[],this.ruleNames=Object.create(null),this.namespaces=Object.create(null),this.namedTerms=Object.create(null),this.termTable=Object.create(null),this.knownProps=Object.create(null),this.dynamicRulePrecedences=[],this.definedGroups=[],this.astRules=[],this.currentSkip=[],xi("Parse",(()=>{this.input=new Gn(e,t.fileName),this.ast=this.input.parse()}));let n=o.uY;for(let e in n)n[e]instanceof o.uY&&!n[e].perNode&&(this.knownProps[e]={prop:n[e],source:{name:e,from:null}});for(let e of this.ast.externalProps)this.knownProps[e.id.name]={prop:this.options.externalProp?this.options.externalProp(e.id.name):new o.uY,source:{name:e.externalID.name,from:e.source}};this.dialects=this.ast.dialects.map((e=>e.name)),this.tokens=new ls(this,this.ast.tokens),this.localTokens=this.ast.localTokens.map((e=>new hs(this,e))),this.externalTokens=this.ast.externalTokens.map((e=>new ws(this,e))),this.externalSpecializers=this.ast.externalSpecializers.map((e=>new ks(this,e))),xi("Build rules",(()=>{let e=this.newName("%noskip",!0);this.defineRule(e,[]);let t=this.ast.mainSkip?this.newName("%mainskip",!0):e,n=[],i=[];for(let e of this.ast.rules)this.astRules.push({skip:t,rule:e});for(let e of this.ast.topRules)i.push({skip:t,rule:e});for(let s of this.ast.scopedSkip){let r=e,o=this.ast.scopedSkip.findIndex(((e,t)=>t<n.length&&yn(e.expr,s.expr)));o>-1?r=n[o]:this.ast.mainSkip&&yn(s.expr,this.ast.mainSkip)?r=t:bs(s.expr)||(r=this.newName("%skip",!0)),n.push(r);for(let e of s.rules)this.astRules.push({skip:r,rule:e});for(let e of s.topRules)i.push({skip:r,rule:e})}for(let{rule:e}of this.astRules)this.unique(e.id);this.currentSkip.push(e),this.skipRules=t==e?[t]:[e,t],t!=e&&this.defineRule(t,this.normalizeExpr(this.ast.mainSkip));for(let t=0;t<this.ast.scopedSkip.length;t++){let i=n[t];this.skipRules.includes(i)||(this.skipRules.push(i),i!=e&&this.defineRule(i,this.normalizeExpr(this.ast.scopedSkip[t].expr)))}this.currentSkip.pop();for(let{rule:e,skip:t}of i.sort(((e,t)=>e.rule.start-t.rule.start))){this.unique(e.id),this.used(e.id.name),this.currentSkip.push(t);let{name:n,props:i}=this.nodeInfo(e.props,"a",e.id.name,Wi,Wi,e.expr),s=this.terms.makeTop(n,i);this.namedTerms[n]=s,this.defineRule(s,this.normalizeExpr(e.expr)),this.currentSkip.pop()}for(let e of this.externalSpecializers)e.finish();for(let{skip:e,rule:t}of this.astRules)this.ruleNames[t.id.name]&&As(t)&&!t.params.length&&(this.buildRule(t,[],e,!1),t.expr instanceof hn&&0==t.expr.exprs.length&&this.used(t.id.name))}));for(let e in this.ruleNames){let t=this.ruleNames[e];t&&this.warn(`Unused rule '${t.name}'`,t.start)}this.tokens.takePrecedences(),this.tokens.takeConflicts();for(let e of this.localTokens)e.takePrecedences();for(let{name:e,group:t,rule:n}of this.definedGroups)this.defineGroup(e,t,n);this.checkGroups()}unique(e){e.name in this.ruleNames&&this.raise(`Duplicate definition of rule '${e.name}'`,e.start),this.ruleNames[e.name]=e}used(e){this.ruleNames[e]=null}newName(e,t=null,n={}){for(let i=t?0:1;;i++){let s=i?`${e}-${i}`:e;if(!this.terms.names[s])return this.terms.makeNonTerminal(s,!0===t?null:t,n)}}prepareParser(){let e=xi("Simplify rules",(()=>function(e,t){return function(e){let t,n=Object.create(null);for(let i=0;i<e.length;){let s=i,r=e[i++].name;for(;i<e.length&&e[i].name==r;)i++;let o=i-s;if(!r.interesting)for(let a=i;a<e.length;){let i=a,l=e[a++].name;for(;a<e.length&&e[a].name==l;)a++;if(a-i!=o||l.interesting)continue;let h=!0;for(let t=0;t<o&&h;t++){let n=e[s+t],r=e[i+t];0!=n.cmpNoName(r)&&(h=!1)}h&&(t=n[r.name]=l)}}if(!t)return e;let i=[];for(let t of e)n[t.name.name]||i.push(t.parts.every((e=>!n[e.name]))?t:new Pn(t.name,t.parts.map((e=>n[e.name]||e)),t.conflicts,t.skip));return i}(function(e,t){for(let n=0;;n++){let i,s=Object.create(null);if(0==n)for(let o of e)if(o.name.inline&&!s[o.name.name]){let a=e.filter((e=>e.name==o.name));if(a.some((e=>e.parts.includes(o.name))))continue;i=s[o.name.name]=a}for(let l=0;l<e.length;l++){let h=e[l];h.name.interesting||h.parts.includes(h.name)||!(h.parts.length<3)||t.includes(h.name)||1!=h.parts.length&&!e.every((e=>e.skip==h.skip||!e.parts.includes(h.name)))||h.parts.some((e=>!!s[e.name]))||e.some(((e,t)=>t!=l&&e.name==h.name))||(i=s[h.name.name]=[h])}if(!i)return e;let r=[];for(let c of e){function u(e,t,n){if(e==c.parts.length)return void r.push(new Pn(c.name,n,t,c.skip));let i=c.parts[e],o=s[i.name];if(o)for(let i of o)u(e+1,t.slice(0,t.length-1).concat(t[e].join(i.conflicts[0])).concat(i.conflicts.slice(1,i.conflicts.length-1)).concat(c.conflicts[e+1].join(i.conflicts[i.conflicts.length-1])),n.concat(i.parts));else u(e+1,t.concat(c.conflicts[e+1]),n.concat(i))}s[c.name.name]||(c.parts.some((e=>!!s[e.name]))?u(0,[c.conflicts[0]],[]):r.push(c))}e=r}}(e,t))}(this.rules,[...this.skipRules,...this.terms.tops]))),{nodeTypes:t,names:n,minRepeatTerm:i,maxTerm:s}=this.terms.finish(e);for(let e in this.namedTerms)this.termTable[e]=this.namedTerms[e].id;/\bgrammar\b/.test(yi)&&console.log(e.join("\n"));let r=this.terms.tops.slice(),o=function(e){let t=Object.create(null);for(let n of e.terms)n.terminal||(t[n.name]=[]);for(;;){let n=!1;for(let i of e.terms)if(!i.terminal)for(let e of i.rules){let s=t[i.name],r=!1,o=s.length;for(let n of e.parts){if(r=!0,n.terminal)Pi(n,s);else for(let e of t[n.name])null==e?r=!1:Pi(e,s);if(r)break}r||Pi(null,s),s.length>o&&(n=!0)}if(!n)return t}}(this.terms),a=this.skipRules.map(((e,t)=>{let n=[],i=[],s=[];for(let t of e.rules){if(!t.parts.length)continue;let e=t.parts[0];for(let t of e.terminal?[e]:o[e.name]||[])t&&!i.includes(t)&&i.push(t);e.terminal&&1==t.parts.length&&!s.some((n=>n!=t&&n.parts[0]==e))?n.push(e):s.push(t)}return e.rules=s,s.length&&r.push(e),{skip:n,rule:s.length?e:null,startTokens:i,id:t}})),l=xi("Build full automaton",(()=>function(e,t,n){let i=[],s={},r={},o=Date.now();function a(e,t){if(0==e.length)return null;let a,l=Ei(e),h=r[l];for(let t of e)if(a){if(a!=t.skip)throw new Sn("Inconsistent skip sets after "+t.trail())}else a=t.skip;if(h)for(let t of h)if(Oi(e,t.set)){if(t.state.skip!=a)throw new Sn("Inconsistent skip sets after "+t.set[0].trail());return t.state}let c,u=function(e,t){let n=[],i=[];function s(t,s,r,o,a){for(let l of t.rules){let t=n.find((e=>e.rule==l));if(!t){let i=e.find((e=>0==e.pos&&e.rule==l));t=i?new wi(l,0,i.ahead.slice(),i.ambigAhead,i.skipAhead,i.via):new wi(l,0,[],zi,o,a),n.push(t)}if(t.skipAhead!=o)throw new Sn("Inconsistent skip sets after "+a.trail());t.ambigAhead=Nn(t.ambigAhead,r);for(let e of s)t.ahead.includes(e)||(t.ahead.push(e),t.rule.parts.length&&!t.rule.parts[0].terminal&&Pi(t,i))}}for(let n of e){let e=n.next;e&&!e.terminal&&s(e,Ai(n.rule,n.pos,n.ahead,t),n.conflicts(n.pos+1).ambigGroups,n.pos==n.rule.parts.length-1?n.skipAhead:n.rule.skip,n)}for(;i.length;){let e=i.pop();s(e.rule.parts[0],Ai(e.rule,0,e.ahead,t),Nn(e.rule.conflicts[1].ambigGroups,1==e.rule.parts.length?e.ambigAhead:zi),1==e.rule.parts.length?e.skipAhead:e.rule.skip,e)}let r=e.slice();for(let t of n){t.ahead.sort(((e,t)=>e.hash-t.hash)),t.finish();let n=e.findIndex((e=>0==e.pos&&e.rule==t.rule));n>-1?r[n]=t:r.push(t)}return r.sort(((e,t)=>e.cmp(t)))}(e,n),f=Ei(u),d=s[f]||(s[f]=[]);if(!t)for(let e of d)e.hasSet(u)&&(c=e);return c||(c=new Di(i.length,u,0,a,f,t),d.push(c),i.push(c),vi&&i.length%500==0&&console.log(`${i.length} states after ${((Date.now()-o)/1e3).toFixed(2)}s`)),(r[l]||(r[l]=[])).push(new Ri(e,c)),c}for(const n of t){const t=n.rules.length?n.rules[0].skip:e.names["%noskip"];a(n.rules.map((n=>new wi(n,0,[e.eof],zi,t,null).finish())),n)}let l=new Ni(n);for(let e=0;e<i.length;e++){let t=i[e],s=[],r=[],o=[];for(let e of t.set)if(e.pos==e.rule.parts.length)e.rule.name.top||o.push(e);else{let t=e.rule.parts[e.pos],n=s.indexOf(t);n<0?(s.push(t),r.push([e])):r[n].push(e)}for(let e=0;e<s.length;e++){let n=s[e],i=r[e].map((e=>e.advance()));if(n.terminal){let s=a(Li(i));s&&t.addAction(new _i(n,s),r[e],l)}else{let e=a(i);e&&t.goto.push(new _i(n,e))}}let h=!1;for(let e of o)for(let n of e.ahead){let i=t.actions.length;t.addAction(new Ti(n,e.rule),[e],l),t.actions.length==i&&(h=!0)}if(h)for(let e=0;e<t.goto.length;e++)n[t.goto[e].term.name].some((e=>t.actions.some((t=>t.term==e&&t instanceof _i))))||t.goto.splice(e--,1)}if(l.conflicts.length)throw new Sn(l.conflicts.map((e=>e.error)).join("\n\n"));for(let e of i)e.finish();return vi&&console.log(`${i.length} states total.`),i}(this.terms,r,o))),h=this.localTokens.map(((e,t)=>e.buildLocalGroup(l,a,t))),{tokenGroups:c,tokenPrec:u,tokenData:f}=xi("Build token groups",(()=>this.tokens.buildTokenGroups(l,a,h.length))),d=xi("Finish automaton",(()=>function(e){for(let t=1;;t++){let n=[],i=!1,s=Date.now(),r=[];for(let t=0;t<e.length;t++){let s=e[t],o=r.findIndex((e=>s.eq(e)));if(o<0)n[t]=r.length,r.push(s);else{n[t]=o,i=!0;let e=r[o],a=null;for(let t of s.set)e.set.some((e=>e.eqSimple(t)))||(a||(a=[])).push(t);a&&(e.set=a.concat(e.set).sort(((e,t)=>e.cmp(t))))}}if(vi&&console.log(`Merge identical pass ${t}${i?"":", done"} (${((Date.now()-s)/1e3).toFixed(2)}s)`),!i)return e;for(let e of r)e.defaultReduce||(e.actions=e.actions.map((e=>e.map(n,r))),e.goto=e.goto.map((e=>e.map(n,r))));for(let e=0;e<r.length;e++)r[e].id=e;e=r}}(function(e){let t=[],n=[];e:for(let i=0;i<e.length;i++){let s=e[i];if(!s.startRule)for(let r=0;r<n.length;r++){let o=n[r],a=e[o.members[0]];if(s.tokenGroup==a.tokenGroup&&s.skip==a.skip&&!a.startRule&&$i(s.set,a.set)){o.members.push(i),t.push(r);continue e}}t.push(n.length),n.push(new Fi(n.length,i))}function i(i,s){let r=n[i],o=e[r.members[s]],a=r.members.pop();s!=r.members.length&&(r.members[s]=a);for(let s=i+1;s<n.length;s++)if(t[o.id]=s,n[s].origin==r.origin&&n[s].members.every((n=>Bi(o,e[n],t))))return void n[s].members.push(o.id);t[o.id]=n.length,n.push(new Fi(r.origin,o.id))}for(let s=1;;s++){let r=!1,o=Date.now();for(let s=0,o=n.length;s<o;s++){let o=n[s];for(let n=0;n<o.members.length-1;n++)for(let a=n+1;a<o.members.length;a++){let l=o.members[n],h=o.members[a];Bi(e[l],e[h],t)||(r=!0,i(s,a--))}}if(vi&&console.log(`Collapse pass ${s}${r?"":", done"} (${((Date.now()-o)/1e3).toFixed(2)}s)`),!r)return Ii(e,t)}}(l)))),p=function(e,t){let n=Object.create(null),i=[],s=e=>{n[e.id]||(n[e.id]=!0,i.push(e))};for(let n of e)n.startRule&&t.includes(n.startRule)&&s(n);for(let e=0;e<i.length;e++){for(let t of i[e].actions)t instanceof _i&&s(t.target);for(let t of i[e].goto)s(t.target)}return e=>!n[e]}(d,this.terms.tops);/\blr\b/.test(yi)&&console.log(d.join("\n"));let m=[];for(let e of this.externalSpecializers)m.push(e);for(let e in this.specialized)m.push({token:this.terms.names[e],table:Qi(this.specialized[e])});let g=e=>e instanceof ws?e.ast.start:this.tokens.ast?this.tokens.ast.start:-1,b=c.concat(this.externalTokens).sort(((e,t)=>g(e)-g(t))).concat(h),y=new es,v=a.map((e=>{let t=[];for(let n of e.skip)t.push(n.id,0,4);if(e.rule){let n=d.find((t=>t.startRule==e.rule));for(let e of n.actions)t.push(e.term.id,n.id,2)}return t.push(65535,0),y.storeArray(t)})),x=xi("Finish states",(()=>{let e=new Uint32Array(6*d.length),t=this.computeForceReductions(d,a),n=new Yi(b,y,e,v,a,d,this);for(let e of d)n.finish(e,p(e.id),t[e.id]);return e})),w=Object.create(null);for(let e=0;e<this.dialects.length;e++)w[this.dialects[e]]=y.storeArray((this.tokens.byDialect[e]||Wi).map((e=>e.id)).concat(65535));let k=null;if(this.dynamicRulePrecedences.length){k=Object.create(null);for(let{rule:e,prec:t}of this.dynamicRulePrecedences)k[e.id]=t}let S=Object.create(null);for(let e of this.terms.tops)S[e.nodeName]=[d.find((t=>t.startRule==e)).id,e.id];let C=y.storeArray(u.concat(65535)),{nodeProps:A,skippedTypes:O}=this.gatherNodeProps(t);return{states:x,stateData:y.finish(),goto:ts(d),nodeNames:t.filter((e=>e.id<i)).map((e=>e.nodeName)).join(" "),nodeProps:A,skippedTypes:O,maxTerm:s,repeatNodeCount:t.length-i,tokenizers:b,tokenData:f,topRules:S,dialects:w,dynamicPrecedences:k,specialized:m,tokenPrec:C,termNames:n}}getParser(){let{states:e,stateData:t,goto:n,nodeNames:i,nodeProps:s,skippedTypes:r,maxTerm:o,repeatNodeCount:a,tokenizers:l,tokenData:h,topRules:c,dialects:u,dynamicPrecedences:f,specialized:d,tokenPrec:p,termNames:m}=this.prepareParser(),g=d.map((e=>{if(e instanceof ks){let t=this.options.externalSpecializer(e.ast.id.name,this.termTable);return{term:e.term.id,get:(n,i)=>t(n,i)<<1|("extend"==e.ast.type?1:0),external:t,extend:"extend"==e.ast.type}}return{term:e.token.id,get:t=>e.table[t]||-1}}));return zt.U1.deserialize({version:14,states:e,stateData:t,goto:n,nodeNames:i,maxTerm:o,repeatNodeCount:a,nodeProps:s.map((({prop:e,terms:t})=>[this.knownProps[e].prop,...t])),propSources:this.options.externalPropSource?this.ast.externalPropSources.map((e=>this.options.externalPropSource(e.id.name))):void 0,skippedNodes:r,tokenData:h,tokenizers:l.map((e=>e.create())),context:this.ast.context?"function"==typeof this.options.contextTracker?this.options.contextTracker(this.termTable):this.options.contextTracker:void 0,topRules:c,dialects:u,dynamicPrecedences:f,specialized:g,tokenPrec:p,termNames:m})}getParserFile(){let{states:e,stateData:t,goto:n,nodeNames:i,nodeProps:s,skippedTypes:r,maxTerm:o,repeatNodeCount:a,tokenizers:l,tokenData:h,topRules:c,dialects:u,dynamicPrecedences:f,specialized:d,tokenPrec:p,termNames:m}=this.prepareParser(),g=this.options.moduleStyle||"es",b="// This file was generated by lezer-generator. You probably shouldn't edit it.\n",y=b,v={},x=Object.create(null),w=Object.create(null);for(let e of Cs)w[e]=!0;let k=this.options.exportName||"parser";w[k]=!0;let S=e=>{for(let t=0;;t++){let n=e+(t?"_"+t:"");if(!w[n])return n}},C=(e,t,n=e)=>{let i=e+" from "+t;if(x[i])return x[i];let s=JSON.stringify(t),r=e;return e in w&&(r=S(n),e+=`${"cjs"==g?":":" as"} ${r}`),w[r]=!0,(v[s]||(v[s]=[])).push(e),x[i]=r},A=C("LRParser","@lezer/lr"),O=l.map((e=>e.createSource(C))),M=this.ast.context?C(this.ast.context.id.name,this.ast.context.source):null,_=s.map((({prop:e,terms:t})=>{let{source:n}=this.knownProps[e];return`[${n.from?C(n.name,n.from):JSON.stringify(n.name)}, ${t.map(D).join(",")}]`})),T="",E=d.map((e=>{if(e instanceof ks){let t=C(e.ast.id.name,e.ast.source),n=this.options.typeScript?": any":"";return`{term: ${e.term.id}, get: (value${n}, stack${n}) => (${t}(value, stack) << 1)${"extend"==e.ast.type?" | 1":""}, external: ${t}${"extend"==e.ast.type?", extend: true":""}}`}{let n=S("spec_"+e.token.name.replace(/\W/g,""));w[n]=!0,T+=`const ${n} = ${t=e.table,"{__proto__:null,"+Object.keys(t).map((e=>`${/^(\d+|[a-zA-Z_]\w*)$/.test(e)?e:JSON.stringify(e)}:${t[e]}`)).join(", ")+"}"}\n`;let i=this.options.typeScript?`: keyof typeof ${n}`:"";return`{term: ${e.token.id}, get: (value${i}) => ${n}[value] || -1}`}var t})),N=this.ast.externalPropSources.map((e=>C(e.id.name,e.source)));for(let e in v)y+="cjs"==g?`const {${v[e].join(", ")}} = require(${e})\n`:`import {${v[e].join(", ")}} from ${e}\n`;function D(e){return"string"!=typeof e||/^(true|false|\d+(\.\d+)?|\.\d+)$/.test(e)?e:JSON.stringify(e)}y+=T;let P=Object.keys(u).map((e=>`${e}: ${u[e]}`)),R=`${A}.deserialize({\n  version: 14,\n  states: ${Vi(e,4294967295)},\n  stateData: ${Vi(t)},\n  goto: ${Vi(n)},\n  nodeNames: ${JSON.stringify(i)},\n  maxTerm: ${o}${M?`,\n  context: ${M}`:""}${_.length?`,\n  nodeProps: [\n    ${_.join(",\n    ")}\n  ]`:""}${N.length?`,\n  propSources: [${N.join()}]`:""}${r.length?`,\n  skippedNodes: ${JSON.stringify(r)}`:""},\n  repeatNodeCount: ${a},\n  tokenData: ${Vi(h)},\n  tokenizers: [${O.join(", ")}],\n  topRules: ${JSON.stringify(c)}${P.length?`,\n  dialects: {${P.join(", ")}}`:""}${f?`,\n  dynamicPrecedences: ${JSON.stringify(f)}`:""}${E.length?`,\n  specialized: [${E.join(",")}]`:""},\n  tokenPrec: ${p}${this.options.includeNames?`,\n  termNames: ${JSON.stringify(m)}`:""}\n})`,j=[];for(let e in this.termTable){let t=e;if(Cs.includes(t))for(let n=1;t="_".repeat(n)+e,t in this.termTable;n++);else if(!/^[\w$]+$/.test(e))continue;j.push(`${t}${"cjs"==g?":":" ="} ${this.termTable[e]}`)}for(let e=0;e<this.dialects.length;e++)j.push(`Dialect_${this.dialects[e]}${"cjs"==g?":":" ="} ${e}`);return{parser:y+("cjs"==g?`exports.${k} = ${R}\n`:`export const ${k} = ${R}\n`),terms:"cjs"==g?`${b}module.exports = {\n  ${j.join(",\n  ")}\n}`:`${b}export const\n  ${j.join(",\n  ")}\n`}}gatherNonSkippedNodes(){let e=Object.create(null),t=[],n=n=>{e[n.id]||(e[n.id]=!0,t.push(n))};this.terms.tops.forEach(n);for(let e=0;e<t.length;e++)for(let i of t[e].rules)for(let e of i.parts)n(e);return e}gatherNodeProps(e){let t=this.gatherNonSkippedNodes(),n=[],i=[];for(let s of e){t[s.id]||s.error||n.push(s.id);for(let e in s.props){let t=this.knownProps[e];if(!t)throw new Sn("No known prop type for "+e);if(null==t.source.from&&("repeated"==t.source.name||"error"==t.source.name))continue;let n=i.find((t=>t.prop==e));n||i.push(n={prop:e,values:{}}),(n.values[s.props[e]]||(n.values[s.props[e]]=[])).push(s.id)}}return{nodeProps:i.map((({prop:e,values:t})=>{let n=[];for(let e in t){let i=t[e];if(1==i.length)n.push(i[0],e);else{n.push(-i.length);for(let e of i)n.push(e);n.push(e)}}return{prop:e,terms:n}})),skippedTypes:n}}makeTerminal(e,t,n){return this.terms.makeTerminal(this.terms.uniqueName(e),t,n)}computeForceReductions(e,t){let n=[],i=[],s=Object.create(null);for(let t of e){n.push(0);for(let e of t.goto){let n=s[e.term.id]||(s[e.term.id]=[]),i=n.find((t=>t.target==e.target.id));i?i.parents.push(t.id):n.push({parents:[t.id],target:e.target.id})}i[t.id]=t.set.filter((e=>e.pos>0&&!e.rule.name.top)).sort(((e,t)=>t.pos-e.pos||e.rule.parts.length-t.rule.parts.length))}let r=Object.create(null);function o(e,t,n=null){let i=s[e];return!!i&&i.some((e=>{let i=n?n.filter((t=>e.parents.includes(t))):e.parents;if(0==i.length)return!1;if(e.target==t)return!0;let s=r[e.target];return null!=s&&o(s,t,i)}))}for(let i of e)i.defaultReduce&&i.defaultReduce.parts.length>0&&(n[i.id]=Zi(i.defaultReduce,t),1==i.defaultReduce.parts.length&&(r[i.id]=i.defaultReduce.name.id));for(let s=1;;s++){let a=!0;for(let l of e){if(l.defaultReduce)continue;let e=i[l.id];if(e.length==s){for(let i of e)if(1!=i.pos||!o(i.rule.name.id,l.id)){n[l.id]=Zi(i.rule,t,i.pos),1==i.pos&&(r[l.id]=i.rule.name.id);break}}else e.length>s&&(a=!1)}if(a)break}return n}substituteArgs(e,t,n){return 0==t.length?e:e.walk((e=>{let i;if(e instanceof rn&&(i=n.findIndex((t=>t.name==e.id.name)))>-1){let n=t[i];if(e.args.length){if(n instanceof rn&&!n.args.length)return new rn(e.start,n.id,e.args);this.raise("Passing arguments to a parameter that already has arguments",e.start)}return n}if(e instanceof an){let i=e.rule,s=this.substituteArgsInProps(i.props,t,n);return s==i.props?e:new an(e.start,new Vt(i.start,i.id,s,i.params,i.expr))}if(e instanceof on){let i=this.substituteArgsInProps(e.props,t,n);return i==e.props?e:new on(e.start,e.type,i,e.token,e.content)}return e}))}substituteArgsInProps(e,t,n){let i=e=>{let i=e;for(let s=0;s<e.length;s++){let r=e[s];if(!r.name)continue;let o=n.findIndex((e=>e.name==r.name));if(o<0)continue;i==e&&(i=e.slice());let a=t[o];a instanceof rn&&!a.args.length?i[s]=new wn(r.start,a.id.name,null):a instanceof fn?i[s]=new wn(r.start,a.value,null):this.raise(`Trying to interpolate expression '${a}' into a prop`,r.start)}return i},s=e;for(let t=0;t<e.length;t++){let n=e[t],r=i(n.value);r!=n.value&&(s==e&&(s=e.slice()),s[t]=new xn(n.start,n.at,n.name,r))}return s}conflictsFor(e){let t=En.none,n=En.none;for(let i of e)if("ambig"==i.type)t=t.join(new En(0,[i.id.name]));else{let e=this.ast.precedences,s=e?e.items.findIndex((e=>e.id.name==i.id.name)):-1;s<0&&this.raise(`Reference to unknown precedence: '${i.id.name}'`,i.id.start);let r=e.items[s],o=e.items.length-s;"cut"==r.type?t=t.join(new En(0,Wi,o)):(t=t.join(new En(o<<2)),n=n.join(new En((o<<2)+("left"==r.type?1:"right"==r.type?-1:0))))}return{here:t,atEnd:n}}raise(e,t=1){return this.input.raise(e,t)}warn(e,t=-1){let n=this.input.message(e,t);this.options.warn?this.options.warn(n):console.warn(n)}defineRule(e,t){let n=this.currentSkip[this.currentSkip.length-1];for(let i of t)this.rules.push(new Pn(e,i.terms,i.ensureConflicts(),n))}resolve(e){for(let t of this.built)if(t.matches(e))return[Ui(t.term)];let t=this.tokens.getToken(e);if(t)return[Ui(t)];for(let t of this.localTokens){let n=t.getToken(e);if(n)return[Ui(n)]}for(let t of this.externalTokens){let n=t.getToken(e);if(n)return[Ui(n)]}for(let t of this.externalSpecializers){let n=t.getToken(e);if(n)return[Ui(n)]}let n=this.astRules.find((t=>t.rule.id.name==e.id.name));return n?(n.rule.params.length!=e.args.length&&this.raise(`Wrong number or arguments for '${e.id.name}'`,e.start),this.used(n.rule.id.name),[Ui(this.buildRule(n.rule,e.args,n.skip))]):this.raise(`Reference to undefined rule '${e.id.name}'`,e.start)}normalizeRepeat(e){let t=this.built.find((t=>t.matchesRepeat(e)));if(t)return Ui(t.term);let n=e.expr.prec<e.prec?`(${e.expr})+`:`${e.expr}+`,i=this.terms.makeRepeat(this.terms.uniqueName(n));return this.built.push(new Ki("+",[e.expr],i)),this.defineRule(i,this.normalizeExpr(e.expr).concat(Ui(i,i))),Ui(i)}normalizeSequence(e){let t=e.exprs.map((e=>this.normalizeExpr(e))),n=this;return function i(s,r,o){let{here:a,atEnd:l}=n.conflictsFor(e.markers[r]);if(r==t.length)return[s.withConflicts(s.terms.length,a.join(o))];let h=[];for(let e of t[r])for(let t of i(s.concat(e).withConflicts(s.terms.length,a),r+1,o.join(l)))h.push(t);return h}(Gi.none,0,En.none)}normalizeExpr(e){if(e instanceof un&&"?"==e.kind)return[Gi.none,...this.normalizeExpr(e.expr)];if(e instanceof un){let t=this.normalizeRepeat(e);return"+"==e.kind?[t]:[Gi.none,t]}return e instanceof ln?e.exprs.reduce(((e,t)=>e.concat(this.normalizeExpr(t))),[]):e instanceof hn?this.normalizeSequence(e):e instanceof fn?[Ui(this.tokens.getLiteral(e))]:e instanceof rn?this.resolve(e):e instanceof on?[Ui(this.resolveSpecialization(e))]:e instanceof an?[Ui(this.buildRule(e.rule,Wi,this.currentSkip[this.currentSkip.length-1],!0))]:this.raise(`This type of expression ('${e}') may not occur in non-token rules`,e.start)}buildRule(e,t,n,i=!1){let s=this.substituteArgs(e.expr,t,e.params),{name:r,props:o,dynamicPrec:a,inline:l,group:h,exported:c}=this.nodeInfo(e.props||Wi,i?"pg":"pgi",e.id.name,t,e.params,e.expr);c&&e.params.length&&this.warn("Can't export parameterized rules",e.start),c&&i&&this.warn("Can't export inline rule",e.start);let u=this.newName(e.id.name+(t.length?"<"+t.join(",")+">":""),r||!0,o);l&&(u.inline=!0),a&&this.registerDynamicPrec(u,a),(u.nodeType||c)&&0==e.params.length&&(r||(u.preserve=!0),i||(this.namedTerms[c||e.id.name]=u)),i||this.built.push(new Ki(e.id.name,t,u)),this.currentSkip.push(n);let f=this.normalizeExpr(s);return f.length>100*(s instanceof ln?s.exprs.length:1)&&this.warn(`Rule ${e.id.name} is generating a lot (${f.length}) of choices.\n  Consider splitting it up or reducing the amount of ? or | operator uses.`,e.start),/\brulesize\b/.test(yi)&&f.length>10&&console.log(`Rule ${e.id.name}: ${f.length} variants`),this.defineRule(u,f),this.currentSkip.pop(),h&&this.definedGroups.push({name:u,group:h,rule:e}),u}nodeInfo(e,t,n=null,i=Wi,s=Wi,r,o){let a={},l=n&&(t.indexOf("a")>-1||!function(e){let t=e[0];return"_"==t||t.toUpperCase()!=t}(n))&&!/ /.test(n)?n:null,h=null,c=0,u=!1,f=null,d=null;for(let r of e)if(r.at)if("name"==r.name)l=this.finishProp(r,i,s),/ /.test(l)&&this.raise(`Node names cannot have spaces ('${l}')`,r.start);else if("dialect"==r.name){t.indexOf("d")<0&&this.raise("Can't specify a dialect on non-token rules",e[0].start),1==r.value.length||r.value[0].value||this.raise("The '@dialect' rule prop must hold a plain string value");let n=this.dialects.indexOf(r.value[0].value);n<0&&this.raise(`Unknown dialect '${r.value[0].value}'`,r.value[0].start),h=n}else"dynamicPrecedence"==r.name?(t.indexOf("p")<0&&this.raise("Dynamic precedence can only be specified on nonterminals"),1==r.value.length&&/^-?(?:10|\d)$/.test(r.value[0].value)||this.raise("The '@dynamicPrecedence' rule prop must hold an integer between -10 and 10"),c=+r.value[0].value):"inline"==r.name?(r.value.length&&this.raise("'@inline' doesn't take a value",r.value[0].start),t.indexOf("i")<0&&this.raise("Inline can only be specified on nonterminals"),u=!0):"isGroup"==r.name?(t.indexOf("g")<0&&this.raise("'@isGroup' can only be specified on nonterminals"),f=r.value.length?this.finishProp(r,i,s):n):"export"==r.name?d=r.value.length?this.finishProp(r,i,s):n:this.raise(`Unknown built-in prop name '@${r.name}'`,r.start);else{if(!this.knownProps[r.name]){let e=["name","dialect","dynamicPrecedence","export","isGroup"].includes(r.name)?` (did you mean '@${r.name}'?)`:"";this.raise(`Unknown prop name '${r.name}'${e}`,r.start)}a[r.name]=this.finishProp(r,i,s)}if(r&&this.ast.autoDelim&&(l||Cn(a))){let e=this.findDelimiters(r);e&&(Xi(e[0],"closedBy",e[1].nodeName),Xi(e[1],"openedBy",e[0].nodeName))}if(o&&Cn(o))for(let e in o)e in a||(a[e]=o[e]);return Cn(a)&&!l&&this.raise("Node has properties but no name",e.length?e[0].start:r.start),u&&(Cn(a)||h||c)&&this.raise("Inline nodes can't have props, dynamic precedence, or a dialect",e[0].start),u&&l&&(l=null),{name:l,props:a,dialect:h,dynamicPrec:c,inline:u,group:f,exported:d}}finishProp(e,t,n){return e.value.map((e=>{if(e.value)return e.value;let i=n.findIndex((t=>t.name==e.name));i<0&&this.raise(`Property refers to '${e.name}', but no parameter by that name is in scope`,e.start);let s=t[i];return s instanceof rn&&!s.args.length?s.id.name:s instanceof fn?s.value:this.raise(`Expression '${s}' can not be used as part of a property value`,e.start)})).join("")}resolveSpecialization(e){let t,n=e.type,{name:i,props:s,dialect:r,exported:o}=this.nodeInfo(e.props,"d"),a=this.normalizeExpr(e.token);if(1==a.length&&1==a[0].terms.length&&a[0].terms[0].terminal||this.raise(`The first argument to '${n}' must resolve to a token`,e.token.start),e.content instanceof fn)t=[e.content.value];else{if(!(e.content instanceof ln&&e.content.exprs.every((e=>e instanceof fn))))return this.raise(`The second argument to '${e.type}' must be a literal or choice of literals`,e.content.start);t=e.content.exprs.map((e=>e.value))}let l=a[0].terms[0],h=null,c=this.specialized[l.name]||(this.specialized[l.name]=[]);for(let a of t){let t=c.find((e=>e.value==a));null==t?(h||(h=this.makeTerminal(l.name+"/"+JSON.stringify(a),i,s),null!=r&&(this.tokens.byDialect[r]||(this.tokens.byDialect[r]=[])).push(h)),c.push({value:a,term:h,type:n,dialect:r,name:i}),this.tokenOrigins[h.name]={spec:l},(i||o)&&(i||(h.preserve=!0),this.namedTerms[o||i]=h)):(t.type!=n&&this.raise(`Conflicting specialization types for ${JSON.stringify(a)} of ${l.name} (${n} vs ${t.type})`,e.start),t.dialect!=r&&this.raise(`Conflicting dialects for specialization ${JSON.stringify(a)} of ${l.name}`,e.start),t.name!=i&&this.raise(`Conflicting names for specialization ${JSON.stringify(a)} of ${l.name}`,e.start),h&&t.term!=h&&this.raise(`Conflicting specialization tokens for ${JSON.stringify(a)} of ${l.name}`,e.start),h=t.term)}return h}findDelimiters(e){if(!(e instanceof hn)||e.exprs.length<2)return null;let t=e=>{if(e instanceof fn)return{term:this.tokens.getLiteral(e),str:e.value};if(e instanceof rn&&0==e.args.length){let n=this.ast.rules.find((t=>t.id.name==e.id.name));if(n)return t(n.expr);let i=this.tokens.rules.find((t=>t.id.name==e.id.name));if(i&&i.expr instanceof fn)return{term:this.tokens.getToken(e),str:i.expr.value}}return null},n=t(e.exprs[e.exprs.length-1]);if(!n||!n.term.nodeName)return null;let i=["()","[]","{}","<>"].find((e=>n.str.indexOf(e[1])>-1&&n.str.indexOf(e[0])<0));if(!i)return null;let s=t(e.exprs[0]);return!s||!s.term.nodeName||s.str.indexOf(i[0])<0||s.str.indexOf(i[1])>-1?null:[s.term,n.term]}registerDynamicPrec(e,t){this.dynamicRulePrecedences.push({rule:e,prec:t}),e.preserve=!0}defineGroup(e,t,n){var i;let s=[],r=e=>{if(e.nodeName)return[e];s.includes(e)&&this.raise(`Rule '${n.id.name}' cannot define a group because it contains a non-named recursive rule ('${e.name}')`,n.start);let t=[];s.push(e);for(let i of this.rules)if(i.name==e){let e=i.parts.map(r).filter((e=>e.length));if(e.length>1&&this.raise(`Rule '${n.id.name}' cannot define a group because some choices produce multiple named nodes`,n.start),1==e.length)for(let n of e[0])t.push(n)}return s.pop(),t};for(let n of r(e))n.props.group=((null===(i=n.props.group)||void 0===i?void 0:i.split(" "))||[]).concat(t).sort().join(" ")}checkGroups(){let e=Object.create(null),t=Object.create(null);for(let n of this.terms.terms)if(n.nodeName&&(t[n.nodeName]=!0,n.props.group))for(let t of n.props.group.split(" "))(e[t]||(e[t]=[])).push(n);let n=Object.keys(e);for(let i=0;i<n.length;i++){let s=n[i],r=e[s];t[s]&&this.warn(`Group name '${s}' conflicts with a node of the same name`);for(let t=i+1;t<n.length;t++){let i=e[n[t]];r.some((e=>i.includes(e)))&&(r.length>i.length?i.some((e=>!r.includes(e))):r.some((e=>!i.includes(e))))&&this.warn(`Groups '${s}' and '${n[t]}' overlap without one being a superset of the other`)}}}}class Yi{constructor(e,t,n,i,s,r,o){this.tokenizers=e,this.data=t,this.stateArray=n,this.skipData=i,this.skipInfo=s,this.states=r,this.builder=o,this.sharedActions=[]}findSharedActions(e){if(e.actions.length<5)return null;let t=null;for(let n of this.sharedActions)(!t||n.actions.length>t.actions.length)&&n.actions.every((t=>e.actions.some((e=>e.eq(t)))))&&(t=n);if(t)return t;let n=null,i=[];for(let t=e.id+1;t<this.states.length;t++){let s=this.states[t],r=0;if(!(s.defaultReduce||s.actions.length<5)){for(let t of e.actions)for(let e of s.actions)t.eq(e)&&(i[r++]=t);r>=5&&(!n||n.length<r)&&(n=i,i=[])}}if(!n)return null;let s={actions:n,addr:this.storeActions(n,-1,null)};return this.sharedActions.push(s),s}storeActions(e,t,n){if(t<0&&n&&n.actions.length==e.length)return n.addr;let i=[];for(let s of e)if(!n||!n.actions.some((e=>e.eq(s))))if(s instanceof _i)i.push(s.term.id,s.target.id,0);else{let e=Zi(s.rule,this.skipInfo);e!=t&&i.push(s.term.id,65535&e,e>>16)}return i.push(65535),t>-1?i.push(2,65535&t,t>>16):n?i.push(1,65535&n.addr,n.addr>>16):i.push(0),this.data.storeArray(i)}finish(e,t,n){let i=this.builder,s=i.skipRules.indexOf(e.skip),r=this.skipData[s],o=this.skipInfo[s].startTokens,a=e.defaultReduce?Zi(e.defaultReduce,this.skipInfo):0,l=t?1:0,h=-1,c=null;if(0==a){if(t)for(const t of e.actions)t instanceof Ti&&t.term.eof&&(h=Zi(t.rule,this.skipInfo));h<0&&(c=this.findSharedActions(e))}e.set.some((e=>e.rule.name.top&&e.pos==e.rule.parts.length))&&(l|=2);let u=[];for(let t=0;t<e.actions.length+o.length;t++){let n=t<e.actions.length?e.actions[t].term:o[t-e.actions.length];for(;;){let e=i.tokenOrigins[n.name];if(!e||!e.spec){e&&e.external instanceof ws&&is(u,e.external);break}n=e.spec}}let f=0;for(let t=0;t<this.tokenizers.length;t++){let n=this.tokenizers[t];(u.includes(n)||n.groupID==e.tokenGroup)&&(f|=1<<t)}let d=6*e.id;this.stateArray[d+0]=l,this.stateArray[d+1]=this.storeActions(a?Wi:e.actions,h,c),this.stateArray[d+2]=r,this.stateArray[d+3]=f,this.stateArray[d+4]=a,this.stateArray[d+5]=n}}function Xi(e,t,n){let i=e.props[t];(!i||i.split(" ").indexOf(n)<0)&&(e.props[t]=i?i+" "+n:n)}function Qi(e){let t=Object.create(null);for(let{value:n,term:i,type:s}of e){let e="specialize"==s?0:1;t[n]=i.id<<1|e}return t}function Zi(e,t,n=e.parts.length){return 65536|e.name.id|(e.isRepeatWrap&&n==e.parts.length?131072:0)|(t.some((t=>t.rule==e.name))?262144:0)|n<<19}class es{constructor(){this.data=[]}storeArray(e){let t=function(e,t){e:for(let n=0;;){let i=e.indexOf(t[0],n);if(-1==i||i+t.length>e.length)break;for(let s=1;s<t.length;s++)if(t[s]!=e[i+s]){n=i+1;continue e}return i}return-1}(this.data,e);if(t>-1)return t;let n=this.data.length;for(let t of e)this.data.push(t);return n}finish(){return Uint16Array.from(this.data)}}function ts(e){let t={},n=0;for(let i of e)for(let e of i.goto){n=Math.max(e.term.id,n);let s=t[e.term.id]||(t[e.term.id]={});(s[e.target.id]||(s[e.target.id]=[])).push(i.id)}let i=new es,s=[],r=n+2;for(let e=0;e<=n;e++){let n=t[e];if(!n){s.push(1);continue}let o=[],a=Object.keys(n);for(let e of a){let t=n[e];o.push((e==a[a.length-1]?1:0)+(t.length<<1)),o.push(+e);for(let e of t)o.push(e)}s.push(i.storeArray(o)+r)}if(s.some((e=>e>65535)))throw new Sn("Goto table too large");return Uint16Array.from([n+1,...s,...i.data])}class ns{constructor(e,t){this.tokens=e,this.groupID=t}create(){return this.groupID}createSource(){return String(this.groupID)}}function is(e,t){e.includes(t)||e.push(t)}function ss(e){let t=Object.create(null);for(let n of e){let e=1<<n.groupID;for(let i of n.tokens)t[i.id]=(t[i.id]||0)|e}return t}class rs{constructor(e,t,n){this.name=e,this.expr=t,this.scope=n}}class os{constructor(e,t,n,i){this.name=e,this.start=t,this.to=n,this.args=i}}class as{constructor(e,t){this.b=e,this.ast=t,this.startState=new Fn,this.built=[],this.building=[],this.byDialect=Object.create(null),this.precedenceRelations=[],this.rules=t?t.rules:Wi;for(let t of this.rules)e.unique(t.id)}getToken(e){for(let t of this.built)if(t.matches(e))return t.term;let t=e.id.name,n=this.rules.find((e=>e.id.name==t));if(!n)return null;let{name:i,props:s,dialect:r,exported:o}=this.b.nodeInfo(n.props,"d",t,e.args,n.params.length!=e.args.length?Wi:n.params),a=this.b.makeTerminal(e.toString(),i,s);return null!=r&&(this.byDialect[r]||(this.byDialect[r]=[])).push(a),(a.nodeType||o)&&0==n.params.length&&(a.nodeType||(a.preserve=!0),this.b.namedTerms[o||t]=a),this.buildRule(n,e,this.startState,new Fn([a])),this.built.push(new Ki(t,e.args,a)),a}buildRule(e,t,n,i,s=Wi){let r=t.id.name;e.params.length!=t.args.length&&this.b.raise(`Incorrect number of arguments for token '${r}'`,t.start);let o=this.building.find((e=>e.name==r&&vn(t.args,e.args)));if(o){if(o.to==i)return void n.nullEdge(o.start);let e=this.building.length-1;for(;this.building[e].name!=r;)e--;this.b.raise(`Invalid (non-tail) recursion in token rules: ${this.building.slice(e).map((e=>e.name)).join(" -> ")}`,t.start)}this.b.used(e.id.name);let a=new Fn;n.nullEdge(a),this.building.push(new os(r,a,i,t.args)),this.build(this.b.substituteArgs(e.expr,t.args,e.params),a,i,t.args.map(((t,n)=>new rs(e.params[n].name,t,s)))),this.building.pop()}build(e,t,n,i){if(e instanceof rn){let s,r=e.id.name,o=i.find((e=>e.name==r));if(o)return this.build(o.expr,t,n,o.scope);for(let e=0,t=this.b.localTokens;e<=t.length&&(s=(e==t.length?this.b.tokens:t[e]).rules.find((e=>e.id.name==r)),!s);e++);if(!s)return this.b.raise(`Reference to token rule '${r}', which isn't found`,e.start);this.buildRule(s,e,t,n,i)}else if(e instanceof bn)for(let[i,s]of gn[e.type])t.edge(i,s,n);else if(e instanceof ln)for(let s of e.exprs)this.build(s,t,n,i);else if(bs(e))t.nullEdge(n);else if(e instanceof hn){let s=e.markers.find((e=>e.length>0));s&&this.b.raise("Conflict marker in token expression",s[0].start);for(let s=0;s<e.exprs.length;s++){let r=s==e.exprs.length-1?n:new Fn;this.build(e.exprs[s],t,r,i),t=r}}else if(e instanceof un)if("*"==e.kind){let s=new Fn;t.nullEdge(s),this.build(e.expr,s,s,i),s.nullEdge(n)}else if("+"==e.kind){let s=new Fn;this.build(e.expr,t,s,i),this.build(e.expr,s,s,i),s.nullEdge(n)}else t.nullEdge(n),this.build(e.expr,t,n,i);else if(e instanceof dn)for(let[i,s]of e.inverted?function(e){let t=0,n=[];for(let[i,s]of e)i>t&&n.push([t,i]),t=s;return t<=ds&&n.push([t,ds+1]),n}(e.ranges):e.ranges)gs(t,n,i,s);else if(e instanceof fn)for(let i=0;i<e.value.length;i++){let s=e.value.charCodeAt(i),r=i==e.value.length-1?n:new Fn;t.edge(s,s+1,r),t=r}else{if(!(e instanceof pn))return this.b.raise("Unrecognized expression type in token",e.start);{let e=new Fn;t.edge(0,56320,n),t.edge(56320,65536,n),t.edge(55296,56320,e),e.edge(56320,57344,n)}}}takePrecedences(){let e=this.precedenceRelations=[];if(this.ast)for(let t of this.ast.precedences){let n=[];for(let i of t.items){let t=[];if(i instanceof rn)for(let e of this.built)(i.args.length?e.matches(i):e.id==i.id.name)&&t.push(e.term);else{let e=JSON.stringify(i.value),n=this.built.find((t=>t.id==e));n&&t.push(n.term)}t.length||this.b.warn(`Precedence specified for unknown token ${i}`,i.start);for(let i of t)xs(e,i,n);n=n.concat(t)}}}precededBy(e,t){let n=this.precedenceRelations.find((t=>t.term==e));return n&&n.after.includes(t)}buildPrecTable(e){let t=[],n=this.precedenceRelations.slice();for(let{a:t,b:i,soft:s}of e)if(s){if(!n.some((e=>e.term==t))||!n.some((e=>e.term==i)))continue;s<0&&([t,i]=[i,t]),xs(n,i,[t]),xs(n,t,[])}e:for(;n.length;){for(let e=0;e<n.length;e++){let i=n[e];if(i.after.every((e=>t.includes(e.id)))){if(t.push(i.term.id),1==n.length)break e;n[e]=n.pop();continue e}}this.b.raise(`Cyclic token precedence relation between ${n.map((e=>e.term)).join(", ")}`)}return t}}class ls extends as{constructor(){super(...arguments),this.explicitConflicts=[]}getLiteral(e){let t=JSON.stringify(e.value);for(let e of this.built)if(e.id==t)return e.term;let n=null,i={},s=null,r=null,o=this.ast?this.ast.literals.find((t=>t.literal==e.value)):null;o&&({name:n,props:i,dialect:s,exported:r}=this.b.nodeInfo(o.props,"da",e.value));let a=this.b.makeTerminal(t,n,i);return null!=s&&(this.byDialect[s]||(this.byDialect[s]=[])).push(a),r&&(this.b.namedTerms[r]=a),this.build(e,this.startState,new Fn([a]),Wi),this.built.push(new Ki(t,Wi,a)),a}takeConflicts(){var e;let t=e=>{if(e instanceof rn){for(let t of this.built)if(t.matches(e))return t.term}else{let t=JSON.stringify(e.value),n=this.built.find((e=>e.id==t));if(n)return n.term}return this.b.warn(`Precedence specified for unknown token ${e}`,e.start),null};for(let n of(null===(e=this.ast)||void 0===e?void 0:e.conflicts)||[]){let e=t(n.a),i=t(n.b);e&&i&&(e.id<i.id&&([e,i]=[i,e]),this.explicitConflicts.push({a:e,b:i}))}}buildTokenGroups(e,t,n){let i=this.startState.compile();i.accepting.length&&this.b.raise(`Grammar contains zero-length tokens (in '${i.accepting[0].name}')`,this.rules.find((e=>e.id.name==i.accepting[0].name)).start),/\btokens\b/.test(yi)&&console.log(i.toString());let s=i.findConflicts(function(e,t,n){let i=Object.create(null);function s(e,i){return e.actions.some((e=>e.term==i))||n[t.skipRules.indexOf(e.skip)].startTokens.includes(i)}return(t,n)=>{t.id<n.id&&([t,n]=[n,t]);let r=t.id|n.id<<16,o=i[r];return null!=o?o:i[r]=e.some((e=>s(e,t)&&s(e,n)))}}(e,this.b,t)).filter((({a:e,b:t})=>!this.precededBy(e,t)&&!this.precededBy(t,e)));for(let{a:e,b:t}of this.explicitConflicts)s.some((n=>n.a==e&&n.b==t))||s.push(new $n(e,t,0,"",""));let r=s.filter((e=>e.soft)),o=s.filter((e=>!e.soft)),a=[],l=[];for(let i of e){if(i.defaultReduce||i.tokenGroup>-1)continue;let e=[],s=[],r=t[this.b.skipRules.indexOf(i.skip)].startTokens;for(let e of r)i.actions.some((t=>t.term==e))&&this.b.raise(`Use of token ${e.name} conflicts with skip rule`);let h=[];for(let e=0;e<i.actions.length+(r?r.length:0);e++){let t=e<i.actions.length?i.actions[e].term:r[e-i.actions.length],n=this.b.tokenOrigins[t.name];if(n&&n.spec)t=n.spec;else if(n&&n.external)continue;is(h,t)}if(0==h.length)continue;for(let t of h)for(let n of o){let r=n.a==t?n.b:n.b==t?n.a:null;if(r){if(h.includes(r)&&!a.some((e=>e.conflict==n))){let e=n.exampleA?` (example: ${JSON.stringify(n.exampleA)}${n.exampleB?` vs ${JSON.stringify(n.exampleB)}`:""})`:"";a.push({error:`Overlapping tokens ${t.name} and ${r.name} used in same context${e}\nAfter: ${i.set[0].trail()}`,conflict:n})}is(e,t),is(s,r)}}let c=null;for(let t of l)if(!s.some((e=>t.tokens.includes(e)))){for(let n of e)is(t.tokens,n);c=t;break}c||(c=new ns(e,l.length+n),l.push(c)),i.tokenGroup=c.groupID}a.length&&this.b.raise(a.map((e=>e.error)).join("\n\n")),l.length+n>16&&this.b.raise(`Too many different token groups (${l.length}) to represent them as a 16-bit bitfield`);let h=this.buildPrecTable(r);return{tokenGroups:l,tokenPrec:h,tokenData:i.toArray(ss(l),h)}}}class hs extends as{constructor(e,t){super(e,t),this.fallback=null,t.fallback&&e.unique(t.fallback.id)}getToken(e){let t=null;if(this.ast.fallback&&this.ast.fallback.id.name==e.id.name){if(e.args.length&&this.b.raise(`Incorrect number of arguments for ${e.id.name}`,e.start),!this.fallback){let{name:t,props:n,exported:i}=this.b.nodeInfo(this.ast.fallback.props,"",e.id.name,Wi,Wi),s=this.fallback=this.b.makeTerminal(e.id.name,t,n);(s.nodeType||i)&&(s.nodeType||(s.preserve=!0),this.b.namedTerms[i||e.id.name]=s),this.b.used(e.id.name)}t=this.fallback}else t=super.getToken(e);return t&&!this.b.tokenOrigins[t.name]&&(this.b.tokenOrigins[t.name]={group:this}),t}buildLocalGroup(e,t,n){let i=this.startState.compile();i.accepting.length&&this.b.raise(`Grammar contains zero-length tokens (in '${i.accepting[0].name}')`,this.rules.find((e=>e.id.name==i.accepting[0].name)).start);for(let{a:e,b:t,exampleA:n}of i.findConflicts((()=>!0)))this.precededBy(e,t)||this.precededBy(t,e)||this.b.raise(`Overlapping tokens ${e.name} and ${t.name} in local token group${n?` (example: ${JSON.stringify(n)})`:""}`);for(let i of e){if(i.defaultReduce)continue;let e=null,s=t[this.b.skipRules.indexOf(i.skip)].startTokens[0];for(let{term:t}of i.actions){let n=this.b.tokenOrigins[t.name];(null==n?void 0:n.group)==this?e=t:s=t}e&&(s&&this.b.raise(`Tokens from a local token group used together with other tokens (${e.name} with ${s.name})`),i.tokenGroup=n)}let s=this.buildPrecTable(Wi),r=i.toArray({[n]:65535},s),o=r.length,a=new Uint16Array(r.length+s.length+1);return a.set(r,0),a.set(s,o),a[a.length-1]=65535,{groupID:n,create:()=>new zt.uC(a,o,this.fallback?this.fallback.id:void 0),createSource:e=>`new ${e("LocalTokenGroup","@lezer/lr")}(${Vi(a)}, ${o}${this.fallback?`, ${this.fallback.id}`:""})`}}}const cs=65536,us=55296,fs=57344,ds=1114111,ps=56320,ms=57343;function gs(e,t,n,i){if(n<cs&&(n<us&&e.edge(n,Math.min(i,us),t),i>fs&&e.edge(Math.max(n,fs),Math.min(i,65536),t),n=cs),i<=cs)return;let s=String.fromCodePoint(n),r=String.fromCodePoint(i-1),o=s.charCodeAt(0),a=s.charCodeAt(1),l=r.charCodeAt(0),h=r.charCodeAt(1);if(o==l){let n=new Fn;e.edge(o,o+1,n),n.edge(a,h+1,t)}else{let n=o,i=l;if(a>ps){n++;let i=new Fn;e.edge(o,o+1,i),i.edge(a,ms+1,t)}if(h<ms){i--;let n=new Fn;e.edge(l,l+1,n),n.edge(ps,h+1,t)}if(n<=i){let s=new Fn;e.edge(n,i+1,s),s.edge(ps,ms+1,t)}}}function bs(e){return e instanceof hn&&0==e.exprs.length}function ys(e,t){let n=Object.create(null);for(let i of t){e.unique(i.id);let{name:t,props:s,dialect:r}=e.nodeInfo(i.props,"d",i.id.name),o=e.makeTerminal(i.id.name,t,s);null!=r&&(e.tokens.byDialect[r]||(e.tokens.byDialect[r]=[])).push(o),e.namedTerms[i.id.name]=n[i.id.name]=o}return n}function vs(e,t,n){let i=t[n.id.name];return i?(n.args.length&&e.raise("External tokens cannot take arguments",n.args[0].start),e.used(n.id.name),i):null}function xs(e,t,n){let i=e.findIndex((e=>e.term==t));i<0?e.push({term:t,after:n}):e[i]={term:t,after:e[i].after.concat(n)}}class ws{constructor(e,t){this.b=e,this.ast=t,this.tokens=ys(e,t.tokens);for(let e in this.tokens)this.b.tokenOrigins[this.tokens[e].name]={external:this}}getToken(e){return vs(this.b,this.tokens,e)}create(){return this.b.options.externalTokenizer(this.ast.id.name,this.b.termTable)}createSource(e){let{source:t,id:{name:n}}=this.ast;return e(n,t)}}class ks{constructor(e,t){this.b=e,this.ast=t,this.term=null,this.tokens=ys(e,t.tokens)}finish(){let e=this.b.normalizeExpr(this.ast.token);1==e.length&&1==e[0].terms.length&&e[0].terms[0].terminal||this.b.raise(`The token expression to '@external ${this.ast.type}' must resolve to a token`,this.ast.token.start),this.term=e[0].terms[0];for(let e in this.tokens)this.b.tokenOrigins[this.tokens[e].name]={spec:this.term,external:this}}getToken(e){return vs(this.b,this.tokens,e)}}function Ss(e,t={}){let n=new Ji(e,t),i=n.getParser();return i.termTable=n.termTable,i}const Cs=["await","break","case","catch","continue","debugger","default","do","else","finally","for","function","if","return","switch","throw","try","var","while","with","null","true","false","instanceof","typeof","void","delete","new","in","this","const","class","extends","export","import","super","enum","implements","interface","let","package","private","protected","public","static","yield","require"];function As(e){return e.props.some((e=>e.at&&"export"==e.name))}const Os=s.Lz.theme({"&":{background:"var(--jp-layout-color0)",color:"var(--jp-content-font-color1)"},".jp-CodeConsole &, .jp-Notebook &":{background:"transparent"},".cm-content":{caretColor:"var(--jp-editor-cursor-color)"},".cm-scroller":{fontFamily:"inherit"},".cm-cursor, .cm-dropCursor":{borderLeft:"var(--jp-code-cursor-width0) solid var(--jp-editor-cursor-color)"},".cm-selectionBackground, .cm-content ::selection":{backgroundColor:"var(--jp-editor-selected-background)"},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{backgroundColor:"var(--jp-editor-selected-focused-background)"},".cm-gutters":{borderRight:"1px solid var(--jp-border-color2)",backgroundColor:"var(--jp-layout-color2)"},".cm-gutter":{backgroundColor:"var(--jp-layout-color2)"},".cm-activeLine":{backgroundColor:"color-mix(in srgb, var(--jp-layout-color3) 25%, transparent)"},".cm-lineNumbers":{color:"var(--jp-ui-font-color2)"},".cm-searchMatch":{backgroundColor:"var(--jp-search-unselected-match-background-color)",color:"var(--jp-search-unselected-match-color)"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"var(--jp-search-selected-match-background-color) !important",color:"var(--jp-search-selected-match-color) !important"},".cm-tooltip":{backgroundColor:"var(--jp-layout-color1)"},".cm-builtin":{color:"var(--jp-mirror-editor-builtin-color)"}}),Ms=r.cr.define([{tag:De._A.meta,color:"var(--jp-mirror-editor-meta-color)"},{tag:De._A.heading,color:"var(--jp-mirror-editor-header-color)"},{tag:[De._A.heading1,De._A.heading2,De._A.heading3,De._A.heading4],color:"var(--jp-mirror-editor-header-color)",fontWeight:"bold"},{tag:De._A.keyword,color:"var(--jp-mirror-editor-keyword-color)",fontWeight:"bold"},{tag:De._A.atom,color:"var(--jp-mirror-editor-atom-color)"},{tag:De._A.number,color:"var(--jp-mirror-editor-number-color)"},{tag:[De._A.definition(De._A.name),De._A.function(De._A.definition(De._A.variableName))],color:"var(--jp-mirror-editor-def-color)"},{tag:De._A.standard(De._A.variableName),color:"var(--jp-mirror-editor-builtin-color)"},{tag:[De._A.special(De._A.variableName),De._A.self],color:"var(--jp-mirror-editor-variable-2-color)"},{tag:De._A.punctuation,color:"var(--jp-mirror-editor-punctuation-color)"},{tag:De._A.propertyName,color:"var(--jp-mirror-editor-property-color)"},{tag:De._A.operator,color:"var(--jp-mirror-editor-operator-color)",fontWeight:"bold"},{tag:De._A.comment,color:"var(--jp-mirror-editor-comment-color)",fontStyle:"italic"},{tag:De._A.string,color:"var(--jp-mirror-editor-string-color)"},{tag:[De._A.labelName,De._A.monospace,De._A.special(De._A.string)],color:"var(--jp-mirror-editor-string-2-color)"},{tag:De._A.bracket,color:"var(--jp-mirror-editor-bracket-color)"},{tag:De._A.tagName,color:"var(--jp-mirror-editor-tag-color)"},{tag:De._A.attributeName,color:"var(--jp-mirror-editor-attribute-color)"},{tag:De._A.quote,color:"var(--jp-mirror-editor-quote-color)"},{tag:De._A.link,color:"var(--jp-mirror-editor-link-color)",textDecoration:"underline"},{tag:[De._A.separator,De._A.derefOperator,De._A.paren],color:""},{tag:De._A.strong,fontWeight:"bold"},{tag:De._A.emphasis,fontStyle:"italic"},{tag:De._A.strikethrough,textDecoration:"line-through"},{tag:De._A.bool,color:"var(--jp-mirror-editor-keyword-color)",fontWeight:"bold"}]),_s=[Os,(0,r.y9)(Ms)];class Ts{constructor(){this._themeMap=new Map([["jupyter",Object.freeze({name:"jupyter",theme:_s})]])}get themes(){return Array.from(this._themeMap.values())}defaultTheme(){return this._themeMap.get("jupyter").theme}addTheme(e){if(this._themeMap.has(e.name))throw new Error(`A theme named '${e.name}' is already registered.`);this._themeMap.set(e.name,{displayName:e.name,...e})}getTheme(e){var t;const n=null===(t=this._themeMap.get(e))||void 0===t?void 0:t.theme;return null!=n?n:this.defaultTheme()}}!function(e){e.getDefaultThemes=function(e){const t=(null!=e?e:Te.wK).load("jupyterlab");return[Object.freeze({name:"codemirror",displayName:t.__("codemirror"),theme:[s.Lz.baseTheme({}),(0,r.y9)(r.Zt)]})]}}(Ts||(Ts={}));class Es{constructor(e,t){this.langPython=t,this.tree=(0,r.mv)(e.state),this.mark=s.NZ.mark({class:"cm-builtin"}),this.decorations=this.buildDeco(e),this.decoratedTo=e.viewport.to}update(e){let t=(0,r.mv)(e.state),{viewport:n}=e.view,i=e.changes.mapPos(this.decoratedTo,1);t.length<n.to&&t.type==this.tree.type&&i>=n.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=i):(t!=this.tree||e.viewportChanged)&&(this.tree=t,this.decorations=this.buildDeco(e.view),this.decoratedTo=n.to)}buildDeco(e){if(!this.tree.length)return s.NZ.none;let t=new i.vB;const n=i=>{var s;const r=i.node.cursor(),a=r.tree&&r.tree.prop(o.uY.mounted);if(a&&a.overlay&&(null===(s=i.node.enter(a.overlay[0].from+i.from,1))||void 0===s||s.cursor().iterate(n)),this.langPython.isActiveAt(e.state,i.from+1)&&"VariableName"===i.name){const n=e.state.sliceDoc(i.from,i.to);Ds.includes(n)&&t.add(i.from,i.to,this.mark)}};for(let{from:t,to:i}of e.visibleRanges)this.tree.iterate({enter:n,from:t,to:i});return t.finish()}}function Ns(e){return s.Z9.define((t=>new Es(t,e)),{decorations:e=>e.decorations})}const Ds=["abs","aiter","all","any","anext","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip","__import__"];class Ps{constructor(){this._modeList=[],this.addLanguage({name:"none",mime:"text/plain",support:new r.Yy(r.bj.define({parser:Ss("@top Program { }")}))})}addLanguage(e){var t;if(null!==(t=this.findByName(e.name))&&void 0!==t?t:this.findByMIME(e.mime,!0))throw new Error(`${e.mime} already registered`);this._modeList.push(this.makeSpec(e))}async getLanguage(e){const t=this.findBest(e);return t&&!t.support&&(t.support=await t.load()),t}getLanguages(){return[...this._modeList]}findByMIME(e,t=!1){if(Array.isArray(e)){for(let t=0;t<e.length;t++){const n=this.findByMIME(e[t]);if(n)return n}return null}e=e.toLowerCase();for(let t=0;t<this._modeList.length;t++){let n=this._modeList[t];if(Array.isArray(n.mime)){for(let t=0;t<n.mime.length;t++)if(n.mime[t]==e)return n}else if(n.mime==e)return n}if(!t){if(/\+xml$/.test(e))return this.findByMIME("application/xml");if(/\+json$/.test(e))return this.findByMIME("application/json")}return null}findByName(e){e=e.toLowerCase();for(let t=0;t<this._modeList.length;t++){let n=this._modeList[t];if(n.name.toLowerCase()==e)return n;if(n.alias)for(let t=0;t<n.alias.length;t++)if(n.alias[t].toLowerCase()==e)return n}return null}findByExtension(e){if(Array.isArray(e)){for(let t=0;t<e.length;t++){const n=this.findByExtension(e[t]);if(n)return n}return null}e=e.toLowerCase();for(let t=0;t<this._modeList.length;t++){let n=this._modeList[t];for(let t=0;t<n.extensions.length;t++)if(n.extensions[t].toLowerCase()==e)return n}return null}findByFileName(e){const t=$t.PathExt.basename(e);for(let e=0;e<this._modeList.length;e++){let n=this._modeList[e];if(n.filename&&n.filename.test(t))return n}let n=t.lastIndexOf("."),i=n>-1&&t.substring(n+1,t.length);return i?this.findByExtension(i):null}findBest(e,t=!0){var n,i,s,r;const o="string"==typeof e?e:e.name,a="string"!=typeof e?e.mime:o,l="string"!=typeof e&&null!==(n=e.extensions)&&void 0!==n?n:[];return null!==(r=null!==(s=null!==(i=o?this.findByName(o):null)&&void 0!==i?i:a?this.findByMIME(a):null)&&void 0!==s?s:this.findByExtension(l))&&void 0!==r?r:t?this.findByMIME(Ft.defaultMimeType):null}async highlight(e,t,n){var i;t&&await this.getLanguage(t);const s=null===(i=null==t?void 0:t.support)||void 0===i?void 0:i.language;if(!s)return void n.appendChild(document.createTextNode(e));const r=s.parser.parse(e);let o=0;(0,De.DM)(r,Ms,((t,i,s)=>{t>o&&n.appendChild(document.createTextNode(e.slice(o,t)));const r=n.appendChild(document.createElement("span"));r.className=s,r.appendChild(document.createTextNode(e.slice(t,i))),o=i})),o<r.length-1&&n.appendChild(document.createTextNode(e.slice(o,r.length)))}makeSpec(e){let t=r.t$.of(e);return t.mime=e.mime,t.displayName=e.displayName,t}}var Rs,js;!function(e){function t(e){return new r.Yy(r.Tg.define(e))}async function i(e){const t=await n.e(3726).then(n.bind(n,43726));return t.sql({dialect:t[e]})}e.legacy=t,e.getDefaultLanguages=function(e){const s=(null!=e?e:Te.wK).load("jupyterlab");return[{name:"C",displayName:s.__("C"),mime:"text/x-csrc",extensions:["c","h","ino"],load:async()=>(await n.e(6446).then(n.bind(n,76446))).cpp()},{name:"C++",displayName:s.__("C++"),mime:"text/x-c++src",extensions:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],load:async()=>(await n.e(6446).then(n.bind(n,76446))).cpp()},{name:"CQL",displayName:s.__("CQL"),mime:"text/x-cassandra",extensions:["cql"],load:()=>i("Cassandra")},{name:"CSS",displayName:s.__("CSS"),mime:"text/css",extensions:["css"],load:async()=>(await n.e(4448).then(n.bind(n,14448))).css()},{name:"HTML",displayName:s.__("HTML"),alias:["xhtml"],mime:"text/html",extensions:["html","htm","handlebars","hbs"],load:async()=>(await Promise.all([n.e(2e3),n.e(4448),n.e(3242)]).then(n.bind(n,53242))).html()},{name:"Java",displayName:s.__("Java"),mime:"text/x-java",extensions:["java"],load:async()=>(await n.e(1302).then(n.bind(n,31302))).java()},{name:"Javascript",displayName:s.__("Javascript"),alias:["ecmascript","js","node"],mime:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],extensions:["js","mjs","cjs"],load:async()=>(await n.e(2e3).then(n.bind(n,62e3))).javascript()},{name:"JSON",displayName:s.__("JSON"),alias:["json5"],mime:["application/json","application/x-json"],extensions:["json","map"],load:async()=>(await n.e(6367).then(n.bind(n,66367))).json()},{name:"JSX",displayName:s.__("JSX"),mime:"text/jsx",extensions:["jsx"],load:async()=>(await n.e(2e3).then(n.bind(n,62e3))).javascript({jsx:!0})},{name:"MariaDB SQL",displayName:s.__("MariaDB SQL"),mime:"text/x-mariadb",load:()=>i("MariaSQL")},{name:"Markdown",displayName:s.__("Markdown"),mime:"text/x-markdown",extensions:["md","markdown","mkd"],async load(){return(await Promise.all([n.e(2e3),n.e(4448),n.e(3242),n.e(1081)]).then(n.bind(n,71081))).markdown({codeLanguages:this._modeList})}},{name:"MS SQL",displayName:s.__("MS SQL"),mime:"text/x-mssql",load:()=>i("MSSQL")},{name:"MySQL",displayName:s.__("MySQL"),mime:"text/x-mysql",load:()=>i("MySQL")},{name:"PHP",displayName:s.__("PHP"),mime:["text/x-php","application/x-httpd-php","application/x-httpd-php-open"],extensions:["php","php3","php4","php5","php7","phtml"],load:async()=>(await Promise.all([n.e(2e3),n.e(4448),n.e(3242),n.e(3543)]).then(n.bind(n,93543))).php()},{name:"PLSQL",displayName:s.__("PLSQL"),mime:"text/x-plsql",extensions:["pls"],load:()=>i("PLSQL")},{name:"PostgreSQL",displayName:s.__("PostgreSQL"),mime:"text/x-pgsql",load:()=>i("PostgreSQL")},{name:"Python",displayName:s.__("Python"),mime:"text/x-python",extensions:["BUILD","bzl","py","pyw"],filename:/^(BUCK|BUILD)$/,async load(){const e=await n.e(2376).then(n.bind(n,52376));return new r.Yy(e.pythonLanguage,Ns(e.pythonLanguage))}},{name:"ipython",displayName:s.__("ipython"),mime:"text/x-ipython",async load(){const e=await n.e(2376).then(n.bind(n,52376));return new r.Yy(e.pythonLanguage,Ns(e.pythonLanguage))}},{name:"Rust",displayName:s.__("Rust"),mime:"text/x-rustsrc",extensions:["rs"],load:async()=>(await n.e(142).then(n.bind(n,60142))).rust()},{name:"SQL",displayName:s.__("SQL"),mime:["application/sql","text/x-sql"],extensions:["sql"],load:()=>i("StandardSQL")},{name:"SQLite",displayName:s.__("SQLite"),mime:"text/x-sqlite",load:()=>i("SQLite")},{name:"TSX",displayName:s.__("TSX"),alias:["TypeScript-JSX"],mime:"text/typescript-jsx",extensions:["tsx"],load:async()=>(await n.e(2e3).then(n.bind(n,62e3))).javascript({jsx:!0,typescript:!0})},{name:"TypeScript",displayName:s.__("TypeScript"),alias:["ts"],mime:"application/typescript",extensions:["ts"],load:async()=>(await n.e(2e3).then(n.bind(n,62e3))).javascript({typescript:!0})},{name:"WebAssembly",displayName:s.__("WebAssembly"),mime:"text/webassembly",extensions:["wat","wast"],load:async()=>(await n.e(8665).then(n.bind(n,48665))).wast()},{name:"XML",displayName:s.__("XML"),alias:["rss","wsdl","xsd"],mime:["application/xml","text/xml"],extensions:["xml","xsl","xsd","svg"],load:async()=>(await n.e(3426).then(n.bind(n,53426))).xml()},{name:"APL",displayName:s.__("APL"),mime:"text/apl",extensions:["dyalog","apl"],load:async()=>t((await n.e(5351).then(n.bind(n,55351))).apl)},{name:"PGP",displayName:s.__("PGP"),alias:["asciiarmor"],mime:["application/pgp","application/pgp-encrypted","application/pgp-keys","application/pgp-signature"],extensions:["asc","pgp","sig"],load:async()=>t((await n.e(6292).then(n.bind(n,46292))).asciiArmor)},{name:"ASN.1",displayName:s.__("ASN.1"),mime:"text/x-ttcn-asn",extensions:["asn","asn1"],load:async()=>t((await n.e(7727).then(n.bind(n,77727))).asn1({}))},{name:"Asterisk",displayName:s.__("Asterisk"),mime:"text/x-asterisk",filename:/^extensions\.conf$/i,load:async()=>t((await n.e(2682).then(n.bind(n,92682))).asterisk)},{name:"Brainfuck",displayName:s.__("Brainfuck"),mime:"text/x-brainfuck",extensions:["b","bf"],load:async()=>t((await n.e(8955).then(n.bind(n,68955))).brainfuck)},{name:"Cobol",displayName:s.__("Cobol"),mime:"text/x-cobol",extensions:["cob","cpy"],load:async()=>t((await n.e(5595).then(n.bind(n,35595))).cobol)},{name:"C#",displayName:s.__("C#"),alias:["csharp","cs"],mime:"text/x-csharp",extensions:["cs"],load:async()=>t((await n.e(3722).then(n.bind(n,3722))).csharp)},{name:"Clojure",displayName:s.__("Clojure"),mime:"text/x-clojure",extensions:["clj","cljc","cljx"],load:async()=>t((await n.e(3024).then(n.bind(n,73024))).clojure)},{name:"ClojureScript",displayName:s.__("ClojureScript"),mime:"text/x-clojurescript",extensions:["cljs"],load:async()=>t((await n.e(3024).then(n.bind(n,73024))).clojure)},{name:"Closure Stylesheets (GSS)",displayName:s.__("Closure Stylesheets (GSS)"),mime:"text/x-gss",extensions:["gss"],load:async()=>t((await n.e(5687).then(n.bind(n,45687))).gss)},{name:"CMake",displayName:s.__("CMake"),mime:"text/x-cmake",extensions:["cmake","cmake.in"],filename:/^CMakeLists\.txt$/,load:async()=>t((await n.e(7951).then(n.bind(n,87951))).cmake)},{name:"CoffeeScript",displayName:s.__("CoffeeScript"),alias:["coffee","coffee-script"],mime:["application/vnd.coffeescript","text/coffeescript","text/x-coffeescript"],extensions:["coffee"],load:async()=>t((await n.e(8137).then(n.bind(n,98137))).coffeeScript)},{name:"Common Lisp",displayName:s.__("Common Lisp"),alias:["lisp"],mime:"text/x-common-lisp",extensions:["cl","lisp","el"],load:async()=>t((await n.e(5455).then(n.bind(n,45455))).commonLisp)},{name:"Cypher",displayName:s.__("Cypher"),mime:"application/x-cypher-query",extensions:["cyp","cypher"],load:async()=>t((await n.e(4501).then(n.bind(n,4501))).cypher)},{name:"Cython",displayName:s.__("Cython"),mime:"text/x-cython",extensions:["pyx","pxd","pxi"],load:async()=>t((await n.e(5260).then(n.bind(n,15260))).cython)},{name:"Crystal",displayName:s.__("Crystal"),mime:"text/x-crystal",extensions:["cr"],load:async()=>t((await n.e(5258).then(n.bind(n,95258))).crystal)},{name:"D",displayName:s.__("D"),mime:"text/x-d",extensions:["d"],load:async()=>t((await n.e(4424).then(n.bind(n,74424))).d)},{name:"Dart",displayName:s.__("Dart"),mime:["application/dart","text/x-dart"],extensions:["dart"],load:async()=>t((await n.e(3722).then(n.bind(n,3722))).dart)},{name:"diff",displayName:s.__("diff"),mime:"text/x-diff",extensions:["diff","patch"],load:async()=>t((await n.e(8421).then(n.bind(n,88421))).diff)},{name:"Dockerfile",displayName:s.__("Dockerfile"),mime:"text/x-dockerfile",filename:/^Dockerfile$/,load:async()=>t((await n.e(6240).then(n.bind(n,36240))).dockerFile)},{name:"DTD",displayName:s.__("DTD"),mime:"application/xml-dtd",extensions:["dtd"],load:async()=>t((await n.e(4872).then(n.bind(n,4872))).dtd)},{name:"Dylan",displayName:s.__("Dylan"),mime:"text/x-dylan",extensions:["dylan","dyl","intr"],load:async()=>t((await n.e(8586).then(n.bind(n,98586))).dylan)},{name:"EBNF",displayName:s.__("EBNF"),mime:"text/x-ebnf",load:async()=>t((await n.e(1653).then(n.bind(n,71653))).ebnf)},{name:"ECL",displayName:s.__("ECL"),mime:"text/x-ecl",extensions:["ecl"],load:async()=>t((await n.e(8820).then(n.bind(n,28820))).ecl)},{name:"edn",displayName:s.__("edn"),mime:"application/edn",extensions:["edn"],load:async()=>t((await n.e(3024).then(n.bind(n,73024))).clojure)},{name:"Eiffel",displayName:s.__("Eiffel"),mime:"text/x-eiffel",extensions:["e"],load:async()=>t((await n.e(7077).then(n.bind(n,27077))).eiffel)},{name:"Elm",displayName:s.__("Elm"),mime:"text/x-elm",extensions:["elm"],load:async()=>t((await n.e(4704).then(n.bind(n,94704))).elm)},{name:"Erlang",displayName:s.__("Erlang"),mime:"text/x-erlang",extensions:["erl"],load:async()=>t((await n.e(29).then(n.bind(n,60029))).erlang)},{name:"Esper",displayName:s.__("Esper"),mime:"text/x-esper",load:async()=>t((await n.e(6828).then(n.bind(n,16828))).esper)},{name:"Factor",displayName:s.__("Factor"),mime:"text/x-factor",extensions:["factor"],load:async()=>t((await n.e(5945).then(n.bind(n,5945))).factor)},{name:"FCL",displayName:s.__("FCL"),mime:"text/x-fcl",load:async()=>t((await n.e(2681).then(n.bind(n,62681))).fcl)},{name:"Forth",displayName:s.__("Forth"),mime:"text/x-forth",extensions:["forth","fth","4th"],load:async()=>t((await n.e(899).then(n.bind(n,50899))).forth)},{name:"Fortran",displayName:s.__("Fortran"),mime:"text/x-fortran",extensions:["f","for","f77","f90","f95"],load:async()=>t((await n.e(6742).then(n.bind(n,76742))).fortran)},{name:"F#",displayName:s.__("F#"),alias:["fsharp"],mime:"text/x-fsharp",extensions:["fs"],load:async()=>t((await n.e(252).then(n.bind(n,252))).fSharp)},{name:"Gas",displayName:s.__("Gas"),mime:"text/x-gas",extensions:["s"],load:async()=>t((await n.e(2293).then(n.bind(n,82293))).gas)},{name:"Gherkin",displayName:s.__("Gherkin"),mime:"text/x-feature",extensions:["feature"],load:async()=>t((await n.e(8334).then(n.bind(n,8334))).gherkin)},{name:"Go",displayName:s.__("Go"),mime:"text/x-go",extensions:["go"],load:async()=>t((await n.e(1408).then(n.bind(n,61408))).go)},{name:"Groovy",displayName:s.__("Groovy"),mime:"text/x-groovy",extensions:["groovy","gradle"],filename:/^Jenkinsfile$/,load:async()=>t((await n.e(5292).then(n.bind(n,25292))).groovy)},{name:"Haskell",displayName:s.__("Haskell"),mime:"text/x-haskell",extensions:["hs"],load:async()=>t((await n.e(7220).then(n.bind(n,27220))).haskell)},{name:"Haxe",displayName:s.__("Haxe"),mime:"text/x-haxe",extensions:["hx"],load:async()=>t((await n.e(9602).then(n.bind(n,59602))).haxe)},{name:"HXML",displayName:s.__("HXML"),mime:"text/x-hxml",extensions:["hxml"],load:async()=>t((await n.e(9602).then(n.bind(n,59602))).hxml)},{name:"HTTP",displayName:s.__("HTTP"),mime:"message/http",load:async()=>t((await n.e(9638).then(n.bind(n,49638))).http)},{name:"IDL",displayName:s.__("IDL"),mime:"text/x-idl",extensions:["pro"],load:async()=>t((await n.e(4451).then(n.bind(n,34451))).idl)},{name:"JSON-LD",displayName:s.__("JSON-LD"),alias:["jsonld"],mime:"application/ld+json",extensions:["jsonld"],load:async()=>t((await n.e(7197).then(n.bind(n,37197))).jsonld)},{name:"Jinja2",displayName:s.__("Jinja2"),mime:"text/jinja2",extensions:["j2","jinja","jinja2"],load:async()=>t((await n.e(636).then(n.bind(n,70636))).jinja2)},{name:"Julia",displayName:s.__("Julia"),mime:"text/x-julia",extensions:["jl"],load:async()=>t((await n.e(5525).then(n.bind(n,15525))).julia)},{name:"Kotlin",displayName:s.__("Kotlin"),mime:"text/x-kotlin",extensions:["kt"],load:async()=>t((await n.e(3722).then(n.bind(n,3722))).kotlin)},{name:"LESS",displayName:s.__("LESS"),mime:"text/x-less",extensions:["less"],load:async()=>t((await n.e(5687).then(n.bind(n,45687))).less)},{name:"LiveScript",displayName:s.__("LiveScript"),alias:["ls"],mime:"text/x-livescript",extensions:["ls"],load:async()=>t((await n.e(7911).then(n.bind(n,17911))).liveScript)},{name:"Lua",displayName:s.__("Lua"),mime:"text/x-lua",extensions:["lua"],load:async()=>t((await n.e(6162).then(n.bind(n,96162))).lua)},{name:"mIRC",displayName:s.__("mIRC"),mime:"text/mirc",load:async()=>t((await n.e(567).then(n.bind(n,60567))).mirc)},{name:"Mathematica",displayName:s.__("Mathematica"),mime:"text/x-mathematica",extensions:["m","nb","wl","wls"],load:async()=>t((await n.e(1524).then(n.bind(n,11524))).mathematica)},{name:"Modelica",displayName:s.__("Modelica"),mime:"text/x-modelica",extensions:["mo"],load:async()=>t((await n.e(8678).then(n.bind(n,48678))).modelica)},{name:"MUMPS",displayName:s.__("MUMPS"),mime:"text/x-mumps",extensions:["mps"],load:async()=>t((await n.e(560).then(n.bind(n,70560))).mumps)},{name:"mbox",displayName:s.__("mbox"),mime:"application/mbox",extensions:["mbox"],load:async()=>t((await n.e(9114).then(n.bind(n,19114))).mbox)},{name:"Nginx",displayName:s.__("Nginx"),mime:"text/x-nginx-conf",filename:/nginx.*\.conf$/i,load:async()=>t((await n.e(3180).then(n.bind(n,33180))).nginx)},{name:"NSIS",displayName:s.__("NSIS"),mime:"text/x-nsis",extensions:["nsh","nsi"],load:async()=>t((await n.e(357).then(n.bind(n,80357))).nsis)},{name:"NTriples",displayName:s.__("NTriples"),mime:["application/n-triples","application/n-quads","text/n-triples"],extensions:["nt","nq"],load:async()=>t((await n.e(1001).then(n.bind(n,51001))).ntriples)},{name:"Objective-C",displayName:s.__("Objective-C"),alias:["objective-c","objc"],mime:"text/x-objectivec",extensions:["m"],load:async()=>t((await n.e(3722).then(n.bind(n,3722))).objectiveC)},{name:"Objective-C++",displayName:s.__("Objective-C++"),alias:["objective-c++","objc++"],mime:"text/x-objectivec++",extensions:["mm"],load:async()=>t((await n.e(3722).then(n.bind(n,3722))).objectiveCpp)},{name:"OCaml",displayName:s.__("OCaml"),mime:"text/x-ocaml",extensions:["ml","mli","mll","mly"],load:async()=>t((await n.e(252).then(n.bind(n,252))).oCaml)},{name:"Octave",displayName:s.__("Octave"),mime:"text/x-octave",extensions:["m"],load:async()=>t((await n.e(7486).then(n.bind(n,7486))).octave)},{name:"Oz",displayName:s.__("Oz"),mime:"text/x-oz",extensions:["oz"],load:async()=>t((await n.e(8539).then(n.bind(n,88539))).oz)},{name:"Pascal",displayName:s.__("Pascal"),mime:"text/x-pascal",extensions:["p","pas"],load:async()=>t((await n.e(1374).then(n.bind(n,21374))).pascal)},{name:"Perl",displayName:s.__("Perl"),mime:"text/x-perl",extensions:["pl","pm"],load:async()=>t((await n.e(3191).then(n.bind(n,33191))).perl)},{name:"Pig",displayName:s.__("Pig"),mime:"text/x-pig",extensions:["pig"],load:async()=>t((await n.e(8188).then(n.bind(n,58188))).pig)},{name:"PowerShell",displayName:s.__("PowerShell"),mime:"application/x-powershell",extensions:["ps1","psd1","psm1"],load:async()=>t((await n.e(8727).then(n.bind(n,8727))).powerShell)},{name:"Properties files",displayName:s.__("Properties files"),alias:["ini","properties"],mime:"text/x-properties",extensions:["properties","ini","in"],load:async()=>t((await n.e(6099).then(n.bind(n,6099))).properties)},{name:"ProtoBuf",displayName:s.__("ProtoBuf"),mime:"text/x-protobuf",extensions:["proto"],load:async()=>t((await n.e(6473).then(n.bind(n,96473))).protobuf)},{name:"Puppet",displayName:s.__("Puppet"),mime:"text/x-puppet",extensions:["pp"],load:async()=>t((await n.e(7364).then(n.bind(n,87364))).puppet)},{name:"Q",displayName:s.__("Q"),mime:"text/x-q",extensions:["q"],load:async()=>t((await n.e(5515).then(n.bind(n,95515))).q)},{name:"R",displayName:s.__("R"),alias:["rscript"],mime:"text/x-rsrc",extensions:["r","R"],load:async()=>t((await n.e(7838).then(n.bind(n,67838))).r)},{name:"RPM Changes",displayName:s.__("RPM Changes"),mime:"text/x-rpm-changes",load:async()=>t((await n.e(4401).then(n.bind(n,34401))).rpmChanges)},{name:"RPM Spec",displayName:s.__("RPM Spec"),mime:"text/x-rpm-spec",extensions:["spec"],load:async()=>t((await n.e(4401).then(n.bind(n,34401))).rpmSpec)},{name:"Ruby",displayName:s.__("Ruby"),alias:["jruby","macruby","rake","rb","rbx"],mime:"text/x-ruby",extensions:["rb"],load:async()=>t((await n.e(5350).then(n.bind(n,75350))).ruby)},{name:"SAS",displayName:s.__("SAS"),mime:"text/x-sas",extensions:["sas"],load:async()=>t((await n.e(1553).then(n.bind(n,1553))).sas)},{name:"Scala",displayName:s.__("Scala"),mime:"text/x-scala",extensions:["scala"],load:async()=>t((await n.e(3722).then(n.bind(n,3722))).scala)},{name:"Scheme",displayName:s.__("Scheme"),mime:"text/x-scheme",extensions:["scm","ss"],load:async()=>t((await n.e(1405).then(n.bind(n,21405))).scheme)},{name:"SCSS",displayName:s.__("SCSS"),mime:"text/x-scss",extensions:["scss"],load:async()=>t((await n.e(5687).then(n.bind(n,45687))).sCSS)},{name:"Shell",displayName:s.__("Shell"),alias:["bash","sh","zsh"],mime:["text/x-sh","application/x-sh"],extensions:["sh","ksh","bash"],filename:/^PKGBUILD$/,load:async()=>t((await n.e(4922).then(n.bind(n,94922))).shell)},{name:"Sieve",displayName:s.__("Sieve"),mime:"application/sieve",extensions:["siv","sieve"],load:async()=>t((await n.e(1066).then(n.bind(n,11066))).sieve)},{name:"Smalltalk",displayName:s.__("Smalltalk"),mime:"text/x-stsrc",extensions:["st"],load:async()=>t((await n.e(9981).then(n.bind(n,19981))).smalltalk)},{name:"Solr",displayName:s.__("Solr"),mime:"text/x-solr",load:async()=>t((await n.e(5106).then(n.bind(n,35106))).solr)},{name:"SML",displayName:s.__("SML"),mime:"text/x-sml",extensions:["sml","sig","fun","smackspec"],load:async()=>t((await n.e(252).then(n.bind(n,252))).sml)},{name:"SPARQL",displayName:s.__("SPARQL"),alias:["sparul"],mime:"application/sparql-query",extensions:["rq","sparql"],load:async()=>t((await n.e(8391).then(n.bind(n,38391))).sparql)},{name:"Spreadsheet",displayName:s.__("Spreadsheet"),alias:["excel","formula"],mime:"text/x-spreadsheet",load:async()=>t((await n.e(786).then(n.bind(n,40786))).spreadsheet)},{name:"Squirrel",displayName:s.__("Squirrel"),mime:"text/x-squirrel",extensions:["nut"],load:async()=>t((await n.e(3722).then(n.bind(n,3722))).squirrel)},{name:"Stylus",displayName:s.__("Stylus"),mime:"text/x-styl",extensions:["styl"],load:async()=>t((await n.e(4756).then(n.bind(n,54756))).stylus)},{name:"Swift",displayName:s.__("Swift"),mime:"text/x-swift",extensions:["swift"],load:async()=>t((await n.e(647).then(n.bind(n,647))).swift)},{name:"sTeX",displayName:s.__("sTeX"),mime:"text/x-stex",load:async()=>t((await n.e(3220).then(n.bind(n,33220))).stex)},{name:"LaTeX",displayName:s.__("LaTeX"),alias:["tex"],mime:"text/x-latex",extensions:["text","ltx","tex"],load:async()=>t((await n.e(3220).then(n.bind(n,33220))).stex)},{name:"SystemVerilog",displayName:s.__("SystemVerilog"),mime:"text/x-systemverilog",extensions:["v","sv","svh"],load:async()=>t((await n.e(7230).then(n.bind(n,77230))).verilog)},{name:"Tcl",displayName:s.__("Tcl"),mime:"text/x-tcl",extensions:["tcl"],load:async()=>t((await n.e(6643).then(n.bind(n,76643))).tcl)},{name:"Textile",displayName:s.__("Textile"),mime:"text/x-textile",extensions:["textile"],load:async()=>t((await n.e(6205).then(n.bind(n,86205))).textile)},{name:"TiddlyWiki",displayName:s.__("TiddlyWiki"),mime:"text/x-tiddlywiki",load:async()=>t((await n.e(8122).then(n.bind(n,38122))).tiddlyWiki)},{name:"Tiki wiki",displayName:s.__("Tiki wiki"),mime:"text/tiki",load:async()=>t((await n.e(3805).then(n.bind(n,63805))).tiki)},{name:"TOML",displayName:s.__("TOML"),mime:"text/x-toml",extensions:["toml"],load:async()=>t((await n.e(950).then(n.bind(n,60950))).toml)},{name:"troff",displayName:s.__("troff"),mime:"text/troff",extensions:["1","2","3","4","5","6","7","8","9"],load:async()=>t((await n.e(615).then(n.bind(n,70615))).troff)},{name:"TTCN",displayName:s.__("TTCN"),mime:"text/x-ttcn",extensions:["ttcn","ttcn3","ttcnpp"],load:async()=>t((await n.e(9779).then(n.bind(n,79779))).ttcn)},{name:"TTCN_CFG",displayName:s.__("TTCN_CFG"),mime:"text/x-ttcn-cfg",extensions:["cfg"],load:async()=>t((await n.e(132).then(n.bind(n,80132))).ttcnCfg)},{name:"Turtle",displayName:s.__("Turtle"),mime:"text/turtle",extensions:["ttl"],load:async()=>t((await n.e(9684).then(n.bind(n,99684))).turtle)},{name:"Web IDL",displayName:s.__("Web IDL"),mime:"text/x-webidl",extensions:["webidl"],load:async()=>t((await n.e(1911).then(n.bind(n,71911))).webIDL)},{name:"VB.NET",displayName:s.__("VB.NET"),mime:"text/x-vb",extensions:["vb"],load:async()=>t((await n.e(5298).then(n.bind(n,25298))).vb)},{name:"VBScript",displayName:s.__("VBScript"),mime:"text/vbscript",extensions:["vbs"],load:async()=>t((await n.e(9865).then(n.bind(n,59865))).vbScript)},{name:"Velocity",displayName:s.__("Velocity"),mime:"text/velocity",extensions:["vtl"],load:async()=>t((await n.e(4957).then(n.bind(n,24957))).velocity)},{name:"Verilog",displayName:s.__("Verilog"),mime:"text/x-verilog",extensions:["v"],load:async()=>t((await n.e(7230).then(n.bind(n,77230))).verilog)},{name:"VHDL",displayName:s.__("VHDL"),mime:"text/x-vhdl",extensions:["vhd","vhdl"],load:async()=>t((await n.e(1560).then(n.bind(n,51560))).vhdl)},{name:"XQuery",displayName:s.__("XQuery"),mime:"application/xquery",extensions:["xy","xquery"],load:async()=>t((await n.e(6590).then(n.bind(n,86590))).xQuery)},{name:"Yacas",displayName:s.__("Yacas"),mime:"text/x-yacas",extensions:["ys"],load:async()=>t((await n.e(6211).then(n.bind(n,26211))).yacas)},{name:"YAML",displayName:s.__("YAML"),alias:["yml"],mime:["text/x-yaml","text/yaml"],extensions:["yaml","yml"],load:async()=>t((await n.e(9561).then(n.bind(n,69561))).yaml)},{name:"Z80",displayName:s.__("Z80"),mime:"text/x-z80",extensions:["z80"],load:async()=>t((await n.e(822).then(n.bind(n,90822))).z80)},{name:"mscgen",displayName:s.__("mscgen"),mime:"text/x-mscgen",extensions:["mscgen","mscin","msc"],load:async()=>t((await n.e(9371).then(n.bind(n,39371))).mscgen)},{name:"xu",displayName:s.__("xu"),mime:"text/x-xu",extensions:["xu"],load:async()=>t((await n.e(9371).then(n.bind(n,39371))).xu)},{name:"msgenny",displayName:s.__("msgenny"),mime:"text/x-msgenny",extensions:["msgenny"],load:async()=>t((await n.e(9371).then(n.bind(n,39371))).msgenny)}]}}(Ps||(Ps={})),function(e){e.createEditor=function(e,t,n,r){const o=t.getInitialExtensions();return o.push(...n),new s.Lz({state:i.$t.create({doc:r,extensions:o}),parent:e})}}(Rs||(Rs={})),function(e){e.findNext=function(e,t,n=0,i=1/0){for(i=Math.min(e.length-1,i);n<=i;){let s=Math.floor(.5*(n+i));const r=e[s].position;if(r<t){if((n=s+1)<e.length&&e[n].position>t)return n}else{if(!(r>t))return s;if((i=s-1)>0&&e[i].position<t)return s}}const s=n>0?n-1:0;return e[s].position>=t?s:null}}(js||(js={})),new Ce.Token("@jupyterlab/codemirror:IEditorExtensionRegistry","A registry for CodeMirror extension factories."),new Ce.Token("@jupyterlab/codemirror:IEditorLanguageRegistry","A registry for CodeMirror languages."),new Ce.Token("@jupyterlab/codemirror:IEditorThemeRegistry","A registry for CodeMirror theme.");var Ls,Bs,Is=n(14041),Fs=n(25873),$s=n(55237),zs=n.n($s),Hs=n(86823);function qs(...e){return function(e){return e.map((e=>e&&"object"==typeof e?Object.keys(e).map((t=>!!e[t]&&t)):"string"==typeof e?e.split(/\s+/):[])).reduce(((e,t)=>e.concat(t)),[]).filter((e=>!!e))}(e).join(" ")}!function(e){const t={breadCrumb:{container:{$nest:{"&:first-child svg":{bottom:"1px",marginLeft:"0px",position:"relative"},"&:hover":{backgroundColor:"var(--jp-layout-color2)"},".jp-mod-dropTarget&":{backgroundColor:"var(--jp-brand-color2)",opacity:.7}}},element:{borderRadius:"var(--jp-border-radius)",cursor:"pointer",margin:"0px 2px",padding:"0px 2px",height:"16px",width:"16px",verticalAlign:"middle"}},commandPaletteHeader:{container:{height:"14px",margin:"0 14px 0 auto"},element:{height:"14px",width:"14px"},options:{elementPosition:"center"}},commandPaletteItem:{element:{height:"16px",width:"16px"},options:{elementPosition:"center"}},launcherCard:{container:{height:"52px",width:"52px"},element:{height:"52px",width:"52px"},options:{elementPosition:"center"}},launcherSection:{container:{boxSizing:"border-box",marginRight:"12px",height:"32px",width:"32px"},element:{height:"32px",width:"32px"},options:{elementPosition:"center"}},listing:{container:{flex:"0 0 20px",marginRight:"4px",position:"relative"},element:{height:"16px",width:"16px"},options:{elementPosition:"center"}},listingHeaderItem:{container:{display:"inline",height:"16px",width:"16px"},element:{height:"auto",margin:"-2px 0 0 0",width:"20px"},options:{elementPosition:"center"}},mainAreaTab:{container:{$nest:{".lm-DockPanel-tabBar &":{marginRight:"4px"}}},element:{$nest:{".lm-DockPanel-tabBar &":{height:"14px",width:"14px"}}},options:{elementPosition:"center"}},menuItem:{container:{display:"inline-block",verticalAlign:"middle"},element:{height:"16px",width:"16px"},options:{elementPosition:"center"}},runningItem:{container:{margin:"0px 4px 0px 4px"},element:{height:"16px",width:"16px"},options:{elementPosition:"center"}},select:{container:{pointerEvents:"none"},element:{position:"absolute",height:"auto",width:"16px"}},settingsEditor:{container:{display:"flex",flex:"0 0 20px",margin:"0 3px 0 0",position:"relative",height:"20px",width:"20px"},element:{height:"16px",width:"16px"},options:{elementPosition:"center"}},sideBar:{element:{height:"auto",width:"20px"},options:{elementPosition:"center"}},splash:{container:{animation:"0.3s fade-in linear forwards",height:"100%",width:"100%",zIndex:1},element:{width:"100px"},options:{elementPosition:"center"}},statusBar:{element:{left:"0px",top:"0px",height:"18px",width:"20px",position:"relative"}},toolbarButton:{container:{display:"inline-block",verticalAlign:"middle"},element:{height:"16px",width:"16px"},options:{elementPosition:"center"}}};function n(e){return{container:{alignItems:"center",display:"flex"},element:{display:"block",...e}}}const i={center:n({margin:"0 auto",width:"100%"}),top:n({margin:"0 0 auto 0"}),right:n({margin:"0 0 0 auto"}),bottom:n({margin:"auto 0 0 0"}),left:n({margin:"0 auto 0 0"}),"top right":n({margin:"0 0 auto auto"}),"bottom right":n({margin:"auto 0 0 auto"}),"bottom left":n({margin:"auto auto 0 0"}),"top left":n({margin:"0 auto 0 auto"})};function s(e){return{element:{height:e,width:e}}}const r={small:s("14px"),normal:s("16px"),large:s("20px"),xlarge:s("24px")};const o=new Map;e.styleClass=function(e){if(!e||0===Object.keys(e).length)return"";let{elementPosition:n,elementSize:s,stylesheet:a,...l}=e;const h={...n&&{elementPosition:n},...s&&{elementSize:s}},c="string"==typeof a&&0===Object.keys(l).length,u=c?[a,n,s].join(","):"";if(c&&o.has(u))return o.get(u);const f=function(e){return e?(Array.isArray(e)||(e=[e]),e.map((e=>"string"==typeof e?t[e]:e))):[]}(a);f.push({element:l,options:h});const d=function(e){var t;return(0,Hs.iF)({...e.container,$nest:{...null===(t=e.container)||void 0===t?void 0:t.$nest,svg:e.element}})}(function(e){const t=Object.assign({},...e.map((e=>e.options)));return t.elementPosition&&e.unshift(i[t.elementPosition]),t.elementSize&&e.unshift(r[t.elementSize]),function(e){return{container:Object.assign({},...e.map((e=>e.container))),element:Object.assign({},...e.map((e=>e.element)))}}(e)}(f));return c&&o.set(u,d),d}}(Ls||(Ls={}));class Vs{static remove(e){for(;e.firstChild;)e.firstChild.remove();return e.className="",e}static resolve({icon:e}){if(e instanceof Vs)return e;if("string"==typeof e){return Vs._instances.get(e)||(Vs._debug&&console.warn(`Lookup failed for icon, creating loading icon. icon: ${e}`),new Vs({name:e,svgstr:zs(),_loading:!0}))}return new Vs(e)}static resolveElement({icon:e,iconClass:t,fallback:n,...i}){return Bs.isResolvable(e)?Vs.resolve({icon:e}).element(i):!t&&n?n.element(i):(i.className=qs(t,i.className),Bs.blankElement(i))}static resolveReact({icon:e,iconClass:t,fallback:n,...i}){if(!Bs.isResolvable(e))return!t&&n?Is.createElement(n.react,{...i}):(i.className=qs(t,i.className),Is.createElement(Bs.blankReact,{...i}));const s=Vs.resolve({icon:e});return Is.createElement(s.react,{...i})}static resolveSvg({name:e,svgstr:t}){const n=(new DOMParser).parseFromString(Bs.svgstrShim(t),"image/svg+xml"),i=n.querySelector("parsererror");if(i){const n=`SVG HTML was malformed for LabIcon instance.\nname: ${e}, svgstr: ${t}`;return Vs._debug?(console.error(n),i):(console.warn(n),null)}return n.documentElement}static toggleDebug(e){Vs._debug=null!=e?e:!Vs._debug}constructor({name:e,svgstr:t,render:n,unrender:i,_loading:s=!1}){if(this._props={},this._svgReplaced=new Me.Signal(this),this._svgElement=void 0,this._svgInnerHTML=void 0,this._svgReactAttrs=void 0,!e||!t)return console.error(`When defining a new LabIcon, name and svgstr must both be non-empty strings. name: ${e}, svgstr: ${t}`),Ws;if(this._loading=s,Vs._instances.has(e)){const n=Vs._instances.get(e);return this._loading?(n.svgstr=t,this._loading=!1,n):(Vs._debug&&console.warn(`Redefining previously loaded icon svgstr. name: ${e}, svgstrOld: ${n.svgstr}, svgstr: ${t}`),n.svgstr=t,n)}this.name=e,this.react=this._initReact(e),this.svgstr=t,this._initRender({render:n,unrender:i}),Vs._instances.set(this.name,this)}bindprops(e){const t=Object.create(this);return t._props=e,t.react=t._initReact(t.name+"_bind"),t}element(e={}){var t;let{className:n,container:i,label:s,title:r,tag:o="div",...a}={...this._props,...e};const l=null==i?void 0:i.firstChild;if((null===(t=null==l?void 0:l.dataset)||void 0===t?void 0:t.iconId)===this._uuid)return l;if(!this.svgElement)return document.createElement("div");if(i)for(;i.firstChild;)i.firstChild.remove();else o&&(i=document.createElement(o));const h=this.svgElement.cloneNode(!0);return i?(null!=s&&(i.textContent=s),Bs.initContainer({container:i,className:n,styleProps:a,title:r}),i.appendChild(h),i):(s&&console.warn(),h)}render(e,t){var n;let i=null===(n=null==t?void 0:t.children)||void 0===n?void 0:n[0];"string"!=typeof i&&(i=void 0),this.element({container:e,label:i,...null==t?void 0:t.props})}get svgElement(){return void 0===this._svgElement&&(this._svgElement=this._initSvg({uuid:this._uuid})),this._svgElement}get svgInnerHTML(){return void 0===this._svgInnerHTML&&(null===this.svgElement?this._svgInnerHTML=null:this._svgInnerHTML=this.svgElement.innerHTML),this._svgInnerHTML}get svgReactAttrs(){return void 0===this._svgReactAttrs&&(null===this.svgElement?this._svgReactAttrs=null:this._svgReactAttrs=function(e,{ignore:t=[]}={}){return e.getAttributeNames().reduce(((n,i)=>("style"===i||t.includes(i)||(i.startsWith("data")?n[i]=e.getAttribute(i):n[$t.Text.camelCase(i)]=e.getAttribute(i)),n)),{})}(this.svgElement,{ignore:["data-icon-id"]})),this._svgReactAttrs}get svgstr(){return this._svgstr}set svgstr(e){this._svgstr=e;const t=Ce.UUID.uuid4(),n=this._uuid;this._uuid=t,this._svgElement=void 0,this._svgInnerHTML=void 0,this._svgReactAttrs=void 0,document.querySelectorAll(`[data-icon-id="${n}"]`).forEach((e=>{this.svgElement&&e.replaceWith(this.svgElement.cloneNode(!0))})),this._svgReplaced.emit()}_initReact(e){const t=Is.forwardRef(((e={},t)=>{const{className:n,container:i,label:s,title:r,slot:o,tag:a="div",...l}={...this._props,...e},[,h]=Is.useState(this._uuid);Is.useEffect((()=>{const e=()=>{h(this._uuid)};return this._svgReplaced.connect(e),()=>{this._svgReplaced.disconnect(e)}}));const c=null!=a?a:Is.Fragment;if(!this.svgInnerHTML||!this.svgReactAttrs)return Is.createElement(Is.Fragment,null);const u={...this.svgReactAttrs};a||Object.assign(u,{className:n||l?qs(n,Ls.styleClass(l)):void 0,title:r,slot:o});const f=Is.createElement("svg",{...u,...this.svgReactAttrs,dangerouslySetInnerHTML:{__html:this.svgInnerHTML},ref:t});if(i)return Bs.initContainer({container:i,className:n,styleProps:l,title:r}),Is.createElement(Is.Fragment,null,f,s);{let e={};return c!==Is.Fragment&&(e={className:n||l?qs(n,Ls.styleClass(l)):void 0,title:r,slot:o}),Is.createElement(c,{...e},f,s)}}));return t.displayName=`LabIcon_${e}`,t}_initRender({render:e,unrender:t}){e?(this.render=e,t&&(this.unrender=t)):t&&console.warn("In _initRender, ignoring unrender arg since render is undefined")}_initSvg({title:e,uuid:t}={}){const n=Vs.resolveSvg(this);return n?("parsererror"!==n.tagName&&(n.dataset.icon=this.name,t&&(n.dataset.iconId=t),e&&Bs.setTitleSvg(n,e)),n):n}}Vs._debug=!1,Vs._instances=new Map,function(e){function t({container:e,className:t,styleProps:n,title:i}){null!=i&&(e.title=i);const s=Ls.styleClass(n);if(null!=t){const n=qs(t,s);return e.className=n,n}return s?(e.classList.add(s),s):""}e.blankElement=function({className:t="",container:n,label:i,title:s,tag:r="div",slot:o,...a}){if((null==n?void 0:n.className)===t)return n;if(n)for(;n.firstChild;)n.firstChild.remove();else n=document.createElement(null!=r?r:"div");return null!=i&&(n.textContent=i),e.initContainer({container:n,className:t,styleProps:a,title:s}),n},e.blankReact=Is.forwardRef((({className:e="",container:n,label:i,title:s,tag:r="div",...o},a)=>{const l=null!=r?r:"div";return n?(t({container:n,className:e,styleProps:o,title:s}),Is.createElement(Is.Fragment,null)):Is.createElement(l,{className:qs(e,Ls.styleClass(o))},a&&Gs.react({ref:a}),i)})),e.blankReact.displayName="BlankReact",e.initContainer=t,e.isResolvable=function(e){return!(!e||!("string"==typeof e||e.name&&e.svgstr))},e.setTitleSvg=function(e,t){const n=e.getElementsByTagName("title");if(n.length)n[0].textContent=t;else{const n=document.createElement("title");n.textContent=t,e.appendChild(n)}},e.svgstrShim=function(e,t=!0){const[,n,i]=decodeURIComponent(e).replace(/>\s*\n\s*</g,"><").replace(/\s*\n\s*/g," ").match(t?/^(?:data:.*?(;base64)?,)?(.*)/:/(?:(base64).*)?(<svg.*)/);return n?atob(i):i};class n{constructor(e,t){this._icon=e,this._rendererOptions=t}render(e,t){}}e.Renderer=n,e.ElementRenderer=class extends n{render(e,t){var n,i;let s=null===(n=null==t?void 0:t.children)||void 0===n?void 0:n[0];"string"!=typeof s&&(s=void 0),this._icon.element({container:e,label:s,...null===(i=this._rendererOptions)||void 0===i?void 0:i.props,...null==t?void 0:t.props})}},e.ReactRenderer=class extends n{constructor(){super(...arguments),this._rootDOM=null}render(e,t){var n,i;let s=null===(n=null==t?void 0:t.children)||void 0===n?void 0:n[0];"string"!=typeof s&&(s=void 0);const r=this._icon;null!==this._rootDOM&&this._rootDOM.unmount(),this._rootDOM=(0,Fs.H)(e),this._rootDOM.render(Is.createElement(r.react,{container:e,label:s,...null===(i=this._rendererOptions)||void 0===i?void 0:i.props,...null==t?void 0:t.props}))}unrender(e){null!==this._rootDOM&&(this._rootDOM.unmount(),this._rootDOM=null)}}}(Bs||(Bs={}));const Ws=new Vs({name:"ui-components:bad",svgstr:zs()}),Gs=new Vs({name:"ui-components:blank",svgstr:zs()});function Us(e){const{className:t,inputRef:n,rightIcon:i,...s}=e;return Is.createElement("div",{className:qs("jp-InputGroup",t)},Is.createElement("input",{ref:n,...s}),i&&Is.createElement("span",{className:"jp-InputGroupAction"},"string"==typeof i?Is.createElement(Vs.resolveReact,{icon:i,elementPosition:"center",tag:"span"}):Is.createElement(i.react,{elementPosition:"center",tag:"span"})))}var Ks=n(58460),Js=n.n(Ks);function Ys(){return Ys=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ys.apply(null,arguments)}function Xs(e){let{styling:t,arrowStyle:n="single",expanded:i,nodeType:s,onClick:r}=e;return Is.createElement("div",Ys({},t("arrowContainer",n),{onClick:r}),Is.createElement("div",t(["arrow","arrowSign"],s,i,n),"â–¶","double"===n&&Is.createElement("div",t(["arrowSign","arrowSignInner"]),"â–¶")))}function Qs(e,t,n){let i,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0;if("Object"===e){let e=Object.getOwnPropertyNames(t);n&&e.sort(!0===n?void 0:n),e=e.slice(s,r+1),i={entries:e.map((e=>({key:e,value:t[e]})))}}else if("Array"===e)i={entries:t.slice(s,r+1).map(((e,t)=>({key:t+s,value:e})))};else{let e=0;const n=[];let o=!0;const a=function(e){return"function"==typeof e.set}(t);for(const i of t){if(e>r){o=!1;break}s<=e&&(a&&Array.isArray(i)?"string"==typeof i[0]||"number"==typeof i[0]?n.push({key:i[0],value:i[1]}):n.push({key:`[entry ${e}]`,value:{"[key]":i[0],"[value]":i[1]}}):n.push({key:e,value:i})),e++}i={hasMore:!o,entries:n}}return i}function Zs(e,t,n){const i=[];for(;t-e>n*n;)n*=n;for(let s=e;s<=t;s+=n)i.push({from:s,to:Math.min(t,s+n-1)});return i}function er(e,t,n,i){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1/0;const o=Qs.bind(null,e,t,n);if(!i)return o().entries;const a=r<1/0,l=Math.min(r-s,function(e,t){return"Object"===e?Object.keys(t).length:"Array"===e?t.length:1/0}(e,t));if("Iterable"!==e){if(l<=i||i<7)return o(s,r).entries}else if(l<=i&&!a)return o(s,r).entries;let h;if("Iterable"===e){const{hasMore:e,entries:t}=o(s,s+i-1);h=e?[...t,...Zs(s+i,s+2*i-1,i)]:t}else h=a?Zs(s,r,i):[...o(0,i-5).entries,...Zs(i-4,l-5,i),...o(l-4,l-1).entries];return h}function tr(e){const{styling:t,from:n,to:i,renderChildNodes:s,nodeType:r}=e,[o,a]=(0,Is.useState)(!1),l=(0,Is.useCallback)((()=>{a(!o)}),[o]);return o?Is.createElement("div",t("itemRange",o),s(e,n,i)):Is.createElement("div",Ys({},t("itemRange",o),{onClick:l}),Is.createElement(Xs,{nodeType:r,styling:t,expanded:!1,onClick:l,arrowStyle:"double"}),`${n} ... ${i}`)}function nr(e,t,n){const{nodeType:i,data:s,collectionLimit:r,circularCache:o,keyPath:a,postprocessValue:l,sortObjectKeys:h}=e,c=[];return er(i,s,h,r,t,n).forEach((t=>{if(void 0!==t.to)c.push(Is.createElement(tr,Ys({},e,{key:`ItemRange--${t.from}-${t.to}`,from:t.from,to:t.to,renderChildNodes:nr})));else{const{key:n,value:i}=t,s=-1!==o.indexOf(i);c.push(Is.createElement(ur,Ys({},e,{postprocessValue:l,collectionLimit:r,key:`Node--${n}`,keyPath:[n,...a],value:l(i),circularCache:[...o,i],isCircular:s,hideRoot:!1})))}})),c}function ir(e){const{circularCache:t=[],collectionLimit:n,createItemString:i,data:s,expandable:r,getItemString:o,hideRoot:a,isCircular:l,keyPath:h,labelRenderer:c,level:u=0,nodeType:f,nodeTypeIndicator:d,shouldExpandNodeInitially:p,styling:m}=e,[g,b]=(0,Is.useState)(!l&&p(h,s,u)),y=(0,Is.useCallback)((()=>{r&&b(!g)}),[r,g]),v=g||a&&0===u?nr({...e,circularCache:t,level:u+1}):null,x=o(f,s,Is.createElement("span",m("nestedNodeItemType",g),d),i(s,n),h),w=[h,f,g,r];return a?Is.createElement("li",m("rootNode",...w),Is.createElement("ul",m("rootNodeChildren",...w),v)):Is.createElement("li",m("nestedNode",...w),r&&Is.createElement(Xs,{styling:m,nodeType:f,expanded:g,onClick:y}),Is.createElement("label",Ys({},m(["label","nestedNodeLabel"],...w),{onClick:y}),c(...w)),Is.createElement("span",Ys({},m("nestedNodeItemString",...w),{onClick:y}),x),Is.createElement("ul",m("nestedNodeChildren",...w),v))}function sr(e){const t=Object.getOwnPropertyNames(e).length;return`${t} ${1!==t?"keys":"key"}`}function rr(e){let{data:t,...n}=e;return Is.createElement(ir,Ys({},n,{data:t,nodeType:"Object",nodeTypeIndicator:"Error"===n.nodeType?"Error()":"{}",createItemString:sr,expandable:Object.getOwnPropertyNames(t).length>0}))}function or(e){return`${e.length} ${1!==e.length?"items":"item"}`}function ar(e){let{data:t,...n}=e;return Is.createElement(ir,Ys({},n,{data:t,nodeType:"Array",nodeTypeIndicator:"[]",createItemString:or,expandable:t.length>0}))}function lr(e,t){let n=0,i=!1;if(Number.isSafeInteger(e.size))n=e.size;else for(const s of e){if(t&&n+1>t){i=!0;break}n+=1}return`${i?">":""}${n} ${1!==n?"entries":"entry"}`}function hr(e){return Is.createElement(ir,Ys({},e,{nodeType:"Iterable",nodeTypeIndicator:"()",createItemString:lr,expandable:!0}))}function cr(e){let{nodeType:t,styling:n,labelRenderer:i,keyPath:s,valueRenderer:r,value:o,valueGetter:a=e=>e}=e;return Is.createElement("li",n("value",t,s),Is.createElement("label",n(["label","valueLabel"],t,s),i(s,t,!1,!1)),Is.createElement("span",n("valueText",t,s),r(a(o),o,...s)))}function ur(e){let{getItemString:t,keyPath:n,labelRenderer:i,styling:s,value:r,valueRenderer:o,isCustomNode:a,...l}=e;const h=a(r)?"Custom":function(e){const t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&"function"==typeof e[Symbol.iterator]?"Iterable":"Custom"===t&&e.constructor!==Object&&e instanceof Object?"Object":t}(r),c={getItemString:t,key:n[0],keyPath:n,labelRenderer:i,nodeType:h,styling:s,value:r,valueRenderer:o},u={...l,...c,data:r,isCustomNode:a};switch(h){case"Object":case"Error":case"WeakMap":case"WeakSet":return Is.createElement(rr,u);case"Array":return Is.createElement(ar,u);case"Iterable":case"Map":case"Set":return Is.createElement(hr,u);case"String":return Is.createElement(cr,Ys({},c,{valueGetter:e=>`"${e}"`}));case"Number":case"Custom":return Is.createElement(cr,c);case"Boolean":return Is.createElement(cr,Ys({},c,{valueGetter:e=>e?"true":"false"}));case"Date":return Is.createElement(cr,Ys({},c,{valueGetter:e=>e.toISOString()}));case"Null":return Is.createElement(cr,Ys({},c,{valueGetter:()=>"null"}));case"Undefined":return Is.createElement(cr,Ys({},c,{valueGetter:()=>"undefined"}));case"Function":case"Symbol":return Is.createElement(cr,Ys({},c,{valueGetter:e=>e.toString()}));default:return Is.createElement(cr,Ys({},c,{valueGetter:()=>`<${h}>`}))}}function fr(e){return fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fr(e)}function dr(e){var t=function(e){if("object"!=fr(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=fr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==fr(t)?t:t+""}function pr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function mr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,s,r,o,a=[],l=!0,h=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=r.call(n)).done)&&(a.push(i.value),a.length!==t);l=!0);}catch(e){h=!0,s=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(h)throw s}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return pr(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var gr=n(21932),br=n(70465),yr=n.n(br),vr=n(99910),xr=n.n(vr);function wr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function kr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wr(Object(n),!0).forEach((function(t){var i,s,r;i=e,s=t,r=n[t],(s=dr(s))in i?Object.defineProperty(i,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[s]=r})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Sr=gr.default,Cr=Object.keys(Sr),Ar=function(e){return function(t){return{className:[t.className,e.className].filter(Boolean).join(" "),style:kr(kr({},t.style||{}),e.style||{})}}},Or=function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),s=2;s<n;s++)i[s-2]=arguments[s];if(null===t)return e;Array.isArray(t)||(t=[t]);var r=t.map((function(t){return e[t]})).filter(Boolean).reduce((function(e,t){return"string"==typeof t?e.className=[e.className,t].filter(Boolean).join(" "):"object"===fr(t)?e.style=kr(kr({},e.style),t):"function"==typeof t&&(e=kr(kr({},e),t.apply(void 0,[e].concat(i)))),e}),{className:"",style:{}});return r.className||delete r.className,0===Object.keys(r.style).length&&delete r.style,r},Mr=function(e){return Object.keys(e).reduce((function(t,n){return t[n]=/^base/.test(n)?(i=e[n],r=mr(function(e){var t=e[0]/255,n=e[1]/255,i=e[2]/255;return[.299*t+.587*n+.114*i,-.14713*t+-.28886*n+.436*i,.615*t+-.51499*n+-.10001*i]}(yr()(i).array()),3),a=[(s=r[0],s<.25?1:s<.5?.9-s:1.1-s),r[1],r[2]],u=a[0],f=a[1],d=a[2],l=1*u+0*f+1.13983*d,h=1*u+-.39465*f+-.5806*d,c=1*u+2.02311*f+0*d,o=[255*(l=Math.min(Math.max(0,l),1)),255*(h=Math.min(Math.max(0,h),1)),255*(c=Math.min(Math.max(0,c),1))],yr().rgb(o).hex()):"scheme"===n?e[n]+":inverted":e[n],t;var i,s,r,o,a,l,h,c,u,f,d}),{})},_r=xr()((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=t.defaultBase16,s=void 0===i?Sr:i,r=t.base16Themes,o=Er(n,void 0===r?null:r);o&&(n=kr(kr({},o),n));for(var a=Cr.reduce((function(e,t){return e[t]=n[t]||s[t],e}),{}),l=function(e,t){var n=Object.keys(t);for(var i in e)-1===n.indexOf(i)&&n.push(i);return n.reduce((function(n,i){return n[i]=function(e,t){if(void 0===e)return t;if(void 0===t)return e;var n=fr(e),i=fr(t);switch(n){case"string":switch(i){case"string":return[t,e].filter(Boolean).join(" ");case"object":return Ar({className:e,style:t});case"function":return function(n){for(var i=arguments.length,s=new Array(i>1?i-1:0),r=1;r<i;r++)s[r-1]=arguments[r];return Ar({className:e})(t.apply(void 0,[n].concat(s)))}}break;case"object":switch(i){case"string":return Ar({className:t,style:e});case"object":return kr(kr({},t),e);case"function":return function(n){for(var i=arguments.length,s=new Array(i>1?i-1:0),r=1;r<i;r++)s[r-1]=arguments[r];return Ar({style:e})(t.apply(void 0,[n].concat(s)))}}break;case"function":switch(i){case"string":return function(n){for(var i=arguments.length,s=new Array(i>1?i-1:0),r=1;r<i;r++)s[r-1]=arguments[r];return e.apply(void 0,[Ar(n)({className:t})].concat(s))};case"object":return function(n){for(var i=arguments.length,s=new Array(i>1?i-1:0),r=1;r<i;r++)s[r-1]=arguments[r];return e.apply(void 0,[Ar(n)({style:t})].concat(s))};case"function":return function(n){for(var i=arguments.length,s=new Array(i>1?i-1:0),r=1;r<i;r++)s[r-1]=arguments[r];return e.apply(void 0,[t.apply(void 0,[n].concat(s))].concat(s))}}}}(e[i],t[i]),n}),{})}(Object.keys(n).reduce((function(e,t){return-1===Cr.indexOf(t)?(e[t]=n[t],e):e}),{}),e(a)),h=arguments.length,c=new Array(h>3?h-3:0),u=3;u<h;u++)c[u-3]=arguments[u];return xr()(Or,2).apply(void 0,[l].concat(c))}),3),Tr=function(e){return!!e.extend},Er=function(e,t){if(e&&Tr(e)&&e.extend&&(e=e.extend),"string"==typeof e){var n=mr(e.split(":"),2),i=n[0],s=n[1];e=t?t[i]:gr[i],"inverted"===s&&(e=Mr(e))}return e&&Object.prototype.hasOwnProperty.call(e,"base00")?e:void 0};const Nr=e=>({String:e.STRING_COLOR,Date:e.DATE_COLOR,Number:e.NUMBER_COLOR,Boolean:e.BOOLEAN_COLOR,Null:e.NULL_COLOR,Undefined:e.UNDEFINED_COLOR,Function:e.FUNCTION_COLOR,Symbol:e.SYMBOL_COLOR}),Dr=_r((e=>{const t=(e=>({BACKGROUND_COLOR:e.base00,TEXT_COLOR:e.base07,STRING_COLOR:e.base0B,DATE_COLOR:e.base0B,NUMBER_COLOR:e.base09,BOOLEAN_COLOR:e.base09,NULL_COLOR:e.base08,UNDEFINED_COLOR:e.base08,FUNCTION_COLOR:e.base08,SYMBOL_COLOR:e.base08,LABEL_COLOR:e.base0D,ARROW_COLOR:e.base0D,ITEM_STRING_COLOR:e.base0B,ITEM_STRING_EXPANDED_COLOR:e.base03}))(e);return{tree:{border:0,padding:0,marginTop:"0.5em",marginBottom:"0.5em",marginLeft:"0.125em",marginRight:0,listStyle:"none",MozUserSelect:"none",WebkitUserSelect:"none",backgroundColor:t.BACKGROUND_COLOR},value:(e,t,n)=>{let{style:i}=e;return{style:{...i,paddingTop:"0.25em",paddingRight:0,marginLeft:"0.875em",WebkitUserSelect:"text",MozUserSelect:"text",wordWrap:"break-word",paddingLeft:n.length>1?"2.125em":"1.25em",textIndent:"-0.5em",wordBreak:"break-all"}}},label:{display:"inline-block",color:t.LABEL_COLOR},valueLabel:{margin:"0 0.5em 0 0"},valueText:(e,n)=>{let{style:i}=e;return{style:{...i,color:Nr(t)[n]}}},itemRange:(e,n)=>({style:{paddingTop:n?0:"0.25em",cursor:"pointer",color:t.LABEL_COLOR}}),arrow:(e,t,n)=>{let{style:i}=e;return{style:{...i,marginLeft:0,transition:"150ms",WebkitTransition:"150ms",MozTransition:"150ms",WebkitTransform:n?"rotateZ(90deg)":"rotateZ(0deg)",MozTransform:n?"rotateZ(90deg)":"rotateZ(0deg)",transform:n?"rotateZ(90deg)":"rotateZ(0deg)",transformOrigin:"45% 50%",WebkitTransformOrigin:"45% 50%",MozTransformOrigin:"45% 50%",position:"relative",lineHeight:"1.1em",fontSize:"0.75em"}}},arrowContainer:(e,t)=>{let{style:n}=e;return{style:{...n,display:"inline-block",paddingRight:"0.5em",paddingLeft:"double"===t?"1em":0,cursor:"pointer"}}},arrowSign:{color:t.ARROW_COLOR},arrowSignInner:{position:"absolute",top:0,left:"-0.4em"},nestedNode:(e,t,n,i,s)=>{let{style:r}=e;return{style:{...r,position:"relative",paddingTop:"0.25em",marginLeft:t.length>1?"0.875em":0,paddingLeft:s?0:"1.125em"}}},rootNode:{padding:0,margin:0},nestedNodeLabel:(e,t,n,i,s)=>{let{style:r}=e;return{style:{...r,margin:0,padding:0,WebkitUserSelect:s?"inherit":"text",MozUserSelect:s?"inherit":"text",cursor:s?"pointer":"default"}}},nestedNodeItemString:(e,n,i,s)=>{let{style:r}=e;return{style:{...r,paddingLeft:"0.5em",cursor:"default",color:s?t.ITEM_STRING_EXPANDED_COLOR:t.ITEM_STRING_COLOR}}},nestedNodeItemType:{marginLeft:"0.3em",marginRight:"0.3em"},nestedNodeChildren:(e,t,n)=>{let{style:i}=e;return{style:{...i,padding:0,margin:0,listStyle:"none",display:n?"block":"none"}}},rootNodeChildren:{padding:0,margin:0,listStyle:"none"}}}),{defaultBase16:{scheme:"solarized",author:"ethan schoonover (http://ethanschoonover.com/solarized)",base00:"#002b36",base01:"#073642",base02:"#586e75",base03:"#657b83",base04:"#839496",base05:"#93a1a1",base06:"#eee8d5",base07:"#fdf6e3",base08:"#dc322f",base09:"#cb4b16",base0A:"#b58900",base0B:"#859900",base0C:"#2aa198",base0D:"#268bd2",base0E:"#6c71c4",base0F:"#d33682"}}),Pr=Dr,Rr=e=>e,jr=(e,t,n)=>0===n,Lr=(e,t,n,i)=>Is.createElement("span",null,n," ",i),Br=e=>{let[t]=e;return Is.createElement("span",null,t,":")},Ir=()=>!1;function Fr(e){let{data:t,theme:n,invertTheme:i,keyPath:s=["root"],labelRenderer:r=Br,valueRenderer:o=Rr,shouldExpandNodeInitially:a=jr,hideRoot:l=!1,getItemString:h=Lr,postprocessValue:c=Rr,isCustomNode:u=Ir,collectionLimit:f=50,sortObjectKeys:d=!1}=e;const p=(0,Is.useMemo)((()=>Pr(i?function(e){return"string"==typeof e?"".concat(e,":inverted"):e&&Tr(e)&&e.extend?"string"==typeof e.extend?kr(kr({},e),{},{extend:"".concat(e.extend,":inverted")}):kr(kr({},e),{},{extend:Mr(e.extend)}):e?Mr(e):e}(n):n)),[n,i]);return Is.createElement("ul",p("tree"),Is.createElement(ur,{keyPath:l?[]:s,value:c(t),isCustomNode:u,styling:p,labelRenderer:r,valueRenderer:o,shouldExpandNodeInitially:a,hideRoot:l,getItemString:h,postprocessValue:c,collectionLimit:f,sortObjectKeys:d}))}var $r=n(98104);function zr(e){var t;return null!==(t=Ms.style([e]))&&void 0!==t?t:""}class Hr extends Is.Component{constructor(){super(...arguments),this.state={filter:"",value:""},this.timer=0,this.handleChange=e=>{const{value:t}=e.target;this.setState({value:t}),window.clearTimeout(this.timer),this.timer=window.setTimeout((()=>{this.setState({filter:t})}),300)}}componentDidMount(){$r.G.mount(document,Ms.module)}render(){const e=(this.props.translator||Te.wK).load("jupyterlab"),{data:t,metadata:n,forwardedRef:i}=this.props,s=n&&n.root?n.root:"root",r=this.state.filter?Wr(t,this.state.filter,[s]):[s];return Is.createElement("div",{className:"container",ref:i},Is.createElement(Us,{className:"filter",type:"text",placeholder:e.__("Findâ€¦"),onChange:this.handleChange,value:this.state.value,rightIcon:"ui-components:search"}),Is.createElement(Fr,{data:t,collectionLimit:100,theme:{extend:qr,valueLabel:zr(De._A.variableName),valueText:zr(De._A.string),nestedNodeItemString:zr(De._A.comment)},invertTheme:!1,keyPath:[s],getItemString:(e,t,n,i)=>Array.isArray(t)?Is.createElement("span",null,n," ",i):0===Object.keys(t).length?Is.createElement("span",null,n):null,labelRenderer:([e,t])=>Is.createElement("span",{className:zr(De._A.keyword)},Is.createElement(Js(),{searchWords:[this.state.filter],textToHighlight:`${e}`,highlightClassName:"jp-mod-selected"})),valueRenderer:e=>{let t=zr(De._A.string);return"number"==typeof e&&(t=zr(De._A.number)),"true"!==e&&"false"!==e||(t=zr(De._A.keyword)),Is.createElement("span",{className:t},Is.createElement(Js(),{searchWords:[this.state.filter],textToHighlight:`${e}`,highlightClassName:"jp-mod-selected"}))},shouldExpandNodeInitially:(e,t,i)=>!(!n||!n.expanded)||r.join(",").includes(e.join(","))}))}}const qr={scheme:"jupyter",base00:"invalid",base01:"invalid",base02:"invalid",base03:"invalid",base04:"invalid",base05:"invalid",base06:"invalid",base07:"invalid",base08:"invalid",base09:"invalid",base0A:"invalid",base0B:"invalid",base0C:"invalid",base0D:"invalid",base0E:"invalid",base0F:"invalid",author:"invalid"};function Vr(e,t){return JSON.stringify(e).includes(t)}function Wr(e,t,n=["root"]){return Ce.JSONExt.isArray(e)?e.reduce(((e,i,s)=>i&&"object"==typeof i&&Vr(i,t)?[...e,[s,...n].join(","),...Wr(i,t,[s,...n])]:e),[]):Ce.JSONExt.isObject(e)?Object.keys(e).reduce(((i,s)=>{const r=e[s];return r&&"object"==typeof r&&(s.includes(t)||Vr(r,t))?[...i,[s,...n].join(","),...Wr(r,t,[s,...n])]:i}),[]):[]}},85869:(e,t)=>{"use strict";t.__esModule=!0,t.default={scheme:"apathy",author:"jannik siebert (https://github.com/janniks)",base00:"#031A16",base01:"#0B342D",base02:"#184E45",base03:"#2B685E",base04:"#5F9C92",base05:"#81B5AC",base06:"#A7CEC8",base07:"#D2E7E4",base08:"#3E9688",base09:"#3E7996",base0A:"#3E4C96",base0B:"#883E96",base0C:"#963E4C",base0D:"#96883E",base0E:"#4C963E",base0F:"#3E965B"},e.exports=t.default},47088:(e,t)=>{"use strict";t.__esModule=!0,t.default={scheme:"ashes",author:"jannik siebert (https://github.com/janniks)",base00:"#1C2023",base01:"#393F45",base02:"#565E65",base03:"#747C84",base04:"#ADB3BA",base05:"#C7CCD1",base06:"#DFE2E5",base07:"#F3F4F5",base08:"#C7AE95",base09:"#C7C795",base0A:"#AEC795",base0B:"#95C7AE",base0C:"#95AEC7",base0D:"#AE95C7",base0E:"#C795AE",base0F:"#C79595"},e.exports=t.default},95067:(e,t)=>{"use strict";t.__esModule=!0,t.default={scheme:"atelier dune",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/dune)",base00:"#20201d",base01:"#292824",base02:"#6e6b5e",base03:"#7d7a68",base04:"#999580",base05:"#a6a28c",base06:"#e8e4cf",base07:"#fefbec",base08:"#d73737",base09:"#b65611",base0A:"#cfb017",base0B:"#60ac39",base0C:"#1fad83",base0D:"#6684e1",base0E:"#b854d4",base0F:"#d43552"},e.exports=t.default},57784:(e,t)=>{"use strict";t.__esModule=!0,t.default={scheme:"atelier forest",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/forest)",base00:"#1b1918",base01:"#2c2421",base02:"#68615e",base03:"#766e6b",base04:"#9c9491",base05:"#a8a19f",base06:"#e6e2e0",base07:"#f1efee",base08:"#f22c40",base09:"#df5320",base0A:"#d5911a",base0B:"#5ab738",base0C:"#00ad9c",base0D:"#407ee7",base0E:"#6666ea",base0F:"#c33ff3"},e.exports=t.default},79859:(e,t)=>{"use strict";t.__esModule=!0,t.default={scheme:"atelier heath",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/heath)",base00:"#1b181b",base01:"#292329",base02:"#695d69",base03:"#776977",base04:"#9e8f9e",base05:"#ab9bab",base06:"#d8cad8",base07:"#f7f3f7",base08:"#ca402b",base09:"#a65926",base0A:"#bb8a35",base0B:"#379a37",base0C:"#159393",base0D:"#516aec",base0E:"#7b59c0",base0F:"#cc33cc"},e.exports=t.default},19525:(e,t)=>{"use strict";t.__esModule=!0,t.default={scheme:"atelier lakeside",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/lakeside/)",base00:"#161b1d",base01:"#1f292e",base02:"#516d7b",base03:"#5a7b8c",base04:"#7195a8",base05:"#7ea2b4",base06:"#c1e4f6",base07:"#ebf8ff",base08:"#d22d72",base09:"#935c25",base0A:"#8a8a0f",base0B:"#568c3b",base0C:"#2d8f6f",base0D:"#257fad",base0E:"#5d5db1",base0F:"#b72dd2"},e.exports=t.default},15789:(e,t)=>{"use strict";t.__esModule=!0,t.default={scheme:"atelier seaside",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/seaside/)",base00:"#131513",base01:"#242924",base02:"#5e6e5e",base03:"#687d68",base04:"#809980",base05:"#8ca68c",base06:"#cfe8cf",base07:"#f0fff0",base08:"#e6193c",base09:"#87711d",base0A:"#c3c322",base0B:"#29a329",base0C:"#1999b3",base0D:"#3d62f5",base0E:"#ad2bee",base0F:"#e619c3"},e.exports=t.default},75363:(e,t)=>{"use strict";t.__esModule=!0,t.default={scheme:"bespin",author:"jan t. sott",base00:"#28211c",base01:"#36312e",base02:"#5e5d5c",base03:"#666666",base04:"#797977",base05:"#8a8986",base06:"#9d9b97",base07:"#baae9e",base08:"#cf6a4c",base09:"#cf7d34",base0A:"#f9ee98",base0B:"#54be0d",base0C:"#afc4db",base0D:"#5ea6ea",base0E:"#9b859d",base0F:"#937121"},e.exports=t.default},52525:(e,t)=>{"use strict";t.__esModule=!0,t.default={scheme:"brewer",author:"timothÃ©e poisot (http://github.com/tpoisot)",base00:"#0c0d0e",base01:"#2e2f30",base02:"#515253",base03:"#737475",base04:"#959697",base05:"#b7b8b9",base06:"#dadbdc",base07:"#fcfdfe",base08:"#e31a1c",base09:"#e6550d",base0A:"#dca060",base0B:"#31a354",base0C:"#80b1d3",base0D:"#3182bd",base0E:"#756bb1",base0F:"#b15928"},e.exports=t.default},71986:(e,t)=>{"use strict";t.__esModule=!0,t.default={scheme:"bright",author:"chris kempson (http://chriskempson.com)",base00:"#000000",base01:"#303030",base02:"#505050",base03:"#b0b0b0",base04:"#d0d0d0",base05:"#e0e0e0",base06:"#f5f5f5",base07:"#ffffff",base08:"#fb0120",base09:"#fc6d24",base0A:"#fda331",base0B:"#a1c659",base0C:"#76c7b7",base0D:"#6fb3d2",base0E:"#d381c3",base0F:"#be643c"},e.exports=t.default},45235:(e,t)=>{"use strict";t.__esModule=!0,t.default={scheme:"chalk",author:"chris kempson (http://chriskempson.com)",base00:"#151515",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#b0b0b0",base05:"#d0d0d0",base06:"#e0e0e0",base07:"#f5f5f5",base08:"#fb9fb1",base09:"#eda987",base0A:"#ddb26f",base0B:"#acc267",base0C:"#12cfc0",base0D:"#6fc2ef",base0E:"#e1a3ee",base0F:"#deaf8f"},e.exports=t.default},69635:(e,t)=>{"use strict";t.__esModule=!0,t.default={scheme:"codeschool",author:"brettof86",base00:"#232c31",base01:"#1c3657",base02:"#2a343a",base03:"#3f4944",base04:"#84898c",base05:"#9ea7a6",base06:"#a7cfa3",base07:"#b5d8f6",base08:"#2a5491",base09:"#43820d",base0A:"#a03b1e",base0B:"#237986",base0C:"#b02f30",base0D:"#484d79",base0E:"#c59820",base0F:"#c98344"},e.exports=t.default},2230:(e,t)=>{"use strict";t.__esModule=!0,t.default={scheme:"colors",author:"mrmrs (http://clrs.cc)",base00:"#111111",base01:"#333333",base02:"#555555",base03:"#777777",base04:"#999999",base05:"#bbbbbb",base06:"#dddddd",base07:"#ffffff",base08:"#ff4136",base09:"#ff851b",base0A:"#ffdc00",base0B:"#2ecc40",base0C:"#7fdbff",base0D:"#0074d9",base0E:"#b10dc9",base0F:"#85144b"},e.exports=t.default},68597:(e,t)=>{"use strict";t.__esModule=!0,t.default={scheme:"default",author:"chris kempson (http://chriskempson.com)",base00:"#181818",base01:"#282828",base02:"#383838",base03:"#585858",base04:"#b8b8b8",base05:"#d8d8d8",base06:"#e8e8e8",base07:"#f8f8f8",base08:"#ab4642",base09:"#dc9656",base0A:"#f7ca88",base0B:"#a1b56c",base0C:"#86c1b9",base0D:"#7cafc2",base0E:"#ba8baf",base0F:"#a16946"},e.exports=t.default},94444:(e,t)=>{"use strict";t.__esModule=!0,t.default={scheme:"eighties",author:"chris kempson (http://chriskempson.com)",base00:"#2d2d2d",base01:"#393939",base02:"#515151",base03:"#747369",base04:"#a09f93",base05:"#d3d0c8",base06:"#e8e6df",base07:"#f2f0ec",base08:"#f2777a",base09:"#f99157",base0A:"#ffcc66",base0B:"#99cc99",base0C:"#66cccc",base0D:"#6699cc",base0E:"#cc99cc",base0F:"#d27b53"},e.exports=t.default},16834:(e,t)=>{"use strict";t.__esModule=!0,t.default={scheme:"embers",author:"jannik siebert (https://github.com/janniks)",base00:"#16130F",base01:"#2C2620",base02:"#433B32",base03:"#5A5047",base04:"#8A8075",base05:"#A39A90",base06:"#BEB6AE",base07:"#DBD6D1",base08:"#826D57",base09:"#828257",base0A:"#6D8257",base0B:"#57826D",base0C:"#576D82",base0D:"#6D5782",base0E:"#82576D",base0F:"#825757"},e.exports=t.default},96521:(e,t)=>{"use strict";t.__esModule=!0,t.default={scheme:"flat",author:"chris kempson (http://chriskempson.com)",base00:"#2C3E50",base01:"#34495E",base02:"#7F8C8D",base03:"#95A5A6",base04:"#BDC3C7",base05:"#e0e0e0",base06:"#f5f5f5",base07:"#ECF0F1",base08:"#E74C3C",base09:"#E67E22",base0A:"#F1C40F",base0B:"#2ECC71",base0C:"#1ABC9C",base0D:"#3498DB",base0E:"#9B59B6",base0F:"#be643c"},e.exports=t.default},97469:(e,t)=>{"use strict";t.__esModule=!0,t.default={scheme:"google",author:"seth wright (http://sethawright.com)",base00:"#1d1f21",base01:"#282a2e",base02:"#373b41",base03:"#969896",base04:"#b4b7b4",base05:"#c5c8c6",base06:"#e0e0e0",base07:"#ffffff",base08:"#CC342B",base09:"#F96A38",base0A:"#FBA922",base0B:"#198844",base0C:"#3971ED",base0D:"#3971ED",base0E:"#A36AC7",base0F:"#3971ED"},e.exports=t.default},84011:(e,t)=>{"use strict";t.__esModule=!0,t.default={scheme:"grayscale",author:"alexandre gavioli (https://github.com/alexx2/)",base00:"#101010",base01:"#252525",base02:"#464646",base03:"#525252",base04:"#ababab",base05:"#b9b9b9",base06:"#e3e3e3",base07:"#f7f7f7",base08:"#7c7c7c",base09:"#999999",base0A:"#a0a0a0",base0B:"#8e8e8e",base0C:"#868686",base0D:"#686868",base0E:"#747474",base0F:"#5e5e5e"},e.exports=t.default},51027:(e,t)=>{"use strict";t.__esModule=!0,t.default={scheme:"green screen",author:"chris kempson (http://chriskempson.com)",base00:"#001100",base01:"#003300",base02:"#005500",base03:"#007700",base04:"#009900",base05:"#00bb00",base06:"#00dd00",base07:"#00ff00",base08:"#007700",base09:"#009900",base0A:"#007700",base0B:"#00bb00",base0C:"#005500",base0D:"#009900",base0E:"#00bb00",base0F:"#005500"},e.exports=t.default},88781:(e,t)=>{"use strict";t.__esModule=!0,t.default={scheme:"harmonic16",author:"jannik siebert (https://github.com/janniks)",base00:"#0b1c2c",base01:"#223b54",base02:"#405c79",base03:"#627e99",base04:"#aabcce",base05:"#cbd6e2",base06:"#e5ebf1",base07:"#f7f9fb",base08:"#bf8b56",base09:"#bfbf56",base0A:"#8bbf56",base0B:"#56bf8b",base0C:"#568bbf",base0D:"#8b56bf",base0E:"#bf568b",base0F:"#bf5656"},e.exports=t.default},19453:(e,t)=>{"use strict";t.__esModule=!0,t.default={scheme:"hopscotch",author:"jan t. sott",base00:"#322931",base01:"#433b42",base02:"#5c545b",base03:"#797379",base04:"#989498",base05:"#b9b5b8",base06:"#d5d3d5",base07:"#ffffff",base08:"#dd464c",base09:"#fd8b19",base0A:"#fdcc59",base0B:"#8fc13e",base0C:"#149b93",base0D:"#1290bf",base0E:"#c85e7c",base0F:"#b33508"},e.exports=t.default},21932:(e,t,n)=>{"use strict";function i(e){return e&&e.__esModule?e.default:e}t.__esModule=!0;var s=n(79782);t.threezerotwofour=i(s);var r=n(85869);t.apathy=i(r);var o=n(47088);t.ashes=i(o);var a=n(95067);t.atelierDune=i(a);var l=n(57784);t.atelierForest=i(l);var h=n(79859);t.atelierHeath=i(h);var c=n(19525);t.atelierLakeside=i(c);var u=n(15789);t.atelierSeaside=i(u);var f=n(75363);t.bespin=i(f);var d=n(52525);t.brewer=i(d);var p=n(71986);t.bright=i(p);var m=n(45235);t.chalk=i(m);var g=n(69635);t.codeschool=i(g);var b=n(2230);t.colors=i(b);var y=n(68597);t.default=i(y);var v=n(94444);t.eighties=i(v);var x=n(16834);t.embers=i(x);var w=n(96521);t.flat=i(w);var k=n(97469);t.google=i(k);var S=n(84011);t.grayscale=i(S);var C=n(51027);t.greenscreen=i(C);var A=n(88781);t.harmonic=i(A);var O=n(19453);t.hopscotch=i(O);var M=n(58599);t.isotope=i(M);var _=n(84522);t.marrakesh=i(_);var T=n(21946);t.mocha=i(T);var E=n(90010);t.monokai=i(E);var N=n(5942);t.ocean=i(N);var D=n(60443);t.paraiso=i(D);var P=n(7339);t.pop=i(P);var R=n(29009);t.railscasts=i(R);var j=n(16870);t.shapeshifter=i(j);var L=n(72783);t.solarized=i(L);var B=n(24925);t.summerfruit=i(B);var I=n(21533);t.tomorrow=i(I);var F=n(15240);t.tube=i(F);var $=n(95822);t.twilight=i($)},58599:(e,t)=>{"use strict";t.__esModule=!0,t.default={scheme:"isotope",author:"jan t. sott",base00:"#000000",base01:"#404040",base02:"#606060",base03:"#808080",base04:"#c0c0c0",base05:"#d0d0d0",base06:"#e0e0e0",base07:"#ffffff",base08:"#ff0000",base09:"#ff9900",base0A:"#ff0099",base0B:"#33ff00",base0C:"#00ffff",base0D:"#0066ff",base0E:"#cc00ff",base0F:"#3300ff"},e.exports=t.default},84522:(e,t)=>{"use strict";t.__esModule=!0,t.default={scheme:"marrakesh",author:"alexandre gavioli (http://github.com/alexx2/)",base00:"#201602",base01:"#302e00",base02:"#5f5b17",base03:"#6c6823",base04:"#86813b",base05:"#948e48",base06:"#ccc37a",base07:"#faf0a5",base08:"#c35359",base09:"#b36144",base0A:"#a88339",base0B:"#18974e",base0C:"#75a738",base0D:"#477ca1",base0E:"#8868b3",base0F:"#b3588e"},e.exports=t.default},21946:(e,t)=>{"use strict";t.__esModule=!0,t.default={scheme:"mocha",author:"chris kempson (http://chriskempson.com)",base00:"#3B3228",base01:"#534636",base02:"#645240",base03:"#7e705a",base04:"#b8afad",base05:"#d0c8c6",base06:"#e9e1dd",base07:"#f5eeeb",base08:"#cb6077",base09:"#d28b71",base0A:"#f4bc87",base0B:"#beb55b",base0C:"#7bbda4",base0D:"#8ab3b5",base0E:"#a89bb9",base0F:"#bb9584"},e.exports=t.default},90010:(e,t)=>{"use strict";t.__esModule=!0,t.default={scheme:"monokai",author:"wimer hazenberg (http://www.monokai.nl)",base00:"#272822",base01:"#383830",base02:"#49483e",base03:"#75715e",base04:"#a59f85",base05:"#f8f8f2",base06:"#f5f4f1",base07:"#f9f8f5",base08:"#f92672",base09:"#fd971f",base0A:"#f4bf75",base0B:"#a6e22e",base0C:"#a1efe4",base0D:"#66d9ef",base0E:"#ae81ff",base0F:"#cc6633"},e.exports=t.default},5942:(e,t)=>{"use strict";t.__esModule=!0,t.default={scheme:"ocean",author:"chris kempson (http://chriskempson.com)",base00:"#2b303b",base01:"#343d46",base02:"#4f5b66",base03:"#65737e",base04:"#a7adba",base05:"#c0c5ce",base06:"#dfe1e8",base07:"#eff1f5",base08:"#bf616a",base09:"#d08770",base0A:"#ebcb8b",base0B:"#a3be8c",base0C:"#96b5b4",base0D:"#8fa1b3",base0E:"#b48ead",base0F:"#ab7967"},e.exports=t.default},60443:(e,t)=>{"use strict";t.__esModule=!0,t.default={scheme:"paraiso",author:"jan t. sott",base00:"#2f1e2e",base01:"#41323f",base02:"#4f424c",base03:"#776e71",base04:"#8d8687",base05:"#a39e9b",base06:"#b9b6b0",base07:"#e7e9db",base08:"#ef6155",base09:"#f99b15",base0A:"#fec418",base0B:"#48b685",base0C:"#5bc4bf",base0D:"#06b6ef",base0E:"#815ba4",base0F:"#e96ba8"},e.exports=t.default},7339:(e,t)=>{"use strict";t.__esModule=!0,t.default={scheme:"pop",author:"chris kempson (http://chriskempson.com)",base00:"#000000",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#b0b0b0",base05:"#d0d0d0",base06:"#e0e0e0",base07:"#ffffff",base08:"#eb008a",base09:"#f29333",base0A:"#f8ca12",base0B:"#37b349",base0C:"#00aabb",base0D:"#0e5a94",base0E:"#b31e8d",base0F:"#7a2d00"},e.exports=t.default},29009:(e,t)=>{"use strict";t.__esModule=!0,t.default={scheme:"railscasts",author:"ryan bates (http://railscasts.com)",base00:"#2b2b2b",base01:"#272935",base02:"#3a4055",base03:"#5a647e",base04:"#d4cfc9",base05:"#e6e1dc",base06:"#f4f1ed",base07:"#f9f7f3",base08:"#da4939",base09:"#cc7833",base0A:"#ffc66d",base0B:"#a5c261",base0C:"#519f50",base0D:"#6d9cbe",base0E:"#b6b3eb",base0F:"#bc9458"},e.exports=t.default},16870:(e,t)=>{"use strict";t.__esModule=!0,t.default={scheme:"shapeshifter",author:"tyler benziger (http://tybenz.com)",base00:"#000000",base01:"#040404",base02:"#102015",base03:"#343434",base04:"#555555",base05:"#ababab",base06:"#e0e0e0",base07:"#f9f9f9",base08:"#e92f2f",base09:"#e09448",base0A:"#dddd13",base0B:"#0ed839",base0C:"#23edda",base0D:"#3b48e3",base0E:"#f996e2",base0F:"#69542d"},e.exports=t.default},72783:(e,t)=>{"use strict";t.__esModule=!0,t.default={scheme:"solarized",author:"ethan schoonover (http://ethanschoonover.com/solarized)",base00:"#002b36",base01:"#073642",base02:"#586e75",base03:"#657b83",base04:"#839496",base05:"#93a1a1",base06:"#eee8d5",base07:"#fdf6e3",base08:"#dc322f",base09:"#cb4b16",base0A:"#b58900",base0B:"#859900",base0C:"#2aa198",base0D:"#268bd2",base0E:"#6c71c4",base0F:"#d33682"},e.exports=t.default},24925:(e,t)=>{"use strict";t.__esModule=!0,t.default={scheme:"summerfruit",author:"christopher corley (http://cscorley.github.io/)",base00:"#151515",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#B0B0B0",base05:"#D0D0D0",base06:"#E0E0E0",base07:"#FFFFFF",base08:"#FF0086",base09:"#FD8900",base0A:"#ABA800",base0B:"#00C918",base0C:"#1faaaa",base0D:"#3777E6",base0E:"#AD00A1",base0F:"#cc6633"},e.exports=t.default},79782:(e,t)=>{"use strict";t.__esModule=!0,t.default={scheme:"threezerotwofour",author:"jan t. sott (http://github.com/idleberg)",base00:"#090300",base01:"#3a3432",base02:"#4a4543",base03:"#5c5855",base04:"#807d7c",base05:"#a5a2a2",base06:"#d6d5d4",base07:"#f7f7f7",base08:"#db2d20",base09:"#e8bbd0",base0A:"#fded02",base0B:"#01a252",base0C:"#b5e4f4",base0D:"#01a0e4",base0E:"#a16a94",base0F:"#cdab53"},e.exports=t.default},21533:(e,t)=>{"use strict";t.__esModule=!0,t.default={scheme:"tomorrow",author:"chris kempson (http://chriskempson.com)",base00:"#1d1f21",base01:"#282a2e",base02:"#373b41",base03:"#969896",base04:"#b4b7b4",base05:"#c5c8c6",base06:"#e0e0e0",base07:"#ffffff",base08:"#cc6666",base09:"#de935f",base0A:"#f0c674",base0B:"#b5bd68",base0C:"#8abeb7",base0D:"#81a2be",base0E:"#b294bb",base0F:"#a3685a"},e.exports=t.default},15240:(e,t)=>{"use strict";t.__esModule=!0,t.default={scheme:"london tube",author:"jan t. sott",base00:"#231f20",base01:"#1c3f95",base02:"#5a5758",base03:"#737171",base04:"#959ca1",base05:"#d9d8d8",base06:"#e7e7e8",base07:"#ffffff",base08:"#ee2e24",base09:"#f386a1",base0A:"#ffd204",base0B:"#00853e",base0C:"#85cebc",base0D:"#009ddc",base0E:"#98005d",base0F:"#b06110"},e.exports=t.default},95822:(e,t)=>{"use strict";t.__esModule=!0,t.default={scheme:"twilight",author:"david hart (http://hart-dev.com)",base00:"#1e1e1e",base01:"#323537",base02:"#464b50",base03:"#5f5a60",base04:"#838184",base05:"#a7a7a7",base06:"#c3c3c3",base07:"#ffffff",base08:"#cf6a4c",base09:"#cda869",base0A:"#f9ee98",base0B:"#8f9d6a",base0C:"#afc4db",base0D:"#7587a6",base0E:"#9b859d",base0F:"#9b703f"},e.exports=t.default},76931:e=>{"use strict";e.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},43269:(e,t,n)=>{var i=n(76931),s=n(59975),r=Object.hasOwnProperty,o=Object.create(null);for(var a in i)r.call(i,a)&&(o[i[a]]=a);var l=e.exports={to:{},get:{}};function h(e,t,n){return Math.min(Math.max(t,e),n)}function c(e){var t=Math.round(e).toString(16).toUpperCase();return t.length<2?"0"+t:t}l.get=function(e){var t,n;switch(e.substring(0,3).toLowerCase()){case"hsl":t=l.get.hsl(e),n="hsl";break;case"hwb":t=l.get.hwb(e),n="hwb";break;default:t=l.get.rgb(e),n="rgb"}return t?{model:n,value:t}:null},l.get.rgb=function(e){if(!e)return null;var t,n,s,o=[0,0,0,1];if(t=e.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(s=t[2],t=t[1],n=0;n<3;n++){var a=2*n;o[n]=parseInt(t.slice(a,a+2),16)}s&&(o[3]=parseInt(s,16)/255)}else if(t=e.match(/^#([a-f0-9]{3,4})$/i)){for(s=(t=t[1])[3],n=0;n<3;n++)o[n]=parseInt(t[n]+t[n],16);s&&(o[3]=parseInt(s+s,16)/255)}else if(t=e.match(/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)){for(n=0;n<3;n++)o[n]=parseInt(t[n+1],0);t[4]&&(t[5]?o[3]=.01*parseFloat(t[4]):o[3]=parseFloat(t[4]))}else{if(!(t=e.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)))return(t=e.match(/^(\w+)$/))?"transparent"===t[1]?[0,0,0,0]:r.call(i,t[1])?((o=i[t[1]])[3]=1,o):null:null;for(n=0;n<3;n++)o[n]=Math.round(2.55*parseFloat(t[n+1]));t[4]&&(t[5]?o[3]=.01*parseFloat(t[4]):o[3]=parseFloat(t[4]))}for(n=0;n<3;n++)o[n]=h(o[n],0,255);return o[3]=h(o[3],0,1),o},l.get.hsl=function(e){if(!e)return null;var t=e.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(t){var n=parseFloat(t[4]);return[(parseFloat(t[1])%360+360)%360,h(parseFloat(t[2]),0,100),h(parseFloat(t[3]),0,100),h(isNaN(n)?1:n,0,1)]}return null},l.get.hwb=function(e){if(!e)return null;var t=e.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(t){var n=parseFloat(t[4]);return[(parseFloat(t[1])%360+360)%360,h(parseFloat(t[2]),0,100),h(parseFloat(t[3]),0,100),h(isNaN(n)?1:n,0,1)]}return null},l.to.hex=function(){var e=s(arguments);return"#"+c(e[0])+c(e[1])+c(e[2])+(e[3]<1?c(Math.round(255*e[3])):"")},l.to.rgb=function(){var e=s(arguments);return e.length<4||1===e[3]?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"},l.to.rgb.percent=function(){var e=s(arguments),t=Math.round(e[0]/255*100),n=Math.round(e[1]/255*100),i=Math.round(e[2]/255*100);return e.length<4||1===e[3]?"rgb("+t+"%, "+n+"%, "+i+"%)":"rgba("+t+"%, "+n+"%, "+i+"%, "+e[3]+")"},l.to.hsl=function(){var e=s(arguments);return e.length<4||1===e[3]?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"},l.to.hwb=function(){var e=s(arguments),t="";return e.length>=4&&1!==e[3]&&(t=", "+e[3]),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+t+")"},l.to.keyword=function(e){return o[e.slice(0,3)]}},70465:(e,t,n)=>{"use strict";var i=n(43269),s=n(28754),r=[].slice,o=["keyword","gray","hex"],a={};Object.keys(s).forEach((function(e){a[r.call(s[e].labels).sort().join("")]=e}));var l={};function h(e,t){if(!(this instanceof h))return new h(e,t);if(t&&t in o&&(t=null),t&&!(t in s))throw new Error("Unknown model: "+t);var n,c;if(null==e)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(e instanceof h)this.model=e.model,this.color=e.color.slice(),this.valpha=e.valpha;else if("string"==typeof e){var u=i.get(e);if(null===u)throw new Error("Unable to parse color from string: "+e);this.model=u.model,c=s[this.model].channels,this.color=u.value.slice(0,c),this.valpha="number"==typeof u.value[c]?u.value[c]:1}else if(e.length){this.model=t||"rgb",c=s[this.model].channels;var d=r.call(e,0,c);this.color=f(d,c),this.valpha="number"==typeof e[c]?e[c]:1}else if("number"==typeof e)e&=16777215,this.model="rgb",this.color=[e>>16&255,e>>8&255,255&e],this.valpha=1;else{this.valpha=1;var p=Object.keys(e);"alpha"in e&&(p.splice(p.indexOf("alpha"),1),this.valpha="number"==typeof e.alpha?e.alpha:0);var m=p.sort().join("");if(!(m in a))throw new Error("Unable to parse color from object: "+JSON.stringify(e));this.model=a[m];var g=s[this.model].labels,b=[];for(n=0;n<g.length;n++)b.push(e[g[n]]);this.color=f(b)}if(l[this.model])for(c=s[this.model].channels,n=0;n<c;n++){var y=l[this.model][n];y&&(this.color[n]=y(this.color[n]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}function c(e,t,n){return(e=Array.isArray(e)?e:[e]).forEach((function(e){(l[e]||(l[e]=[]))[t]=n})),e=e[0],function(i){var s;return arguments.length?(n&&(i=n(i)),(s=this[e]()).color[t]=i,s):(s=this[e]().color[t],n&&(s=n(s)),s)}}function u(e){return function(t){return Math.max(0,Math.min(e,t))}}function f(e,t){for(var n=0;n<t;n++)"number"!=typeof e[n]&&(e[n]=0);return e}h.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(e){var t=this.model in i.to?this:this.rgb(),n=1===(t=t.round("number"==typeof e?e:1)).valpha?t.color:t.color.concat(this.valpha);return i.to[t.model](n)},percentString:function(e){var t=this.rgb().round("number"==typeof e?e:1),n=1===t.valpha?t.color:t.color.concat(this.valpha);return i.to.rgb.percent(n)},array:function(){return 1===this.valpha?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var e={},t=s[this.model].channels,n=s[this.model].labels,i=0;i<t;i++)e[n[i]]=this.color[i];return 1!==this.valpha&&(e.alpha=this.valpha),e},unitArray:function(){var e=this.rgb().color;return e[0]/=255,e[1]/=255,e[2]/=255,1!==this.valpha&&e.push(this.valpha),e},unitObject:function(){var e=this.rgb().object();return e.r/=255,e.g/=255,e.b/=255,1!==this.valpha&&(e.alpha=this.valpha),e},round:function(e){return e=Math.max(e||0,0),new h(this.color.map(function(e){return function(t){return function(e,t){return Number(e.toFixed(t))}(t,e)}}(e)).concat(this.valpha),this.model)},alpha:function(e){return arguments.length?new h(this.color.concat(Math.max(0,Math.min(1,e))),this.model):this.valpha},red:c("rgb",0,u(255)),green:c("rgb",1,u(255)),blue:c("rgb",2,u(255)),hue:c(["hsl","hsv","hsl","hwb","hcg"],0,(function(e){return(e%360+360)%360})),saturationl:c("hsl",1,u(100)),lightness:c("hsl",2,u(100)),saturationv:c("hsv",1,u(100)),value:c("hsv",2,u(100)),chroma:c("hcg",1,u(100)),gray:c("hcg",2,u(100)),white:c("hwb",1,u(100)),wblack:c("hwb",2,u(100)),cyan:c("cmyk",0,u(100)),magenta:c("cmyk",1,u(100)),yellow:c("cmyk",2,u(100)),black:c("cmyk",3,u(100)),x:c("xyz",0,u(100)),y:c("xyz",1,u(100)),z:c("xyz",2,u(100)),l:c("lab",0,u(100)),a:c("lab",1),b:c("lab",2),keyword:function(e){return arguments.length?new h(e):s[this.model].keyword(this.color)},hex:function(e){return arguments.length?new h(e):i.to.hex(this.rgb().round().color)},rgbNumber:function(){var e=this.rgb().color;return(255&e[0])<<16|(255&e[1])<<8|255&e[2]},luminosity:function(){for(var e=this.rgb().color,t=[],n=0;n<e.length;n++){var i=e[n]/255;t[n]=i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4)}return.2126*t[0]+.7152*t[1]+.0722*t[2]},contrast:function(e){var t=this.luminosity(),n=e.luminosity();return t>n?(t+.05)/(n+.05):(n+.05)/(t+.05)},level:function(e){var t=this.contrast(e);return t>=7.1?"AAA":t>=4.5?"AA":""},isDark:function(){var e=this.rgb().color;return(299*e[0]+587*e[1]+114*e[2])/1e3<128},isLight:function(){return!this.isDark()},negate:function(){for(var e=this.rgb(),t=0;t<3;t++)e.color[t]=255-e.color[t];return e},lighten:function(e){var t=this.hsl();return t.color[2]+=t.color[2]*e,t},darken:function(e){var t=this.hsl();return t.color[2]-=t.color[2]*e,t},saturate:function(e){var t=this.hsl();return t.color[1]+=t.color[1]*e,t},desaturate:function(e){var t=this.hsl();return t.color[1]-=t.color[1]*e,t},whiten:function(e){var t=this.hwb();return t.color[1]+=t.color[1]*e,t},blacken:function(e){var t=this.hwb();return t.color[2]+=t.color[2]*e,t},grayscale:function(){var e=this.rgb().color,t=.3*e[0]+.59*e[1]+.11*e[2];return h.rgb(t,t,t)},fade:function(e){return this.alpha(this.valpha-this.valpha*e)},opaquer:function(e){return this.alpha(this.valpha+this.valpha*e)},rotate:function(e){var t=this.hsl(),n=t.color[0];return n=(n=(n+e)%360)<0?360+n:n,t.color[0]=n,t},mix:function(e,t){if(!e||!e.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof e);var n=e.rgb(),i=this.rgb(),s=void 0===t?.5:t,r=2*s-1,o=n.alpha()-i.alpha(),a=((r*o==-1?r:(r+o)/(1+r*o))+1)/2,l=1-a;return h.rgb(a*n.red()+l*i.red(),a*n.green()+l*i.green(),a*n.blue()+l*i.blue(),n.alpha()*s+i.alpha()*(1-s))}},Object.keys(s).forEach((function(e){if(-1===o.indexOf(e)){var t=s[e].channels;h.prototype[e]=function(){if(this.model===e)return new h(this);if(arguments.length)return new h(arguments,e);var n,i="number"==typeof arguments[t]?t:this.valpha;return new h((n=s[this.model][e].raw(this.color),Array.isArray(n)?n:[n]).concat(i),e)},h[e]=function(n){return"number"==typeof n&&(n=f(r.call(arguments),t)),new h(n,e)}}})),e.exports=h},65159:(e,t,n)=>{var i=n(83928),s={};for(var r in i)i.hasOwnProperty(r)&&(s[i[r]]=r);var o=e.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var a in o)if(o.hasOwnProperty(a)){if(!("channels"in o[a]))throw new Error("missing channels property: "+a);if(!("labels"in o[a]))throw new Error("missing channel labels property: "+a);if(o[a].labels.length!==o[a].channels)throw new Error("channel and label counts mismatch: "+a);var l=o[a].channels,h=o[a].labels;delete o[a].channels,delete o[a].labels,Object.defineProperty(o[a],"channels",{value:l}),Object.defineProperty(o[a],"labels",{value:h})}o.rgb.hsl=function(e){var t,n,i=e[0]/255,s=e[1]/255,r=e[2]/255,o=Math.min(i,s,r),a=Math.max(i,s,r),l=a-o;return a===o?t=0:i===a?t=(s-r)/l:s===a?t=2+(r-i)/l:r===a&&(t=4+(i-s)/l),(t=Math.min(60*t,360))<0&&(t+=360),n=(o+a)/2,[t,100*(a===o?0:n<=.5?l/(a+o):l/(2-a-o)),100*n]},o.rgb.hsv=function(e){var t,n,i,s,r,o=e[0]/255,a=e[1]/255,l=e[2]/255,h=Math.max(o,a,l),c=h-Math.min(o,a,l),u=function(e){return(h-e)/6/c+.5};return 0===c?s=r=0:(r=c/h,t=u(o),n=u(a),i=u(l),o===h?s=i-n:a===h?s=1/3+t-i:l===h&&(s=2/3+n-t),s<0?s+=1:s>1&&(s-=1)),[360*s,100*r,100*h]},o.rgb.hwb=function(e){var t=e[0],n=e[1],i=e[2];return[o.rgb.hsl(e)[0],1/255*Math.min(t,Math.min(n,i))*100,100*(i=1-1/255*Math.max(t,Math.max(n,i)))]},o.rgb.cmyk=function(e){var t,n=e[0]/255,i=e[1]/255,s=e[2]/255;return[100*((1-n-(t=Math.min(1-n,1-i,1-s)))/(1-t)||0),100*((1-i-t)/(1-t)||0),100*((1-s-t)/(1-t)||0),100*t]},o.rgb.keyword=function(e){var t=s[e];if(t)return t;var n,r,o,a=1/0;for(var l in i)if(i.hasOwnProperty(l)){var h=(r=e,o=i[l],Math.pow(r[0]-o[0],2)+Math.pow(r[1]-o[1],2)+Math.pow(r[2]-o[2],2));h<a&&(a=h,n=l)}return n},o.keyword.rgb=function(e){return i[e]},o.rgb.xyz=function(e){var t=e[0]/255,n=e[1]/255,i=e[2]/255;return[100*(.4124*(t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92)+.3576*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)+.1805*(i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92)),100*(.2126*t+.7152*n+.0722*i),100*(.0193*t+.1192*n+.9505*i)]},o.rgb.lab=function(e){var t=o.rgb.xyz(e),n=t[0],i=t[1],s=t[2];return i/=100,s/=108.883,n=(n/=95.047)>.008856?Math.pow(n,1/3):7.787*n+16/116,[116*(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116)-16,500*(n-i),200*(i-(s=s>.008856?Math.pow(s,1/3):7.787*s+16/116))]},o.hsl.rgb=function(e){var t,n,i,s,r,o=e[0]/360,a=e[1]/100,l=e[2]/100;if(0===a)return[r=255*l,r,r];t=2*l-(n=l<.5?l*(1+a):l+a-l*a),s=[0,0,0];for(var h=0;h<3;h++)(i=o+1/3*-(h-1))<0&&i++,i>1&&i--,r=6*i<1?t+6*(n-t)*i:2*i<1?n:3*i<2?t+(n-t)*(2/3-i)*6:t,s[h]=255*r;return s},o.hsl.hsv=function(e){var t=e[0],n=e[1]/100,i=e[2]/100,s=n,r=Math.max(i,.01);return n*=(i*=2)<=1?i:2-i,s*=r<=1?r:2-r,[t,100*(0===i?2*s/(r+s):2*n/(i+n)),(i+n)/2*100]},o.hsv.rgb=function(e){var t=e[0]/60,n=e[1]/100,i=e[2]/100,s=Math.floor(t)%6,r=t-Math.floor(t),o=255*i*(1-n),a=255*i*(1-n*r),l=255*i*(1-n*(1-r));switch(i*=255,s){case 0:return[i,l,o];case 1:return[a,i,o];case 2:return[o,i,l];case 3:return[o,a,i];case 4:return[l,o,i];case 5:return[i,o,a]}},o.hsv.hsl=function(e){var t,n,i,s=e[0],r=e[1]/100,o=e[2]/100,a=Math.max(o,.01);return i=(2-r)*o,n=r*a,[s,100*(n=(n/=(t=(2-r)*a)<=1?t:2-t)||0),100*(i/=2)]},o.hwb.rgb=function(e){var t,n,i,s,r,o,a,l=e[0]/360,h=e[1]/100,c=e[2]/100,u=h+c;switch(u>1&&(h/=u,c/=u),i=6*l-(t=Math.floor(6*l)),1&t&&(i=1-i),s=h+i*((n=1-c)-h),t){default:case 6:case 0:r=n,o=s,a=h;break;case 1:r=s,o=n,a=h;break;case 2:r=h,o=n,a=s;break;case 3:r=h,o=s,a=n;break;case 4:r=s,o=h,a=n;break;case 5:r=n,o=h,a=s}return[255*r,255*o,255*a]},o.cmyk.rgb=function(e){var t=e[0]/100,n=e[1]/100,i=e[2]/100,s=e[3]/100;return[255*(1-Math.min(1,t*(1-s)+s)),255*(1-Math.min(1,n*(1-s)+s)),255*(1-Math.min(1,i*(1-s)+s))]},o.xyz.rgb=function(e){var t,n,i,s=e[0]/100,r=e[1]/100,o=e[2]/100;return n=-.9689*s+1.8758*r+.0415*o,i=.0557*s+-.204*r+1.057*o,t=(t=3.2406*s+-1.5372*r+-.4986*o)>.0031308?1.055*Math.pow(t,1/2.4)-.055:12.92*t,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:12.92*i,[255*(t=Math.min(Math.max(0,t),1)),255*(n=Math.min(Math.max(0,n),1)),255*(i=Math.min(Math.max(0,i),1))]},o.xyz.lab=function(e){var t=e[0],n=e[1],i=e[2];return n/=100,i/=108.883,t=(t/=95.047)>.008856?Math.pow(t,1/3):7.787*t+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(t-n),200*(n-(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116))]},o.lab.xyz=function(e){var t,n,i,s=e[0];t=e[1]/500+(n=(s+16)/116),i=n-e[2]/200;var r=Math.pow(n,3),o=Math.pow(t,3),a=Math.pow(i,3);return n=r>.008856?r:(n-16/116)/7.787,t=o>.008856?o:(t-16/116)/7.787,i=a>.008856?a:(i-16/116)/7.787,[t*=95.047,n*=100,i*=108.883]},o.lab.lch=function(e){var t,n=e[0],i=e[1],s=e[2];return(t=360*Math.atan2(s,i)/2/Math.PI)<0&&(t+=360),[n,Math.sqrt(i*i+s*s),t]},o.lch.lab=function(e){var t,n=e[0],i=e[1];return t=e[2]/360*2*Math.PI,[n,i*Math.cos(t),i*Math.sin(t)]},o.rgb.ansi16=function(e){var t=e[0],n=e[1],i=e[2],s=1 in arguments?arguments[1]:o.rgb.hsv(e)[2];if(0===(s=Math.round(s/50)))return 30;var r=30+(Math.round(i/255)<<2|Math.round(n/255)<<1|Math.round(t/255));return 2===s&&(r+=60),r},o.hsv.ansi16=function(e){return o.rgb.ansi16(o.hsv.rgb(e),e[2])},o.rgb.ansi256=function(e){var t=e[0],n=e[1],i=e[2];return t===n&&n===i?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(n/255*5)+Math.round(i/255*5)},o.ansi16.rgb=function(e){var t=e%10;if(0===t||7===t)return e>50&&(t+=3.5),[t=t/10.5*255,t,t];var n=.5*(1+~~(e>50));return[(1&t)*n*255,(t>>1&1)*n*255,(t>>2&1)*n*255]},o.ansi256.rgb=function(e){if(e>=232){var t=10*(e-232)+8;return[t,t,t]}var n;return e-=16,[Math.floor(e/36)/5*255,Math.floor((n=e%36)/6)/5*255,n%6/5*255]},o.rgb.hex=function(e){var t=(((255&Math.round(e[0]))<<16)+((255&Math.round(e[1]))<<8)+(255&Math.round(e[2]))).toString(16).toUpperCase();return"000000".substring(t.length)+t},o.hex.rgb=function(e){var t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];var n=t[0];3===t[0].length&&(n=n.split("").map((function(e){return e+e})).join(""));var i=parseInt(n,16);return[i>>16&255,i>>8&255,255&i]},o.rgb.hcg=function(e){var t,n=e[0]/255,i=e[1]/255,s=e[2]/255,r=Math.max(Math.max(n,i),s),o=Math.min(Math.min(n,i),s),a=r-o;return t=a<=0?0:r===n?(i-s)/a%6:r===i?2+(s-n)/a:4+(n-i)/a+4,t/=6,[360*(t%=1),100*a,100*(a<1?o/(1-a):0)]},o.hsl.hcg=function(e){var t,n=e[1]/100,i=e[2]/100,s=0;return(t=i<.5?2*n*i:2*n*(1-i))<1&&(s=(i-.5*t)/(1-t)),[e[0],100*t,100*s]},o.hsv.hcg=function(e){var t=e[1]/100,n=e[2]/100,i=t*n,s=0;return i<1&&(s=(n-i)/(1-i)),[e[0],100*i,100*s]},o.hcg.rgb=function(e){var t=e[0]/360,n=e[1]/100,i=e[2]/100;if(0===n)return[255*i,255*i,255*i];var s,r=[0,0,0],o=t%1*6,a=o%1,l=1-a;switch(Math.floor(o)){case 0:r[0]=1,r[1]=a,r[2]=0;break;case 1:r[0]=l,r[1]=1,r[2]=0;break;case 2:r[0]=0,r[1]=1,r[2]=a;break;case 3:r[0]=0,r[1]=l,r[2]=1;break;case 4:r[0]=a,r[1]=0,r[2]=1;break;default:r[0]=1,r[1]=0,r[2]=l}return s=(1-n)*i,[255*(n*r[0]+s),255*(n*r[1]+s),255*(n*r[2]+s)]},o.hcg.hsv=function(e){var t=e[1]/100,n=t+e[2]/100*(1-t),i=0;return n>0&&(i=t/n),[e[0],100*i,100*n]},o.hcg.hsl=function(e){var t=e[1]/100,n=e[2]/100*(1-t)+.5*t,i=0;return n>0&&n<.5?i=t/(2*n):n>=.5&&n<1&&(i=t/(2*(1-n))),[e[0],100*i,100*n]},o.hcg.hwb=function(e){var t=e[1]/100,n=t+e[2]/100*(1-t);return[e[0],100*(n-t),100*(1-n)]},o.hwb.hcg=function(e){var t=e[1]/100,n=1-e[2]/100,i=n-t,s=0;return i<1&&(s=(n-i)/(1-i)),[e[0],100*i,100*s]},o.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]},o.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]},o.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]},o.gray.hsl=o.gray.hsv=function(e){return[0,0,e[0]]},o.gray.hwb=function(e){return[0,100,e[0]]},o.gray.cmyk=function(e){return[0,0,0,e[0]]},o.gray.lab=function(e){return[e[0],0,0]},o.gray.hex=function(e){var t=255&Math.round(e[0]/100*255),n=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(n.length)+n},o.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]}},28754:(e,t,n)=>{var i=n(65159),s=n(52695),r={};Object.keys(i).forEach((function(e){r[e]={},Object.defineProperty(r[e],"channels",{value:i[e].channels}),Object.defineProperty(r[e],"labels",{value:i[e].labels});var t=s(e);Object.keys(t).forEach((function(n){var i=t[n];r[e][n]=function(e){var t=function(t){if(null==t)return t;arguments.length>1&&(t=Array.prototype.slice.call(arguments));var n=e(t);if("object"==typeof n)for(var i=n.length,s=0;s<i;s++)n[s]=Math.round(n[s]);return n};return"conversion"in e&&(t.conversion=e.conversion),t}(i),r[e][n].raw=function(e){var t=function(t){return null==t?t:(arguments.length>1&&(t=Array.prototype.slice.call(arguments)),e(t))};return"conversion"in e&&(t.conversion=e.conversion),t}(i)}))})),e.exports=r},52695:(e,t,n)=>{var i=n(65159);function s(e,t){return function(n){return t(e(n))}}function r(e,t){for(var n=[t[e].parent,e],r=i[t[e].parent][e],o=t[e].parent;t[o].parent;)n.unshift(t[o].parent),r=s(i[t[o].parent][o],r),o=t[o].parent;return r.conversion=n,r}e.exports=function(e){for(var t=function(e){var t=function(){for(var e={},t=Object.keys(i),n=t.length,s=0;s<n;s++)e[t[s]]={distance:-1,parent:null};return e}(),n=[e];for(t[e].distance=0;n.length;)for(var s=n.pop(),r=Object.keys(i[s]),o=r.length,a=0;a<o;a++){var l=r[a],h=t[l];-1===h.distance&&(h.distance=t[s].distance+1,h.parent=s,n.unshift(l))}return t}(e),n={},s=Object.keys(t),o=s.length,a=0;a<o;a++){var l=s[a];null!==t[l].parent&&(n[l]=r(l,t))}return n}},83928:e=>{"use strict";e.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},68101:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Cache:()=>p,FreeStyle:()=>v,Rule:()=>b,Selector:()=>m,Style:()=>g,create:()=>x});let i=0;const s=Object.create(null),r=["animation-iteration-count","border-image-outset","border-image-slice","border-image-width","box-flex","box-flex-group","box-ordinal-group","column-count","columns","counter-increment","counter-reset","flex","flex-grow","flex-positive","flex-shrink","flex-negative","flex-order","font-weight","grid-area","grid-column","grid-column-end","grid-column-span","grid-column-start","grid-row","grid-row-end","grid-row-span","grid-row-start","line-clamp","line-height","opacity","order","orphans","tab-size","widows","z-index","zoom","fill-opacity","flood-opacity","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-miterlimit","stroke-opacity","stroke-width"];for(const e of r)for(const t of["-webkit-","-ms-","-moz-","-o-",""])s[t+e]=!0;function o(e,t){return t&&"number"==typeof t&&!s[e]?`${e}:${t}px`:`${e}:${t}`}function a(e){return e.sort(((e,t)=>e[0]>t[0]?1:-1))}function l(e){return e.map((([e,t])=>Array.isArray(t)?t.map((t=>o(e,t))).join(";"):o(e,t))).join(";")}function h(e,t){return-1===e.indexOf("&")?`${t} ${e}`:e.replace(/&/g,t)}function c(e,t,n,i,s){const{style:r,nested:o,isUnique:u}=function(e,t){const n=[],i=[];for(const t of Object.keys(e)){const r=t.trim(),o=e[t];36!==r.charCodeAt(0)&&null!=o&&("object"!=typeof o||Array.isArray(o)?n.push([(s=r,s.replace(/[A-Z]/g,(e=>`-${e.toLowerCase()}`)).replace(/^ms-/,"-ms-")),o]):i.push([r,o]))}var s;return{style:l(a(n)),nested:t?i:a(i),isUnique:!!e.$unique}}(t,""!==e);let f=r;if(64===e.charCodeAt(0)){const t={selector:e,styles:[],rules:[],style:s?"":r};n.push(t),r&&s&&t.styles.push({selector:s,style:r,isUnique:u});for(const[e,n]of o)f+=e+c(e,n,t.rules,t.styles,s)}else{const t=s?h(e,s):e;r&&i.push({selector:t,style:r,isUnique:u});for(const[e,s]of o)f+=e+c(e,s,n,i,t)}return f}function u(e,t,n,s,r,o){for(const{selector:n,style:a,isUnique:l}of s){const s=o?h(n,r):n,c=l?`u\0${(++i).toString(36)}`:`s\0${t}\0${a}`,u=new g(a,c);u.add(new m(s,`k\0${t}\0${s}`)),e.add(u)}for(const{selector:i,style:s,rules:a,styles:l}of n){const n=new b(i,s,`r\0${t}\0${i}\0${s}`);u(n,t,a,l,r,o),e.add(n)}}function f(e){let t="";for(let n=0;n<e.length;n++)t+=e[n];return t}const d={add:()=>{},change:()=>{},remove:()=>{}};class p{constructor(e=d){this.changes=e,this.sheet=[],this.changeId=0,this._keys=[],this._children=Object.create(null),this._counters=Object.create(null)}add(e){const t=this._counters[e.id]||0,n=this._children[e.id]||e.clone();if(this._counters[e.id]=t+1,0===t)this._children[n.id]=n,this._keys.push(n.id),this.sheet.push(n.getStyles()),this.changeId++,this.changes.add(n,this._keys.length-1);else if(n instanceof p&&e instanceof p){const t=this._keys.indexOf(e.id),i=n.changeId;n.merge(e),n.changeId!==i&&(this.sheet.splice(t,1,n.getStyles()),this.changeId++,this.changes.change(n,t,t))}}remove(e){const t=this._counters[e.id];if(t){this._counters[e.id]=t-1;const n=this._children[e.id],i=this._keys.indexOf(n.id);if(1===t)delete this._counters[e.id],delete this._children[e.id],this._keys.splice(i,1),this.sheet.splice(i,1),this.changeId++,this.changes.remove(n,i);else if(n instanceof p&&e instanceof p){const t=n.changeId;n.unmerge(e),n.changeId!==t&&(this.sheet.splice(i,1,n.getStyles()),this.changeId++,this.changes.change(n,i,i))}}}values(){return this._keys.map((e=>this._children[e]))}merge(e){for(const t of e.values())this.add(t);return this}unmerge(e){for(const t of e.values())this.remove(t);return this}clone(){return(new p).merge(this)}}class m{constructor(e,t){this.selector=e,this.id=t}getStyles(){return this.selector}clone(){return this}}class g extends p{constructor(e,t){super(),this.style=e,this.id=t}getStyles(){return`${this.sheet.join(",")}{${this.style}}`}clone(){return new g(this.style,this.id).merge(this)}}class b extends p{constructor(e,t,n){super(),this.rule=e,this.style=t,this.id=n}getStyles(){return`${this.rule}{${this.style}${f(this.sheet)}}`}clone(){return new b(this.rule,this.style,this.id).merge(this)}}function y(e,t){return`f${function(e){let t=5381,n=e.length;for(;n--;)t=33*t^e.charCodeAt(n);return(t>>>0).toString(36)}(e)}`}class v extends p{constructor(e,t){super(t),this.id=e}registerStyle(e){const t=[],n=[],i=c("&",e,t,n),s=y(i);return u(this,i,t,n,`.${s}`,!0),s}registerKeyframes(e){return this.registerHashRule("@keyframes",e)}registerHashRule(e,t){const n=[],i=[],s=c("",t,n,i),r=y(s),o=new b(`${e} ${r}`,"",`h\0${s}\0${e}`);return u(o,s,n,i,"",!1),this.add(o),r}registerRule(e,t){const n=[],i=[];u(this,c(e,t,n,i),n,i,"",!1)}registerCss(e){return this.registerRule("",e)}getStyles(){return f(this.sheet)}clone(){return new v(this.id,this.changes).merge(this)}}function x(e){return new v(`f${(++i).toString(36)}`,e)}},99910:(e,t,n)=>{var i="Expected a function",s="__lodash_placeholder__",r=1,o=2,a=4,l=8,h=16,c=32,u=64,f=128,d=512,p=1/0,m=9007199254740991,g=17976931348623157e292,b=NaN,y=[["ary",f],["bind",r],["bindKey",o],["curry",l],["curryRight",h],["flip",d],["partial",c],["partialRight",u],["rearg",256]],v="[object Function]",x="[object GeneratorFunction]",w="[object Symbol]",k=/^\s+|\s+$/g,S=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,C=/\{\n\/\* \[wrapped with (.+)\] \*/,A=/,? & /,O=/^[-+]0x[0-9a-f]+$/i,M=/^0b[01]+$/i,_=/^\[object .+?Constructor\]$/,T=/^0o[0-7]+$/i,E=/^(?:0|[1-9]\d*)$/,N=parseInt,D="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,P="object"==typeof self&&self&&self.Object===Object&&self,R=D||P||Function("return this")();function j(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function L(e){return e!=e}function B(e,t){for(var n=-1,i=e.length,r=0,o=[];++n<i;){var a=e[n];a!==t&&a!==s||(e[n]=s,o[r++]=n)}return o}var I,F,$,z=Function.prototype,H=Object.prototype,q=R["__core-js_shared__"],V=(I=/[^.]+$/.exec(q&&q.keys&&q.keys.IE_PROTO||""))?"Symbol(src)_1."+I:"",W=z.toString,G=H.hasOwnProperty,U=H.toString,K=RegExp("^"+W.call(G).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),J=Object.create,Y=Math.max,X=Math.min,Q=(F=ie(Object,"defineProperty"),($=ie.name)&&$.length>2?F:void 0);function Z(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n,i=ce(n=e.prototype)?J(n):{},s=e.apply(i,t);return ce(s)?s:i}}function ee(e,t,n,i,s,a,c,u,p,m){var g=t&f,b=t&r,y=t&o,v=t&(l|h),x=t&d,w=y?void 0:Z(e);return function r(){for(var o=arguments.length,l=Array(o),h=o;h--;)l[h]=arguments[h];if(v)var f=ne(r),d=function(e,t){for(var n=e.length,i=0;n--;)e[n]===t&&i++;return i}(l,f);if(i&&(l=function(e,t,n,i){for(var s=-1,r=e.length,o=n.length,a=-1,l=t.length,h=Y(r-o,0),c=Array(l+h),u=!i;++a<l;)c[a]=t[a];for(;++s<o;)(u||s<r)&&(c[n[s]]=e[s]);for(;h--;)c[a++]=e[s++];return c}(l,i,s,v)),a&&(l=function(e,t,n,i){for(var s=-1,r=e.length,o=-1,a=n.length,l=-1,h=t.length,c=Y(r-a,0),u=Array(c+h),f=!i;++s<c;)u[s]=e[s];for(var d=s;++l<h;)u[d+l]=t[l];for(;++o<a;)(f||s<r)&&(u[d+n[o]]=e[s++]);return u}(l,a,c,v)),o-=d,v&&o<m){var k=B(l,f);return te(e,t,ee,r.placeholder,n,l,k,u,p,m-o)}var S=b?n:this,C=y?S[e]:e;return o=l.length,u?l=function(e,t){for(var n=e.length,i=X(t.length,n),s=function(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}(e);i--;){var r=t[i];e[i]=oe(r,n)?s[r]:void 0}return e}(l,u):x&&o>1&&l.reverse(),g&&p<o&&(l.length=p),this&&this!==R&&this instanceof r&&(C=w||Z(C)),C.apply(S,l)}}function te(e,t,n,i,s,h,f,d,p,m){var g=t&l;t|=g?c:u,(t&=~(g?u:c))&a||(t&=~(r|o));var b=n(e,t,s,g?h:void 0,g?f:void 0,g?void 0:h,g?void 0:f,d,p,m);return b.placeholder=i,ae(b,e,t)}function ne(e){return e.placeholder}function ie(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){if(!ce(e)||function(e){return!!V&&V in e}(e))return!1;var t=function(e){var t=ce(e)?U.call(e):"";return t==v||t==x}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?K:_;return t.test(function(e){if(null!=e){try{return W.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}(n)?n:void 0}function se(e){var t=e.match(C);return t?t[1].split(A):[]}function re(e,t){var n=t.length,i=n-1;return t[i]=(n>1?"& ":"")+t[i],t=t.join(n>2?", ":" "),e.replace(S,"{\n/* [wrapped with "+t+"] */\n")}function oe(e,t){return!!(t=null==t?m:t)&&("number"==typeof e||E.test(e))&&e>-1&&e%1==0&&e<t}var ae=Q?function(e,t,n){var i,s=t+"";return Q(e,"toString",{configurable:!0,enumerable:!1,value:(i=re(s,le(se(s),n)),function(){return i})})}:function(e){return e};function le(e,t){return function(n){for(var i=-1,s=n?n.length:0;++i<s&&!1!==(o=void 0,o="_."+(r=n[i])[0],void(t&r[1]&&!function(e,t){return!(!e||!e.length)&&function(e,t){if(t!=t)return function(e,t){for(var n=e.length,i=-1;++i<n;)if(t(e[i],i,e))return i;return-1}(e,L);for(var n=-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}(e,t)>-1}(e,o)&&e.push(o))););var r,o}(y),e.sort()}function he(e,t,n){var s=function(e,t,n,s,a,f,d,p){var m=t&o;if(!m&&"function"!=typeof e)throw new TypeError(i);var g=s?s.length:0;if(g||(t&=~(c|u),s=a=void 0),d=void 0===d?d:Y(ue(d),0),p=void 0===p?p:ue(p),g-=a?a.length:0,t&u){var b=s,y=a;s=a=void 0}var v=[e,t,n,s,a,b,y,f,d,p];if(e=v[0],t=v[1],n=v[2],s=v[3],a=v[4],!(p=v[9]=null==v[9]?m?0:e.length:Y(v[9]-g,0))&&t&(l|h)&&(t&=~(l|h)),t&&t!=r)x=t==l||t==h?function(e,t,n){var i=Z(e);return function s(){for(var r=arguments.length,o=Array(r),a=r,l=ne(s);a--;)o[a]=arguments[a];var h=r<3&&o[0]!==l&&o[r-1]!==l?[]:B(o,l);return(r-=h.length)<n?te(e,t,ee,s.placeholder,void 0,o,h,void 0,void 0,n-r):j(this&&this!==R&&this instanceof s?i:e,this,o)}}(e,t,p):t!=c&&t!=(r|c)||a.length?ee.apply(void 0,v):function(e,t,n,i){var s=t&r,o=Z(e);return function t(){for(var r=-1,a=arguments.length,l=-1,h=i.length,c=Array(h+a),u=this&&this!==R&&this instanceof t?o:e;++l<h;)c[l]=i[l];for(;a--;)c[l++]=arguments[++r];return j(u,s?n:this,c)}}(e,t,n,s);else var x=function(e,t,n){var i=t&r,s=Z(e);return function t(){return(this&&this!==R&&this instanceof t?s:e).apply(i?n:this,arguments)}}(e,t,n);return ae(x,e,t)}(e,l,void 0,void 0,void 0,void 0,void 0,t=n?void 0:t);return s.placeholder=he.placeholder,s}function ce(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function ue(e){var t=function(e){return e?(e=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&U.call(e)==w}(e))return b;if(ce(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ce(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(k,"");var n=M.test(e);return n||T.test(e)?N(e.slice(2),n?2:8):O.test(e)?b:+e}(e))===p||e===-p?(e<0?-1:1)*g:e==e?e:0:0===e?e:0}(e),n=t%1;return t==t?n?t-n:t:0}he.placeholder={},e.exports=he},58460:(e,t,n)=>{e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var s=t[i]={exports:{},id:i,loaded:!1};return e[i].call(s.exports,s,s.exports,n),s.loaded=!0,s.exports}return n.m=e,n.c=t,n.p="",n(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,s=(i=n(2))&&i.__esModule?i:{default:i};t.default=s.default,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};function s(e){return e&&e.__esModule?e:{default:e}}t.default=h;var r=n(3),o=s(n(4)),a=n(14),l=s(n(15));function h(e){var t=e.activeClassName,n=void 0===t?"":t,s=e.activeIndex,o=void 0===s?-1:s,h=e.activeStyle,c=e.autoEscape,u=e.caseSensitive,f=void 0!==u&&u,d=e.className,p=e.findChunks,m=e.highlightClassName,g=void 0===m?"":m,b=e.highlightStyle,y=void 0===b?{}:b,v=e.highlightTag,x=void 0===v?"mark":v,w=e.sanitize,k=e.searchWords,S=e.textToHighlight,C=e.unhighlightTag,A=void 0===C?"span":C,O=e.unhighlightClassName,M=void 0===O?"":O,_=e.unhighlightStyle,T=function(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}(e,["activeClassName","activeIndex","activeStyle","autoEscape","caseSensitive","className","findChunks","highlightClassName","highlightStyle","highlightTag","sanitize","searchWords","textToHighlight","unhighlightTag","unhighlightClassName","unhighlightStyle"]),E=(0,r.findAll)({autoEscape:c,caseSensitive:f,findChunks:p,sanitize:w,searchWords:k,textToHighlight:S}),N=x,D=-1,P="",R=void 0,j=(0,l.default)((function(e){var t={};for(var n in e)t[n.toLowerCase()]=e[n];return t}));return(0,a.createElement)("span",i({className:d},T,{children:E.map((function(e,t){var i=S.substr(e.start,e.end-e.start);if(e.highlight){D++;var s;s="object"==typeof g?f?g[i]:(g=j(g))[i.toLowerCase()]:g;var r=D===+o;P=s+" "+(r?n:""),R=!0===r&&null!=h?Object.assign({},y,h):y;var l={children:i,className:P,key:t,style:R};return"string"!=typeof N&&(l.highlightIndex=D),(0,a.createElement)(N,l)}return(0,a.createElement)(A,{children:i,className:M,key:t,style:_})}))}))}h.propTypes={activeClassName:o.default.string,activeIndex:o.default.number,activeStyle:o.default.object,autoEscape:o.default.bool,className:o.default.string,findChunks:o.default.func,highlightClassName:o.default.oneOfType([o.default.object,o.default.string]),highlightStyle:o.default.object,highlightTag:o.default.oneOfType([o.default.node,o.default.func,o.default.string]),sanitize:o.default.func,searchWords:o.default.arrayOf(o.default.oneOfType([o.default.string,o.default.instanceOf(RegExp)])).isRequired,textToHighlight:o.default.string.isRequired,unhighlightTag:o.default.oneOfType([o.default.node,o.default.func,o.default.string]),unhighlightClassName:o.default.string,unhighlightStyle:o.default.object},e.exports=t.default},function(e,t){e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var s=t[i]={exports:{},id:i,loaded:!1};return e[i].call(s.exports,s,s.exports,n),s.loaded=!0,s.exports}return n.m=e,n.c=t,n.p="",n(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2);Object.defineProperty(t,"combineChunks",{enumerable:!0,get:function(){return i.combineChunks}}),Object.defineProperty(t,"fillInChunks",{enumerable:!0,get:function(){return i.fillInChunks}}),Object.defineProperty(t,"findAll",{enumerable:!0,get:function(){return i.findAll}}),Object.defineProperty(t,"findChunks",{enumerable:!0,get:function(){return i.findChunks}})},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findAll=function(e){var t=e.autoEscape,r=e.caseSensitive,o=void 0!==r&&r,a=e.findChunks,l=void 0===a?i:a,h=e.sanitize,c=e.searchWords,u=e.textToHighlight;return s({chunksToHighlight:n({chunks:l({autoEscape:t,caseSensitive:o,sanitize:h,searchWords:c,textToHighlight:u})}),totalLength:u?u.length:0})};var n=t.combineChunks=function(e){var t=e.chunks;return t.sort((function(e,t){return e.start-t.start})).reduce((function(e,t){if(0===e.length)return[t];var n=e.pop();if(t.start<=n.end){var i=Math.max(n.end,t.end);e.push({start:n.start,end:i})}else e.push(n,t);return e}),[])},i=function(e){var t=e.autoEscape,n=e.caseSensitive,i=e.sanitize,s=void 0===i?r:i,o=e.searchWords,a=e.textToHighlight;return a=s(a),o.filter((function(e){return e})).reduce((function(e,i){i=s(i),t&&(i=i.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"));for(var r=new RegExp(i,n?"g":"gi"),o=void 0;o=r.exec(a);){var l=o.index,h=r.lastIndex;h>l&&e.push({start:l,end:h}),o.index==r.lastIndex&&r.lastIndex++}return e}),[])};t.findChunks=i;var s=t.fillInChunks=function(e){var t=e.chunksToHighlight,n=e.totalLength,i=[],s=function(e,t,n){t-e>0&&i.push({start:e,end:t,highlight:n})};if(0===t.length)s(0,n,!1);else{var r=0;t.forEach((function(e){s(r,e.start,!1),s(e.start,e.end,!0),r=e.end})),s(r,n,!1)}return i};function r(e){return e}}])},function(e,t,n){(function(t){if("production"!==t.env.NODE_ENV){var i="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;e.exports=n(6)((function(e){return"object"==typeof e&&null!==e&&e.$$typeof===i}),!0)}else e.exports=n(13)()}).call(t,n(5))},function(e,t){var n,i,s=e.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===r||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:r}catch(e){n=r}try{i="function"==typeof clearTimeout?clearTimeout:o}catch(e){i=o}}();var l,h=[],c=!1,u=-1;function f(){c&&l&&(c=!1,l.length?h=l.concat(h):u=-1,h.length&&d())}function d(){if(!c){var e=a(f);c=!0;for(var t=h.length;t;){for(l=h,h=[];++u<t;)l&&l[u].run();u=-1,t=h.length}l=null,c=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===o||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{return i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}s.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new p(e,t)),1!==h.length||c||a(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=m,s.addListener=m,s.once=m,s.off=m,s.removeListener=m,s.removeAllListeners=m,s.emit=m,s.prependListener=m,s.prependOnceListener=m,s.listeners=function(e){return[]},s.binding=function(e){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},function(e,t,n){(function(t){"use strict";var i=n(7),s=n(8),r=n(9),o=n(10),a=n(11),l=n(12);e.exports=function(e,n){var h="function"==typeof Symbol&&Symbol.iterator,c="<<anonymous>>",u={array:p("array"),bool:p("boolean"),func:p("function"),number:p("number"),object:p("object"),string:p("string"),symbol:p("symbol"),any:d(i.thatReturnsNull),arrayOf:function(e){return d((function(t,n,i,s,r){if("function"!=typeof e)return new f("Property `"+r+"` of component `"+i+"` has invalid PropType notation inside arrayOf.");var o=t[n];if(!Array.isArray(o))return new f("Invalid "+s+" `"+r+"` of type `"+g(o)+"` supplied to `"+i+"`, expected an array.");for(var l=0;l<o.length;l++){var h=e(o,l,i,s,r+"["+l+"]",a);if(h instanceof Error)return h}return null}))},element:d((function(t,n,i,s,r){var o=t[n];return e(o)?null:new f("Invalid "+s+" `"+r+"` of type `"+g(o)+"` supplied to `"+i+"`, expected a single ReactElement.")})),instanceOf:function(e){return d((function(t,n,i,s,r){if(!(t[n]instanceof e)){var o=e.name||c;return new f("Invalid "+s+" `"+r+"` of type `"+((a=t[n]).constructor&&a.constructor.name?a.constructor.name:c)+"` supplied to `"+i+"`, expected instance of `"+o+"`.")}var a;return null}))},node:d((function(e,t,n,i,s){return m(e[t])?null:new f("Invalid "+i+" `"+s+"` supplied to `"+n+"`, expected a ReactNode.")})),objectOf:function(e){return d((function(t,n,i,s,r){if("function"!=typeof e)return new f("Property `"+r+"` of component `"+i+"` has invalid PropType notation inside objectOf.");var o=t[n],l=g(o);if("object"!==l)return new f("Invalid "+s+" `"+r+"` of type `"+l+"` supplied to `"+i+"`, expected an object.");for(var h in o)if(o.hasOwnProperty(h)){var c=e(o,h,i,s,r+"."+h,a);if(c instanceof Error)return c}return null}))},oneOf:function(e){return Array.isArray(e)?d((function(t,n,i,s,r){for(var o=t[n],a=0;a<e.length;a++)if(l=o,h=e[a],l===h?0!==l||1/l==1/h:l!=l&&h!=h)return null;var l,h;return new f("Invalid "+s+" `"+r+"` of value `"+o+"` supplied to `"+i+"`, expected one of "+JSON.stringify(e)+".")})):("production"!==t.env.NODE_ENV&&r(!1,"Invalid argument supplied to oneOf, expected an instance of array."),i.thatReturnsNull)},oneOfType:function(e){if(!Array.isArray(e))return"production"!==t.env.NODE_ENV&&r(!1,"Invalid argument supplied to oneOfType, expected an instance of array."),i.thatReturnsNull;for(var n=0;n<e.length;n++){var s=e[n];if("function"!=typeof s)return r(!1,"Invalid argument supplied to oneOfType. Expected an array of check functions, but received %s at index %s.",y(s),n),i.thatReturnsNull}return d((function(t,n,i,s,r){for(var o=0;o<e.length;o++)if(null==(0,e[o])(t,n,i,s,r,a))return null;return new f("Invalid "+s+" `"+r+"` supplied to `"+i+"`.")}))},shape:function(e){return d((function(t,n,i,s,r){var o=t[n],l=g(o);if("object"!==l)return new f("Invalid "+s+" `"+r+"` of type `"+l+"` supplied to `"+i+"`, expected `object`.");for(var h in e){var c=e[h];if(c){var u=c(o,h,i,s,r+"."+h,a);if(u)return u}}return null}))},exact:function(e){return d((function(t,n,i,s,r){var l=t[n],h=g(l);if("object"!==h)return new f("Invalid "+s+" `"+r+"` of type `"+h+"` supplied to `"+i+"`, expected `object`.");var c=o({},t[n],e);for(var u in c){var d=e[u];if(!d)return new f("Invalid "+s+" `"+r+"` key `"+u+"` supplied to `"+i+"`.\nBad object: "+JSON.stringify(t[n],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(e),null,"  "));var p=d(l,u,i,s,r+"."+u,a);if(p)return p}return null}))}};function f(e){this.message=e,this.stack=""}function d(e){if("production"!==t.env.NODE_ENV)var i={},o=0;function l(l,h,u,d,p,m,g){if(d=d||c,m=m||u,g!==a)if(n)s(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");else if("production"!==t.env.NODE_ENV&&"undefined"!=typeof console){var b=d+":"+u;!i[b]&&o<3&&(r(!1,"You are manually calling a React.PropTypes validation function for the `%s` prop on `%s`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details.",m,d),i[b]=!0,o++)}return null==h[u]?l?null===h[u]?new f("The "+p+" `"+m+"` is marked as required in `"+d+"`, but its value is `null`."):new f("The "+p+" `"+m+"` is marked as required in `"+d+"`, but its value is `undefined`."):null:e(h,u,d,p,m)}var h=l.bind(null,!1);return h.isRequired=l.bind(null,!0),h}function p(e){return d((function(t,n,i,s,r,o){var a=t[n];return g(a)!==e?new f("Invalid "+s+" `"+r+"` of type `"+b(a)+"` supplied to `"+i+"`, expected `"+e+"`."):null}))}function m(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(m);if(null===t||e(t))return!0;var n=function(e){var t=e&&(h&&e[h]||e["@@iterator"]);if("function"==typeof t)return t}(t);if(!n)return!1;var i,s=n.call(t);if(n!==t.entries){for(;!(i=s.next()).done;)if(!m(i.value))return!1}else for(;!(i=s.next()).done;){var r=i.value;if(r&&!m(r[1]))return!1}return!0;default:return!1}}function g(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":function(e,t){return"symbol"===e||"Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol}(t,e)?"symbol":t}function b(e){if(null==e)return""+e;var t=g(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function y(e){var t=b(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}return f.prototype=Error.prototype,u.checkPropTypes=l,u.PropTypes=u,u}}).call(t,n(5))},function(e,t){"use strict";function n(e){return function(){return e}}var i=function(){};i.thatReturns=n,i.thatReturnsFalse=n(!1),i.thatReturnsTrue=n(!0),i.thatReturnsNull=n(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(e){return e},e.exports=i},function(e,t,n){(function(t){"use strict";var n=function(e){};"production"!==t.env.NODE_ENV&&(n=function(e){if(void 0===e)throw new Error("invariant requires an error message argument")}),e.exports=function(e,t,i,s,r,o,a,l){if(n(t),!e){var h;if(void 0===t)h=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[i,s,r,o,a,l],u=0;(h=new Error(t.replace(/%s/g,(function(){return c[u++]})))).name="Invariant Violation"}throw h.framesToPop=1,h}}}).call(t,n(5))},function(e,t,n){(function(t){"use strict";var i=n(7);if("production"!==t.env.NODE_ENV){var s=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var s=0,r="Warning: "+e.replace(/%s/g,(function(){return n[s++]}));"undefined"!=typeof console&&console.error(r);try{throw new Error(r)}catch(e){}};i=function(e,t){if(void 0===t)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(0!==t.indexOf("Failed Composite propType: ")&&!e){for(var n=arguments.length,i=Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];s.apply(void 0,[t].concat(i))}}}e.exports=i}).call(t,n(5))},function(e,t){"use strict";var n=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(e){i[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var r,o,a=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){for(var h in r=Object(arguments[l]))i.call(r,h)&&(a[h]=r[h]);if(n){o=n(r);for(var c=0;c<o.length;c++)s.call(r,o[c])&&(a[o[c]]=r[o[c]])}}return a}},function(e,t){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){(function(t){"use strict";if("production"!==t.env.NODE_ENV)var i=n(8),s=n(9),r=n(11),o={};e.exports=function(e,n,a,l,h){if("production"!==t.env.NODE_ENV)for(var c in e)if(e.hasOwnProperty(c)){var u;try{i("function"==typeof e[c],"%s: %s type `%s` is invalid; it must be a function, usually from the `prop-types` package, but received `%s`.",l||"React class",a,c,typeof e[c]),u=e[c](n,c,l,a,null,r)}catch(e){u=e}if(s(!u||u instanceof Error,"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",l||"React class",a,c,typeof u),u instanceof Error&&!(u.message in o)){o[u.message]=!0;var f=h?h():"";s(!1,"Failed %s type: %s%s",a,u.message,null!=f?f:"")}}}}).call(t,n(5))},function(e,t,n){"use strict";var i=n(7),s=n(8),r=n(11);e.exports=function(){function e(e,t,n,i,o,a){a!==r&&s(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=i,n.PropTypes=n,n}},function(e,t){e.exports=n(14041)},function(e,t){"use strict";var n=function(e,t){return e===t};e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n,i=void 0,s=[],r=void 0,o=!1,a=function(e,n){return t(e,s[n])};return function(){for(var t=arguments.length,n=Array(t),l=0;l<t;l++)n[l]=arguments[l];return o&&i===this&&n.length===s.length&&n.every(a)?r:(o=!0,i=this,s=n,r=e.apply(this,n))}}}])},59975:(e,t,n)=>{"use strict";var i=n(37101),s=Array.prototype.concat,r=Array.prototype.slice,o=e.exports=function(e){for(var t=[],n=0,o=e.length;n<o;n++){var a=e[n];i(a)?t=s.call(t,r.call(a)):t.push(a)}return t};o.wrap=function(e){return function(){return e(o(arguments))}}},37101:e=>{e.exports=function(e){return!(!e||"string"==typeof e)&&(e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&"String"!==e.constructor.name))}},86823:(e,t,n)=>{"use strict";var i=n(26816);i.TypeStyle,n(64894);var s=n(30965);s.extend,s.classes,s.media;var r=new i.TypeStyle({autoGenerateTag:!0});r.setStylesTarget,r.cssRaw,r.cssRule,r.forceRenderStyles,r.fontFace,r.getStyles,r.keyframes,r.reinit,t.iF=r.style,r.stylesheet},41646:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertToStyles=function e(t){var n={};for(var i in t){var s=t[i];if("$nest"===i){var r=s;for(var o in r){var a=r[o];n[o]=e(a)}}else"$debugName"===i?n.$displayName=s:n[i]=s}return n},t.convertToKeyframes=function(e){var t={};for(var n in e)"$debugName"!==n&&(t[n]=e[n]);return e.$debugName&&(t.$displayName=e.$debugName),t}},26816:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(68101),s=n(41646),r=n(30965),o=function(){return i.create()},a=function(){function e(e){var t=this,n=e.autoGenerateTag;this.cssRaw=function(e){e&&(t._raw+=e||"",t._pendingRawChange=!0,t._styleUpdated())},this.cssRule=function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var o=s.convertToStyles(r.extend.apply(void 0,n));t._freeStyle.registerRule(e,o),t._styleUpdated()},this.forceRenderStyles=function(){var e=t._getTag();e&&(e.textContent=t.getStyles())},this.fontFace=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var i=t._freeStyle,s=0,r=e;s<r.length;s++){var o=r[s];i.registerRule("@font-face",o)}t._styleUpdated()},this.getStyles=function(){return(t._raw||"")+t._freeStyle.getStyles()},this.keyframes=function(e){var n=s.convertToKeyframes(e),i=t._freeStyle.registerKeyframes(n);return t._styleUpdated(),i},this.reinit=function(){var e=o();t._freeStyle=e,t._lastFreeStyleChangeId=e.changeId,t._raw="",t._pendingRawChange=!1;var n=t._getTag();n&&(n.textContent="")},this.setStylesTarget=function(e){t._tag&&(t._tag.textContent=""),t._tag=e,t.forceRenderStyles()},this.stylesheet=function(e){for(var n={},i=0,s=Object.getOwnPropertyNames(e);i<s.length;i++){var r=s[i],o=e[r];o&&(o.$debugName=r,n[r]=t.style(o))}return n};var i=o();this._autoGenerateTag=n,this._freeStyle=i,this._lastFreeStyleChangeId=i.changeId,this._pending=0,this._pendingRawChange=!1,this._raw="",this._tag=void 0,this.style=this.style.bind(this)}return e.prototype._afterAllSync=function(e){var t=this;this._pending++;var n=this._pending;r.raf((function(){n===t._pending&&e()}))},e.prototype._getTag=function(){if(this._tag)return this._tag;if(this._autoGenerateTag){var e="undefined"==typeof window?{textContent:""}:document.createElement("style");return"undefined"!=typeof document&&document.head.appendChild(e),this._tag=e,e}},e.prototype._styleUpdated=function(){var e=this,t=this._freeStyle.changeId,n=this._lastFreeStyleChangeId;(this._pendingRawChange||t!==n)&&(this._lastFreeStyleChangeId=t,this._pendingRawChange=!1,this._afterAllSync((function(){return e.forceRenderStyles()})))},e.prototype.style=function(){var e=this._freeStyle.registerStyle(s.convertToStyles(r.extend.apply(void 0,arguments)));return this._styleUpdated(),e},e}();t.TypeStyle=a},30965:(e,t)=>{"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i={},s=0,r=e;s<r.length;s++){var o=r[s];if(null!=o&&!1!==o)for(var a in o){var l=o[a];(l||0===l)&&("$nest"===a&&l?i[a]=i.$nest?n(i.$nest,l):l:-1!==a.indexOf("&")||0===a.indexOf("@media")?i[a]=i[a]?n(i[a],l):l:i[a]=l)}}return i}Object.defineProperty(t,"__esModule",{value:!0}),t.raf="undefined"==typeof requestAnimationFrame?function(e){return setTimeout(e)}:"undefined"==typeof window?requestAnimationFrame:requestAnimationFrame.bind(window),t.classes=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.map((function(e){return e&&"object"==typeof e?Object.keys(e).map((function(t){return!!e[t]&&t})):[e]})).reduce((function(e,t){return e.concat(t)}),[]).filter((function(e){return!!e})).join(" ")},t.extend=n,t.media=function(e){for(var t,s=[],r=1;r<arguments.length;r++)s[r-1]=arguments[r];var o=[];return e.type&&o.push(e.type),e.orientation&&o.push("(orientation: "+e.orientation+")"),e.minWidth&&o.push("(min-width: "+i(e.minWidth)+")"),e.maxWidth&&o.push("(max-width: "+i(e.maxWidth)+")"),e.minHeight&&o.push("(min-height: "+i(e.minHeight)+")"),e.maxHeight&&o.push("(max-height: "+i(e.maxHeight)+")"),e.prefersColorScheme&&o.push("(prefers-color-scheme: "+e.prefersColorScheme+")"),{$nest:(t={},t["@media "+o.join(" and ")]=n.apply(void 0,s),t)}};var i=function(e){return"string"==typeof e?e:e+"px"}},64894:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},77213:(e,t,n)=>{"use strict";n.d(t,{Ar:()=>h,Bc:()=>F,Gw:()=>M,_5:()=>o,et:()=>l,wm:()=>P});var i=n(14830),s=n(83173),r=n(29587);class o{constructor(e,t,n,i){this.state=e,this.pos=t,this.explicit=n,this.view=i,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let t=(0,r.mv)(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),n=Math.max(t.from,this.pos-250),i=t.text.slice(n-t.from,this.pos-t.from),s=i.search(function(e,t){var n;let{source:i}=e,s=t&&"^"!=i[0],r="$"!=i[i.length-1];return s||r?new RegExp(`${s?"^":""}(?:${i})${r?"$":""}`,null!==(n=e.flags)&&void 0!==n?n:e.ignoreCase?"i":""):e}(e,!1));return s<0?null:{from:n+s,to:this.pos,text:i.slice(s)}}get aborted(){return null==this.abortListeners}addEventListener(e,t,n){"abort"==e&&this.abortListeners&&(this.abortListeners.push(t),n&&n.onDocChange&&(this.abortOnDocChange=!0))}}function a(e){let t=Object.keys(e).join(""),n=/\w/.test(t);return n&&(t=t.replace(/\w/g,"")),`[${n?"\\w":""}${t.replace(/[^\w\s]/g,"\\$&")}]`}function l(e){let t=e.map((e=>"string"==typeof e?{label:e}:e)),[n,i]=t.every((e=>/^\w+$/.test(e.label)))?[/\w*$/,/\w+$/]:function(e){let t=Object.create(null),n=Object.create(null);for(let{label:i}of e){t[i[0]]=!0;for(let e=1;e<i.length;e++)n[i[e]]=!0}let i=a(t)+a(n)+"*$";return[new RegExp("^"+i),new RegExp(i)]}(t);return e=>{let s=e.matchBefore(i);return s||e.explicit?{from:s?s.from:e.pos,options:t,validFor:n}:null}}function h(e,t){return n=>{for(let t=(0,r.mv)(n.state).resolveInner(n.pos,-1);t;t=t.parent){if(e.indexOf(t.name)>-1)return null;if(t.type.isTop)break}return t(n)}}const c=i.YH.define();"object"==typeof navigator&&navigator.platform;const u=s.Lz.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"Â·Â·Â·"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'Æ’'"}},".cm-completionIcon-class":{"&:after":{content:"'â—‹'"}},".cm-completionIcon-interface":{"&:after":{content:"'â—Œ'"}},".cm-completionIcon-variable":{"&:after":{content:"'ð‘¥'"}},".cm-completionIcon-constant":{"&:after":{content:"'ð¶'"}},".cm-completionIcon-type":{"&:after":{content:"'ð‘¡'"}},".cm-completionIcon-enum":{"&:after":{content:"'âˆª'"}},".cm-completionIcon-property":{"&:after":{content:"'â–¡'"}},".cm-completionIcon-keyword":{"&:after":{content:"'ðŸ”‘ï¸Ž'"}},".cm-completionIcon-namespace":{"&:after":{content:"'â–¢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class f{constructor(e,t,n,i){this.field=e,this.line=t,this.from=n,this.to=i}}class d{constructor(e,t,n){this.field=e,this.from=t,this.to=n}map(e){let t=e.mapPos(this.from,-1,i.iR.TrackDel),n=e.mapPos(this.to,1,i.iR.TrackDel);return null==t||null==n?null:new d(this.field,t,n)}}class p{constructor(e,t){this.lines=e,this.fieldPositions=t}instantiate(e,t){let n=[],i=[t],s=e.doc.lineAt(t),o=/^\s*/.exec(s.text)[0];for(let s of this.lines){if(n.length){let n=o,a=/^\t*/.exec(s)[0].length;for(let t=0;t<a;t++)n+=e.facet(r.Xt);i.push(t+n.length-a),s=n+s.slice(a)}n.push(s),t+=s.length+1}let a=this.fieldPositions.map((e=>new d(e.field,i[e.line]+e.from,i[e.line]+e.to)));return{text:n,ranges:a}}static parse(e){let t,n=[],i=[],s=[];for(let r of e.split(/\r\n?|\n/)){for(;t=/[#$]\{(?:(\d+)(?::([^}]*))?|((?:\\[{}]|[^}])*))\}/.exec(r);){let e=t[1]?+t[1]:null,o=t[2]||t[3]||"",a=-1,l=o.replace(/\\[{}]/g,(e=>e[1]));for(let t=0;t<n.length;t++)(null!=e?n[t].seq==e:l&&n[t].name==l)&&(a=t);if(a<0){let t=0;for(;t<n.length&&(null==e||null!=n[t].seq&&n[t].seq<e);)t++;n.splice(t,0,{seq:e,name:l}),a=t;for(let e of s)e.field>=a&&e.field++}s.push(new f(a,i.length,t.index,t.index+l.length)),r=r.slice(0,t.index)+o+r.slice(t.index+t[0].length)}r=r.replace(/\\([{}])/g,((e,t,n)=>{for(let e of s)e.line==i.length&&e.from>n&&(e.from--,e.to--);return t})),i.push(r)}return new p(i,s)}}let m=s.NZ.widget({widget:new class extends s.xO{toDOM(){let e=document.createElement("span");return e.className="cm-snippetFieldPosition",e}ignoreEvent(){return!1}}}),g=s.NZ.mark({class:"cm-snippetField"});class b{constructor(e,t){this.ranges=e,this.active=t,this.deco=s.NZ.set(e.map((e=>(e.from==e.to?m:g).range(e.from,e.to))))}map(e){let t=[];for(let n of this.ranges){let i=n.map(e);if(!i)return null;t.push(i)}return new b(t,this.active)}selectionInsideField(e){return e.ranges.every((e=>this.ranges.some((t=>t.field==this.active&&t.from<=e.from&&t.to>=e.to))))}}const y=i.Pe.define({map:(e,t)=>e&&e.map(t)}),v=i.Pe.define(),x=i.sU.define({create:()=>null,update(e,t){for(let n of t.effects){if(n.is(y))return n.value;if(n.is(v)&&e)return new b(e.ranges,n.value)}return e&&t.docChanged&&(e=e.map(t.changes)),e&&t.selection&&!e.selectionInsideField(t.selection)&&(e=null),e},provide:e=>s.Lz.decorations.from(e,(e=>e?e.deco:s.NZ.none))});function w(e,t){return i.OF.create(e.filter((e=>e.field==t)).map((e=>i.OF.range(e.from,e.to))))}function k(e){let t=p.parse(e);return(e,n,s,r)=>{let{text:o,ranges:a}=t.instantiate(e.state,s),l={changes:{from:s,to:r,insert:i.EY.of(o)},scrollIntoView:!0,annotations:n?[c.of(n),i.ZX.userEvent.of("input.complete")]:void 0};if(a.length&&(l.selection=w(a,0)),a.some((e=>e.field>0))){let t=new b(a,0),n=l.effects=[y.of(t)];void 0===e.state.field(x,!1)&&n.push(i.Pe.appendConfig.of([x,O,_,u]))}e.dispatch(e.state.update(l))}}function S(e){return({state:t,dispatch:n})=>{let i=t.field(x,!1);if(!i||e<0&&0==i.active)return!1;let s=i.active+e,r=e>0&&!i.ranges.some((t=>t.field==s+e));return n(t.update({selection:w(i.ranges,s),effects:y.of(r?null:new b(i.ranges,s)),scrollIntoView:!0})),!0}}const C=[{key:"Tab",run:S(1),shift:S(-1)},{key:"Escape",run:({state:e,dispatch:t})=>!!e.field(x,!1)&&(t(e.update({effects:y.of(null)})),!0)}],A=i.sj.define({combine:e=>e.length?e[0]:C}),O=i.Nb.highest(s.w4.compute([A],(e=>e.facet(A))));function M(e,t){return Object.assign(Object.assign({},t),{apply:k(e)})}const _=s.Lz.domEventHandlers({mousedown(e,t){let n,i=t.state.field(x,!1);if(!i||null==(n=t.posAtCoords({x:e.clientX,y:e.clientY})))return!1;let s=i.ranges.find((e=>e.from<=n&&e.to>=n));return!(!s||s.field==i.active||(t.dispatch({selection:w(i.ranges,s.field),effects:y.of(i.ranges.some((e=>e.field>s.field))?new b(i.ranges,s.field):null),scrollIntoView:!0}),0))}}),T={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},E=i.Pe.define({map(e,t){let n=t.mapPos(e,-1,i.iR.TrackAfter);return null==n?void 0:n}}),N=new class extends i.FB{};N.startSide=1,N.endSide=-1;const D=i.sU.define({create:()=>i.om.empty,update(e,t){if(e=e.map(t.changes),t.selection){let n=t.state.doc.lineAt(t.selection.main.head);e=e.update({filter:e=>e>=n.from&&e<=n.to})}for(let n of t.effects)n.is(E)&&(e=e.update({add:[N.range(n.value,n.value+1)]}));return e}});function P(){return[I,D]}const R="()[]{}<>";function j(e){for(let t=0;t<8;t+=2)if(R.charCodeAt(t)==e)return R.charAt(t+1);return(0,i.MK)(e<128?e:e+1)}function L(e,t){return e.languageDataAt("closeBrackets",t)[0]||T}const B="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),I=s.Lz.inputHandler.of(((e,t,n,s)=>{if((B?e.composing:e.compositionStarted)||e.state.readOnly)return!1;let r=e.state.selection.main;if(s.length>2||2==s.length&&1==(0,i.Fh)((0,i.vS)(s,0))||t!=r.from||n!=r.to)return!1;let o=function(e,t){let n=L(e,e.selection.main.head),s=n.brackets||T.brackets;for(let r of s){let o=j((0,i.vS)(r,0));if(t==r)return o==r?V(e,r,s.indexOf(r+r+r)>-1,n):H(e,r,o,n.before||T.before);if(t==o&&$(e,e.selection.main.from))return q(e,0,o)}return null}(e.state,s);return!!o&&(e.dispatch(o),!0)})),F=[{key:"Backspace",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=L(e,e.selection.main.head).brackets||T.brackets,s=null,r=e.changeByRange((t=>{if(t.empty){let s=function(e,t){let n=e.sliceString(t-2,t);return(0,i.Fh)((0,i.vS)(n,0))==n.length?n:n.slice(1)}(e.doc,t.head);for(let r of n)if(r==s&&z(e.doc,t.head)==j((0,i.vS)(r,0)))return{changes:{from:t.head-r.length,to:t.head+r.length},range:i.OF.cursor(t.head-r.length)}}return{range:s=t}}));return s||t(e.update(r,{scrollIntoView:!0,userEvent:"delete.backward"})),!s}}];function $(e,t){let n=!1;return e.field(D).between(0,e.doc.length,(e=>{e==t&&(n=!0)})),n}function z(e,t){let n=e.sliceString(t,t+2);return n.slice(0,(0,i.Fh)((0,i.vS)(n,0)))}function H(e,t,n,s){let r=null,o=e.changeByRange((o=>{if(!o.empty)return{changes:[{insert:t,from:o.from},{insert:n,from:o.to}],effects:E.of(o.to+t.length),range:i.OF.range(o.anchor+t.length,o.head+t.length)};let a=z(e.doc,o.head);return!a||/\s/.test(a)||s.indexOf(a)>-1?{changes:{insert:t+n,from:o.head},effects:E.of(o.head+t.length),range:i.OF.cursor(o.head+t.length)}:{range:r=o}}));return r?null:e.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function q(e,t,n){let s=null,r=e.changeByRange((t=>t.empty&&z(e.doc,t.head)==n?{changes:{from:t.head,to:t.head+n.length,insert:n},range:i.OF.cursor(t.head+n.length)}:s={range:t}));return s?null:e.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function V(e,t,n,s){let o=s.stringPrefixes||T.stringPrefixes,a=null,l=e.changeByRange((s=>{if(!s.empty)return{changes:[{insert:t,from:s.from},{insert:t,from:s.to}],effects:E.of(s.to+t.length),range:i.OF.range(s.anchor+t.length,s.head+t.length)};let l,h=s.head,c=z(e.doc,h);if(c==t){if(W(e,h))return{changes:{insert:t+t,from:h},effects:E.of(h+t.length),range:i.OF.cursor(h+t.length)};if($(e,h)){let s=n&&e.sliceDoc(h,h+3*t.length)==t+t+t?t+t+t:t;return{changes:{from:h,to:h+s.length,insert:s},range:i.OF.cursor(h+s.length)}}}else{if(n&&e.sliceDoc(h-2*t.length,h)==t+t&&(l=G(e,h-2*t.length,o))>-1&&W(e,l))return{changes:{insert:t+t+t+t,from:h},effects:E.of(h+t.length),range:i.OF.cursor(h+t.length)};if(e.charCategorizer(h)(c)!=i.Je.Word&&G(e,h,o)>-1&&!function(e,t,n,i){let s=(0,r.mv)(e).resolveInner(t,-1),o=i.reduce(((e,t)=>Math.max(e,t.length)),0);for(let r=0;r<5;r++){let r=e.sliceDoc(s.from,Math.min(s.to,s.from+n.length+o)),a=r.indexOf(n);if(!a||a>-1&&i.indexOf(r.slice(0,a))>-1){let t=s.firstChild;for(;t&&t.from==s.from&&t.to-t.from>n.length+a;){if(e.sliceDoc(t.to-n.length,t.to)==n)return!1;t=t.firstChild}return!0}let l=s.to==t&&s.parent;if(!l)break;s=l}return!1}(e,h,t,o))return{changes:{insert:t+t,from:h},effects:E.of(h+t.length),range:i.OF.cursor(h+t.length)}}return{range:a=s}}));return a?null:e.update(l,{scrollIntoView:!0,userEvent:"input.type"})}function W(e,t){let n=(0,r.mv)(e).resolveInner(t+1);return n.parent&&n.from==t}function G(e,t,n){let s=e.charCategorizer(t);if(s(e.sliceDoc(t-1,t))!=i.Je.Word)return t;for(let r of n){let n=t-r.length;if(e.sliceDoc(n,t)==r&&s(e.sliceDoc(n-1,n))!=i.Je.Word)return n}return-1}},29587:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>F,EI:()=>E,KB:()=>D,Lv:()=>ce,Oh:()=>P,Q0:()=>u,Q_:()=>Te,SG:()=>_e,TM:()=>f,Tg:()=>Ie,WD:()=>V,Xt:()=>_,Yy:()=>A,Zt:()=>ve,_Y:()=>z,_v:()=>N,b_:()=>G,bj:()=>p,cr:()=>fe,iB:()=>h,jU:()=>De,mv:()=>m,mz:()=>H,nq:()=>y,p9:()=>c,t:()=>W,t$:()=>O,tp:()=>T,y9:()=>ge,yd:()=>U});var i,s=n(79066),r=n(14830),o=n(83173),a=n(49913),l=n(98104);const h=new s.uY;function c(e){return r.sj.define({combine:e?t=>t.concat(e):void 0})}const u=new s.uY;class f{constructor(e,t,n=[],i=""){this.data=e,this.name=i,r.$t.prototype.hasOwnProperty("tree")||Object.defineProperty(r.$t.prototype,"tree",{get(){return m(this)}}),this.parser=t,this.extension=[C.of(this),r.$t.languageData.of(((e,t,n)=>{let i=d(e,t,n),s=i.type.prop(h);if(!s)return[];let r=e.facet(s),o=i.type.prop(u);if(o){let s=i.resolve(t-i.from,n);for(let t of o)if(t.test(s,e)){let n=e.facet(t.facet);return"replace"==t.type?n:n.concat(r)}}return r}))].concat(n)}isActiveAt(e,t,n=-1){return d(e,t,n).type.prop(h)==this.data}findRegions(e){let t=e.facet(C);if((null==t?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let n=[],i=(e,t)=>{if(e.prop(h)==this.data)return void n.push({from:t,to:t+e.length});let r=e.prop(s.uY.mounted);if(r){if(r.tree.prop(h)==this.data){if(r.overlay)for(let e of r.overlay)n.push({from:e.from+t,to:e.to+t});else n.push({from:t,to:t+e.length});return}if(r.overlay){let e=n.length;if(i(r.tree,r.overlay[0].from+t),n.length>e)return}}for(let n=0;n<e.children.length;n++){let r=e.children[n];r instanceof s.PH&&i(r,e.positions[n]+t)}};return i(m(e),0),n}get allowsNesting(){return!0}}function d(e,t,n){let i=e.facet(C),r=m(e).topNode;if(!i||i.allowsNesting)for(let e=r;e;e=e.enter(t,n,s.Qj.ExcludeBuffers))e.type.isTop&&(r=e);return r}f.setState=r.Pe.define();class p extends f{constructor(e,t,n){super(e,t,[],n),this.parser=t}static define(e){let t=c(e.languageData);return new p(t,e.parser.configure({props:[h.add((e=>e.isTop?t:void 0))]}),e.name)}configure(e,t){return new p(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function m(e){let t=e.field(f.state,!1);return t?t.tree:s.PH.empty}class g{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let n=this.cursorPos-this.string.length;return e<n||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-n,t-n)}}let b=null;class y{constructor(e,t,n=[],i,s,r,o,a){this.parser=e,this.state=t,this.fragments=n,this.tree=i,this.treeLen=s,this.viewport=r,this.skipped=o,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,t,n){return new y(e,t,[],s.PH.empty,0,n,[],null)}startParse(){return this.parser.startParse(new g(this.state.doc),this.fragments)}work(e,t){return null!=t&&t>=this.state.doc.length&&(t=void 0),this.tree!=s.PH.empty&&this.isDone(null!=t?t:this.state.doc.length)?(this.takeTree(),!0):this.withContext((()=>{var n;if("number"==typeof e){let t=Date.now()+e;e=()=>Date.now()>t}for(this.parse||(this.parse=this.startParse()),null!=t&&(null==this.parse.stoppedAt||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let i=this.parse.advance();if(i){if(this.fragments=this.withoutTempSkipped(s.rr.addTree(i,this.fragments,null!=this.parse.stoppedAt)),this.treeLen=null!==(n=this.parse.stoppedAt)&&void 0!==n?n:this.state.doc.length,this.tree=i,this.parse=null,!(this.treeLen<(null!=t?t:this.state.doc.length)))return!0;this.parse=this.startParse()}if(e())return!1}}))}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((null==this.parse.stoppedAt||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext((()=>{for(;!(t=this.parse.advance()););})),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(s.rr.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=b;b=this;try{return e()}finally{b=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=v(e,t.from,t.to);return e}changes(e,t){let{fragments:n,tree:i,treeLen:r,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let t=[];if(e.iterChangedRanges(((e,n,i,s)=>t.push({fromA:e,toA:n,fromB:i,toB:s}))),n=s.rr.applyChanges(n,t),i=s.PH.empty,r=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let t of this.skipped){let n=e.mapPos(t.from,1),i=e.mapPos(t.to,-1);n<i&&a.push({from:n,to:i})}}}return new y(this.parser,t,n,i,r,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let t=0;t<this.skipped.length;t++){let{from:n,to:i}=this.skipped[t];n<e.to&&i>e.from&&(this.fragments=v(this.fragments,n,i),this.skipped.splice(t--,1))}return!(this.skipped.length>=t||(this.reset(),0))}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends s.iX{createParse(t,n,i){let r=i[0].from,o=i[i.length-1].to;return{parsedPos:r,advance(){let t=b;if(t){for(let e of i)t.tempSkipped.push(e);e&&(t.scheduleOn=t.scheduleOn?Promise.all([t.scheduleOn,e]):e)}return this.parsedPos=o,new s.PH(s.Z6.none,[],[],o-r)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&0==t[0].from&&t[0].to>=e}static get(){return b}}function v(e,t,n){return s.rr.applyChanges(e,[{fromA:t,toA:n,fromB:t,toB:n}])}class x{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),n=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,n)||t.takeTree(),new x(t)}static init(e){let t=Math.min(3e3,e.doc.length),n=y.create(e.facet(C).parser,e,{from:0,to:t});return n.work(20,t)||n.takeTree(),new x(n)}}f.state=r.sU.define({create:x.init,update(e,t){for(let e of t.effects)if(e.is(f.setState))return e.value;return t.startState.facet(C)!=t.state.facet(C)?x.init(t.state):e.apply(t)}});let w=e=>{let t=setTimeout((()=>e()),500);return()=>clearTimeout(t)};"undefined"!=typeof requestIdleCallback&&(w=e=>{let t=-1,n=setTimeout((()=>{t=requestIdleCallback(e,{timeout:400})}),100);return()=>t<0?clearTimeout(n):cancelIdleCallback(t)});const k="undefined"!=typeof navigator&&(null===(i=navigator.scheduling)||void 0===i?void 0:i.isInputPending)?()=>navigator.scheduling.isInputPending():null,S=o.Z9.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(f.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(f.state);t.tree==t.context.tree&&t.context.isDone(e.doc.length)||(this.working=w(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:i}}=this.view,s=n.field(f.state);if(s.tree==s.context.tree&&s.context.isDone(i+1e5))return;let r=Date.now()+Math.min(this.chunkBudget,100,e&&!k?Math.max(25,e.timeRemaining()-5):1e9),o=s.context.treeLen<i&&n.doc.length>i+1e3,a=s.context.work((()=>k&&k()||Date.now()>r),i+(o?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:f.setState.of(new x(s.context))})),this.chunkBudget>0&&(!a||o)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then((()=>this.scheduleWork())).catch((e=>(0,o.c_)(this.view.state,e))).then((()=>this.workScheduled--)),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),C=r.sj.define({combine:e=>e.length?e[0]:null,enables:e=>[f.state,S,o.Lz.contentAttributes.compute([e],(t=>{let n=t.facet(e);return n&&n.name?{"data-language":n.name}:{}}))]});class A{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}class O{constructor(e,t,n,i,s,r=void 0){this.name=e,this.alias=t,this.extensions=n,this.filename=i,this.loadFunc=s,this.support=r,this.loading=null}load(){return this.loading||(this.loading=this.loadFunc().then((e=>this.support=e),(e=>{throw this.loading=null,e})))}static of(e){let{load:t,support:n}=e;if(!t){if(!n)throw new RangeError("Must pass either 'load' or 'support' to LanguageDescription.of");t=()=>Promise.resolve(n)}return new O(e.name,(e.alias||[]).concat(e.name).map((e=>e.toLowerCase())),e.extensions||[],e.filename,t,n)}static matchFilename(e,t){for(let n of e)if(n.filename&&n.filename.test(t))return n;let n=/\.([^.]+)$/.exec(t);if(n)for(let t of e)if(t.extensions.indexOf(n[1])>-1)return t;return null}static matchLanguageName(e,t,n=!0){t=t.toLowerCase();for(let n of e)if(n.alias.some((e=>e==t)))return n;if(n)for(let n of e)for(let e of n.alias){let i=t.indexOf(e);if(i>-1&&(e.length>2||!/\w/.test(t[i-1])&&!/\w/.test(t[i+e.length])))return n}return null}}const M=r.sj.define(),_=r.sj.define({combine:e=>{if(!e.length)return"  ";let t=e[0];if(!t||/\S/.test(t)||Array.from(t).some((e=>e!=t[0])))throw new Error("Invalid indent unit: "+JSON.stringify(e[0]));return t}});function T(e){let t=e.facet(_);return 9==t.charCodeAt(0)?e.tabSize*t.length:t.length}function E(e,t){let n="",i=e.tabSize,s=e.facet(_)[0];if("\t"==s){for(;t>=i;)n+="\t",t-=i;s=" "}for(let e=0;e<t;e++)n+=s;return n}function N(e,t){e instanceof r.$t&&(e=new D(e));for(let n of e.state.facet(M)){let i=n(e,t);if(void 0!==i)return i}let n=m(e.state);return n.length>=t?function(e,t,n){let i=t.resolveStack(n),s=i.node.enterUnfinishedNodesBefore(n);if(s!=i.node){let e=[];for(let t=s;t!=i.node;t=t.parent)e.push(t);for(let t=e.length-1;t>=0;t--)i={node:e[t],next:i}}return R(i,e,n)}(e,n,t):null}class D{constructor(e,t={}){this.state=e,this.options=t,this.unit=T(e)}lineAt(e,t=1){let n=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:s}=this.options;return null!=i&&i>=n.from&&i<=n.to?s&&i==e?{text:"",from:e}:(t<0?i<e:i<=e)?{text:n.text.slice(i-n.from),from:i}:{text:n.text.slice(0,i-n.from),from:n.from}:n}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:n,from:i}=this.lineAt(e,t);return n.slice(e-i,Math.min(n.length,e+100-i))}column(e,t=1){let{text:n,from:i}=this.lineAt(e,t),s=this.countColumn(n,e-i),r=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return r>-1&&(s+=r-this.countColumn(n,n.search(/\S|$/))),s}countColumn(e,t=e.length){return(0,r.y$)(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:n,from:i}=this.lineAt(e,t),s=this.options.overrideIndentation;if(s){let e=s(i);if(e>-1)return e}return this.countColumn(n,n.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const P=new s.uY;function R(e,t,n){for(let i=e;i;i=i.next){let e=j(i.node);if(e)return e(B.create(t,n,i))}return 0}function j(e){let t=e.type.prop(P);if(t)return t;let n,i=e.firstChild;if(i&&(n=i.type.prop(s.uY.closedBy))){let t=e.lastChild,i=t&&n.indexOf(t.name)>-1;return e=>$(e,!0,1,void 0,i&&!function(e){return e.pos==e.options.simulateBreak&&e.options.simulateDoubleBreak}(e)?t.from:void 0)}return null==e.parent?L:null}function L(){return 0}class B extends D{constructor(e,t,n){super(e.state,e.options),this.base=e,this.pos=t,this.context=n}get node(){return this.context.node}static create(e,t,n){return new B(e,t,n)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let n=e.resolve(t.from);for(;n.parent&&n.parent.from==n.from;)n=n.parent;if(I(n,e))break;t=this.state.doc.lineAt(n.from)}return this.lineIndent(t.from)}continue(){return R(this.context.next,this.base,this.pos)}}function I(e,t){for(let n=t;n;n=n.parent)if(e==n)return!0;return!1}function F({closing:e,align:t=!0,units:n=1}){return i=>$(i,t,n,e)}function $(e,t,n,i,s){let r=e.textAfter,o=r.match(/^\s*/)[0].length,a=i&&r.slice(o,o+i.length)==i||s==e.pos+o,l=t?function(e){let t=e.node,n=t.childAfter(t.from),i=t.lastChild;if(!n)return null;let s=e.options.simulateBreak,r=e.state.doc.lineAt(n.from),o=null==s||s<=r.from?r.to:Math.min(r.to,s);for(let e=n.to;;){let s=t.childAfter(e);if(!s||s==i)return null;if(!s.type.isSkipped)return s.from<o?n:null;e=s.to}}(e):null;return l?a?e.column(l.from):e.column(l.to):e.baseIndent+(a?0:e.unit*n)}const z=e=>e.baseIndent;function H({except:e,units:t=1}={}){return n=>{let i=e&&e.test(n.textAfter);return n.baseIndent+(i?0:t*n.unit)}}const q=200;function V(){return r.$t.transactionFilter.of((e=>{if(!e.docChanged||!e.isUserEvent("input.type")&&!e.isUserEvent("input.complete"))return e;let t=e.startState.languageDataAt("indentOnInput",e.startState.selection.main.head);if(!t.length)return e;let n=e.newDoc,{head:i}=e.newSelection.main,s=n.lineAt(i);if(i>s.from+q)return e;let r=n.sliceString(s.from,i);if(!t.some((e=>e.test(r))))return e;let{state:o}=e,a=-1,l=[];for(let{head:e}of o.selection.ranges){let t=o.doc.lineAt(e);if(t.from==a)continue;a=t.from;let n=N(o,t.from);if(null==n)continue;let i=/^\s*/.exec(t.text)[0],s=E(o,n);i!=s&&l.push({from:t.from,to:t.from+i.length,insert:s})}return l.length?[e,{changes:l,sequential:!0}]:e}))}const W=r.sj.define(),G=new s.uY;function U(e){let t=e.firstChild,n=e.lastChild;return t&&t.to<n.from?{from:t.to,to:n.type.isError?e.to:n.from}:null}function K(e){let t=e.lastChild;return t&&t.to==e.to&&t.type.isError}function J(e,t,n){for(let i of e.facet(W)){let s=i(e,t,n);if(s)return s}return function(e,t,n){let i=m(e);if(i.length<n)return null;let s=null;for(let r=i.resolveStack(n,1);r;r=r.next){let o=r.node;if(o.to<=n||o.from>n)continue;if(s&&o.from<t)break;let a=o.type.prop(G);if(a&&(o.to<i.length-50||i.length==e.doc.length||!K(o))){let i=a(o,e);i&&i.from<=n&&i.from>=t&&i.to>n&&(s=i)}}return s}(e,t,n)}function Y(e,t){let n=t.mapPos(e.from,1),i=t.mapPos(e.to,-1);return n>=i?void 0:{from:n,to:i}}const X=r.Pe.define({map:Y}),Q=r.Pe.define({map:Y}),Z=r.sU.define({create:()=>o.NZ.none,update(e,t){e=e.map(t.changes);for(let n of t.effects)if(n.is(X)&&!te(e,n.value.from,n.value.to)){let{preparePlaceholder:i}=t.state.facet(ie),s=i?o.NZ.replace({widget:new ae(i(t.state,n.value))}):oe;e=e.update({add:[s.range(n.value.from,n.value.to)]})}else n.is(Q)&&(e=e.update({filter:(e,t)=>n.value.from!=e||n.value.to!=t,filterFrom:n.value.from,filterTo:n.value.to}));if(t.selection){let n=!1,{head:i}=t.selection.main;e.between(i,i,((e,t)=>{e<i&&t>i&&(n=!0)})),n&&(e=e.update({filterFrom:i,filterTo:i,filter:(e,t)=>t<=i||e>=i}))}return e},provide:e=>o.Lz.decorations.from(e),toJSON(e,t){let n=[];return e.between(0,t.doc.length,((e,t)=>{n.push(e,t)})),n},fromJSON(e){if(!Array.isArray(e)||e.length%2)throw new RangeError("Invalid JSON for fold state");let t=[];for(let n=0;n<e.length;){let i=e[n++],s=e[n++];if("number"!=typeof i||"number"!=typeof s)throw new RangeError("Invalid JSON for fold state");t.push(oe.range(i,s))}return o.NZ.set(t,!0)}});function ee(e,t,n){var i;let s=null;return null===(i=e.field(Z,!1))||void 0===i||i.between(t,n,((e,t)=>{(!s||s.from>e)&&(s={from:e,to:t})})),s}function te(e,t,n){let i=!1;return e.between(t,t,((e,s)=>{e==t&&s==n&&(i=!0)})),i}const ne={placeholderDOM:null,preparePlaceholder:null,placeholderText:"â€¦"},ie=r.sj.define({combine:e=>(0,r.QR)(e,ne)});function se(e){let t=[Z,ue];return e&&t.push(ie.of(e)),t}function re(e,t){let{state:n}=e,i=n.facet(ie),s=t=>{let n=e.lineBlockAt(e.posAtDOM(t.target)),i=ee(e.state,n.from,n.to);i&&e.dispatch({effects:Q.of(i)}),t.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(e,s,t);let r=document.createElement("span");return r.textContent=i.placeholderText,r.setAttribute("aria-label",n.phrase("folded code")),r.title=n.phrase("unfold"),r.className="cm-foldPlaceholder",r.onclick=s,r}const oe=o.NZ.replace({widget:new class extends o.xO{toDOM(e){return re(e,null)}}});class ae extends o.xO{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return re(e,this.value)}}const le={openText:"âŒ„",closedText:"â€º",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class he extends o.wJ{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function ce(e={}){let t=Object.assign(Object.assign({},le),e),n=new he(t,!0),i=new he(t,!1),s=o.Z9.fromClass(class{constructor(e){this.from=e.viewport.from,this.markers=this.buildMarkers(e)}update(e){(e.docChanged||e.viewportChanged||e.startState.facet(C)!=e.state.facet(C)||e.startState.field(Z,!1)!=e.state.field(Z,!1)||m(e.startState)!=m(e.state)||t.foldingChanged(e))&&(this.markers=this.buildMarkers(e.view))}buildMarkers(e){let t=new r.vB;for(let s of e.viewportLineBlocks){let r=ee(e.state,s.from,s.to)?i:J(e.state,s.from,s.to)?n:null;r&&t.add(s.from,s.from,r)}return t.finish()}}),{domEventHandlers:a}=t;return[s,(0,o.cU)({class:"cm-foldGutter",markers(e){var t;return(null===(t=e.plugin(s))||void 0===t?void 0:t.markers)||r.om.empty},initialSpacer:()=>new he(t,!1),domEventHandlers:Object.assign(Object.assign({},a),{click:(e,t,n)=>{if(a.click&&a.click(e,t,n))return!0;let i=ee(e.state,t.from,t.to);if(i)return e.dispatch({effects:Q.of(i)}),!0;let s=J(e.state,t.from,t.to);return!!s&&(e.dispatch({effects:X.of(s)}),!0)}})}),se()]}const ue=o.Lz.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class fe{constructor(e,t){let n;function i(e){let t=l.G.newName();return(n||(n=Object.create(null)))["."+t]=e,t}this.specs=e;const s="string"==typeof t.all?t.all:t.all?i(t.all):void 0,r=t.scope;this.scope=r instanceof f?e=>e.prop(h)==r.data:r?e=>e==r:void 0,this.style=(0,a.az)(e.map((e=>({tag:e.tag,class:e.class||i(Object.assign({},e,{tag:null}))}))),{all:s}).style,this.module=n?new l.G(n):null,this.themeType=t.themeType}static define(e,t){return new fe(e,t||{})}}const de=r.sj.define(),pe=r.sj.define({combine:e=>e.length?[e[0]]:null});function me(e){let t=e.facet(de);return t.length?t:e.facet(pe)}function ge(e,t){let n,i=[ye];return e instanceof fe&&(e.module&&i.push(o.Lz.styleModule.of(e.module)),n=e.themeType),(null==t?void 0:t.fallback)?i.push(pe.of(e)):n?i.push(de.computeN([o.Lz.darkTheme],(t=>t.facet(o.Lz.darkTheme)==("dark"==n)?[e]:[]))):i.push(de.of(e)),i}class be{constructor(e){this.markCache=Object.create(null),this.tree=m(e.state),this.decorations=this.buildDeco(e,me(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=m(e.state),n=me(e.state),i=n!=me(e.startState),{viewport:s}=e.view,r=e.changes.mapPos(this.decoratedTo,1);t.length<s.to&&!i&&t.type==this.tree.type&&r>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=r):(t!=this.tree||e.viewportChanged||i)&&(this.tree=t,this.decorations=this.buildDeco(e.view,n),this.decoratedTo=s.to)}buildDeco(e,t){if(!t||!this.tree.length)return o.NZ.none;let n=new r.vB;for(let{from:i,to:s}of e.visibleRanges)(0,a.DM)(this.tree,t,((e,t,i)=>{n.add(e,t,this.markCache[i]||(this.markCache[i]=o.NZ.mark({class:i})))}),i,s);return n.finish()}}const ye=r.Nb.high(o.Z9.fromClass(be,{decorations:e=>e.decorations})),ve=fe.define([{tag:a._A.meta,color:"#404740"},{tag:a._A.link,textDecoration:"underline"},{tag:a._A.heading,textDecoration:"underline",fontWeight:"bold"},{tag:a._A.emphasis,fontStyle:"italic"},{tag:a._A.strong,fontWeight:"bold"},{tag:a._A.strikethrough,textDecoration:"line-through"},{tag:a._A.keyword,color:"#708"},{tag:[a._A.atom,a._A.bool,a._A.url,a._A.contentSeparator,a._A.labelName],color:"#219"},{tag:[a._A.literal,a._A.inserted],color:"#164"},{tag:[a._A.string,a._A.deleted],color:"#a11"},{tag:[a._A.regexp,a._A.escape,a._A.special(a._A.string)],color:"#e40"},{tag:a._A.definition(a._A.variableName),color:"#00f"},{tag:a._A.local(a._A.variableName),color:"#30a"},{tag:[a._A.typeName,a._A.namespace],color:"#085"},{tag:a._A.className,color:"#167"},{tag:[a._A.special(a._A.variableName),a._A.macroName],color:"#256"},{tag:a._A.definition(a._A.propertyName),color:"#00c"},{tag:a._A.comment,color:"#940"},{tag:a._A.invalid,color:"#f00"}]),xe=o.Lz.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),we=1e4,ke="()[]{}",Se=r.sj.define({combine:e=>(0,r.QR)(e,{afterCursor:!0,brackets:ke,maxScanDistance:we,renderMatch:Oe})}),Ce=o.NZ.mark({class:"cm-matchingBracket"}),Ae=o.NZ.mark({class:"cm-nonmatchingBracket"});function Oe(e){let t=[],n=e.matched?Ce:Ae;return t.push(n.range(e.start.from,e.start.to)),e.end&&t.push(n.range(e.end.from,e.end.to)),t}const Me=[r.sU.define({create:()=>o.NZ.none,update(e,t){if(!t.docChanged&&!t.selection)return e;let n=[],i=t.state.facet(Se);for(let e of t.state.selection.ranges){if(!e.empty)continue;let s=De(t.state,e.head,-1,i)||e.head>0&&De(t.state,e.head-1,1,i)||i.afterCursor&&(De(t.state,e.head,1,i)||e.head<t.state.doc.length&&De(t.state,e.head+1,-1,i));s&&(n=n.concat(i.renderMatch(s,t.state)))}return o.NZ.set(n,!0)},provide:e=>o.Lz.decorations.from(e)}),xe];function _e(e={}){return[Se.of(e),Me]}const Te=new s.uY;function Ee(e,t,n){let i=e.prop(t<0?s.uY.openedBy:s.uY.closedBy);if(i)return i;if(1==e.name.length){let i=n.indexOf(e.name);if(i>-1&&i%2==(t<0?1:0))return[n[i+t]]}return null}function Ne(e){let t=e.type.prop(Te);return t?t(e.node):e}function De(e,t,n,i={}){let s=i.maxScanDistance||we,r=i.brackets||ke,o=m(e),a=o.resolveInner(t,n);for(let e=a;e;e=e.parent){let i=Ee(e.type,n,r);if(i&&e.from<e.to){let s=Ne(e);if(s&&(n>0?t>=s.from&&t<s.to:t>s.from&&t<=s.to))return Pe(0,0,n,e,s,i,r)}}return function(e,t,n,i,s,r,o){let a=n<0?e.sliceDoc(t-1,t):e.sliceDoc(t,t+1),l=o.indexOf(a);if(l<0||l%2==0!=n>0)return null;let h={from:n<0?t-1:t,to:n>0?t+1:t},c=e.doc.iterRange(t,n>0?e.doc.length:0),u=0;for(let e=0;!c.next().done&&e<=r;){let r=c.value;n<0&&(e+=r.length);let a=t+e*n;for(let e=n>0?0:r.length-1,t=n>0?r.length:-1;e!=t;e+=n){let t=o.indexOf(r[e]);if(!(t<0||i.resolveInner(a+e,1).type!=s))if(t%2==0==n>0)u++;else{if(1==u)return{start:h,end:{from:a+e,to:a+e+1},matched:t>>1==l>>1};u--}}n>0&&(e+=r.length)}return c.done?{start:h,matched:!1}:null}(e,t,n,o,a.type,s,r)}function Pe(e,t,n,i,s,r,o){let a=i.parent,l={from:s.from,to:s.to},h=0,c=null==a?void 0:a.cursor();if(c&&(n<0?c.childBefore(i.from):c.childAfter(i.to)))do{if(n<0?c.to<=i.from:c.from>=i.to){if(0==h&&r.indexOf(c.type.name)>-1&&c.from<c.to){let e=Ne(c);return{start:l,end:e?{from:e.from,to:e.to}:void 0,matched:!0}}if(Ee(c.type,n,o))h++;else if(Ee(c.type,-n,o)){if(0==h){let e=Ne(c);return{start:l,end:e&&e.from<e.to?{from:e.from,to:e.to}:void 0,matched:!1}}h--}}}while(n<0?c.prevSibling():c.nextSibling());return{start:l,matched:!1}}function Re(e,t,n,i=0,s=0){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);let r=s;for(let s=i;s<t;s++)9==e.charCodeAt(s)?r+=n-r%n:r++;return r}class je{constructor(e,t,n,i){this.string=e,this.tabSize=t,this.indentUnit=n,this.overrideIndent=i,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return 0==this.pos}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let t,n=this.string.charAt(this.pos);if(t="string"==typeof e?n==e:n&&(e instanceof RegExp?e.test(n):e(n)),t)return++this.pos,n}eatWhile(e){let t=this.pos;for(;this.eat(e););return this.pos>t}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Re(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return null!==(e=this.overrideIndent)&&void 0!==e?e:Re(this.string,null,this.tabSize)}match(e,t,n){if("string"==typeof e){let i=e=>n?e.toLowerCase():e;return i(this.string.substr(this.pos,e.length))==i(e)?(!1!==t&&(this.pos+=e.length),!0):null}{let n=this.string.slice(this.pos).match(e);return n&&n.index>0?null:(n&&!1!==t&&(this.pos+=n[0].length),n)}}current(){return this.string.slice(this.start,this.pos)}}function Le(e){if("object"!=typeof e)return e;let t={};for(let n in e){let i=e[n];t[n]=i instanceof Array?i.slice():i}return t}const Be=new WeakMap;class Ie extends f{constructor(e){let t,n=c(e.languageData),i={name:(r=e).name||"",token:r.token,blankLine:r.blankLine||(()=>{}),startState:r.startState||(()=>!0),copyState:r.copyState||Le,indent:r.indent||(()=>null),languageData:r.languageData||{},tokenTable:r.tokenTable||qe};var r;super(n,new class extends s.iX{createParse(e,n,i){return new ze(t,e,n,i)}},[M.of(((e,t)=>this.getIndent(e,t)))],e.name),this.topNode=function(e){let t=s.Z6.define({id:Ve.length,name:"Document",props:[h.add((()=>e))],top:!0});return Ve.push(t),t}(n),t=this,this.streamParser=i,this.stateAfter=new s.uY({perNode:!0}),this.tokenTable=e.tokenTable?new Je(i.tokenTable):Ye}static define(e){return new Ie(e)}getIndent(e,t){let n,i=m(e.state),s=i.resolve(t);for(;s&&s.type!=this.topNode;)s=s.parent;if(!s)return null;let{overrideIndentation:r}=e.options;r&&(n=Be.get(e.state),null!=n&&n<t-1e4&&(n=void 0));let o,a,l=Fe(this,i,0,s.from,null!=n?n:t);if(l?(a=l.state,o=l.pos+1):(a=this.streamParser.startState(e.unit),o=0),t-o>1e4)return null;for(;o<t;){let n=e.state.doc.lineAt(o),i=Math.min(t,n.to);if(n.length){let t=r?r(n.from):-1,s=new je(n.text,e.state.tabSize,e.unit,t<0?void 0:t);for(;s.pos<i-n.from;)He(this.streamParser.token,s,a)}else this.streamParser.blankLine(a,e.unit);if(i==t)break;o=n.to+1}let h=e.lineAt(t);return r&&null==n&&Be.set(e.state,h.from),this.streamParser.indent(a,/^\s*(.*)/.exec(h.text)[1],e)}get allowsNesting(){return!1}}function Fe(e,t,n,i,r){let o=n>=i&&n+t.length<=r&&t.prop(e.stateAfter);if(o)return{state:e.streamParser.copyState(o),pos:n+t.length};for(let o=t.children.length-1;o>=0;o--){let a=t.children[o],l=n+t.positions[o],h=a instanceof s.PH&&l<r&&Fe(e,a,l,i,r);if(h)return h}return null}function $e(e,t,n,i,r){if(r&&n<=0&&i>=t.length)return t;r||t.type!=e.topNode||(r=!0);for(let o=t.children.length-1;o>=0;o--){let a,l=t.positions[o],h=t.children[o];if(l<i&&h instanceof s.PH){if(!(a=$e(e,h,n-l,i-l,r)))break;return r?new s.PH(t.type,t.children.slice(0,o).concat(a),t.positions.slice(0,o+1),l+a.length):a}}return null}class ze{constructor(e,t,n,i){this.lang=e,this.input=t,this.fragments=n,this.ranges=i,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=i[i.length-1].to;let r=y.get(),o=i[0].from,{state:a,tree:l}=function(e,t,n,i){for(let i of t){let t,s=i.from+(i.openStart?25:0),r=i.to-(i.openEnd?25:0),o=s<=n&&r>n&&Fe(e,i.tree,0-i.offset,n,r);if(o&&(t=$e(e,i.tree,n+i.offset,o.pos+i.offset,!1)))return{state:o.state,tree:t}}return{state:e.streamParser.startState(i?T(i):4),tree:s.PH.empty}}(e,n,o,null==r?void 0:r.state);this.state=a,this.parsedPos=this.chunkStart=o+l.length;for(let e=0;e<l.children.length;e++)this.chunks.push(l.children[e]),this.chunkPos.push(l.positions[e]);r&&this.parsedPos<r.viewport.from-1e5&&(this.state=this.lang.streamParser.startState(T(r.state)),r.skipUntilInView(this.parsedPos,r.viewport.from),this.parsedPos=r.viewport.from),this.moveRangeIndex()}advance(){let e=y.get(),t=null==this.stoppedAt?this.to:Math.min(this.to,this.stoppedAt),n=Math.min(t,this.chunkStart+2048);for(e&&(n=Math.min(n,e.viewport.to));this.parsedPos<n;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=t?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,t),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let t=this.input.chunk(e);if(this.input.lineChunks)"\n"==t&&(t="");else{let e=t.indexOf("\n");e>-1&&(t=t.slice(0,e))}return e+t.length<=this.to?t:t.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,t=this.lineAfter(e),n=e+t.length;for(let e=this.rangeIndex;;){let i=this.ranges[e].to;if(i>=n)break;if(t=t.slice(0,i-(n-t.length)),e++,e==this.ranges.length)break;let s=this.ranges[e].from,r=this.lineAfter(s);t+=r,n=s+r.length}return{line:t,end:n}}skipGapsTo(e,t,n){for(;;){let i=this.ranges[this.rangeIndex].to,s=e+t;if(n>0?i>s:i>=s)break;t+=this.ranges[++this.rangeIndex].from-i}return t}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,t,n,i,s){if(this.ranges.length>1){t+=s=this.skipGapsTo(t,s,1);let e=this.chunk.length;n+=s=this.skipGapsTo(n,s,-1),i+=this.chunk.length-e}return this.chunk.push(e,t,n,i),s}parseLine(e){let{line:t,end:n}=this.nextLine(),i=0,{streamParser:s}=this.lang,r=new je(t,e?e.state.tabSize:4,e?T(e.state):2);if(r.eol())s.blankLine(this.state,r.indentUnit);else for(;!r.eol();){let e=He(s.token,r,this.state);if(e&&(i=this.emitToken(this.lang.tokenTable.resolve(e),this.parsedPos+r.start,this.parsedPos+r.pos,4,i)),r.start>1e4)break}this.parsedPos=n,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=s.PH.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:We,topID:0,maxBufferLength:2048,reused:this.chunkReused});e=new s.PH(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new s.PH(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function He(e,t,n){t.start=t.pos;for(let i=0;i<10;i++){let i=e(t,n);if(t.pos>t.start)return i}throw new Error("Stream parser failed to advance stream.")}const qe=Object.create(null),Ve=[s.Z6.none],We=new s.fI(Ve),Ge=[],Ue=Object.create(null),Ke=Object.create(null);for(let[e,t]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])Ke[e]=Qe(qe,t);class Je{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),Ke)}resolve(e){return e?this.table[e]||(this.table[e]=Qe(this.extra,e)):0}}const Ye=new Je(qe);function Xe(e,t){Ge.indexOf(e)>-1||(Ge.push(e),console.warn(t))}function Qe(e,t){let n=[];for(let i of t.split(" ")){let t=[];for(let n of i.split(".")){let i=e[n]||a._A[n];i?"function"==typeof i?t.length?t=t.map(i):Xe(n,`Modifier ${n} used at start of tag`):t.length?Xe(n,`Tag ${n} used as modifier`):t=Array.isArray(i)?i:[i]:Xe(n,`Unknown highlighting tag ${n}`)}for(let e of t)n.push(e)}if(!n.length)return 0;let i=t.replace(/ /g,"_"),r=i+" "+n.map((e=>e.id)),o=Ue[r];if(o)return o.id;let l=Ue[r]=s.Z6.define({id:Ve.length,name:i,props:[(0,a.pn)({[i]:n})]});return Ve.push(l),l.id}o.OP.RTL,o.OP.LTR},14830:(e,t,n)=>{"use strict";n.d(t,{$t:()=>ke,EY:()=>i,FB:()=>Ce,Fh:()=>C,Gu:()=>M,Je:()=>ve,MK:()=>S,Nb:()=>K,OF:()=>L,Pe:()=>ue,QR:()=>Se,VR:()=>_,YH:()=>le,ZX:()=>fe,iR:()=>O,kn:()=>ze,om:()=>_e,sU:()=>G,sj:()=>F,vB:()=>Te,vS:()=>k,xx:()=>Y,y$:()=>$e,zK:()=>b});class i{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,n){[e,t]=f(this,e,t);let i=[];return this.decompose(0,e,i,2),n.length&&n.decompose(0,n.length,i,3),this.decompose(t,this.length,i,1),r.from(i,this.length-(t-e)+n.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=f(this,e,t);let n=[];return this.decompose(e,t,n,0),r.from(n,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),n=this.length-this.scanIdentical(e,-1),i=new l(this),s=new l(e);for(let e=t,r=t;;){if(i.next(e),s.next(e),e=0,i.lineBreak!=s.lineBreak||i.done!=s.done||i.value!=s.value)return!1;if(r+=i.value.length,i.done||r>=n)return!0}}iter(e=1){return new l(this,e)}iterRange(e,t=this.length){return new h(this,e,t)}iterLines(e,t){let n;if(null==e)n=this.iter();else{null==t&&(t=this.lines+1);let i=this.line(e).from;n=this.iterRange(i,Math.max(i,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new c(n)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(0==e.length)throw new RangeError("A document must have at least one line");return 1!=e.length||e[0]?e.length<=32?new s(e):r.from(s.split(e,[])):i.empty}}class s extends i{constructor(e,t=function(e){let t=-1;for(let n of e)t+=n.length+1;return t}(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,n,i){for(let s=0;;s++){let r=this.text[s],o=i+r.length;if((t?n:o)>=e)return new u(i,o,n,r);i=o+1,n++}}decompose(e,t,n,i){let r=e<=0&&t>=this.length?this:new s(a(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(1&i){let e=n.pop(),t=o(r.text,e.text.slice(),0,r.length);if(t.length<=32)n.push(new s(t,e.length+r.length));else{let e=t.length>>1;n.push(new s(t.slice(0,e)),new s(t.slice(e)))}}else n.push(r)}replace(e,t,n){if(!(n instanceof s))return super.replace(e,t,n);[e,t]=f(this,e,t);let i=o(this.text,o(n.text,a(this.text,0,e)),t),l=this.length+n.length-(t-e);return i.length<=32?new s(i,l):r.from(s.split(i,[]),l)}sliceString(e,t=this.length,n="\n"){[e,t]=f(this,e,t);let i="";for(let s=0,r=0;s<=t&&r<this.text.length;r++){let o=this.text[r],a=s+o.length;s>e&&r&&(i+=n),e<a&&t>s&&(i+=o.slice(Math.max(0,e-s),t-s)),s=a+1}return i}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let n=[],i=-1;for(let r of e)n.push(r),i+=r.length+1,32==n.length&&(t.push(new s(n,i)),n=[],i=-1);return i>-1&&t.push(new s(n,i)),t}}class r extends i{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let t of e)this.lines+=t.lines}lineInner(e,t,n,i){for(let s=0;;s++){let r=this.children[s],o=i+r.length,a=n+r.lines-1;if((t?a:o)>=e)return r.lineInner(e,t,n,i);i=o+1,n=a+1}}decompose(e,t,n,i){for(let s=0,r=0;r<=t&&s<this.children.length;s++){let o=this.children[s],a=r+o.length;if(e<=a&&t>=r){let s=i&((r<=e?1:0)|(a>=t?2:0));r>=e&&a<=t&&!s?n.push(o):o.decompose(e-r,t-r,n,s)}r=a+1}}replace(e,t,n){if([e,t]=f(this,e,t),n.lines<this.lines)for(let i=0,s=0;i<this.children.length;i++){let o=this.children[i],a=s+o.length;if(e>=s&&t<=a){let l=o.replace(e-s,t-s,n),h=this.lines-o.lines+l.lines;if(l.lines<h>>4&&l.lines>h>>6){let s=this.children.slice();return s[i]=l,new r(s,this.length-(t-e)+n.length)}return super.replace(s,a,l)}s=a+1}return super.replace(e,t,n)}sliceString(e,t=this.length,n="\n"){[e,t]=f(this,e,t);let i="";for(let s=0,r=0;s<this.children.length&&r<=t;s++){let o=this.children[s],a=r+o.length;r>e&&s&&(i+=n),e<a&&t>r&&(i+=o.sliceString(e-r,t-r,n)),r=a+1}return i}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof r))return 0;let n=0,[i,s,o,a]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=t,s+=t){if(i==o||s==a)return n;let r=this.children[i],l=e.children[s];if(r!=l)return n+r.scanIdentical(l,t);n+=r.length+1}}static from(e,t=e.reduce(((e,t)=>e+t.length+1),-1)){let n=0;for(let t of e)n+=t.lines;if(n<32){let n=[];for(let t of e)t.flatten(n);return new s(n,t)}let i=Math.max(32,n>>5),o=i<<1,a=i>>1,l=[],h=0,c=-1,u=[];function f(e){let t;if(e.lines>o&&e instanceof r)for(let t of e.children)f(t);else e.lines>a&&(h>a||!h)?(d(),l.push(e)):e instanceof s&&h&&(t=u[u.length-1])instanceof s&&e.lines+t.lines<=32?(h+=e.lines,c+=e.length+1,u[u.length-1]=new s(t.text.concat(e.text),t.length+1+e.length)):(h+e.lines>i&&d(),h+=e.lines,c+=e.length+1,u.push(e))}function d(){0!=h&&(l.push(1==u.length?u[0]:r.from(u,c)),c=-1,h=u.length=0)}for(let t of e)f(t);return d(),1==l.length?l[0]:new r(l,t)}}function o(e,t,n=0,i=1e9){for(let s=0,r=0,o=!0;r<e.length&&s<=i;r++){let a=e[r],l=s+a.length;l>=n&&(l>i&&(a=a.slice(0,i-s)),s<n&&(a=a.slice(n-s)),o?(t[t.length-1]+=a,o=!1):t.push(a)),s=l+1}return t}function a(e,t,n){return o(e,[""],t,n)}i.empty=new s([""],0);class l{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof s?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let n=this.nodes.length-1,i=this.nodes[n],r=this.offsets[n],o=r>>1,a=i instanceof s?i.text.length:i.children.length;if(o==(t>0?a:0)){if(0==n)return this.done=!0,this.value="",this;t>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((1&r)==(t>0?0:1)){if(this.offsets[n]+=t,0==e)return this.lineBreak=!0,this.value="\n",this;e--}else if(i instanceof s){let s=i.text[o+(t<0?-1:0)];if(this.offsets[n]+=t,s.length>Math.max(0,e))return this.value=0==e?s:t>0?s.slice(e):s.slice(0,s.length-e),this;e-=s.length}else{let r=i.children[o+(t<0?-1:0)];e>r.length?(e-=r.length,this.offsets[n]+=t):(t<0&&this.offsets[n]--,this.nodes.push(r),this.offsets.push(t>0?1:(r instanceof s?r.text.length:r.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class h{constructor(e,t,n){this.value="",this.done=!1,this.cursor=new l(e,t>n?-1:1),this.pos=t>n?e.length:0,this.from=Math.min(t,n),this.to=Math.max(t,n)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let n=t<0?this.pos-this.from:this.to-this.pos;e>n&&(e=n),n-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*t,this.value=i.length<=n?i:t<0?i.slice(i.length-n):i.slice(0,n),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&""!=this.value}}class c{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:n,value:i}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):n?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}"undefined"!=typeof Symbol&&(i.prototype[Symbol.iterator]=function(){return this.iter()},l.prototype[Symbol.iterator]=h.prototype[Symbol.iterator]=c.prototype[Symbol.iterator]=function(){return this});class u{constructor(e,t,n,i){this.from=e,this.to=t,this.number=n,this.text=i}get length(){return this.to-this.from}}function f(e,t,n){return[t=Math.max(0,Math.min(e.length,t)),Math.max(t,Math.min(e.length,n))]}let d="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map((e=>e?parseInt(e,36):1));for(let e=1;e<d.length;e++)d[e]+=d[e-1];function p(e){for(let t=1;t<d.length;t+=2)if(d[t]>e)return d[t-1]<=e;return!1}function m(e){return e>=127462&&e<=127487}const g=8205;function b(e,t,n=!0,i=!0){return(n?y:v)(e,t,i)}function y(e,t,n){if(t==e.length)return t;t&&x(e.charCodeAt(t))&&w(e.charCodeAt(t-1))&&t--;let i=k(e,t);for(t+=C(i);t<e.length;){let s=k(e,t);if(i==g||s==g||n&&p(s))t+=C(s),i=s;else{if(!m(s))break;{let n=0,i=t-2;for(;i>=0&&m(k(e,i));)n++,i-=2;if(n%2==0)break;t+=2}}}return t}function v(e,t,n){for(;t>0;){let i=y(e,t-2,n);if(i<t)return i;t--}return 0}function x(e){return e>=56320&&e<57344}function w(e){return e>=55296&&e<56320}function k(e,t){let n=e.charCodeAt(t);if(!w(n)||t+1==e.length)return n;let i=e.charCodeAt(t+1);return x(i)?i-56320+(n-55296<<10)+65536:n}function S(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}function C(e){return e<65536?1:2}const A=/\r\n?|\n/;var O=function(e){return e[e.Simple=0]="Simple",e[e.TrackDel=1]="TrackDel",e[e.TrackBefore=2]="TrackBefore",e[e.TrackAfter=3]="TrackAfter",e}(O||(O={}));class M{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t+1];e+=n<0?this.sections[t]:n}return e}get empty(){return 0==this.sections.length||2==this.sections.length&&this.sections[1]<0}iterGaps(e){for(let t=0,n=0,i=0;t<this.sections.length;){let s=this.sections[t++],r=this.sections[t++];r<0?(e(n,i,s),i+=s):i+=r,n+=s}}iterChangedRanges(e,t=!1){N(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let n=this.sections[t++],i=this.sections[t++];i<0?e.push(n,i):e.push(i,n)}return new M(e)}composeDesc(e){return this.empty?e:e.empty?this:P(this,e)}mapDesc(e,t=!1){return e.empty?this:D(this,e,t)}mapPos(e,t=-1,n=O.Simple){let i=0,s=0;for(let r=0;r<this.sections.length;){let o=this.sections[r++],a=this.sections[r++],l=i+o;if(a<0){if(l>e)return s+(e-i);s+=o}else{if(n!=O.Simple&&l>=e&&(n==O.TrackDel&&i<e&&l>e||n==O.TrackBefore&&i<e||n==O.TrackAfter&&l>e))return null;if(l>e||l==e&&t<0&&!o)return e==i||t<0?s:s+a;s+=a}i=l}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return s}touchesRange(e,t=e){for(let n=0,i=0;n<this.sections.length&&i<=t;){let s=i+this.sections[n++];if(this.sections[n++]>=0&&i<=t&&s>=e)return!(i<e&&s>t)||"cover";i=s}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let n=this.sections[t++],i=this.sections[t++];e+=(e?" ":"")+n+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some((e=>"number"!=typeof e)))throw new RangeError("Invalid JSON representation of ChangeDesc");return new M(e)}static create(e){return new M(e)}}class _ extends M{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return N(this,((t,n,i,s,r)=>e=e.replace(i,i+(n-t),r)),!1),e}mapDesc(e,t=!1){return D(this,e,t,!0)}invert(e){let t=this.sections.slice(),n=[];for(let s=0,r=0;s<t.length;s+=2){let o=t[s],a=t[s+1];if(a>=0){t[s]=a,t[s+1]=o;let l=s>>1;for(;n.length<l;)n.push(i.empty);n.push(o?e.slice(r,r+o):i.empty)}r+=o}return new _(t,n)}compose(e){return this.empty?e:e.empty?this:P(this,e,!0)}map(e,t=!1){return e.empty?this:D(this,e,t,!0)}iterChanges(e,t=!1){N(this,e,t)}get desc(){return M.create(this.sections)}filter(e){let t=[],n=[],i=[],s=new R(this);e:for(let r=0,o=0;;){let a=r==e.length?1e9:e[r++];for(;o<a||o==a&&0==s.len;){if(s.done)break e;let e=Math.min(s.len,a-o);T(i,e,-1);let r=-1==s.ins?-1:0==s.off?s.ins:0;T(t,e,r),r>0&&E(n,t,s.text),s.forward(e),o+=e}let l=e[r++];for(;o<l;){if(s.done)break e;let e=Math.min(s.len,l-o);T(t,e,-1),T(i,e,-1==s.ins?-1:0==s.off?s.ins:0),s.forward(e),o+=e}}return{changes:new _(t,n),filtered:M.create(i)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t],i=this.sections[t+1];i<0?e.push(n):0==i?e.push([n]):e.push([n].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,n){let s=[],r=[],o=0,a=null;function l(e=!1){if(!e&&!s.length)return;o<t&&T(s,t-o,-1);let n=new _(s,r);a=a?a.compose(n.map(a)):n,s=[],r=[],o=0}return function e(h){if(Array.isArray(h))for(let t of h)e(t);else if(h instanceof _){if(h.length!=t)throw new RangeError(`Mismatched change set length (got ${h.length}, expected ${t})`);l(),a=a?a.compose(h.map(a)):h}else{let{from:e,to:a=e,insert:c}=h;if(e>a||e<0||a>t)throw new RangeError(`Invalid change range ${e} to ${a} (in doc of length ${t})`);let u=c?"string"==typeof c?i.of(c.split(n||A)):c:i.empty,f=u.length;if(e==a&&0==f)return;e<o&&l(),e>o&&T(s,e-o,-1),T(s,a-e,f),E(r,s,u),o=a}}(e),l(!a),a}static empty(e){return new _(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],n=[];for(let s=0;s<e.length;s++){let r=e[s];if("number"==typeof r)t.push(r,-1);else{if(!Array.isArray(r)||"number"!=typeof r[0]||r.some(((e,t)=>t&&"string"!=typeof e)))throw new RangeError("Invalid JSON representation of ChangeSet");if(1==r.length)t.push(r[0],0);else{for(;n.length<s;)n.push(i.empty);n[s]=i.of(r.slice(1)),t.push(r[0],n[s].length)}}}return new _(t,n)}static createSet(e,t){return new _(e,t)}}function T(e,t,n,i=!1){if(0==t&&n<=0)return;let s=e.length-2;s>=0&&n<=0&&n==e[s+1]?e[s]+=t:0==t&&0==e[s]?e[s+1]+=n:i?(e[s]+=t,e[s+1]+=n):e.push(t,n)}function E(e,t,n){if(0==n.length)return;let s=t.length-2>>1;if(s<e.length)e[e.length-1]=e[e.length-1].append(n);else{for(;e.length<s;)e.push(i.empty);e.push(n)}}function N(e,t,n){let s=e.inserted;for(let r=0,o=0,a=0;a<e.sections.length;){let l=e.sections[a++],h=e.sections[a++];if(h<0)r+=l,o+=l;else{let c=r,u=o,f=i.empty;for(;c+=l,u+=h,h&&s&&(f=f.append(s[a-2>>1])),!(n||a==e.sections.length||e.sections[a+1]<0);)l=e.sections[a++],h=e.sections[a++];t(r,c,o,u,f),r=c,o=u}}}function D(e,t,n,i=!1){let s=[],r=i?[]:null,o=new R(e),a=new R(t);for(let e=-1;;)if(-1==o.ins&&-1==a.ins){let e=Math.min(o.len,a.len);T(s,e,-1),o.forward(e),a.forward(e)}else if(a.ins>=0&&(o.ins<0||e==o.i||0==o.off&&(a.len<o.len||a.len==o.len&&!n))){let t=a.len;for(T(s,a.ins,-1);t;){let n=Math.min(o.len,t);o.ins>=0&&e<o.i&&o.len<=n&&(T(s,0,o.ins),r&&E(r,s,o.text),e=o.i),o.forward(n),t-=n}a.next()}else{if(!(o.ins>=0)){if(o.done&&a.done)return r?_.createSet(s,r):M.create(s);throw new Error("Mismatched change set lengths")}{let t=0,n=o.len;for(;n;)if(-1==a.ins){let e=Math.min(n,a.len);t+=e,n-=e,a.forward(e)}else{if(!(0==a.ins&&a.len<n))break;n-=a.len,a.next()}T(s,t,e<o.i?o.ins:0),r&&e<o.i&&E(r,s,o.text),e=o.i,o.forward(o.len-n)}}}function P(e,t,n=!1){let i=[],s=n?[]:null,r=new R(e),o=new R(t);for(let e=!1;;){if(r.done&&o.done)return s?_.createSet(i,s):M.create(i);if(0==r.ins)T(i,r.len,0,e),r.next();else if(0!=o.len||o.done){if(r.done||o.done)throw new Error("Mismatched change set lengths");{let t=Math.min(r.len2,o.len),n=i.length;if(-1==r.ins){let n=-1==o.ins?-1:o.off?0:o.ins;T(i,t,n,e),s&&n&&E(s,i,o.text)}else-1==o.ins?(T(i,r.off?0:r.len,t,e),s&&E(s,i,r.textBit(t))):(T(i,r.off?0:r.len,o.off?0:o.ins,e),s&&!o.off&&E(s,i,o.text));e=(r.ins>t||o.ins>=0&&o.len>t)&&(e||i.length>n),r.forward2(t),o.forward(t)}}else T(i,0,o.ins,e),s&&E(s,i,o.text),o.next()}}class R{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return-2==this.ins}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?i.empty:e[t]}textBit(e){let{inserted:t}=this.set,n=this.i-2>>1;return n>=t.length&&!e?i.empty:t[n].slice(this.off,null==e?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){-1==this.ins?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class j{constructor(e,t,n){this.from=e,this.to=t,this.flags=n}get anchor(){return 32&this.flags?this.to:this.from}get head(){return 32&this.flags?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return 8&this.flags?-1:16&this.flags?1:0}get bidiLevel(){let e=7&this.flags;return 7==e?null:e}get goalColumn(){let e=this.flags>>6;return 16777215==e?void 0:e}map(e,t=-1){let n,i;return this.empty?n=i=e.mapPos(this.from,t):(n=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),n==this.from&&i==this.to?this:new j(n,i,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return L.range(e,t);let n=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return L.range(this.anchor,n)}eq(e,t=!1){return!(this.anchor!=e.anchor||this.head!=e.head||t&&this.empty&&this.assoc!=e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||"number"!=typeof e.anchor||"number"!=typeof e.head)throw new RangeError("Invalid JSON representation for SelectionRange");return L.range(e.anchor,e.head)}static create(e,t,n){return new j(e,t,n)}}class L{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:L.create(this.ranges.map((n=>n.map(e,t))),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let n=0;n<this.ranges.length;n++)if(!this.ranges[n].eq(e.ranges[n],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return 1==this.ranges.length?this:new L([this.main],0)}addRange(e,t=!0){return L.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let n=this.ranges.slice();return n[t]=e,L.create(n,this.mainIndex)}toJSON(){return{ranges:this.ranges.map((e=>e.toJSON())),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||"number"!=typeof e.main||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new L(e.ranges.map((e=>j.fromJSON(e))),e.main)}static single(e,t=e){return new L([L.range(e,t)],0)}static create(e,t=0){if(0==e.length)throw new RangeError("A selection needs at least one range");for(let n=0,i=0;i<e.length;i++){let s=e[i];if(s.empty?s.from<=n:s.from<n)return L.normalized(e.slice(),t);n=s.to}return new L(e,t)}static cursor(e,t=0,n,i){return j.create(e,e,(0==t?0:t<0?8:16)|(null==n?7:Math.min(6,n))|(null!=i?i:16777215)<<6)}static range(e,t,n,i){let s=(null!=n?n:16777215)<<6|(null==i?7:Math.min(6,i));return t<e?j.create(t,e,48|s):j.create(e,t,(t>e?8:0)|s)}static normalized(e,t=0){let n=e[t];e.sort(((e,t)=>e.from-t.from)),t=e.indexOf(n);for(let n=1;n<e.length;n++){let i=e[n],s=e[n-1];if(i.empty?i.from<=s.to:i.from<s.to){let r=s.from,o=Math.max(i.to,s.to);n<=t&&t--,e.splice(--n,2,i.anchor>i.head?L.range(o,r):L.range(r,o))}}return new L(e,t)}}function B(e,t){for(let n of e.ranges)if(n.to>t)throw new RangeError("Selection points outside of document")}let I=0;class F{constructor(e,t,n,i,s){this.combine=e,this.compareInput=t,this.compare=n,this.isStatic=i,this.id=I++,this.default=e([]),this.extensions="function"==typeof s?s(this):s}get reader(){return this}static define(e={}){return new F(e.combine||(e=>e),e.compareInput||((e,t)=>e===t),e.compare||(e.combine?(e,t)=>e===t:$),!!e.static,e.enables)}of(e){return new z([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new z(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new z(e,this,2,t)}from(e,t){return t||(t=e=>e),this.compute([e],(n=>t(n.field(e))))}}function $(e,t){return e==t||e.length==t.length&&e.every(((e,n)=>e===t[n]))}class z{constructor(e,t,n,i){this.dependencies=e,this.facet=t,this.type=n,this.value=i,this.id=I++}dynamicSlot(e){var t;let n=this.value,i=this.facet.compareInput,s=this.id,r=e[s]>>1,o=2==this.type,a=!1,l=!1,h=[];for(let n of this.dependencies)"doc"==n?a=!0:"selection"==n?l=!0:1&(null!==(t=e[n.id])&&void 0!==t?t:1)||h.push(e[n.id]);return{create:e=>(e.values[r]=n(e),1),update(e,t){if(a&&t.docChanged||l&&(t.docChanged||t.selection)||q(e,h)){let t=n(e);if(o?!H(t,e.values[r],i):!i(t,e.values[r]))return e.values[r]=t,1}return 0},reconfigure:(e,t)=>{let a,l=t.config.address[s];if(null!=l){let s=ee(t,l);if(this.dependencies.every((n=>n instanceof F?t.facet(n)===e.facet(n):!(n instanceof G)||t.field(n,!1)==e.field(n,!1)))||(o?H(a=n(e),s,i):i(a=n(e),s)))return e.values[r]=s,0}else a=n(e);return e.values[r]=a,1}}}}function H(e,t,n){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++)if(!n(e[i],t[i]))return!1;return!0}function q(e,t){let n=!1;for(let i of t)1&Z(e,i)&&(n=!0);return n}function V(e,t,n){let i=n.map((t=>e[t.id])),s=n.map((e=>e.type)),r=i.filter((e=>!(1&e))),o=e[t.id]>>1;function a(e){let n=[];for(let t=0;t<i.length;t++){let r=ee(e,i[t]);if(2==s[t])for(let e of r)n.push(e);else n.push(r)}return t.combine(n)}return{create(e){for(let t of i)Z(e,t);return e.values[o]=a(e),1},update(e,n){if(!q(e,r))return 0;let i=a(e);return t.compare(i,e.values[o])?0:(e.values[o]=i,1)},reconfigure(e,s){let r=q(e,i),l=s.config.facets[t.id],h=s.facet(t);if(l&&!r&&$(n,l))return e.values[o]=h,0;let c=a(e);return t.compare(c,h)?(e.values[o]=h,0):(e.values[o]=c,1)}}}const W=F.define({static:!0});class G{constructor(e,t,n,i,s){this.id=e,this.createF=t,this.updateF=n,this.compareF=i,this.spec=s,this.provides=void 0}static define(e){let t=new G(I++,e.create,e.update,e.compare||((e,t)=>e===t),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(W).find((e=>e.field==this));return((null==t?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:e=>(e.values[t]=this.create(e),1),update:(e,n)=>{let i=e.values[t],s=this.updateF(i,n);return this.compareF(i,s)?0:(e.values[t]=s,1)},reconfigure:(e,n)=>null!=n.config.address[this.id]?(e.values[t]=n.field(this),0):(e.values[t]=this.create(e),1)}}init(e){return[this,W.of({field:this,create:e})]}get extension(){return this}}function U(e){return t=>new J(t,e)}const K={highest:U(0),high:U(1),default:U(2),low:U(3),lowest:U(4)};class J{constructor(e,t){this.inner=e,this.prec=t}}class Y{of(e){return new X(this,e)}reconfigure(e){return Y.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class X{constructor(e,t){this.compartment=e,this.inner=t}}class Q{constructor(e,t,n,i,s,r){for(this.base=e,this.compartments=t,this.dynamicSlots=n,this.address=i,this.staticValues=s,this.facets=r,this.statusTemplate=[];this.statusTemplate.length<n.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return null==t?e.default:this.staticValues[t>>1]}static resolve(e,t,n){let i=[],s=Object.create(null),r=new Map;for(let n of function(e,t,n){let i=[[],[],[],[],[]],s=new Map;return function e(r,o){let a=s.get(r);if(null!=a){if(a<=o)return;let e=i[a].indexOf(r);e>-1&&i[a].splice(e,1),r instanceof X&&n.delete(r.compartment)}if(s.set(r,o),Array.isArray(r))for(let t of r)e(t,o);else if(r instanceof X){if(n.has(r.compartment))throw new RangeError("Duplicate use of compartment in extensions");let i=t.get(r.compartment)||r.inner;n.set(r.compartment,i),e(i,o)}else if(r instanceof J)e(r.inner,r.prec);else if(r instanceof G)i[o].push(r),r.provides&&e(r.provides,o);else if(r instanceof z)i[o].push(r),r.facet.extensions&&e(r.facet.extensions,2);else{let t=r.extension;if(!t)throw new Error(`Unrecognized extension value in extension set (${r}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);e(t,o)}}(e,2),i.reduce(((e,t)=>e.concat(t)))}(e,t,r))n instanceof G?i.push(n):(s[n.facet.id]||(s[n.facet.id]=[])).push(n);let o=Object.create(null),a=[],l=[];for(let e of i)o[e.id]=l.length<<1,l.push((t=>e.slot(t)));let h=null==n?void 0:n.config.facets;for(let e in s){let t=s[e],i=t[0].facet,r=h&&h[e]||[];if(t.every((e=>0==e.type)))if(o[i.id]=a.length<<1|1,$(r,t))a.push(n.facet(i));else{let e=i.combine(t.map((e=>e.value)));a.push(n&&i.compare(e,n.facet(i))?n.facet(i):e)}else{for(let e of t)0==e.type?(o[e.id]=a.length<<1|1,a.push(e.value)):(o[e.id]=l.length<<1,l.push((t=>e.dynamicSlot(t))));o[i.id]=l.length<<1,l.push((e=>V(e,i,t)))}}let c=l.map((e=>e(o)));return new Q(e,r,c,o,a,s)}}function Z(e,t){if(1&t)return 2;let n=t>>1,i=e.status[n];if(4==i)throw new Error("Cyclic dependency between fields and/or facets");if(2&i)return i;e.status[n]=4;let s=e.computeSlot(e,e.config.dynamicSlots[n]);return e.status[n]=2|s}function ee(e,t){return 1&t?e.config.staticValues[t>>1]:e.values[t>>1]}const te=F.define(),ne=F.define({combine:e=>e.some((e=>e)),static:!0}),ie=F.define({combine:e=>e.length?e[0]:void 0,static:!0}),se=F.define(),re=F.define(),oe=F.define(),ae=F.define({combine:e=>!!e.length&&e[0]});class le{constructor(e,t){this.type=e,this.value=t}static define(){return new he}}class he{of(e){return new le(this,e)}}class ce{constructor(e){this.map=e}of(e){return new ue(this,e)}}class ue{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return void 0===t?void 0:t==this.value?this:new ue(this.type,t)}is(e){return this.type==e}static define(e={}){return new ce(e.map||(e=>e))}static mapEffects(e,t){if(!e.length)return e;let n=[];for(let i of e){let e=i.map(t);e&&n.push(e)}return n}}ue.reconfigure=ue.define(),ue.appendConfig=ue.define();class fe{constructor(e,t,n,i,s,r){this.startState=e,this.changes=t,this.selection=n,this.effects=i,this.annotations=s,this.scrollIntoView=r,this._doc=null,this._state=null,n&&B(n,t.newLength),s.some((e=>e.type==fe.time))||(this.annotations=s.concat(fe.time.of(Date.now())))}static create(e,t,n,i,s,r){return new fe(e,t,n,i,s,r)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(fe.userEvent);return!(!t||!(t==e||t.length>e.length&&t.slice(0,e.length)==e&&"."==t[e.length]))}}function de(e,t){let n=[];for(let i=0,s=0;;){let r,o;if(i<e.length&&(s==t.length||t[s]>=e[i]))r=e[i++],o=e[i++];else{if(!(s<t.length))return n;r=t[s++],o=t[s++]}!n.length||n[n.length-1]<r?n.push(r,o):n[n.length-1]<o&&(n[n.length-1]=o)}}function pe(e,t,n){var i;let s,r,o;return n?(s=t.changes,r=_.empty(t.changes.length),o=e.changes.compose(t.changes)):(s=t.changes.map(e.changes),r=e.changes.mapDesc(t.changes,!0),o=e.changes.compose(s)),{changes:o,selection:t.selection?t.selection.map(r):null===(i=e.selection)||void 0===i?void 0:i.map(s),effects:ue.mapEffects(e.effects,s).concat(ue.mapEffects(t.effects,r)),annotations:e.annotations.length?e.annotations.concat(t.annotations):t.annotations,scrollIntoView:e.scrollIntoView||t.scrollIntoView}}function me(e,t,n){let i=t.selection,s=ye(t.annotations);return t.userEvent&&(s=s.concat(fe.userEvent.of(t.userEvent))),{changes:t.changes instanceof _?t.changes:_.of(t.changes||[],n,e.facet(ie)),selection:i&&(i instanceof L?i:L.single(i.anchor,i.head)),effects:ye(t.effects),annotations:s,scrollIntoView:!!t.scrollIntoView}}function ge(e,t,n){let i=me(e,t.length?t[0]:{},e.doc.length);t.length&&!1===t[0].filter&&(n=!1);for(let s=1;s<t.length;s++){!1===t[s].filter&&(n=!1);let r=!!t[s].sequential;i=pe(i,me(e,t[s],r?i.changes.newLength:e.doc.length),r)}let s=fe.create(e,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return function(e){let t=e.startState,n=t.facet(oe),i=e;for(let s=n.length-1;s>=0;s--){let r=n[s](e);r&&Object.keys(r).length&&(i=pe(i,me(t,r,e.changes.newLength),!0))}return i==e?e:fe.create(t,e.changes,e.selection,i.effects,i.annotations,i.scrollIntoView)}(n?function(e){let t=e.startState,n=!0;for(let i of t.facet(se)){let t=i(e);if(!1===t){n=!1;break}Array.isArray(t)&&(n=!0===n?t:de(n,t))}if(!0!==n){let i,s;if(!1===n)s=e.changes.invertedDesc,i=_.empty(t.doc.length);else{let t=e.changes.filter(n);i=t.changes,s=t.filtered.mapDesc(t.changes).invertedDesc}e=fe.create(t,i,e.selection&&e.selection.map(s),ue.mapEffects(e.effects,s),e.annotations,e.scrollIntoView)}let i=t.facet(re);for(let n=i.length-1;n>=0;n--){let s=i[n](e);e=s instanceof fe?s:Array.isArray(s)&&1==s.length&&s[0]instanceof fe?s[0]:ge(t,ye(s),!1)}return e}(s):s)}fe.time=le.define(),fe.userEvent=le.define(),fe.addToHistory=le.define(),fe.remote=le.define();const be=[];function ye(e){return null==e?be:Array.isArray(e)?e:[e]}var ve=function(e){return e[e.Word=0]="Word",e[e.Space=1]="Space",e[e.Other=2]="Other",e}(ve||(ve={}));const xe=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let we;try{we=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(e){}class ke{constructor(e,t,n,i,s,r){this.config=e,this.doc=t,this.selection=n,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=s,r&&(r._state=this);for(let e=0;e<this.config.dynamicSlots.length;e++)Z(this,e<<1);this.computeSlot=null}field(e,t=!0){let n=this.config.address[e.id];if(null!=n)return Z(this,n),ee(this,n);if(t)throw new RangeError("Field is not present in this state")}update(...e){return ge(this,e,!0)}applyTransaction(e){let t,n=this.config,{base:i,compartments:s}=n;for(let t of e.effects)t.is(Y.reconfigure)?(n&&(s=new Map,n.compartments.forEach(((e,t)=>s.set(t,e))),n=null),s.set(t.value.compartment,t.value.extension)):t.is(ue.reconfigure)?(n=null,i=t.value):t.is(ue.appendConfig)&&(n=null,i=ye(i).concat(t.value));n?t=e.startState.values.slice():(n=Q.resolve(i,s,this),t=new ke(n,this.doc,this.selection,n.dynamicSlots.map((()=>null)),((e,t)=>t.reconfigure(e,this)),null).values);let r=e.startState.facet(ne)?e.newSelection:e.newSelection.asSingle();new ke(n,e.newDoc,r,t,((t,n)=>n.update(t,e)),e)}replaceSelection(e){return"string"==typeof e&&(e=this.toText(e)),this.changeByRange((t=>({changes:{from:t.from,to:t.to,insert:e},range:L.cursor(t.from+e.length)})))}changeByRange(e){let t=this.selection,n=e(t.ranges[0]),i=this.changes(n.changes),s=[n.range],r=ye(n.effects);for(let n=1;n<t.ranges.length;n++){let o=e(t.ranges[n]),a=this.changes(o.changes),l=a.map(i);for(let e=0;e<n;e++)s[e]=s[e].map(l);let h=i.mapDesc(a,!0);s.push(o.range.map(h)),i=i.compose(l),r=ue.mapEffects(r,l).concat(ue.mapEffects(ye(o.effects),h))}return{changes:i,selection:L.create(s,t.mainIndex),effects:r}}changes(e=[]){return e instanceof _?e:_.of(e,this.doc.length,this.facet(ke.lineSeparator))}toText(e){return i.of(e.split(this.facet(ke.lineSeparator)||A))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return null==t?e.default:(Z(this,t),ee(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let n in e){let i=e[n];i instanceof G&&null!=this.config.address[i.id]&&(t[n]=i.spec.toJSON(this.field(e[n]),this))}return t}static fromJSON(e,t={},n){if(!e||"string"!=typeof e.doc)throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(n)for(let t in n)if(Object.prototype.hasOwnProperty.call(e,t)){let s=n[t],r=e[t];i.push(s.init((e=>s.spec.fromJSON(r,e))))}return ke.create({doc:e.doc,selection:L.fromJSON(e.selection),extensions:t.extensions?i.concat([t.extensions]):i})}static create(e={}){let t=Q.resolve(e.extensions||[],new Map),n=e.doc instanceof i?e.doc:i.of((e.doc||"").split(t.staticFacet(ke.lineSeparator)||A)),s=e.selection?e.selection instanceof L?e.selection:L.single(e.selection.anchor,e.selection.head):L.single(0);return B(s,n.length),t.staticFacet(ne)||(s=s.asSingle()),new ke(t,n,s,t.dynamicSlots.map((()=>null)),((e,t)=>t.create(e)),null)}get tabSize(){return this.facet(ke.tabSize)}get lineBreak(){return this.facet(ke.lineSeparator)||"\n"}get readOnly(){return this.facet(ae)}phrase(e,...t){for(let t of this.facet(ke.phrases))if(Object.prototype.hasOwnProperty.call(t,e)){e=t[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,((e,n)=>{if("$"==n)return"$";let i=+(n||1);return!i||i>t.length?e:t[i-1]}))),e}languageDataAt(e,t,n=-1){let i=[];for(let s of this.facet(te))for(let r of s(this,t,n))Object.prototype.hasOwnProperty.call(r,e)&&i.push(r[e]);return i}charCategorizer(e){return t=this.languageDataAt("wordChars",e).join(""),e=>{if(!/\S/.test(e))return ve.Space;if(function(e){if(we)return we.test(e);for(let t=0;t<e.length;t++){let n=e[t];if(/\w/.test(n)||n>"Â€"&&(n.toUpperCase()!=n.toLowerCase()||xe.test(n)))return!0}return!1}(e))return ve.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return ve.Word;return ve.Other};var t}wordAt(e){let{text:t,from:n,length:i}=this.doc.lineAt(e),s=this.charCategorizer(e),r=e-n,o=e-n;for(;r>0;){let e=b(t,r,!1);if(s(t.slice(e,r))!=ve.Word)break;r=e}for(;o<i;){let e=b(t,o);if(s(t.slice(o,e))!=ve.Word)break;o=e}return r==o?null:L.range(r+n,o+n)}}function Se(e,t,n={}){let i={};for(let t of e)for(let e of Object.keys(t)){let s=t[e],r=i[e];if(void 0===r)i[e]=s;else if(r===s||void 0===s);else{if(!Object.hasOwnProperty.call(n,e))throw new Error("Config merge conflict for field "+e);i[e]=n[e](r,s)}}for(let e in t)void 0===i[e]&&(i[e]=t[e]);return i}ke.allowMultipleSelections=ne,ke.tabSize=F.define({combine:e=>e.length?e[0]:4}),ke.lineSeparator=ie,ke.readOnly=ae,ke.phrases=F.define({compare(e,t){let n=Object.keys(e),i=Object.keys(t);return n.length==i.length&&n.every((n=>e[n]==t[n]))}}),ke.languageData=te,ke.changeFilter=se,ke.transactionFilter=re,ke.transactionExtender=oe,Y.reconfigure=ue.define();class Ce{eq(e){return this==e}range(e,t=e){return Ae.create(e,t,this)}}Ce.prototype.startSide=Ce.prototype.endSide=0,Ce.prototype.point=!1,Ce.prototype.mapMode=O.TrackDel;class Ae{constructor(e,t,n){this.from=e,this.to=t,this.value=n}static create(e,t,n){return new Ae(e,t,n)}}function Oe(e,t){return e.from-t.from||e.value.startSide-t.value.startSide}class Me{constructor(e,t,n,i){this.from=e,this.to=t,this.value=n,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,t,n,i=0){let s=n?this.to:this.from;for(let r=i,o=s.length;;){if(r==o)return r;let i=r+o>>1,a=s[i]-e||(n?this.value[i].endSide:this.value[i].startSide)-t;if(i==r)return a>=0?r:o;a>=0?o=i:r=i+1}}between(e,t,n,i){for(let s=this.findIndex(t,-1e9,!0),r=this.findIndex(n,1e9,!1,s);s<r;s++)if(!1===i(this.from[s]+e,this.to[s]+e,this.value[s]))return!1}map(e,t){let n=[],i=[],s=[],r=-1,o=-1;for(let a=0;a<this.value.length;a++){let l,h,c=this.value[a],u=this.from[a]+e,f=this.to[a]+e;if(u==f){let e=t.mapPos(u,c.startSide,c.mapMode);if(null==e)continue;if(l=h=e,c.startSide!=c.endSide&&(h=t.mapPos(u,c.endSide),h<l))continue}else if(l=t.mapPos(u,c.startSide),h=t.mapPos(f,c.endSide),l>h||l==h&&c.startSide>0&&c.endSide<=0)continue;(h-l||c.endSide-c.startSide)<0||(r<0&&(r=l),c.point&&(o=Math.max(o,h-l)),n.push(c),i.push(l-r),s.push(h-r))}return{mapped:n.length?new Me(i,s,n,o):null,pos:r}}}class _e{constructor(e,t,n,i){this.chunkPos=e,this.chunk=t,this.nextLayer=n,this.maxPoint=i}static create(e,t,n,i){return new _e(e,t,n,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:n=!1,filterFrom:i=0,filterTo:s=this.length}=e,r=e.filter;if(0==t.length&&!r)return this;if(n&&(t=t.slice().sort(Oe)),this.isEmpty)return t.length?_e.of(t):this;let o=new Ne(this,null,-1).goto(0),a=0,l=[],h=new Te;for(;o.value||a<t.length;)if(a<t.length&&(o.from-t[a].from||o.startSide-t[a].value.startSide)>=0){let e=t[a++];h.addInner(e.from,e.to,e.value)||l.push(e)}else 1==o.rangeIndex&&o.chunkIndex<this.chunk.length&&(a==t.length||this.chunkEnd(o.chunkIndex)<t[a].from)&&(!r||i>this.chunkEnd(o.chunkIndex)||s<this.chunkPos[o.chunkIndex])&&h.addChunk(this.chunkPos[o.chunkIndex],this.chunk[o.chunkIndex])?o.nextChunk():((!r||i>o.to||s<o.from||r(o.from,o.to,o.value))&&(h.addInner(o.from,o.to,o.value)||l.push(Ae.create(o.from,o.to,o.value))),o.next());return h.finishInner(this.nextLayer.isEmpty&&!l.length?_e.empty:this.nextLayer.update({add:l,filter:r,filterFrom:i,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],n=[],i=-1;for(let s=0;s<this.chunk.length;s++){let r=this.chunkPos[s],o=this.chunk[s],a=e.touchesRange(r,r+o.length);if(!1===a)i=Math.max(i,o.maxPoint),t.push(o),n.push(e.mapPos(r));else if(!0===a){let{mapped:s,pos:a}=o.map(r,e);s&&(i=Math.max(i,s.maxPoint),t.push(s),n.push(a))}}let s=this.nextLayer.map(e);return 0==t.length?s:new _e(n,t,s||_e.empty,i)}between(e,t,n){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let s=this.chunkPos[i],r=this.chunk[i];if(t>=s&&e<=s+r.length&&!1===r.between(s,e-s,t-s,n))return}this.nextLayer.between(e,t,n)}}iter(e=0){return De.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return De.from(e).goto(t)}static compare(e,t,n,i,s=-1){let r=e.filter((e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=s)),o=t.filter((e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=s)),a=Ee(r,o,n),l=new Re(r,a,s),h=new Re(o,a,s);n.iterGaps(((e,t,n)=>je(l,e,h,t,n,i))),n.empty&&0==n.length&&je(l,0,h,0,0,i)}static eq(e,t,n=0,i){null==i&&(i=999999999);let s=e.filter((e=>!e.isEmpty&&t.indexOf(e)<0)),r=t.filter((t=>!t.isEmpty&&e.indexOf(t)<0));if(s.length!=r.length)return!1;if(!s.length)return!0;let o=Ee(s,r),a=new Re(s,o,0).goto(n),l=new Re(r,o,0).goto(n);for(;;){if(a.to!=l.to||!Le(a.active,l.active)||a.point&&(!l.point||!a.point.eq(l.point)))return!1;if(a.to>i)return!0;a.next(),l.next()}}static spans(e,t,n,i,s=-1){let r=new Re(e,null,s).goto(t),o=t,a=r.openStart;for(;;){let e=Math.min(r.to,n);if(r.point){let n=r.activeForPoint(r.to),s=r.pointFrom<t?n.length+1:r.point.startSide<0?n.length:Math.min(n.length,a);i.point(o,e,r.point,n,s,r.pointRank),a=Math.min(r.openEnd(e),n.length)}else e>o&&(i.span(o,e,r.active,a),a=r.openEnd(e));if(r.to>n)return a+(r.point&&r.to>n?1:0);o=r.to,r.next()}}static of(e,t=!1){let n=new Te;for(let i of e instanceof Ae?[e]:t?function(e){if(e.length>1)for(let t=e[0],n=1;n<e.length;n++){let i=e[n];if(Oe(t,i)>0)return e.slice().sort(Oe);t=i}return e}(e):e)n.add(i.from,i.to,i.value);return n.finish()}static join(e){if(!e.length)return _e.empty;let t=e[e.length-1];for(let n=e.length-2;n>=0;n--)for(let i=e[n];i!=_e.empty;i=i.nextLayer)t=new _e(i.chunkPos,i.chunk,t,Math.max(i.maxPoint,t.maxPoint));return t}}_e.empty=new _e([],[],null,-1),_e.empty.nextLayer=_e.empty;class Te{finishChunk(e){this.chunks.push(new Me(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,n){this.addInner(e,t,n)||(this.nextLayer||(this.nextLayer=new Te)).add(e,t,n)}addInner(e,t,n){let i=e-this.lastTo||n.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return!(i<0||(250==this.from.length&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=n,this.lastFrom=e,this.lastTo=t,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),0))}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let n=t.value.length-1;return this.last=t.value[n],this.lastFrom=t.from[n]+e,this.lastTo=t.to[n]+e,!0}finish(){return this.finishInner(_e.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),0==this.chunks.length)return e;let t=_e.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function Ee(e,t,n){let i=new Map;for(let t of e)for(let e=0;e<t.chunk.length;e++)t.chunk[e].maxPoint<=0&&i.set(t.chunk[e],t.chunkPos[e]);let s=new Set;for(let e of t)for(let t=0;t<e.chunk.length;t++){let r=i.get(e.chunk[t]);null==r||(n?n.mapPos(r):r)!=e.chunkPos[t]||(null==n?void 0:n.touchesRange(r,r+e.chunk[t].length))||s.add(e.chunk[t])}return s}class Ne{constructor(e,t,n,i=0){this.layer=e,this.skip=t,this.minPoint=n,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,n){for(;this.chunkIndex<this.layer.chunk.length;){let t=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(t)||this.layer.chunkEnd(this.chunkIndex)<e||t.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!n||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;){if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],n=e+t.from[this.rangeIndex];if(this.from=n,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class De{constructor(e){this.heap=e}static from(e,t=null,n=-1){let i=[];for(let s=0;s<e.length;s++)for(let r=e[s];!r.isEmpty;r=r.nextLayer)r.maxPoint>=n&&i.push(new Ne(r,t,n,s));return 1==i.length?i[0]:new De(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let n of this.heap)n.goto(e,t);for(let e=this.heap.length>>1;e>=0;e--)Pe(this.heap,e);return this.next(),this}forward(e,t){for(let n of this.heap)n.forward(e,t);for(let e=this.heap.length>>1;e>=0;e--)Pe(this.heap,e);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(0==this.heap.length)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Pe(this.heap,0)}}}function Pe(e,t){for(let n=e[t];;){let i=1+(t<<1);if(i>=e.length)break;let s=e[i];if(i+1<e.length&&s.compare(e[i+1])>=0&&(s=e[i+1],i++),n.compare(s)<0)break;e[i]=n,e[t]=s,t=i}}class Re{constructor(e,t,n){this.minPoint=n,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=De.from(e,t,n)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){Be(this.active,e),Be(this.activeTo,e),Be(this.activeRank,e),this.minActive=Fe(this.active,this.activeTo)}addActive(e){let t=0,{value:n,to:i,rank:s}=this.cursor;for(;t<this.activeRank.length&&(s-this.activeRank[t]||i-this.activeTo[t])>0;)t++;Ie(this.active,t,n),Ie(this.activeTo,t,i),Ie(this.activeRank,t,s),e&&Ie(e,t,this.cursor.from),this.minActive=Fe(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let n=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),n&&Be(n,i)}else{if(!this.cursor.value){this.to=this.endSide=1e9;break}if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}{let e=this.cursor.value;if(e.point){if(!(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)){this.point=e,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=e.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}this.cursor.next()}else this.addActive(n),this.cursor.next()}}}if(n){this.openStart=0;for(let t=n.length-1;t>=0&&n[t]<e;t--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let n=this.active.length-1;n>=0&&!(this.activeRank[n]<this.pointRank);n--)(this.activeTo[n]>e||this.activeTo[n]==e&&this.active[n].endSide>=this.point.endSide)&&t.push(this.active[n]);return t.reverse()}openEnd(e){let t=0;for(let n=this.activeTo.length-1;n>=0&&this.activeTo[n]>e;n--)t++;return t}}function je(e,t,n,i,s,r){e.goto(t),n.goto(i);let o=i+s,a=i,l=i-t;for(;;){let t=e.to+l-n.to||e.endSide-n.endSide,i=t<0?e.to+l:n.to,s=Math.min(i,o);if(e.point||n.point?e.point&&n.point&&(e.point==n.point||e.point.eq(n.point))&&Le(e.activeForPoint(e.to),n.activeForPoint(n.to))||r.comparePoint(a,s,e.point,n.point):s>a&&!Le(e.active,n.active)&&r.compareRange(a,s,e.active,n.active),i>o)break;a=i,t<=0&&e.next(),t>=0&&n.next()}}function Le(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!=t[n]&&!e[n].eq(t[n]))return!1;return!0}function Be(e,t){for(let n=t,i=e.length-1;n<i;n++)e[n]=e[n+1];e.pop()}function Ie(e,t,n){for(let n=e.length-1;n>=t;n--)e[n+1]=e[n];e[t]=n}function Fe(e,t){let n=-1,i=1e9;for(let s=0;s<t.length;s++)(t[s]-i||e[s].endSide-e[n].endSide)<0&&(n=s,i=t[s]);return n}function $e(e,t,n=e.length){let i=0;for(let s=0;s<n;)9==e.charCodeAt(s)?(i+=t-i%t,s++):(i++,s=b(e,s));return i}function ze(e,t,n,i){for(let i=0,s=0;;){if(s>=t)return i;if(i==e.length)break;s+=9==e.charCodeAt(i)?n-s%n:1,i=b(e,i)}return!0===i?-1:e.length}},83173:(e,t,n)=>{"use strict";n.d(t,{NZ:()=>fe,OP:()=>Ce,Lz:()=>li,wJ:()=>Cs,Z9:()=>lt,xO:()=>ce,HJ:()=>os,VH:()=>Di,ld:()=>vs,Eg:()=>bs,cU:()=>Ts,dz:()=>Qi,N$:()=>Gi,wu:()=>Xs,Yq:()=>Js,w4:()=>gi,$K:()=>Vs,c_:()=>st,D4:()=>is,TS:()=>vi,BE:()=>Xi,S7:()=>Ss,DK:()=>gs,vX:()=>hs});for(var i=n(14830),s=n(98104),r={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},o={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},a="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),l="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),h=0;h<10;h++)r[48+h]=r[96+h]=String(h);for(h=1;h<=24;h++)r[h+111]="F"+h;for(h=65;h<=90;h++)r[h]=String.fromCharCode(h+32),o[h]=String.fromCharCode(h);for(var c in r)o.hasOwnProperty(c)||(o[c]=r[c]);function u(e){let t;return t=11==e.nodeType?e.getSelection?e:e.ownerDocument:e,t.getSelection()}function f(e,t){return!!t&&(e==t||e.contains(1!=t.nodeType?t.parentNode:t))}function d(e,t){if(!t.anchorNode)return!1;try{return f(e,t.anchorNode)}catch(e){return!1}}function p(e){return 3==e.nodeType?M(e,0,e.nodeValue.length).getClientRects():1==e.nodeType?e.getClientRects():[]}function m(e,t,n,i){return!!n&&(y(e,t,n,i,-1)||y(e,t,n,i,1))}function g(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t}function b(e){return 1==e.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(e.nodeName)}function y(e,t,n,i,s){for(;;){if(e==n&&t==i)return!0;if(t==(s<0?0:v(e))){if("DIV"==e.nodeName)return!1;let n=e.parentNode;if(!n||1!=n.nodeType)return!1;t=g(e)+(s<0?0:1),e=n}else{if(1!=e.nodeType)return!1;if(1==(e=e.childNodes[t+(s<0?-1:0)]).nodeType&&"false"==e.contentEditable)return!1;t=s<0?v(e):0}}}function v(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function x(e,t){let n=t?e.left:e.right;return{left:n,right:n,top:e.top,bottom:e.bottom}}function w(e){let t=e.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.innerWidth,top:0,bottom:e.innerHeight}}function k(e,t){let n=t.width/e.offsetWidth,i=t.height/e.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(t.width-e.offsetWidth)<1)&&(n=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(t.height-e.offsetHeight)<1)&&(i=1),{scaleX:n,scaleY:i}}class S{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:n}=e;this.set(t,Math.min(e.anchorOffset,t?v(t):0),n,Math.min(e.focusOffset,n?v(n):0))}set(e,t,n,i){this.anchorNode=e,this.anchorOffset=t,this.focusNode=n,this.focusOffset=i}}let C,A=null;function O(e){if(e.setActive)return e.setActive();if(A)return e.focus(A);let t=[];for(let n=e;n&&(t.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(e.focus(null==A?{get preventScroll(){return A={preventScroll:!0},!0}}:void 0),!A){A=!1;for(let e=0;e<t.length;){let n=t[e++],i=t[e++],s=t[e++];n.scrollTop!=i&&(n.scrollTop=i),n.scrollLeft!=s&&(n.scrollLeft=s)}}}function M(e,t,n=t){let i=C||(C=document.createRange());return i.setEnd(e,n),i.setStart(e,t),i}function _(e,t,n,i){let s={key:t,code:t,keyCode:n,which:n,cancelable:!0};i&&({altKey:s.altKey,ctrlKey:s.ctrlKey,shiftKey:s.shiftKey,metaKey:s.metaKey}=i);let r=new KeyboardEvent("keydown",s);r.synthetic=!0,e.dispatchEvent(r);let o=new KeyboardEvent("keyup",s);return o.synthetic=!0,e.dispatchEvent(o),r.defaultPrevented||o.defaultPrevented}function T(e){for(;e.attributes.length;)e.removeAttributeNode(e.attributes[0])}function E(e){return e.scrollTop>Math.max(1,e.scrollHeight-e.clientHeight-4)}function N(e,t){for(let n=e,i=t;;){if(3==n.nodeType&&i>0)return{node:n,offset:i};if(1==n.nodeType&&i>0){if("false"==n.contentEditable)return null;n=n.childNodes[i-1],i=v(n)}else{if(!n.parentNode||b(n))return null;i=g(n),n=n.parentNode}}}function D(e,t){for(let n=e,i=t;;){if(3==n.nodeType&&i<n.nodeValue.length)return{node:n,offset:i};if(1==n.nodeType&&i<n.childNodes.length){if("false"==n.contentEditable)return null;n=n.childNodes[i],i=0}else{if(!n.parentNode||b(n))return null;i=g(n)+1,n=n.parentNode}}}class P{constructor(e,t,n=!0){this.node=e,this.offset=t,this.precise=n}static before(e,t){return new P(e.parentNode,g(e),t)}static after(e,t){return new P(e.parentNode,g(e)+1,t)}}const R=[];class j{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let n of this.children){if(n==e)return t;t+=n.length+n.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(2&this.flags){let n,i=this.dom,s=null;for(let r of this.children){if(7&r.flags){if(!r.dom&&(n=s?s.nextSibling:i.firstChild)){let e=j.get(n);(!e||!e.parent&&e.canReuseDOM(r))&&r.reuseDOM(n)}r.sync(e,t),r.flags&=-8}if(n=s?s.nextSibling:i.firstChild,t&&!t.written&&t.node==i&&n!=r.dom&&(t.written=!0),r.dom.parentNode==i)for(;n&&n!=r.dom;)n=L(n);else i.insertBefore(r.dom,n);s=r.dom}for(n=s?s.nextSibling:i.firstChild,n&&t&&t.node==i&&(t.written=!0);n;)n=L(n)}else if(1&this.flags)for(let n of this.children)7&n.flags&&(n.sync(e,t),n.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let n;if(e==this.dom)n=this.dom.childNodes[t];else{let i=0==v(e)?0:0==t?-1:1;for(;;){let t=e.parentNode;if(t==this.dom)break;0==i&&t.firstChild!=t.lastChild&&(i=e==t.firstChild?-1:1),e=t}n=i<0?e:e.nextSibling}if(n==this.dom.firstChild)return 0;for(;n&&!j.get(n);)n=n.nextSibling;if(!n)return this.length;for(let e=0,t=0;;e++){let i=this.children[e];if(i.dom==n)return t;t+=i.length+i.breakAfter}}domBoundsAround(e,t,n=0){let i=-1,s=-1,r=-1,o=-1;for(let a=0,l=n,h=n;a<this.children.length;a++){let n=this.children[a],c=l+n.length;if(l<e&&c>t)return n.domBoundsAround(e,t,l);if(c>=e&&-1==i&&(i=a,s=l),l>t&&n.dom.parentNode==this.dom){r=a,o=h;break}h=c,l=c+n.breakAfter}return{from:s,to:o<0?n+this.length:o,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:r<this.children.length&&r>=0?this.children[r].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),1&t.flags)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,7&this.flags&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,n=R){this.markDirty();for(let i=e;i<t;i++){let e=this.children[i];e.parent==this&&n.indexOf(e)<0&&e.destroy()}this.children.splice(e,t-e,...n);for(let e=0;e<n.length;e++)n[e].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new B(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==e?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,n,i,s,r){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!(8&(this.flags|e.flags))}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}function L(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}j.prototype.breakAfter=0;class B{constructor(e,t,n){this.children=e,this.pos=t,this.i=n,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}}function I(e,t,n,i,s,r,o,a,l){let{children:h}=e,c=h.length?h[t]:null,u=r.length?r[r.length-1]:null,f=u?u.breakAfter:o;if(!(t==i&&c&&!o&&!f&&r.length<2&&c.merge(n,s,r.length?u:null,0==n,a,l))){if(i<h.length){let e=h[i];e&&(s<e.length||e.breakAfter&&(null==u?void 0:u.breakAfter))?(t==i&&(e=e.split(s),s=0),!f&&u&&e.merge(0,s,u,!0,0,l)?r[r.length-1]=e:((s||e.children.length&&!e.children[0].length)&&e.merge(0,s,null,!1,0,l),r.push(e))):(null==e?void 0:e.breakAfter)&&(u?u.breakAfter=1:o=1),i++}for(c&&(c.breakAfter=o,n>0&&(!o&&r.length&&c.merge(n,c.length,r[0],!1,a,0)?c.breakAfter=r.shift().breakAfter:(n<c.length||c.children.length&&0==c.children[c.children.length-1].length)&&c.merge(n,c.length,null,!1,a,0),t++));t<i&&r.length;)if(h[i-1].become(r[r.length-1]))i--,r.pop(),l=r.length?0:a;else{if(!h[t].become(r[0]))break;t++,r.shift(),a=r.length?0:l}!r.length&&t&&i<h.length&&!h[t-1].breakAfter&&h[i].merge(0,0,h[t-1],!1,a,l)&&t--,(t<i||r.length)&&e.replaceChildren(t,i,r)}}function F(e,t,n,i,s,r){let o=e.childCursor(),{i:a,off:l}=o.findPos(n,1),{i:h,off:c}=o.findPos(t,-1),u=t-n;for(let e of i)u+=e.length;e.length+=u,I(e,h,c,a,l,i,0,s,r)}let $="undefined"!=typeof navigator?navigator:{userAgent:"",vendor:"",platform:""},z="undefined"!=typeof document?document:{documentElement:{style:{}}};const H=/Edge\/(\d+)/.exec($.userAgent),q=/MSIE \d/.test($.userAgent),V=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec($.userAgent),W=!!(q||V||H),G=!W&&/gecko\/(\d+)/i.test($.userAgent),U=!W&&/Chrome\/(\d+)/.exec($.userAgent),K="webkitFontSmoothing"in z.documentElement.style,J=!W&&/Apple Computer/.test($.vendor),Y=J&&(/Mobile\/\w+/.test($.userAgent)||$.maxTouchPoints>2);var X={mac:Y||/Mac/.test($.platform),windows:/Win/.test($.platform),linux:/Linux|X11/.test($.platform),ie:W,ie_version:q?z.documentMode||6:V?+V[1]:H?+H[1]:0,gecko:G,gecko_version:G?+(/Firefox\/(\d+)/.exec($.userAgent)||[0,0])[1]:0,chrome:!!U,chrome_version:U?+U[1]:0,ios:Y,android:/Android\b/.test($.userAgent),webkit:K,safari:J,webkit_version:K?+(/\bAppleWebKit\/(\d+)/.exec($.userAgent)||[0,0])[1]:0,tabSize:null!=z.documentElement.style.tabSize?"tab-size":"-moz-tab-size"};class Q extends j{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){3==e.nodeType&&this.createDOM(e)}merge(e,t,n){return!(8&this.flags||n&&(!(n instanceof Q)||this.length-(t-e)+n.length>256||8&n.flags)||(this.text=this.text.slice(0,e)+(n?n.text:"")+this.text.slice(t),this.markDirty(),0))}split(e){let t=new Q(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=8&this.flags,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new P(this.dom,e)}domBoundsAround(e,t,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return function(e,t,n){let i=e.nodeValue.length;t>i&&(t=i);let s=t,r=t,o=0;0==t&&n<0||t==i&&n>=0?X.chrome||X.gecko||(t?(s--,o=1):r<i&&(r++,o=-1)):n<0?s--:r<i&&r++;let a=M(e,s,r).getClientRects();if(!a.length)return null;let l=a[(o?o<0:n>=0)?0:a.length-1];return X.safari&&!o&&0==l.width&&(l=Array.prototype.find.call(a,(e=>e.width))||l),o?x(l,o<0):l||null}(this.dom,e,t)}}class Z extends j{constructor(e,t=[],n=0){super(),this.mark=e,this.children=t,this.length=n;for(let e of t)e.setParent(this)}setAttrs(e){if(T(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!(8&(this.flags|e.flags))}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?4&this.flags&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,n,i,s,r){return!(n&&(!(n instanceof Z&&n.mark.eq(this.mark))||e&&s<=0||t<this.length&&r<=0)||(F(this,e,t,n?n.children.slice():[],s-1,r-1),this.markDirty(),0))}split(e){let t=[],n=0,i=-1,s=0;for(let r of this.children){let o=n+r.length;o>e&&t.push(n<e?r.split(e-n):r),i<0&&n>=e&&(i=s),n=o,s++}let r=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new Z(this.mark,t,r)}domAtPos(e){return ne(this,e)}coordsAt(e,t){return se(this,e,t)}}class ee extends j{static create(e,t,n){return new ee(e,t,n)}constructor(e,t,n){super(),this.widget=e,this.length=t,this.side=n,this.prevWidget=null}split(e){let t=ee.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){this.dom&&this.widget.updateDOM(this.dom,e)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,n,i,s,r){return!(n&&(!(n instanceof ee&&this.widget.compare(n.widget))||e>0&&s<=0||t<this.length&&r<=0)||(this.length=e+(n?n.length:0)+(this.length-t),0))}become(e){return e instanceof ee&&e.side==this.side&&this.widget.constructor==e.widget.constructor&&(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(0==this.length)return i.EY.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,n=t&&t.state.doc,s=this.posAtStart;return n?n.slice(s,s+this.length):i.EY.empty}domAtPos(e){return(this.length?0==e:this.side>0)?P.before(this.dom):P.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let n=this.widget.coordsAt(this.dom,e,t);if(n)return n;let i=this.dom.getClientRects(),s=null;if(!i.length)return null;let r=this.side?this.side<0:e>0;for(let t=r?i.length-1:0;s=i[t],!(e>0?0==t:t==i.length-1||s.top<s.bottom);t+=r?-1:1);return x(s,!r)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class te extends j{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof te&&e.side==this.side}split(){return new te(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?P.before(this.dom):P.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return i.EY.empty}get isHidden(){return!0}}function ne(e,t){let n=e.dom,{children:i}=e,s=0;for(let e=0;s<i.length;s++){let r=i[s],o=e+r.length;if(!(o==e&&r.getSide()<=0)){if(t>e&&t<o&&r.dom.parentNode==n)return r.domAtPos(t-e);if(t<=e)break;e=o}}for(let e=s;e>0;e--){let t=i[e-1];if(t.dom.parentNode==n)return t.domAtPos(t.length)}for(let e=s;e<i.length;e++){let t=i[e];if(t.dom.parentNode==n)return t.domAtPos(0)}return new P(n,0)}function ie(e,t,n){let i,{children:s}=e;n>0&&t instanceof Z&&s.length&&(i=s[s.length-1])instanceof Z&&i.mark.eq(t.mark)?ie(i,t.children[0],n-1):(s.push(t),t.setParent(e)),e.length+=t.length}function se(e,t,n){let i=null,s=-1,r=null,o=-1;!function e(t,a){for(let l=0,h=0;l<t.children.length&&h<=a;l++){let c=t.children[l],u=h+c.length;u>=a&&(c.children.length?e(c,a-h):(!r||r.isHidden&&n>0)&&(u>a||h==u&&c.getSide()>0)?(r=c,o=a-h):(h<a||h==u&&c.getSide()<0&&!c.isHidden)&&(i=c,s=a-h)),h=u}}(e,t);let a=(n<0?i:r)||i||r;return a?a.coordsAt(Math.max(0,a==i?s:o),n):function(e){let t=e.dom.lastChild;if(!t)return e.dom.getBoundingClientRect();let n=p(t);return n[n.length-1]||null}(e)}function re(e,t){for(let n in e)"class"==n&&t.class?t.class+=" "+e.class:"style"==n&&t.style?t.style+=";"+e.style:t[n]=e[n];return t}Q.prototype.children=ee.prototype.children=te.prototype.children=R;const oe=Object.create(null);function ae(e,t,n){if(e==t)return!0;e||(e=oe),t||(t=oe);let i=Object.keys(e),s=Object.keys(t);if(i.length-(n&&i.indexOf(n)>-1?1:0)!=s.length-(n&&s.indexOf(n)>-1?1:0))return!1;for(let r of i)if(r!=n&&(-1==s.indexOf(r)||e[r]!==t[r]))return!1;return!0}function le(e,t,n){let i=!1;if(t)for(let s in t)n&&s in n||(i=!0,"style"==s?e.style.cssText="":e.removeAttribute(s));if(n)for(let s in n)t&&t[s]==n[s]||(i=!0,"style"==s?e.style.cssText=n[s]:e.setAttribute(s,n[s]));return i}function he(e){let t=Object.create(null);for(let n=0;n<e.attributes.length;n++){let i=e.attributes[n];t[i.name]=i.value}return t}class ce{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,n){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var ue=function(e){return e[e.Text=0]="Text",e[e.WidgetBefore=1]="WidgetBefore",e[e.WidgetAfter=2]="WidgetAfter",e[e.WidgetRange=3]="WidgetRange",e}(ue||(ue={}));class fe extends i.FB{constructor(e,t,n,i){super(),this.startSide=e,this.endSide=t,this.widget=n,this.spec=i}get heightRelevant(){return!1}static mark(e){return new de(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),n=!!e.block;return t+=n&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new me(e,t,t,n,e.widget||null,!1)}static replace(e){let t,n,i=!!e.block;if(e.isBlockGap)t=-5e8,n=4e8;else{let{start:s,end:r}=ge(e,i);t=(s?i?-3e8:-1:5e8)-1,n=1+(r?i?2e8:1:-6e8)}return new me(e,t,n,i,e.widget||null,!0)}static line(e){return new pe(e)}static set(e,t=!1){return i.om.of(e,t)}hasHeight(){return!!this.widget&&this.widget.estimatedHeight>-1}}fe.none=i.om.empty;class de extends fe{constructor(e){let{start:t,end:n}=ge(e);super(t?-1:5e8,n?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,n;return this==e||e instanceof de&&this.tagName==e.tagName&&(this.class||(null===(t=this.attrs)||void 0===t?void 0:t.class))==(e.class||(null===(n=e.attrs)||void 0===n?void 0:n.class))&&ae(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}de.prototype.point=!1;class pe extends fe{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof pe&&this.spec.class==e.spec.class&&ae(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}pe.prototype.mapMode=i.iR.TrackBefore,pe.prototype.point=!0;class me extends fe{constructor(e,t,n,s,r,o){super(t,n,r,e),this.block=s,this.isReplace=o,this.mapMode=s?t<=0?i.iR.TrackBefore:i.iR.TrackAfter:i.iR.TrackDel}get type(){return this.startSide!=this.endSide?ue.WidgetRange:this.startSide<=0?ue.WidgetBefore:ue.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof me&&((t=this.widget)==(n=e.widget)||!!(t&&n&&t.compare(n)))&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide;var t,n}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}function ge(e,t=!1){let{inclusiveStart:n,inclusiveEnd:i}=e;return null==n&&(n=e.inclusive),null==i&&(i=e.inclusive),{start:null!=n?n:t,end:null!=i?i:t}}function be(e,t,n,i=0){let s=n.length-1;s>=0&&n[s]+i>=e?n[s]=Math.max(n[s],t):n.push(e,t)}me.prototype.point=!0;class ye extends j{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,n,i,s,r){if(n){if(!(n instanceof ye))return!1;this.dom||n.transferDOM(this)}return i&&this.setDeco(n?n.attrs:null),F(this,e,t,n?n.children.slice():[],s,r),!0}split(e){let t=new ye;if(t.breakAfter=this.breakAfter,0==this.length)return t;let{i:n,off:i}=this.childPos(e);i&&(t.append(this.children[n].split(i),0),this.children[n].merge(i,this.children[n].length,null,!1,0,0),n++);for(let e=n;e<this.children.length;e++)t.append(this.children[e],0);for(;n>0&&0==this.children[n-1].length;)this.children[--n].destroy();return this.children.length=n,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){ae(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){ie(this,e,t)}addLineDeco(e){let t=e.spec.attributes,n=e.spec.class;t&&(this.attrs=re(t,this.attrs||{})),n&&(this.attrs=re({class:n},this.attrs||{}))}domAtPos(e){return ne(this,e)}reuseDOM(e){"DIV"==e.nodeName&&(this.setDOM(e),this.flags|=6)}sync(e,t){var n;this.dom?4&this.flags&&(T(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(le(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let i=this.dom.lastChild;for(;i&&j.get(i)instanceof Z;)i=i.lastChild;if(!(i&&this.length&&("BR"==i.nodeName||0!=(null===(n=j.get(i))||void 0===n?void 0:n.isEditable)||X.ios&&this.children.some((e=>e instanceof Q))))){let e=document.createElement("BR");e.cmIgnore=!0,this.dom.appendChild(e)}}measureTextSize(){if(0==this.children.length||this.length>20)return null;let e,t=0;for(let n of this.children){if(!(n instanceof Q)||/[^ -~]/.test(n.text))return null;let i=p(n.dom);if(1!=i.length)return null;t+=i[0].width,e=i[0].height}return t?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:t/this.length,textHeight:e}:null}coordsAt(e,t){let n=se(this,e,t);if(!this.children.length&&n&&this.parent){let{heightOracle:e}=this.parent.view.viewState,t=n.bottom-n.top;if(Math.abs(t-e.lineHeight)<2&&e.textHeight<t){let i=(t-e.textHeight)/2;return{top:n.top+i,bottom:n.bottom-i,left:n.left,right:n.left}}}return n}become(e){return e instanceof ye&&0==this.children.length&&0==e.children.length&&ae(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let n=0,i=0;n<e.children.length;n++){let s=e.children[n],r=i+s.length;if(r>=t){if(s instanceof ye)return s;if(r>t)break}i=r+s.breakAfter}return null}}class ve extends j{constructor(e,t,n){super(),this.widget=e,this.length=t,this.deco=n,this.breakAfter=0,this.prevWidget=null}merge(e,t,n,i,s,r){return!(n&&(!(n instanceof ve&&this.widget.compare(n.widget))||e>0&&s<=0||t<this.length&&r<=0)||(this.length=e+(n?n.length:0)+(this.length-t),0))}domAtPos(e){return 0==e?P.before(this.dom):P.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let n=new ve(this.widget,t,this.deco);return n.breakAfter=this.breakAfter,n}get children(){return R}sync(e){this.dom&&this.widget.updateDOM(this.dom,e)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):i.EY.empty}domBoundsAround(){return null}become(e){return e instanceof ve&&e.widget.constructor==this.widget.constructor&&(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){return this.widget.coordsAt(this.dom,e,t)||(this.widget instanceof xe?null:x(this.dom.getBoundingClientRect(),this.length?0==e:t<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:n}=this.deco;return t!=n&&(e<0?t<0:n>0)}}class xe extends ce{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class we{constructor(e,t,n,i){this.doc=e,this.pos=t,this.end=n,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof ve&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new ye),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(ke(new te(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||e&&this.content.length&&this.content[this.content.length-1]instanceof ve||this.getLine()}buildText(e,t,n){for(;e>0;){if(this.textOff==this.text.length){let{value:t,lineBreak:n,done:i}=this.cursor.next(this.skip);if(this.skip=0,i)throw new Error("Ran out of text content when drawing inline views");if(n){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}this.text=t,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-n)),this.getLine().append(ke(new Q(this.text.slice(this.textOff,this.textOff+i)),t),n),this.atCursorPos=!0,this.textOff+=i,e-=i,n=0}}span(e,t,n,i){this.buildText(t-e,n,i),this.pos=t,this.openStart<0&&(this.openStart=i)}point(e,t,n,i,s,r){if(this.disallowBlockEffectsFor[r]&&n instanceof me){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let o=t-e;if(n instanceof me)if(n.block)n.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new ve(n.widget||Se.block,o,n));else{let r=ee.create(n.widget||Se.inline,o,o?0:n.startSide),a=this.atCursorPos&&!r.isEditable&&s<=i.length&&(e<t||n.startSide>0),l=!r.isEditable&&(e<t||s>i.length||n.startSide<=0),h=this.getLine();2!=this.pendingBuffer||a||r.isEditable||(this.pendingBuffer=0),this.flushBuffer(i),a&&(h.append(ke(new te(1),i),s),s=i.length+Math.max(0,s-i.length)),h.append(ke(r,i),s),this.atCursorPos=l,this.pendingBuffer=l?e<t||s>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);o&&(this.textOff+o<=this.text.length?this.textOff+=o:(this.skip+=o-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=s)}static build(e,t,n,s,r){let o=new we(e,t,n,r);return o.openEnd=i.om.spans(s,t,n,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function ke(e,t){for(let n of t)e=new Z(n,[e],e.length);return e}class Se extends ce{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Se.inline=new Se("span"),Se.block=new Se("div");var Ce=function(e){return e[e.LTR=0]="LTR",e[e.RTL=1]="RTL",e}(Ce||(Ce={}));const Ae=Ce.LTR,Oe=Ce.RTL;function Me(e){let t=[];for(let n=0;n<e.length;n++)t.push(1<<+e[n]);return t}const _e=Me("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),Te=Me("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Ee=Object.create(null),Ne=[];for(let e of["()","[]","{}"]){let t=e.charCodeAt(0),n=e.charCodeAt(1);Ee[t]=n,Ee[n]=-t}function De(e){return e<=247?_e[e]:1424<=e&&e<=1524?2:1536<=e&&e<=1785?Te[e-1536]:1774<=e&&e<=2220?4:8192<=e&&e<=8204?256:64336<=e&&e<=65023?4:1}const Pe=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Re{get dir(){return this.level%2?Oe:Ae}constructor(e,t,n){this.from=e,this.to=t,this.level=n}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,n,i){let s=-1;for(let r=0;r<e.length;r++){let o=e[r];if(o.from<=t&&o.to>=t){if(o.level==n)return r;(s<0||(0!=i?i<0?o.from<t:o.to>t:e[s].level>o.level))&&(s=r)}}if(s<0)throw new RangeError("Index out of range");return s}}function je(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++){let i=e[n],s=t[n];if(i.from!=s.from||i.to!=s.to||i.direction!=s.direction||!je(i.inner,s.inner))return!1}return!0}const Le=[];function Be(e,t,n,i,s,r,o){let a=i%2?2:1;if(i%2==s%2)for(let l=t,h=0;l<n;){let t=!0,c=!1;if(h==r.length||l<r[h].from){let e=Le[l];e!=a&&(t=!1,c=16==e)}let u=t||1!=a?null:[],f=t?i:i+1,d=l;e:for(;;)if(h<r.length&&d==r[h].from){if(c)break e;let p=r[h];if(!t)for(let e=p.to,t=h+1;;){if(e==n)break e;if(!(t<r.length&&r[t].from==e)){if(Le[e]==a)break e;break}e=r[t++].to}h++,u?u.push(p):(p.from>l&&o.push(new Re(l,p.from,f)),Ie(e,p.direction==Ae!=!(f%2)?i+1:i,s,p.inner,p.from,p.to,o),l=p.to),d=p.to}else{if(d==n||(t?Le[d]!=a:Le[d]==a))break;d++}u?Be(e,l,d,i+1,s,u,o):l<d&&o.push(new Re(l,d,f)),l=d}else for(let l=n,h=r.length;l>t;){let n=!0,c=!1;if(!h||l>r[h-1].to){let e=Le[l-1];e!=a&&(n=!1,c=16==e)}let u=n||1!=a?null:[],f=n?i:i+1,d=l;e:for(;;)if(h&&d==r[h-1].to){if(c)break e;let p=r[--h];if(!n)for(let e=p.from,n=h;;){if(e==t)break e;if(!n||r[n-1].to!=e){if(Le[e-1]==a)break e;break}e=r[--n].from}u?u.push(p):(p.to<l&&o.push(new Re(p.to,l,f)),Ie(e,p.direction==Ae!=!(f%2)?i+1:i,s,p.inner,p.from,p.to,o),l=p.from),d=p.from}else{if(d==t||(n?Le[d-1]!=a:Le[d-1]==a))break;d--}u?Be(e,d,l,i+1,s,u,o):d<l&&o.push(new Re(d,l,f)),l=d}}function Ie(e,t,n,i,s,r,o){let a=t%2?2:1;!function(e,t,n,i,s){for(let r=0;r<=i.length;r++){let o=r?i[r-1].to:t,a=r<i.length?i[r].from:n,l=r?256:s;for(let t=o,n=l,i=l;t<a;t++){let s=De(e.charCodeAt(t));512==s?s=n:8==s&&4==i&&(s=16),Le[t]=4==s?2:s,7&s&&(i=s),n=s}for(let e=o,t=l,i=l;e<a;e++){let s=Le[e];if(128==s)e<a-1&&t==Le[e+1]&&24&t?s=Le[e]=t:Le[e]=256;else if(64==s){let s=e+1;for(;s<a&&64==Le[s];)s++;let r=e&&8==t||s<n&&8==Le[s]?1==i?1:8:256;for(let t=e;t<s;t++)Le[t]=r;e=s-1}else 8==s&&1==i&&(Le[e]=1);t=s,7&s&&(i=s)}}}(e,s,r,i,a),function(e,t,n,i,s){let r=1==s?2:1;for(let o=0,a=0,l=0;o<=i.length;o++){let h=o?i[o-1].to:t,c=o<i.length?i[o].from:n;for(let t,n,i,o=h;o<c;o++)if(n=Ee[t=e.charCodeAt(o)])if(n<0){for(let e=a-3;e>=0;e-=3)if(Ne[e+1]==-n){let t=Ne[e+2],n=2&t?s:4&t?1&t?r:s:0;n&&(Le[o]=Le[Ne[e]]=n),a=e;break}}else{if(189==Ne.length)break;Ne[a++]=o,Ne[a++]=t,Ne[a++]=l}else if(2==(i=Le[o])||1==i){let e=i==s;l=e?0:1;for(let t=a-3;t>=0;t-=3){let n=Ne[t+2];if(2&n)break;if(e)Ne[t+2]|=2;else{if(4&n)break;Ne[t+2]|=4}}}}}(e,s,r,i,a),function(e,t,n,i){for(let s=0,r=i;s<=n.length;s++){let o=s?n[s-1].to:e,a=s<n.length?n[s].from:t;for(let l=o;l<a;){let o=Le[l];if(256==o){let o=l+1;for(;;)if(o==a){if(s==n.length)break;o=n[s++].to,a=s<n.length?n[s].from:t}else{if(256!=Le[o])break;o++}let h=1==r,c=h==(1==(o<t?Le[o]:i))?h?1:2:i;for(let t=o,i=s,r=i?n[i-1].to:e;t>l;)t==r&&(t=n[--i].from,r=i?n[i-1].to:e),Le[--t]=c;l=o}else r=o,l++}}}(s,r,i,a),Be(e,s,r,t,n,i,o)}function Fe(e){return[new Re(0,e,0)]}let $e="";function ze(e,t,n,s,r){var o;let a=s.head-e.from,l=Re.find(t,a,null!==(o=s.bidiLevel)&&void 0!==o?o:-1,s.assoc),h=t[l],c=h.side(r,n);if(a==c){let e=l+=r?1:-1;if(e<0||e>=t.length)return null;h=t[l=e],a=h.side(!r,n),c=h.side(r,n)}let u=(0,i.zK)(e.text,a,h.forward(r,n));(u<h.from||u>h.to)&&(u=c),$e=e.text.slice(Math.min(a,u),Math.max(a,u));let f=l==(r?t.length-1:0)?null:t[l+(r?1:-1)];return f&&u==c&&f.level+(r?0:1)<h.level?i.OF.cursor(f.side(!r,n)+e.from,f.forward(r,n)?1:-1,f.level):i.OF.cursor(u+e.from,h.forward(r,n)?-1:1,h.level)}function He(e,t,n){for(let i=t;i<n;i++){let t=De(e.charCodeAt(i));if(1==t)return Ae;if(2==t||4==t)return Oe}return Ae}const qe=i.sj.define(),Ve=i.sj.define(),We=i.sj.define(),Ge=i.sj.define(),Ue=i.sj.define(),Ke=i.sj.define(),Je=i.sj.define(),Ye=i.sj.define(),Xe=i.sj.define(),Qe=i.sj.define({combine:e=>e.some((e=>e))}),Ze=i.sj.define({combine:e=>e.some((e=>e))}),et=i.sj.define();class tt{constructor(e,t="nearest",n="nearest",i=5,s=5,r=!1){this.range=e,this.y=t,this.x=n,this.yMargin=i,this.xMargin=s,this.isSnapshot=r}map(e){return e.empty?this:new tt(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new tt(i.OF.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const nt=i.Pe.define({map:(e,t)=>e.map(t)}),it=i.Pe.define();function st(e,t,n){let i=e.facet(Ge);i.length?i[0](t):window.onerror?window.onerror(String(t),n,void 0,void 0,t):n?console.error(n+":",t):console.error(t)}const rt=i.sj.define({combine:e=>!e.length||e[0]});let ot=0;const at=i.sj.define();class lt{constructor(e,t,n,i,s){this.id=e,this.create=t,this.domEventHandlers=n,this.domEventObservers=i,this.extension=s(this)}static define(e,t){const{eventHandlers:n,eventObservers:i,provide:s,decorations:r}=t||{};return new lt(ot++,e,n,i,(e=>{let t=[at.of(e)];return r&&t.push(ft.of((t=>{let n=t.plugin(e);return n?r(n):fe.none}))),s&&t.push(s(e)),t}))}static fromClass(e,t){return lt.define((t=>new e(t)),t)}}class ht{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let e=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(e)}catch(t){if(st(e.state,t,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(e){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){st(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(null===(t=this.value)||void 0===t?void 0:t.destroy)try{this.value.destroy()}catch(t){st(e.state,t,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const ct=i.sj.define(),ut=i.sj.define(),ft=i.sj.define(),dt=i.sj.define(),pt=i.sj.define(),mt=i.sj.define();function gt(e,t){let n=e.state.facet(mt);if(!n.length)return n;let s=n.map((t=>t instanceof Function?t(e):t)),r=[];return i.om.spans(s,t.from,t.to,{point(){},span(e,n,i,s){let o=e-t.from,a=n-t.from,l=r;for(let e=i.length-1;e>=0;e--,s--){let n,r=i[e].spec.bidiIsolate;if(null==r&&(r=He(t.text,o,a)),s>0&&l.length&&(n=l[l.length-1]).to==o&&n.direction==r)n.to=a,l=n.inner;else{let e={from:o,to:a,direction:r,inner:[]};l.push(e),l=e.inner}}}}),r}const bt=i.sj.define();function yt(e){let t=0,n=0,i=0,s=0;for(let r of e.state.facet(bt)){let o=r(e);o&&(null!=o.left&&(t=Math.max(t,o.left)),null!=o.right&&(n=Math.max(n,o.right)),null!=o.top&&(i=Math.max(i,o.top)),null!=o.bottom&&(s=Math.max(s,o.bottom)))}return{left:t,right:n,top:i,bottom:s}}const vt=i.sj.define();class xt{constructor(e,t,n,i){this.fromA=e,this.toA=t,this.fromB=n,this.toB=i}join(e){return new xt(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,n=this;for(;t>0;t--){let i=e[t-1];if(!(i.fromA>n.toA)){if(i.toA<n.fromA)break;n=n.join(i),e.splice(t-1,1)}}return e.splice(t,0,n),e}static extendWithRanges(e,t){if(0==t.length)return e;let n=[];for(let i=0,s=0,r=0,o=0;;i++){let a=i==e.length?null:e[i],l=r-o,h=a?a.fromB:1e9;for(;s<t.length&&t[s]<h;){let e=t[s],i=t[s+1],r=Math.max(o,e),a=Math.min(h,i);if(r<=a&&new xt(r+l,a+l,r,a).addToSet(n),i>h)break;s+=2}if(!a)return n;new xt(a.fromA,a.toA,a.fromB,a.toB).addToSet(n),r=a.toA,o=a.toB}}}class wt{constructor(e,t,n){this.view=e,this.state=t,this.transactions=n,this.flags=0,this.startState=e.state,this.changes=i.VR.empty(this.startState.doc.length);for(let e of n)this.changes=this.changes.compose(e.changes);let s=[];this.changes.iterChangedRanges(((e,t,n,i)=>s.push(new xt(e,t,n,i)))),this.changedRanges=s}static create(e,t,n){return new wt(e,t,n)}get viewportChanged(){return(4&this.flags)>0}get heightChanged(){return(2&this.flags)>0}get geometryChanged(){return this.docChanged||(10&this.flags)>0}get focusChanged(){return(1&this.flags)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some((e=>e.selection))}get empty(){return 0==this.flags&&0==this.transactions.length}}class kt extends j{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=fe.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new ye],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new xt(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let n=e.changedRanges;this.minWidth>0&&n.length&&(n.every((({fromA:e,toA:t})=>t<this.minWidthFrom||e>this.minWidthTo))?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let s=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&((null===(t=this.domChanged)||void 0===t?void 0:t.newSel)?s=this.domChanged.newSel.head:function(e,t){let n=!1;return t&&e.iterChangedRanges(((e,i)=>{e<t.to&&i>t.from&&(n=!0)})),n}(e.changes,this.hasComposition)||e.selectionSet||(s=e.state.selection.main.head));let r=s>-1?function(e,t,n){let i=St(e,n);if(!i)return null;let{node:s,from:r,to:o}=i,a=s.nodeValue;if(/[\n\r]/.test(a))return null;if(e.state.doc.sliceString(i.from,i.to)!=a)return null;let l=t.invertedDesc,h=new xt(l.mapPos(r),l.mapPos(o),r,o),c=[];for(let t=s.parentNode;;t=t.parentNode){let n=j.get(t);if(n instanceof Z)c.push({node:t,deco:n.mark});else{if(n instanceof ye||"DIV"==t.nodeName&&t.parentNode==e.contentDOM)return{range:h,text:s,marks:c,line:t};if(t==e.contentDOM)return null;c.push({node:t,deco:new de({inclusive:!0,attributes:he(t),tagName:t.tagName.toLowerCase()})})}}}(this.view,e.changes,s):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:t,to:i}=this.hasComposition;n=new xt(t,i,e.changes.mapPos(t,-1),e.changes.mapPos(i,1)).addToSet(n.slice())}this.hasComposition=r?{from:r.range.fromB,to:r.range.toB}:null,(X.ie||X.chrome)&&!r&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=function(e,t,n){let s=new Ct;return i.om.compare(e,t,n,s),s.changes}(this.decorations,this.updateDeco(),e.changes);return n=xt.extendWithRanges(n,o),!!(7&this.flags||0!=n.length)&&(this.updateInner(n,e.startState.doc.length,r),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,n){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,n);let{observer:i}=this.view;i.ignore((()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let e=X.chrome||X.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,e),this.flags&=-8,e&&(e.written||i.selectionRange.focusNode!=e.node)&&(this.forceSelection=!0),this.dom.style.height=""})),this.markedForComposition.forEach((e=>e.flags&=-9));let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let e of this.children)e instanceof ve&&e.widget instanceof xe&&s.push(e.dom);i.updateGaps(s)}updateChildren(e,t,n){let i=n?n.range.addToSet(e.slice()):e,s=this.childCursor(t);for(let e=i.length-1;;e--){let t=e>=0?i[e]:null;if(!t)break;let r,o,a,l,{fromA:h,toA:c,fromB:u,toB:f}=t;if(n&&n.range.fromB<f&&n.range.toB>u){let e=we.build(this.view.state.doc,u,n.range.fromB,this.decorations,this.dynamicDecorationMap),t=we.build(this.view.state.doc,n.range.toB,f,this.decorations,this.dynamicDecorationMap);o=e.breakAtStart,a=e.openStart,l=t.openEnd;let i=this.compositionView(n);t.breakAtStart?i.breakAfter=1:t.content.length&&i.merge(i.length,i.length,t.content[0],!1,t.openStart,0)&&(i.breakAfter=t.content[0].breakAfter,t.content.shift()),e.content.length&&i.merge(0,0,e.content[e.content.length-1],!0,0,e.openEnd)&&e.content.pop(),r=e.content.concat(i).concat(t.content)}else({content:r,breakAtStart:o,openStart:a,openEnd:l}=we.build(this.view.state.doc,u,f,this.decorations,this.dynamicDecorationMap));let{i:d,off:p}=s.findPos(c,1),{i:m,off:g}=s.findPos(h,-1);I(this,m,g,d,p,r,o,a,l)}n&&this.fixCompositionDOM(n)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let e of t.effects)e.is(it)&&(this.editContextFormatting=e.value)}compositionView(e){let t=new Q(e.text.nodeValue);t.flags|=8;for(let{deco:n}of e.marks)t=new Z(n,[t],t.length);let n=new ye;return n.append(t,0),n}fixCompositionDOM(e){let t=(e,t)=>{t.flags|=8|(t.children.some((e=>7&e.flags))?1:0),this.markedForComposition.add(t);let n=j.get(e);n&&n!=t&&(n.dom=null),t.setDOM(e)},n=this.childPos(e.range.fromB,1),i=this.children[n.i];t(e.line,i);for(let s=e.marks.length-1;s>=-1;s--)n=i.childPos(n.off,1),i=i.children[n.i],t(s>=0?e.marks[s].node:e.text,i)}updateSelection(e=!1,t=!1){!e&&this.view.observer.selectionRange.focusNode||this.view.observer.readSelectionRange();let n=this.view.root.activeElement,i=n==this.dom,s=!i&&d(this.dom,this.view.observer.selectionRange)&&!(n&&this.dom.contains(n));if(!(i||t||s))return;let r=this.forceSelection;this.forceSelection=!1;let o=this.view.state.selection.main,a=this.moveToLine(this.domAtPos(o.anchor)),l=o.empty?a:this.moveToLine(this.domAtPos(o.head));if(X.gecko&&o.empty&&!this.hasComposition&&1==(h=a).node.nodeType&&h.node.firstChild&&(0==h.offset||"false"==h.node.childNodes[h.offset-1].contentEditable)&&(h.offset==h.node.childNodes.length||"false"==h.node.childNodes[h.offset].contentEditable)){let e=document.createTextNode("");this.view.observer.ignore((()=>a.node.insertBefore(e,a.node.childNodes[a.offset]||null))),a=l=new P(e,0),r=!0}var h;let c=this.view.observer.selectionRange;!r&&c.focusNode&&(m(a.node,a.offset,c.anchorNode,c.anchorOffset)&&m(l.node,l.offset,c.focusNode,c.focusOffset)||this.suppressWidgetCursorChange(c,o))||(this.view.observer.ignore((()=>{X.android&&X.chrome&&this.dom.contains(c.focusNode)&&function(e,t){for(let n=e;n&&n!=t;n=n.assignedSlot||n.parentNode)if(1==n.nodeType&&"false"==n.contentEditable)return!0;return!1}(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let e=u(this.view.root);if(e)if(o.empty){if(X.gecko){let e=(t=a.node,i=a.offset,1!=t.nodeType?0:(i&&"false"==t.childNodes[i-1].contentEditable?1:0)|(i<t.childNodes.length&&"false"==t.childNodes[i].contentEditable?2:0));if(e&&3!=e){let t=(1==e?N:D)(a.node,a.offset);t&&(a=new P(t.node,t.offset))}}e.collapse(a.node,a.offset),null!=o.bidiLevel&&void 0!==e.caretBidiLevel&&(e.caretBidiLevel=o.bidiLevel)}else if(e.extend){e.collapse(a.node,a.offset);try{e.extend(l.node,l.offset)}catch(e){}}else{let t=document.createRange();o.anchor>o.head&&([a,l]=[l,a]),t.setEnd(l.node,l.offset),t.setStart(a.node,a.offset),e.removeAllRanges(),e.addRange(t)}var t,i;s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),n&&n.focus())})),this.view.observer.setSelectionRange(a,l)),this.impreciseAnchor=a.precise?null:new P(c.anchorNode,c.anchorOffset),this.impreciseHead=l.precise?null:new P(c.focusNode,c.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&m(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,n=u(e.root),{anchorNode:i,anchorOffset:s}=e.observer.selectionRange;if(!(n&&t.empty&&t.assoc&&n.modify))return;let r=ye.find(this,t.head);if(!r)return;let o=r.posAtStart;if(t.head==o||t.head==o+r.length)return;let a=this.coordsAt(t.head,-1),l=this.coordsAt(t.head,1);if(!a||!l||a.bottom>l.top)return;let h=this.domAtPos(t.head+t.assoc);n.collapse(h.node,h.offset),n.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let c=e.observer.selectionRange;e.docView.posFromDOM(c.anchorNode,c.anchorOffset)!=t.from&&n.collapse(i,s)}moveToLine(e){let t,n=this.dom;if(e.node!=n)return e;for(let i=e.offset;!t&&i<n.childNodes.length;i++){let e=j.get(n.childNodes[i]);e instanceof ye&&(t=e.domAtPos(0))}for(let i=e.offset-1;!t&&i>=0;i--){let e=j.get(n.childNodes[i]);e instanceof ye&&(t=e.domAtPos(e.length))}return t?new P(t.node,t.offset,!0):e}nearest(e){for(let t=e;t;){let e=j.get(t);if(e&&e.rootView==this)return e;t=t.parentNode}return null}posFromDOM(e,t){let n=this.nearest(e);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(e,t)+n.posAtStart}domAtPos(e){let{i:t,off:n}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let e=this.children[t];if(n<e.length||e instanceof ye)break;t++,n=0}return this.children[t].domAtPos(n)}coordsAt(e,t){let n=null,i=0;for(let s=this.length,r=this.children.length-1;r>=0;r--){let o=this.children[r],a=s-o.breakAfter,l=a-o.length;if(a<e)break;if(l<=e&&(l<e||o.covers(-1))&&(a>e||o.covers(1))&&(!n||o instanceof ye&&!(n instanceof ye&&t>=0)))n=o,i=l;else if(n&&l==e&&a==e&&o instanceof ve&&Math.abs(t)<2){if(o.deco.startSide<0)break;r&&(n=null)}s=l}return n?n.coordsAt(e-i,t):null}coordsForChar(e){let{i:t,off:n}=this.childPos(e,1),s=this.children[t];if(!(s instanceof ye))return null;for(;s.children.length;){let{i:e,off:t}=s.childPos(n,1);for(;;e++){if(e==s.children.length)return null;if((s=s.children[e]).length)break}n=t}if(!(s instanceof Q))return null;let r=(0,i.zK)(s.text,n);if(r==n)return null;let o=M(s.dom,n,r).getClientRects();for(let e=0;e<o.length;e++){let t=o[e];if(e==o.length-1||t.top<t.bottom&&t.left<t.right)return t}return null}measureVisibleLineHeights(e){let t=[],{from:n,to:i}=e,s=this.view.contentDOM.clientWidth,r=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,o=-1,a=this.view.textDirection==Ce.LTR;for(let e=0,l=0;l<this.children.length;l++){let h=this.children[l],c=e+h.length;if(c>i)break;if(e>=n){let n=h.dom.getBoundingClientRect();if(t.push(n.height),r){let t=h.dom.lastChild,i=t?p(t):[];if(i.length){let t=i[i.length-1],r=a?t.right-n.left:n.right-t.left;r>o&&(o=r,this.minWidth=s,this.minWidthFrom=e,this.minWidthTo=c)}}}e=c+h.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return"rtl"==getComputedStyle(this.children[t].dom).direction?Ce.RTL:Ce.LTR}measureTextSize(){for(let e of this.children)if(e instanceof ye){let t=e.measureTextSize();if(t)return t}let e,t,n,i=document.createElement("div");return i.className="cm-line",i.style.width="99999px",i.style.position="absolute",i.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore((()=>{this.dom.appendChild(i);let s=p(i.firstChild)[0];e=i.getBoundingClientRect().height,t=s?s.width/27:7,n=s?s.height:e,i.remove()})),{lineHeight:e,charWidth:t,textHeight:n}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new B(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let n=0,i=0;;i++){let s=i==t.viewports.length?null:t.viewports[i],r=s?s.from-1:this.length;if(r>n){let i=(t.lineBlockAt(r).bottom-t.lineBlockAt(n).top)/this.view.scaleY;e.push(fe.replace({widget:new xe(i),block:!0,inclusive:!0,isBlockGap:!0}).range(n,r))}if(!s)break;n=s.to+1}return fe.set(e)}updateDeco(){let e=1,t=this.view.state.facet(ft).map((t=>(this.dynamicDecorationMap[e++]="function"==typeof t)?t(this.view):t)),n=!1,s=this.view.state.facet(dt).map(((e,t)=>{let i="function"==typeof e;return i&&(n=!0),i?e(this.view):e}));for(s.length&&(this.dynamicDecorationMap[e++]=n,t.push(i.om.join(s))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let t=this.view.viewState.lineBlockAt(e.range.head);return this.view.scrollDOM.scrollTop=t.top-e.yMargin,void(this.view.scrollDOM.scrollLeft=e.xMargin)}for(let t of this.view.state.facet(et))try{if(t(this.view,e.range,e))return!0}catch(e){st(this.view.state,e,"scroll handler")}let t,{range:n}=e,i=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1);if(!i)return;!n.empty&&(t=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(i={left:Math.min(i.left,t.left),top:Math.min(i.top,t.top),right:Math.max(i.right,t.right),bottom:Math.max(i.bottom,t.bottom)});let s=yt(this.view),r={left:i.left-s.left,top:i.top-s.top,right:i.right+s.right,bottom:i.bottom+s.bottom},{offsetWidth:o,offsetHeight:a}=this.view.scrollDOM;!function(e,t,n,i,s,r,o,a){let l=e.ownerDocument,h=l.defaultView||window;for(let c=e,u=!1;c&&!u;)if(1==c.nodeType){let e,f=c==l.body,d=1,p=1;if(f)e=w(h);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(u=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let t=c.getBoundingClientRect();({scaleX:d,scaleY:p}=k(c,t)),e={left:t.left,right:t.left+c.clientWidth*d,top:t.top,bottom:t.top+c.clientHeight*p}}let m=0,g=0;if("nearest"==s)t.top<e.top?(g=-(e.top-t.top+o),n>0&&t.bottom>e.bottom+g&&(g=t.bottom-e.bottom+g+o)):t.bottom>e.bottom&&(g=t.bottom-e.bottom+o,n<0&&t.top-g<e.top&&(g=-(e.top+g-t.top+o)));else{let i=t.bottom-t.top,r=e.bottom-e.top;g=("center"==s&&i<=r?t.top+i/2-r/2:"start"==s||"center"==s&&n<0?t.top-o:t.bottom-r+o)-e.top}if("nearest"==i?t.left<e.left?(m=-(e.left-t.left+r),n>0&&t.right>e.right+m&&(m=t.right-e.right+m+r)):t.right>e.right&&(m=t.right-e.right+r,n<0&&t.left<e.left+m&&(m=-(e.left+m-t.left+r))):m=("center"==i?t.left+(t.right-t.left)/2-(e.right-e.left)/2:"start"==i==a?t.left-r:t.right-(e.right-e.left)+r)-e.left,m||g)if(f)h.scrollBy(m,g);else{let e=0,n=0;if(g){let e=c.scrollTop;c.scrollTop+=g/p,n=(c.scrollTop-e)*p}if(m){let t=c.scrollLeft;c.scrollLeft+=m/d,e=(c.scrollLeft-t)*d}t={left:t.left-e,top:t.top-n,right:t.right-e,bottom:t.bottom-n},e&&Math.abs(e-m)<1&&(i="nearest"),n&&Math.abs(n-g)<1&&(s="nearest")}if(f)break;c=c.assignedSlot||c.parentNode}else{if(11!=c.nodeType)break;c=c.host}}(this.view.scrollDOM,r,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,o),-o),Math.max(Math.min(e.yMargin,a),-a),this.view.textDirection==Ce.LTR)}}function St(e,t){let n=e.observer.selectionRange;if(!n.focusNode)return null;let i=N(n.focusNode,n.focusOffset),s=D(n.focusNode,n.focusOffset),r=i||s;if(s&&i&&s.node!=i.node){let t=j.get(s.node);if(!t||t instanceof Q&&t.text!=s.node.nodeValue)r=s;else if(e.docView.lastCompositionAfterCursor){let e=j.get(i.node);!e||e instanceof Q&&e.text!=i.node.nodeValue||(r=s)}}if(e.docView.lastCompositionAfterCursor=r!=i,!r)return null;let o=t-r.offset;return{from:o,to:o+r.node.nodeValue.length,node:r.node}}let Ct=class{constructor(){this.changes=[]}compareRange(e,t){be(e,t,this.changes)}comparePoint(e,t){be(e,t,this.changes)}};function At(e,t){return t.left>e?t.left-e:Math.max(0,e-t.right)}function Ot(e,t){return t.top>e?t.top-e:Math.max(0,e-t.bottom)}function Mt(e,t){return e.top<t.bottom-1&&e.bottom>t.top+1}function _t(e,t){return t<e.top?{top:t,left:e.left,right:e.right,bottom:e.bottom}:e}function Tt(e,t){return t>e.bottom?{top:e.top,left:e.left,right:e.right,bottom:t}:e}function Et(e,t,n){let i,s,r,o,a,l,h,c,u=!1;for(let f=e.firstChild;f;f=f.nextSibling){let e=p(f);for(let d=0;d<e.length;d++){let p=e[d];s&&Mt(s,p)&&(p=_t(Tt(p,s.bottom),s.top));let m=At(t,p),g=Ot(n,p);if(0==m&&0==g)return 3==f.nodeType?Nt(f,t,n):Et(f,t,n);if(!i||o>g||o==g&&r>m){i=f,s=p,r=m,o=g;let a=g?n<p.top?-1:1:m?t<p.left?-1:1:0;u=!a||(a>0?d<e.length-1:d>0)}0==m?n>p.bottom&&(!h||h.bottom<p.bottom)?(a=f,h=p):n<p.top&&(!c||c.top>p.top)&&(l=f,c=p):h&&Mt(h,p)?h=Tt(h,p.bottom):c&&Mt(c,p)&&(c=_t(c,p.top))}}if(h&&h.bottom>=n?(i=a,s=h):c&&c.top<=n&&(i=l,s=c),!i)return{node:e,offset:0};let f=Math.max(s.left,Math.min(s.right,t));return 3==i.nodeType?Nt(i,f,n):u&&"false"!=i.contentEditable?Et(i,f,n):{node:e,offset:Array.prototype.indexOf.call(e.childNodes,i)+(t>=(s.left+s.right)/2?1:0)}}function Nt(e,t,n){let i=e.nodeValue.length,s=-1,r=1e9,o=0;for(let a=0;a<i;a++){let i=M(e,a,a+1).getClientRects();for(let l=0;l<i.length;l++){let h=i[l];if(h.top==h.bottom)continue;o||(o=t-h.left);let c=(h.top>n?h.top-n:n-h.bottom)-1;if(h.left-1<=t&&h.right+1>=t&&c<r){let n=t>=(h.left+h.right)/2,i=n;if((X.chrome||X.gecko)&&M(e,a).getBoundingClientRect().left==h.right&&(i=!n),c<=0)return{node:e,offset:a+(i?1:0)};s=a+(i?1:0),r=c}}}return{node:e,offset:s>-1?s:o>0?e.nodeValue.length:0}}function Dt(e,t,n,i=-1){var s,r;let o,a=e.contentDOM.getBoundingClientRect(),l=a.top+e.viewState.paddingTop,{docHeight:h}=e.viewState,{x:c,y:u}=t,f=u-l;if(f<0)return 0;if(f>h)return e.state.doc.length;for(let t=e.viewState.heightOracle.textHeight/2,s=!1;o=e.elementAtHeight(f),o.type!=ue.Text;)for(;f=i>0?o.bottom+t:o.top-t,!(f>=0&&f<=h);){if(s)return n?null:0;s=!0,i=-i}u=l+f;let d=o.from;if(d<e.viewport.from)return 0==e.viewport.from?0:n?null:Pt(e,a,o,c,u);if(d>e.viewport.to)return e.viewport.to==e.state.doc.length?e.state.doc.length:n?null:Pt(e,a,o,c,u);let p=e.dom.ownerDocument,m=e.root.elementFromPoint?e.root:p,g=m.elementFromPoint(c,u);g&&!e.contentDOM.contains(g)&&(g=null),g||(c=Math.max(a.left+1,Math.min(a.right-1,c)),g=m.elementFromPoint(c,u),g&&!e.contentDOM.contains(g)&&(g=null));let b,y=-1;if(g&&0!=(null===(s=e.docView.nearest(g))||void 0===s?void 0:s.isEditable))if(p.caretPositionFromPoint){let e=p.caretPositionFromPoint(c,u);e&&({offsetNode:b,offset:y}=e)}else if(p.caretRangeFromPoint){let t=p.caretRangeFromPoint(c,u);t&&(({startContainer:b,startOffset:y}=t),(!e.contentDOM.contains(b)||X.safari&&function(e,t,n){let i;if(3!=e.nodeType||t!=(i=e.nodeValue.length))return!1;for(let t=e.nextSibling;t;t=t.nextSibling)if(1!=t.nodeType||"BR"!=t.nodeName)return!1;return M(e,i-1,i).getBoundingClientRect().left>n}(b,y,c)||X.chrome&&function(e,t,n){if(0!=t)return!1;for(let t=e;;){let e=t.parentNode;if(!e||1!=e.nodeType||e.firstChild!=t)return!1;if(e.classList.contains("cm-line"))break;t=e}return n-(1==e.nodeType?e.getBoundingClientRect():M(e,0,Math.max(e.nodeValue.length,1)).getBoundingClientRect()).left>5}(b,y,c))&&(b=void 0))}if(!b||!e.docView.dom.contains(b)){let t=ye.find(e.docView,d);if(!t)return f>o.top+o.height/2?o.to:o.from;({node:b,offset:y}=Et(t.dom,c,u))}let v=e.docView.nearest(b);if(!v)return null;if(v.isWidget&&1==(null===(r=v.dom)||void 0===r?void 0:r.nodeType)){let e=v.dom.getBoundingClientRect();return t.y<e.top||t.y<=e.bottom&&t.x<=(e.left+e.right)/2?v.posAtStart:v.posAtEnd}return v.localPosFromDOM(b,y)+v.posAtStart}function Pt(e,t,n,s,r){let o=Math.round((s-t.left)*e.defaultCharacterWidth);if(e.lineWrapping&&n.height>1.5*e.defaultLineHeight){let t=e.viewState.heightOracle.textHeight;o+=Math.floor((r-n.top-.5*(e.defaultLineHeight-t))/t)*e.viewState.heightOracle.lineLength}let a=e.state.sliceDoc(n.from,n.to);return n.from+(0,i.kn)(a,o,e.state.tabSize)}function Rt(e,t){let n=e.lineBlockAt(t);if(Array.isArray(n.type))for(let e of n.type)if(e.to>t||e.to==t&&(e.to==n.to||e.type==ue.Text))return e;return n}function jt(e,t,n,i){let s=e.state.doc.lineAt(t.head),r=e.bidiSpans(s),o=e.textDirectionAt(s.from);for(let a=t,l=null;;){let t=ze(s,r,o,a,n),h=$e;if(!t){if(s.number==(n?e.state.doc.lines:1))return a;h="\n",s=e.state.doc.line(s.number+(n?1:-1)),r=e.bidiSpans(s),t=e.visualLineSide(s,!n)}if(l){if(!l(h))return a}else{if(!i)return t;l=i(h)}a=t}}function Lt(e,t,n){for(;;){let i=0;for(let s of e)s.between(t-1,t+1,((e,s,r)=>{if(t>e&&t<s){let r=i||n||(t-e<s-t?-1:1);t=r<0?e:s,i=r}}));if(!i)return t}}function Bt(e,t,n){let s=Lt(e.state.facet(pt).map((t=>t(e))),n.from,t.head>n.from?-1:1);return s==n.from?n:i.OF.cursor(s,s<n.from?1:-1)}const It="ï¿¿";class Ft{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(i.$t.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=It}readRange(e,t){if(!e)return this;let n=e.parentNode;for(let i=e;;){this.findPointBefore(n,i);let e=this.text.length;this.readNode(i);let s=i.nextSibling;if(s==t)break;let r=j.get(i),o=j.get(s);(r&&o?r.breakAfter:(r?r.breakAfter:b(i))||b(s)&&("BR"!=i.nodeName||i.cmIgnore)&&this.text.length>e)&&this.lineBreak(),i=s}return this.findPointBefore(n,t),this}readTextNode(e){let t=e.nodeValue;for(let n of this.points)n.node==e&&(n.pos=this.text.length+Math.min(n.offset,t.length));for(let n=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let s,r=-1,o=1;if(this.lineSeparator?(r=t.indexOf(this.lineSeparator,n),o=this.lineSeparator.length):(s=i.exec(t))&&(r=s.index,o=s[0].length),this.append(t.slice(n,r<0?t.length:r)),r<0)break;if(this.lineBreak(),o>1)for(let t of this.points)t.node==e&&t.pos>this.text.length&&(t.pos-=o-1);n=r+o}}readNode(e){if(e.cmIgnore)return;let t=j.get(e),n=t&&t.overrideDOMText;if(null!=n){this.findPointInside(e,n.length);for(let e=n.iter();!e.next().done;)e.lineBreak?this.lineBreak():this.append(e.value)}else 3==e.nodeType?this.readTextNode(e):"BR"==e.nodeName?e.nextSibling&&this.lineBreak():1==e.nodeType&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let n of this.points)n.node==e&&e.childNodes[n.offset]==t&&(n.pos=this.text.length)}findPointInside(e,t){for(let n of this.points)(3==e.nodeType?n.node==e:e.contains(n.node))&&(n.pos=this.text.length+($t(e,n.node,n.offset)?t:0))}}function $t(e,t,n){for(;;){if(!t||n<v(t))return!1;if(t==e)return!0;n=g(t)+1,t=t.parentNode}}class zt{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class Ht{constructor(e,t,n,s){this.typeOver=s,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:r,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,n,0))){let t=r||o?[]:function(e){let t=[];if(e.root.activeElement!=e.contentDOM)return t;let{anchorNode:n,anchorOffset:i,focusNode:s,focusOffset:r}=e.observer.selectionRange;return n&&(t.push(new zt(n,i)),s==n&&r==i||t.push(new zt(s,r))),t}(e),n=new Ft(t,e.state);n.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=n.text,this.newSel=function(e,t){if(0==e.length)return null;let n=e[0].pos,s=2==e.length?e[1].pos:n;return n>-1&&s>-1?i.OF.single(n+t,s+t):null}(t,this.bounds.from)}else{let t=e.observer.selectionRange,n=r&&r.node==t.focusNode&&r.offset==t.focusOffset||!f(e.contentDOM,t.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(t.focusNode,t.focusOffset),s=o&&o.node==t.anchorNode&&o.offset==t.anchorOffset||!f(e.contentDOM,t.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(t.anchorNode,t.anchorOffset),a=e.viewport;if((X.ios||X.chrome)&&e.state.selection.main.empty&&n!=s&&(a.from>0||a.to<e.state.doc.length)){let t=Math.min(n,s),i=Math.max(n,s),r=a.from-t,o=a.to-i;0!=r&&1!=r&&0!=t||0!=o&&-1!=o&&i!=e.state.doc.length||(n=0,s=e.state.doc.length)}this.newSel=i.OF.single(s,n)}}}function qt(e,t){let n,{newSel:s}=t,r=e.state.selection.main,o=e.inputState.lastKeyTime>Date.now()-100?e.inputState.lastKeyCode:-1;if(t.bounds){let{from:s,to:a}=t.bounds,l=r.from,h=null;(8===o||X.android&&t.text.length<a-s)&&(l=r.to,h="end");let c=function(e,t,n,i){let s=Math.min(e.length,t.length),r=0;for(;r<s&&e.charCodeAt(r)==t.charCodeAt(r);)r++;if(r==s&&e.length==t.length)return null;let o=e.length,a=t.length;for(;o>0&&a>0&&e.charCodeAt(o-1)==t.charCodeAt(a-1);)o--,a--;return"end"==i&&(n-=o+Math.max(0,r-Math.min(o,a))-r),o<r&&e.length<t.length?(r-=n<=r&&n>=o?r-n:0,a=r+(a-o),o=r):a<r&&(r-=n<=r&&n>=a?r-n:0,o=r+(o-a),a=r),{from:r,toA:o,toB:a}}(e.state.doc.sliceString(s,a,It),t.text,l-s,h);c&&(X.chrome&&13==o&&c.toB==c.from+2&&t.text.slice(c.from,c.toB)==It+It&&c.toB--,n={from:s+c.from,to:s+c.toA,insert:i.EY.of(t.text.slice(c.from,c.toB).split(It))})}else s&&(!e.hasFocus&&e.state.facet(rt)||s.main.eq(r))&&(s=null);if(!n&&!s)return!1;if(!n&&t.typeOver&&!r.empty&&s&&s.main.empty?n={from:r.from,to:r.to,insert:e.state.doc.slice(r.from,r.to)}:n&&n.from>=r.from&&n.to<=r.to&&(n.from!=r.from||n.to!=r.to)&&r.to-r.from-(n.to-n.from)<=4?n={from:r.from,to:r.to,insert:e.state.doc.slice(r.from,n.from).append(n.insert).append(e.state.doc.slice(n.to,r.to))}:(X.mac||X.android)&&n&&n.from==n.to&&n.from==r.head-1&&/^\. ?$/.test(n.insert.toString())&&"off"==e.contentDOM.getAttribute("autocorrect")?(s&&2==n.insert.length&&(s=i.OF.single(s.main.anchor-1,s.main.head-1)),n={from:r.from,to:r.to,insert:i.EY.of([" "])}):X.chrome&&n&&n.from==n.to&&n.from==r.head&&"\n "==n.insert.toString()&&e.lineWrapping&&(s&&(s=i.OF.single(s.main.anchor-1,s.main.head-1)),n={from:r.from,to:r.to,insert:i.EY.of([" "])}),n)return Vt(e,n,s,o);if(s&&!s.main.eq(r)){let t=!1,n="select";return e.inputState.lastSelectionTime>Date.now()-50&&("select"==e.inputState.lastSelectionOrigin&&(t=!0),n=e.inputState.lastSelectionOrigin),e.dispatch({selection:s,scrollIntoView:t,userEvent:n}),!0}return!1}function Vt(e,t,n,s=-1){if(X.ios&&e.inputState.flushIOSKey(t))return!0;let r=e.state.selection.main;if(X.android&&(t.to==r.to&&(t.from==r.from||t.from==r.from-1&&" "==e.state.sliceDoc(t.from,r.from))&&1==t.insert.length&&2==t.insert.lines&&_(e.contentDOM,"Enter",13)||(t.from==r.from-1&&t.to==r.to&&0==t.insert.length||8==s&&t.insert.length<t.to-t.from&&t.to>r.head)&&_(e.contentDOM,"Backspace",8)||t.from==r.from&&t.to==r.to+1&&0==t.insert.length&&_(e.contentDOM,"Delete",46)))return!0;let o,a=t.insert.toString();e.inputState.composing>=0&&e.inputState.composing++;let l=()=>o||(o=function(e,t,n){let s,r=e.state,o=r.selection.main;if(t.from>=o.from&&t.to<=o.to&&t.to-t.from>=(o.to-o.from)/3&&(!n||n.main.empty&&n.main.from==t.from+t.insert.length)&&e.inputState.composing<0){let n=o.from<t.from?r.sliceDoc(o.from,t.from):"",i=o.to>t.to?r.sliceDoc(t.to,o.to):"";s=r.replaceSelection(e.state.toText(n+t.insert.sliceString(0,void 0,e.state.lineBreak)+i))}else{let a=r.changes(t),l=n&&n.main.to<=a.newLength?n.main:void 0;if(r.selection.ranges.length>1&&e.inputState.composing>=0&&t.to<=o.to&&t.to>=o.to-10){let h,c=e.state.sliceDoc(t.from,t.to),u=n&&St(e,n.main.head);if(u){let e=t.insert.length-(t.to-t.from);h={from:u.from,to:u.to-e}}else h=e.state.doc.lineAt(o.head);let f=o.to-t.to,d=o.to-o.from;s=r.changeByRange((n=>{if(n.from==o.from&&n.to==o.to)return{changes:a,range:l||n.map(a)};let s=n.to-f,u=s-c.length;if(n.to-n.from!=d||e.state.sliceDoc(u,s)!=c||n.to>=h.from&&n.from<=h.to)return{range:n};let p=r.changes({from:u,to:s,insert:t.insert}),m=n.to-o.to;return{changes:p,range:l?i.OF.range(Math.max(0,l.anchor+m),Math.max(0,l.head+m)):n.map(p)}}))}else s={changes:a,selection:l&&r.selection.replaceRange(l)}}let a="input.type";return(e.composing||e.inputState.compositionPendingChange&&e.inputState.compositionEndedAt>Date.now()-50)&&(e.inputState.compositionPendingChange=!1,a+=".compose",e.inputState.compositionFirstChange&&(a+=".start",e.inputState.compositionFirstChange=!1)),r.update(s,{userEvent:a,scrollIntoView:!0})}(e,t,n));return e.state.facet(Ke).some((n=>n(e,t.from,t.to,a,l)))||e.dispatch(l()),!0}class Wt{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,X.safari&&e.contentDOM.addEventListener("input",(()=>null)),X.gecko&&function(e){vn.has(e)||(vn.add(e),e.addEventListener("copy",(()=>{})),e.addEventListener("cut",(()=>{})))}(e.contentDOM.ownerDocument)}handleEvent(e){(function(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n,i=t.target;i!=e.contentDOM;i=i.parentNode)if(!i||11==i.nodeType||(n=j.get(i))&&n.ignoreEvent(t))return!1;return!0})(this.view,e)&&!this.ignoreDuringComposition(e)&&("keydown"==e.type&&this.keydown(e)||this.runHandlers(e.type,e))}runHandlers(e,t){let n=this.handlers[e];if(n){for(let e of n.observers)e(this.view,t);for(let e of n.handlers){if(t.defaultPrevented)break;if(e(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=Ut(e),n=this.handlers,i=this.view.contentDOM;for(let e in t)if("scroll"!=e){let s=!t[e].handlers.length,r=n[e];r&&s!=!r.handlers.length&&(i.removeEventListener(e,this.handleEvent),r=null),r||i.addEventListener(e,this.handleEvent,{passive:s})}for(let e in n)"scroll"==e||t[e]||i.removeEventListener(e,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),9==e.keyCode&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&27!=e.keyCode&&Yt.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),X.android&&X.chrome&&!e.synthetic&&(13==e.keyCode||8==e.keyCode))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return!X.ios||e.synthetic||e.altKey||e.metaKey||!((t=Kt.find((t=>t.keyCode==e.keyCode)))&&!e.ctrlKey||Jt.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(229!=e.keyCode&&this.view.observer.forceFlush(),!1):(this.pendingIOSKey=t||e,setTimeout((()=>this.flushIOSKey()),250),!0)}flushIOSKey(e){let t=this.pendingIOSKey;return!!t&&!("Enter"==t.key&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString()))&&(this.pendingIOSKey=void 0,_(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return!!/^key/.test(e.type)&&(this.composing>0||!!(X.safari&&!X.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100)&&(this.compositionPendingKey=!1,!0))}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function Gt(e,t){return(n,i)=>{try{return t.call(e,i,n)}catch(e){st(n.state,e)}}}function Ut(e){let t=Object.create(null);function n(e){return t[e]||(t[e]={observers:[],handlers:[]})}for(let t of e){let e=t.spec;if(e&&e.domEventHandlers)for(let i in e.domEventHandlers){let s=e.domEventHandlers[i];s&&n(i).handlers.push(Gt(t.value,s))}if(e&&e.domEventObservers)for(let i in e.domEventObservers){let s=e.domEventObservers[i];s&&n(i).observers.push(Gt(t.value,s))}}for(let e in Zt)n(e).handlers.push(Zt[e]);for(let e in en)n(e).observers.push(en[e]);return t}const Kt=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Jt="dthko",Yt=[16,17,18,20,91,92,224,225];function Xt(e){return.7*Math.max(0,e)+8}class Qt{constructor(e,t,n,s){this.view=e,this.startEvent=t,this.style=n,this.mustSelect=s,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=function(e){let t,n,i=e.ownerDocument;for(let s=e.parentNode;s&&!(s==i.body||t&&n);)if(1==s.nodeType)!n&&s.scrollHeight>s.clientHeight&&(n=s),!t&&s.scrollWidth>s.clientWidth&&(t=s),s=s.assignedSlot||s.parentNode;else{if(11!=s.nodeType)break;s=s.host}return{x:t,y:n}}(e.contentDOM),this.atoms=e.state.facet(pt).map((t=>t(e)));let r=e.contentDOM.ownerDocument;r.addEventListener("mousemove",this.move=this.move.bind(this)),r.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(i.$t.allowMultipleSelections)&&function(e,t){let n=e.state.facet(qe);return n.length?n[0](t):X.mac?t.metaKey:t.ctrlKey}(e,t),this.dragging=!(!function(e,t){let{main:n}=e.state.selection;if(n.empty)return!1;let i=u(e.root);if(!i||0==i.rangeCount)return!0;let s=i.getRangeAt(0).getClientRects();for(let e=0;e<s.length;e++){let n=s[e];if(n.left<=t.clientX&&n.right>=t.clientX&&n.top<=t.clientY&&n.bottom>=t.clientY)return!0}return!1}(e,t)||1!=dn(t))&&null}start(e){!1===this.dragging&&this.select(e)}move(e){if(0==e.buttons)return this.destroy();if(this.dragging||null==this.dragging&&(t=this.startEvent,n=e,Math.max(Math.abs(t.clientX-n.clientX),Math.abs(t.clientY-n.clientY))<10))return;var t,n;this.select(this.lastEvent=e);let i=0,s=0,r=0,o=0,a=this.view.win.innerWidth,l=this.view.win.innerHeight;this.scrollParents.x&&({left:r,right:a}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:o,bottom:l}=this.scrollParents.y.getBoundingClientRect());let h=yt(this.view);e.clientX-h.left<=r+6?i=-Xt(r-e.clientX):e.clientX+h.right>=a-6&&(i=Xt(e.clientX-a)),e.clientY-h.top<=o+6?s=-Xt(o-e.clientY):e.clientY+h.bottom>=l-6&&(s=Xt(e.clientY-l)),this.setScrollSpeed(i,s)}up(e){null==this.dragging&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval((()=>this.scroll()),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),!1===this.dragging&&this.select(this.lastEvent)}skipAtoms(e){let t=null;for(let n=0;n<e.ranges.length;n++){let s=e.ranges[n],r=null;if(s.empty){let e=Lt(this.atoms,s.from,0);e!=s.from&&(r=i.OF.cursor(e,-1))}else{let e=Lt(this.atoms,s.from,-1),t=Lt(this.atoms,s.to,1);e==s.from&&t==s.to||(r=i.OF.range(s.from==s.anchor?e:t,s.from==s.head?e:t))}r&&(t||(t=e.ranges.slice()),t[n]=r)}return t?i.OF.create(t,e.mainIndex):e}select(e){let{view:t}=this,n=this.skipAtoms(this.style.get(e,this.extend,this.multiple));!this.mustSelect&&n.eq(t.state.selection,!1===this.dragging)||this.view.dispatch({selection:n,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some((e=>e.isUserEvent("input.type")))?this.destroy():this.style.update(e)&&setTimeout((()=>this.select(this.lastEvent)),20)}}const Zt=Object.create(null),en=Object.create(null),tn=X.ie&&X.ie_version<15||X.ios&&X.webkit_version<604;function nn(e,t,n){for(let i of e.facet(t))n=i(n,e);return n}function sn(e,t){t=nn(e.state,Ye,t);let n,{state:s}=e,r=1,o=s.toText(t),a=o.lines==s.selection.ranges.length;if(null!=mn&&s.selection.ranges.every((e=>e.empty))&&mn==o.toString()){let e=-1;n=s.changeByRange((n=>{let l=s.doc.lineAt(n.from);if(l.from==e)return{range:n};e=l.from;let h=s.toText((a?o.line(r++).text:t)+s.lineBreak);return{changes:{from:l.from,insert:h},range:i.OF.cursor(n.from+h.length)}}))}else n=a?s.changeByRange((e=>{let t=o.line(r++);return{changes:{from:e.from,to:e.to,insert:t.text},range:i.OF.cursor(e.from+t.length)}})):s.replaceSelection(o);e.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}function rn(e,t,n,s){if(1==s)return i.OF.cursor(t,n);if(2==s)return function(e,t,n=1){let s=e.charCategorizer(t),r=e.doc.lineAt(t),o=t-r.from;if(0==r.length)return i.OF.cursor(t);0==o?n=1:o==r.length&&(n=-1);let a=o,l=o;n<0?a=(0,i.zK)(r.text,o,!1):l=(0,i.zK)(r.text,o);let h=s(r.text.slice(a,l));for(;a>0;){let e=(0,i.zK)(r.text,a,!1);if(s(r.text.slice(e,a))!=h)break;a=e}for(;l<r.length;){let e=(0,i.zK)(r.text,l);if(s(r.text.slice(l,e))!=h)break;l=e}return i.OF.range(a+r.from,l+r.from)}(e.state,t,n);{let n=ye.find(e.docView,t),s=e.state.doc.lineAt(n?n.posAtEnd:t),r=n?n.posAtStart:s.from,o=n?n.posAtEnd:s.to;return o<e.state.doc.length&&o==s.to&&o++,i.OF.range(r,o)}}en.scroll=e=>{e.inputState.lastScrollTop=e.scrollDOM.scrollTop,e.inputState.lastScrollLeft=e.scrollDOM.scrollLeft},Zt.keydown=(e,t)=>(e.inputState.setSelectionOrigin("select"),27==t.keyCode&&0!=e.inputState.tabFocusMode&&(e.inputState.tabFocusMode=Date.now()+2e3),!1),en.touchstart=(e,t)=>{e.inputState.lastTouchTime=Date.now(),e.inputState.setSelectionOrigin("select.pointer")},en.touchmove=e=>{e.inputState.setSelectionOrigin("select.pointer")},Zt.mousedown=(e,t)=>{if(e.observer.flush(),e.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let i of e.state.facet(We))if(n=i(e,t),n)break;if(n||0!=t.button||(n=function(e,t){let n=ln(e,t),s=dn(t),r=e.state.selection;return{update(e){e.docChanged&&(n.pos=e.changes.mapPos(n.pos),r=r.map(e.changes))},get(t,o,a){let l,h=ln(e,t),c=rn(e,h.pos,h.bias,s);if(n.pos!=h.pos&&!o){let t=rn(e,n.pos,n.bias,s),r=Math.min(t.from,c.from),o=Math.max(t.to,c.to);c=r<c.from?i.OF.range(r,o):i.OF.range(o,r)}return o?r.replaceRange(r.main.extend(c.from,c.to)):a&&1==s&&r.ranges.length>1&&(l=function(e,t){for(let n=0;n<e.ranges.length;n++){let{from:s,to:r}=e.ranges[n];if(s<=t&&r>=t)return i.OF.create(e.ranges.slice(0,n).concat(e.ranges.slice(n+1)),e.mainIndex==n?0:e.mainIndex-(e.mainIndex>n?1:0))}return null}(r,h.pos))?l:a?r.addRange(c):i.OF.create([c])}}}(e,t)),n){let i=!e.hasFocus;e.inputState.startMouseSelection(new Qt(e,t,n,i)),i&&e.observer.ignore((()=>{O(e.contentDOM);let t=e.root.activeElement;t&&!t.contains(e.contentDOM)&&t.blur()}));let s=e.inputState.mouseSelection;if(s)return s.start(t),!1===s.dragging}return!1};let on=(e,t,n)=>t>=n.top&&t<=n.bottom&&e>=n.left&&e<=n.right;function an(e,t,n,i){let s=ye.find(e.docView,t);if(!s)return 1;let r=t-s.posAtStart;if(0==r)return 1;if(r==s.length)return-1;let o=s.coordsAt(r,-1);if(o&&on(n,i,o))return-1;let a=s.coordsAt(r,1);return a&&on(n,i,a)?1:o&&o.bottom>=i?-1:1}function ln(e,t){let n=e.posAtCoords({x:t.clientX,y:t.clientY},!1);return{pos:n,bias:an(e,n,t.clientX,t.clientY)}}const hn=X.ie&&X.ie_version<=11;let cn=null,un=0,fn=0;function dn(e){if(!hn)return e.detail;let t=cn,n=fn;return cn=e,fn=Date.now(),un=!t||n>Date.now()-400&&Math.abs(t.clientX-e.clientX)<2&&Math.abs(t.clientY-e.clientY)<2?(un+1)%3:1}function pn(e,t,n,i){if(!(n=nn(e.state,Ye,n)))return;let s=e.posAtCoords({x:t.clientX,y:t.clientY},!1),{draggedContent:r}=e.inputState,o=i&&r&&function(e,t){let n=e.state.facet(Ve);return n.length?n[0](t):X.mac?!t.altKey:!t.ctrlKey}(e,t)?{from:r.from,to:r.to}:null,a={from:s,insert:n},l=e.state.changes(o?[o,a]:a);e.focus(),e.dispatch({changes:l,selection:{anchor:l.mapPos(s,-1),head:l.mapPos(s,1)},userEvent:o?"move.drop":"input.drop"}),e.inputState.draggedContent=null}Zt.dragstart=(e,t)=>{let{selection:{main:n}}=e.state;if(t.target.draggable){let s=e.docView.nearest(t.target);if(s&&s.isWidget){let e=s.posAtStart,t=e+s.length;(e>=n.to||t<=n.from)&&(n=i.OF.range(e,t))}}let{inputState:s}=e;return s.mouseSelection&&(s.mouseSelection.dragging=!0),s.draggedContent=n,t.dataTransfer&&(t.dataTransfer.setData("Text",nn(e.state,Xe,e.state.sliceDoc(n.from,n.to))),t.dataTransfer.effectAllowed="copyMove"),!1},Zt.dragend=e=>(e.inputState.draggedContent=null,!1),Zt.drop=(e,t)=>{if(!t.dataTransfer)return!1;if(e.state.readOnly)return!0;let n=t.dataTransfer.files;if(n&&n.length){let i=Array(n.length),s=0,r=()=>{++s==n.length&&pn(e,t,i.filter((e=>null!=e)).join(e.state.lineBreak),!1)};for(let e=0;e<n.length;e++){let t=new FileReader;t.onerror=r,t.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(t.result)||(i[e]=t.result),r()},t.readAsText(n[e])}return!0}{let n=t.dataTransfer.getData("Text");if(n)return pn(e,t,n,!0),!0}return!1},Zt.paste=(e,t)=>{if(e.state.readOnly)return!0;e.observer.flush();let n=tn?null:t.clipboardData;return n?(sn(e,n.getData("text/plain")||n.getData("text/uri-list")),!0):(function(e){let t=e.dom.parentNode;if(!t)return;let n=t.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout((()=>{e.focus(),n.remove(),sn(e,n.value)}),50)}(e),!1)};let mn=null;Zt.copy=Zt.cut=(e,t)=>{let{text:n,ranges:i,linewise:s}=function(e){let t=[],n=[],i=!1;for(let i of e.selection.ranges)i.empty||(t.push(e.sliceDoc(i.from,i.to)),n.push(i));if(!t.length){let s=-1;for(let{from:i}of e.selection.ranges){let r=e.doc.lineAt(i);r.number>s&&(t.push(r.text),n.push({from:r.from,to:Math.min(e.doc.length,r.to+1)})),s=r.number}i=!0}return{text:nn(e,Xe,t.join(e.lineBreak)),ranges:n,linewise:i}}(e.state);if(!n&&!s)return!1;mn=s?n:null,"cut"!=t.type||e.state.readOnly||e.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let r=tn?null:t.clipboardData;return r?(r.clearData(),r.setData("text/plain",n),!0):(function(e,t){let n=e.dom.parentNode;if(!n)return;let i=n.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=t,i.focus(),i.selectionEnd=t.length,i.selectionStart=0,setTimeout((()=>{i.remove(),e.focus()}),50)}(e,n),!1)};const gn=i.YH.define();function bn(e,t){let n=[];for(let i of e.facet(Je)){let s=i(e,t);s&&n.push(s)}return n?e.update({effects:n,annotations:gn.of(!0)}):null}function yn(e){setTimeout((()=>{let t=e.hasFocus;if(t!=e.inputState.notifiedFocused){let n=bn(e.state,t);n?e.dispatch(n):e.update([])}}),10)}en.focus=e=>{e.inputState.lastFocusTime=Date.now(),e.scrollDOM.scrollTop||!e.inputState.lastScrollTop&&!e.inputState.lastScrollLeft||(e.scrollDOM.scrollTop=e.inputState.lastScrollTop,e.scrollDOM.scrollLeft=e.inputState.lastScrollLeft),yn(e)},en.blur=e=>{e.observer.clearSelectionRange(),yn(e)},en.compositionstart=en.compositionupdate=e=>{e.observer.editContext||(null==e.inputState.compositionFirstChange&&(e.inputState.compositionFirstChange=!0),e.inputState.composing<0&&(e.inputState.composing=0))},en.compositionend=e=>{e.observer.editContext||(e.inputState.composing=-1,e.inputState.compositionEndedAt=Date.now(),e.inputState.compositionPendingKey=!0,e.inputState.compositionPendingChange=e.observer.pendingRecords().length>0,e.inputState.compositionFirstChange=null,X.chrome&&X.android?e.observer.flushSoon():e.inputState.compositionPendingChange?Promise.resolve().then((()=>e.observer.flush())):setTimeout((()=>{e.inputState.composing<0&&e.docView.hasComposition&&e.update([])}),50))},en.contextmenu=e=>{e.inputState.lastContextMenu=Date.now()},Zt.beforeinput=(e,t)=>{var n,i;if("insertReplacementText"==t.inputType&&e.observer.editContext){let i=null===(n=t.dataTransfer)||void 0===n?void 0:n.getData("text/plain"),s=t.getTargetRanges();if(i&&s.length){let t=s[0],n=e.posAtDOM(t.startContainer,t.startOffset),r=e.posAtDOM(t.endContainer,t.endOffset);return Vt(e,{from:n,to:r,insert:e.state.toText(i)},null),!0}}let s;if(X.chrome&&X.android&&(s=Kt.find((e=>e.inputType==t.inputType)))&&(e.observer.delayAndroidKey(s.key,s.keyCode),"Backspace"==s.key||"Delete"==s.key)){let t=(null===(i=window.visualViewport)||void 0===i?void 0:i.height)||0;setTimeout((()=>{var n;((null===(n=window.visualViewport)||void 0===n?void 0:n.height)||0)>t+10&&e.hasFocus&&(e.contentDOM.blur(),e.focus())}),100)}return X.ios&&"deleteContentForward"==t.inputType&&e.observer.flushSoon(),X.safari&&"insertText"==t.inputType&&e.inputState.composing>=0&&setTimeout((()=>en.compositionend(e,t)),20),!1};const vn=new Set,xn=["pre-wrap","normal","pre-line","break-spaces"];let wn=!1;function kn(){wn=!1}class Sn{constructor(e){this.lineWrapping=e,this.doc=i.EY.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let n=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(n+=Math.max(0,Math.ceil((t-e-n*this.lineLength*.5)/this.lineLength))),this.lineHeight*n}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return xn.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let n=0;n<e.length;n++){let i=e[n];i<0?n++:this.heightSamples[Math.floor(10*i)]||(t=!0,this.heightSamples[Math.floor(10*i)]=!0)}return t}refresh(e,t,n,i,s,r){let o=xn.indexOf(e)>-1,a=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=o;if(this.lineWrapping=o,this.lineHeight=t,this.charWidth=n,this.textHeight=i,this.lineLength=s,a){this.heightSamples={};for(let e=0;e<r.length;e++){let t=r[e];t<0?e++:this.heightSamples[Math.floor(10*t)]=!0}}return a}}class Cn{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class An{constructor(e,t,n,i,s){this.from=e,this.length=t,this.top=n,this.height=i,this._content=s}get type(){return"number"==typeof this._content?ue.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof me?this._content.widget:null}get widgetLineBreaks(){return"number"==typeof this._content?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new An(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var On=function(e){return e[e.ByPos=0]="ByPos",e[e.ByHeight=1]="ByHeight",e[e.ByPosNoHeight=2]="ByPosNoHeight",e}(On||(On={}));const Mn=.001;class _n{constructor(e,t,n=2){this.length=e,this.height=t,this.flags=n}get outdated(){return(2&this.flags)>0}set outdated(e){this.flags=(e?2:0)|-3&this.flags}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>Mn&&(wn=!0),this.height=e)}replace(e,t,n){return _n.of(n)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,n,i){let s=this,r=n.doc;for(let o=i.length-1;o>=0;o--){let{fromA:a,toA:l,fromB:h,toB:c}=i[o],u=s.lineAt(a,On.ByPosNoHeight,n.setDoc(t),0,0),f=u.to>=l?u:s.lineAt(l,On.ByPosNoHeight,n,0,0);for(c+=f.to-l,l=f.to;o>0&&u.from<=i[o-1].toA;)a=i[o-1].fromA,h=i[o-1].fromB,o--,a<u.from&&(u=s.lineAt(a,On.ByPosNoHeight,n,0,0));h+=u.from-a,a=u.from;let d=jn.build(n.setDoc(r),e,h,c);s=Tn(s,s.replace(a,l,d))}return s.updateHeight(n,0)}static empty(){return new Nn(0,0)}static of(e){if(1==e.length)return e[0];let t=0,n=e.length,i=0,s=0;for(;;)if(t==n)if(i>2*s){let s=e[t-1];s.break?e.splice(--t,1,s.left,null,s.right):e.splice(--t,1,s.left,s.right),n+=1+s.break,i-=s.size}else{if(!(s>2*i))break;{let t=e[n];t.break?e.splice(n,1,t.left,null,t.right):e.splice(n,1,t.left,t.right),n+=2+t.break,s-=t.size}}else if(i<s){let n=e[t++];n&&(i+=n.size)}else{let t=e[--n];t&&(s+=t.size)}let r=0;return null==e[t-1]?(r=1,t--):null==e[t]&&(r=1,n++),new Pn(_n.of(e.slice(0,t)),r,_n.of(e.slice(n)))}}function Tn(e,t){return e==t?e:(e.constructor!=t.constructor&&(wn=!0),t)}_n.prototype.size=1;class En extends _n{constructor(e,t,n){super(e,t),this.deco=n}blockAt(e,t,n,i){return new An(i,this.length,n,this.height,this.deco||0)}lineAt(e,t,n,i,s){return this.blockAt(0,n,i,s)}forEachLine(e,t,n,i,s,r){e<=s+this.length&&t>=s&&r(this.blockAt(0,n,i,s))}updateHeight(e,t=0,n=!1,i){return i&&i.from<=t&&i.more&&this.setHeight(i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Nn extends En{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,n,i){return new An(i,this.length,n,this.height,this.breaks)}replace(e,t,n){let i=n[0];return 1==n.length&&(i instanceof Nn||i instanceof Dn&&4&i.flags)&&Math.abs(this.length-i.length)<10?(i instanceof Dn?i=new Nn(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):_n.of(n)}updateHeight(e,t=0,n=!1,i){return i&&i.from<=t&&i.more?this.setHeight(i.heights[i.index++]):(n||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Dn extends _n{constructor(e){super(e,0)}heightMetrics(e,t){let n,i=e.doc.lineAt(t).number,s=e.doc.lineAt(t+this.length).number,r=s-i+1,o=0;if(e.lineWrapping){let t=Math.min(this.height,e.lineHeight*r);n=t/r,this.length>r+1&&(o=(this.height-t)/(this.length-r-1))}else n=this.height/r;return{firstLine:i,lastLine:s,perLine:n,perChar:o}}blockAt(e,t,n,i){let{firstLine:s,lastLine:r,perLine:o,perChar:a}=this.heightMetrics(t,i);if(t.lineWrapping){let s=i+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-n)/this.height))*this.length)),r=t.doc.lineAt(s),l=o+r.length*a,h=Math.max(n,e-l/2);return new An(r.from,r.length,h,l,0)}{let i=Math.max(0,Math.min(r-s,Math.floor((e-n)/o))),{from:a,length:l}=t.doc.line(s+i);return new An(a,l,n+o*i,o,0)}}lineAt(e,t,n,i,s){if(t==On.ByHeight)return this.blockAt(e,n,i,s);if(t==On.ByPosNoHeight){let{from:t,to:i}=n.doc.lineAt(e);return new An(t,i-t,0,0,0)}let{firstLine:r,perLine:o,perChar:a}=this.heightMetrics(n,s),l=n.doc.lineAt(e),h=o+l.length*a,c=l.number-r,u=i+o*c+a*(l.from-s-c);return new An(l.from,l.length,Math.max(i,Math.min(u,i+this.height-h)),h,0)}forEachLine(e,t,n,i,s,r){e=Math.max(e,s),t=Math.min(t,s+this.length);let{firstLine:o,perLine:a,perChar:l}=this.heightMetrics(n,s);for(let h=e,c=i;h<=t;){let t=n.doc.lineAt(h);if(h==e){let n=t.number-o;c+=a*n+l*(e-s-n)}let i=a+l*t.length;r(new An(t.from,t.length,c,i,0)),c+=i,h=t.to+1}}replace(e,t,n){let i=this.length-t;if(i>0){let e=n[n.length-1];e instanceof Dn?n[n.length-1]=new Dn(e.length+i):n.push(null,new Dn(i-1))}if(e>0){let t=n[0];t instanceof Dn?n[0]=new Dn(e+t.length):n.unshift(new Dn(e-1),null)}return _n.of(n)}decomposeLeft(e,t){t.push(new Dn(e-1),null)}decomposeRight(e,t){t.push(null,new Dn(this.length-e-1))}updateHeight(e,t=0,n=!1,i){let s=t+this.length;if(i&&i.from<=t+this.length&&i.more){let n=[],r=Math.max(t,i.from),o=-1;for(i.from>t&&n.push(new Dn(i.from-t-1).updateHeight(e,t));r<=s&&i.more;){let t=e.doc.lineAt(r).length;n.length&&n.push(null);let s=i.heights[i.index++];-1==o?o=s:Math.abs(s-o)>=Mn&&(o=-2);let a=new Nn(t,s);a.outdated=!1,n.push(a),r+=t+1}r<=s&&n.push(null,new Dn(s-r).updateHeight(e,r));let a=_n.of(n);return(o<0||Math.abs(a.height-this.height)>=Mn||Math.abs(o-this.heightMetrics(e,t).perLine)>=Mn)&&(wn=!0),Tn(this,a)}return(n||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1),this}toString(){return`gap(${this.length})`}}class Pn extends _n{constructor(e,t,n){super(e.length+t+n.length,e.height+n.height,t|(e.outdated||n.outdated?2:0)),this.left=e,this.right=n,this.size=e.size+n.size}get break(){return 1&this.flags}blockAt(e,t,n,i){let s=n+this.left.height;return e<s?this.left.blockAt(e,t,n,i):this.right.blockAt(e,t,s,i+this.left.length+this.break)}lineAt(e,t,n,i,s){let r=i+this.left.height,o=s+this.left.length+this.break,a=t==On.ByHeight?e<r:e<o,l=a?this.left.lineAt(e,t,n,i,s):this.right.lineAt(e,t,n,r,o);if(this.break||(a?l.to<o:l.from>o))return l;let h=t==On.ByPosNoHeight?On.ByPosNoHeight:On.ByPos;return a?l.join(this.right.lineAt(o,h,n,r,o)):this.left.lineAt(o,h,n,i,s).join(l)}forEachLine(e,t,n,i,s,r){let o=i+this.left.height,a=s+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,t,n,i,s,r),t>=a&&this.right.forEachLine(e,t,n,o,a,r);else{let l=this.lineAt(a,On.ByPos,n,i,s);e<l.from&&this.left.forEachLine(e,l.from-1,n,i,s,r),l.to>=e&&l.from<=t&&r(l),t>l.to&&this.right.forEachLine(l.to+1,t,n,o,a,r)}}replace(e,t,n){let i=this.left.length+this.break;if(t<i)return this.balanced(this.left.replace(e,t,n),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,t-i,n));let s=[];e>0&&this.decomposeLeft(e,s);let r=s.length;for(let e of n)s.push(e);if(e>0&&Rn(s,r-1),t<this.length){let e=s.length;this.decomposeRight(t,s),Rn(s,e)}return _n.of(s)}decomposeLeft(e,t){let n=this.left.length;if(e<=n)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(n++,e>=n&&t.push(null)),e>n&&this.right.decomposeLeft(e-n,t)}decomposeRight(e,t){let n=this.left.length,i=n+this.break;if(e>=i)return this.right.decomposeRight(e-i,t);e<n&&this.left.decomposeRight(e,t),this.break&&e<i&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?_n.of(this.break?[e,null,t]:[e,t]):(this.left=Tn(this.left,e),this.right=Tn(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,n=!1,i){let{left:s,right:r}=this,o=t+s.length+this.break,a=null;return i&&i.from<=t+s.length&&i.more?a=s=s.updateHeight(e,t,n,i):s.updateHeight(e,t,n),i&&i.from<=o+r.length&&i.more?a=r=r.updateHeight(e,o,n,i):r.updateHeight(e,o,n),a?this.balanced(s,r):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Rn(e,t){let n,i;null==e[t]&&(n=e[t-1])instanceof Dn&&(i=e[t+1])instanceof Dn&&e.splice(t-1,3,new Dn(n.length+1+i.length))}class jn{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let e=Math.min(t,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof Nn?n.length+=e-this.pos:(e>this.pos||!this.isCovered)&&this.nodes.push(new Nn(e-this.pos,-1)),this.writtenTo=e,t>e&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,n){if(e<t||n.heightRelevant){let i=n.widget?n.widget.estimatedHeight:0,s=n.widget?n.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let r=t-e;n.block?this.addBlock(new En(r,i,n)):(r||s||i>=5)&&this.addLineDeco(i,s,r)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Nn(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let n=new Dn(t-e);return this.oracle.doc.lineAt(e).to==t&&(n.flags|=4),n}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Nn)return e;let t=new Nn(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,n){let i=this.ensureLine();i.length+=n,i.collapsed+=n,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=t,this.writtenTo=this.pos=this.pos+n}finish(e){let t=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||t instanceof Nn||this.isCovered?(this.writtenTo<this.pos||null==t)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new Nn(0,-1));let n=e;for(let e of this.nodes)e instanceof Nn&&e.updateHeight(this.oracle,n),n+=e?e.length:1;return this.nodes}static build(e,t,n,s){let r=new jn(n,e);return i.om.spans(t,n,s,r,0),r.finish(n)}}class Ln{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,n,i){(e<t||n&&n.heightRelevant||i&&i.heightRelevant)&&be(e,t,this.changes,5)}}function Bn(e,t){let n=e.getBoundingClientRect(),i=e.ownerDocument,s=i.defaultView||window,r=Math.max(0,n.left),o=Math.min(s.innerWidth,n.right),a=Math.max(0,n.top),l=Math.min(s.innerHeight,n.bottom);for(let t=e.parentNode;t&&t!=i.body;)if(1==t.nodeType){let n=t,i=window.getComputedStyle(n);if((n.scrollHeight>n.clientHeight||n.scrollWidth>n.clientWidth)&&"visible"!=i.overflow){let i=n.getBoundingClientRect();r=Math.max(r,i.left),o=Math.min(o,i.right),a=Math.max(a,i.top),l=Math.min(t==e.parentNode?s.innerHeight:l,i.bottom)}t="absolute"==i.position||"fixed"==i.position?n.offsetParent:n.parentNode}else{if(11!=t.nodeType)break;t=t.host}return{left:r-n.left,right:Math.max(r,o)-n.left,top:a-(n.top+t),bottom:Math.max(a,l)-(n.top+t)}}function In(e,t){let n=e.getBoundingClientRect();return{left:0,right:n.right-n.left,top:t,bottom:n.bottom-(n.top+t)}}class Fn{constructor(e,t,n){this.from=e,this.to=t,this.size=n}static same(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++){let i=e[n],s=t[n];if(i.from!=s.from||i.to!=s.to||i.size!=s.size)return!1}return!0}draw(e,t){return fe.replace({widget:new $n(this.size*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class $n extends ce{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class zn{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=Wn,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Ce.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(ut).some((e=>"function"!=typeof e&&"cm-lineWrapping"==e.class));this.heightOracle=new Sn(t),this.stateDeco=e.facet(ft).filter((e=>"function"!=typeof e)),this.heightMap=_n.empty().applyChanges(this.stateDeco,i.EY.empty,this.heightOracle.setDoc(e.doc),[new xt(0,0,0,e.doc.length)]);for(let e=0;e<2&&(this.viewport=this.getViewport(0,null),this.updateForViewport());e++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=fe.set(this.lineGaps.map((e=>e.draw(this,!1)))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let n=0;n<=1;n++){let i=n?t.head:t.anchor;if(!e.some((({from:e,to:t})=>i>=e&&i<=t))){let{from:t,to:n}=this.lineBlockAt(i);e.push(new Hn(t,n))}}return this.viewports=e.sort(((e,t)=>e.from-t.from)),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?Wn:new Gn(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,(e=>{this.viewportLines.push(Un(e,this.scaler))}))}update(e,t=null){this.state=e.state;let n=this.stateDeco;this.stateDeco=this.state.facet(ft).filter((e=>"function"!=typeof e));let s=e.changedRanges,r=xt.extendWithRanges(s,function(e,t,n){let s=new Ln;return i.om.compare(e,t,n,s,0),s.changes}(n,this.stateDeco,e?e.changes:i.VR.empty(this.state.doc.length))),o=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);kn(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),r),(this.heightMap.height!=o||wn)&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let l=r.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<l.from||t.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,t));let h=l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,e.flags|=this.updateForViewport(),(h||!e.changes.empty||2&e.flags)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(Ze)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,n=window.getComputedStyle(t),s=this.heightOracle,r=n.whiteSpace;this.defaultTextDirection="rtl"==n.direction?Ce.RTL:Ce.LTR;let o=this.heightOracle.mustRefreshForWrapping(r),a=t.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let h=0,c=0;if(a.width&&a.height){let{scaleX:e,scaleY:n}=k(t,a);(e>.005&&Math.abs(this.scaleX-e)>.005||n>.005&&Math.abs(this.scaleY-n)>.005)&&(this.scaleX=e,this.scaleY=n,h|=8,o=l=!0)}let u=(parseInt(n.paddingTop)||0)*this.scaleY,f=(parseInt(n.paddingBottom)||0)*this.scaleY;this.paddingTop==u&&this.paddingBottom==f||(this.paddingTop=u,this.paddingBottom=f,h|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(s.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,h|=8);let d=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=d&&(this.scrollAnchorHeight=-1,this.scrollTop=d),this.scrolledToBottom=E(e.scrollDOM);let p=(this.printing?In:Bn)(t,this.paddingTop),m=p.top-this.pixelViewport.top,g=p.bottom-this.pixelViewport.bottom;this.pixelViewport=p;let b=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(b!=this.inView&&(this.inView=b,b&&(l=!0)),!this.inView&&!this.scrollTarget)return 0;let y=a.width;if(this.contentDOMWidth==y&&this.editorHeight==e.scrollDOM.clientHeight||(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,h|=8),l){let t=e.docView.measureVisibleLineHeights(this.viewport);if(s.mustRefreshForHeights(t)&&(o=!0),o||s.lineWrapping&&Math.abs(y-this.contentDOMWidth)>s.charWidth){let{lineHeight:n,charWidth:i,textHeight:a}=e.docView.measureTextSize();o=n>0&&s.refresh(r,n,i,a,y/i,t),o&&(e.docView.minWidth=0,h|=8)}m>0&&g>0?c=Math.max(m,g):m<0&&g<0&&(c=Math.min(m,g)),kn();for(let n of this.viewports){let r=n.from==this.viewport.from?t:e.docView.measureVisibleLineHeights(n);this.heightMap=(o?_n.empty().applyChanges(this.stateDeco,i.EY.empty,this.heightOracle,[new xt(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(s,0,o,new Cn(n.from,r))}wn&&(h|=2)}let v=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return v&&(2&h&&(h|=this.updateScaler()),this.viewport=this.getViewport(c,this.scrollTarget),h|=this.updateForViewport()),(2&h||v)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),h|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),h}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let n=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,s=this.heightOracle,{visibleTop:r,visibleBottom:o}=this,a=new Hn(i.lineAt(r-1e3*n,On.ByHeight,s,0,0).from,i.lineAt(o+1e3*(1-n),On.ByHeight,s,0,0).to);if(t){let{head:e}=t.range;if(e<a.from||e>a.to){let n,r=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),o=i.lineAt(e,On.ByPos,s,0,0);n="center"==t.y?(o.top+o.bottom)/2-r/2:"start"==t.y||"nearest"==t.y&&e<a.from?o.top:o.bottom-r,a=new Hn(i.lineAt(n-500,On.ByHeight,s,0,0).from,i.lineAt(n+r+500,On.ByHeight,s,0,0).to)}}return a}mapViewport(e,t){let n=t.mapPos(e.from,-1),i=t.mapPos(e.to,1);return new Hn(this.heightMap.lineAt(n,On.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,On.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},n=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,On.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(t,On.ByPos,this.heightOracle,0,0),{visibleTop:r,visibleBottom:o}=this;return(0==e||i<=r-Math.max(10,Math.min(-n,250)))&&(t==this.state.doc.length||s>=o+Math.max(10,Math.min(n,250)))&&i>r-2e3&&s<o+2e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let n=[];for(let i of e)t.touchesRange(i.from,i.to)||n.push(new Fn(t.mapPos(i.from),t.mapPos(i.to),i.size));return n}ensureLineGaps(e,t){let n=this.heightOracle.lineWrapping,s=n?1e4:2e3,r=s>>1,o=s<<1;if(this.defaultTextDirection!=Ce.LTR&&!n)return[];let a=[],l=(s,o,h,c)=>{if(o-s<r)return;let u=this.state.selection.main,f=[u.from];u.empty||f.push(u.to);for(let e of f)if(e>s&&e<o)return l(s,e-10,h,c),void l(e+10,o,h,c);let d=function(e,t){for(let n of e)if(t(n))return n}(e,(e=>e.from>=h.from&&e.to<=h.to&&Math.abs(e.from-s)<r&&Math.abs(e.to-o)<r&&!f.some((t=>e.from<t&&e.to>t))));if(!d){if(o<h.to&&t&&n&&t.visibleRanges.some((e=>e.from<=o&&e.to>=o))){let e=t.moveToLineBoundary(i.OF.cursor(o),!1,!0).head;e>s&&(o=e)}d=new Fn(s,o,this.gapSize(h,s,o,c))}a.push(d)},h=e=>{if(e.length<o||e.type!=ue.Text)return;let t=function(e,t,n){let s=[],r=e,o=0;return i.om.spans(n,e,t,{span(){},point(e,t){e>r&&(s.push({from:r,to:e}),o+=e-r),r=t}},20),r<t&&(s.push({from:r,to:t}),o+=t-r),{total:o,ranges:s}}(e.from,e.to,this.stateDeco);if(t.total<o)return;let r,a,h=this.scrollTarget?this.scrollTarget.range.head:null;if(n){let n,i,o=s/this.heightOracle.lineLength*this.heightOracle.lineHeight;if(null!=h){let s=Vn(t,h),r=((this.visibleBottom-this.visibleTop)/2+o)/e.height;n=s-r,i=s+r}else n=(this.visibleTop-e.top-o)/e.height,i=(this.visibleBottom-e.top+o)/e.height;r=qn(t,n),a=qn(t,i)}else{let e,n,i=t.total*this.heightOracle.charWidth,o=s*this.heightOracle.charWidth;if(null!=h){let s=Vn(t,h),r=((this.pixelViewport.right-this.pixelViewport.left)/2+o)/i;e=s-r,n=s+r}else e=(this.pixelViewport.left-o)/i,n=(this.pixelViewport.right+o)/i;r=qn(t,e),a=qn(t,n)}r>e.from&&l(e.from,r,e,t),a<e.to&&l(a,e.to,e,t)};for(let e of this.viewportLines)Array.isArray(e.type)?e.type.forEach(h):h(e);return a}gapSize(e,t,n,i){let s=Vn(i,n)-Vn(i,t);return this.heightOracle.lineWrapping?e.height*s:i.total*this.heightOracle.charWidth*s}updateLineGaps(e){Fn.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=fe.set(e.map((e=>e.draw(this,this.heightOracle.lineWrapping)))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];i.om.spans(e,this.viewport.from,this.viewport.to,{span(e,n){t.push({from:e,to:n})},point(){}},20);let n=t.length!=this.visibleRanges.length||this.visibleRanges.some(((e,n)=>e.from!=t[n].from||e.to!=t[n].to));return this.visibleRanges=t,n?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find((t=>t.from<=e&&t.to>=e))||Un(this.heightMap.lineAt(e,On.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find((t=>t.top<=e&&t.bottom>=e))||Un(this.heightMap.lineAt(this.scaler.fromDOM(e),On.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return Un(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Hn{constructor(e,t){this.from=e,this.to=t}}function qn({total:e,ranges:t},n){if(n<=0)return t[0].from;if(n>=1)return t[t.length-1].to;let i=Math.floor(e*n);for(let e=0;;e++){let{from:n,to:s}=t[e],r=s-n;if(i<=r)return n+i;i-=r}}function Vn(e,t){let n=0;for(let{from:i,to:s}of e.ranges){if(t<=s){n+=t-i;break}n+=s-i}return n/e.total}const Wn={toDOM:e=>e,fromDOM:e=>e,scale:1,eq(e){return e==this}};class Gn{constructor(e,t,n){let i=0,s=0,r=0;this.viewports=n.map((({from:n,to:s})=>{let r=t.lineAt(n,On.ByPos,e,0,0).top,o=t.lineAt(s,On.ByPos,e,0,0).bottom;return i+=o-r,{from:n,to:s,top:r,bottom:o,domTop:0,domBottom:0}})),this.scale=(7e6-i)/(t.height-i);for(let e of this.viewports)e.domTop=r+(e.top-s)*this.scale,r=e.domBottom=e.domTop+(e.bottom-e.top),s=e.bottom}toDOM(e){for(let t=0,n=0,i=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.top)return i+(e-n)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);n=s.bottom,i=s.domBottom}}fromDOM(e){for(let t=0,n=0,i=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.domTop)return n+(e-i)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);n=s.bottom,i=s.domBottom}}eq(e){return e instanceof Gn&&this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every(((t,n)=>t.from==e.viewports[n].from&&t.to==e.viewports[n].to))}}function Un(e,t){if(1==t.scale)return e;let n=t.toDOM(e.top),i=t.toDOM(e.bottom);return new An(e.from,e.length,n,i-n,Array.isArray(e._content)?e._content.map((e=>Un(e,t))):e._content)}const Kn=i.sj.define({combine:e=>e.join(" ")}),Jn=i.sj.define({combine:e=>e.indexOf(!0)>-1}),Yn=s.G.newName(),Xn=s.G.newName(),Qn=s.G.newName(),Zn={"&light":"."+Xn,"&dark":"."+Qn};function ei(e,t,n){return new s.G(t,{finish:t=>/&/.test(t)?t.replace(/&\w*/,(t=>{if("&"==t)return e;if(!n||!n[t])throw new RangeError(`Unsupported selector: ${t}`);return n[t]})):e+" "+t})}const ti=ei("."+Yn,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>\')',backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Zn),ni={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},ii=X.ie&&X.ie_version<=11;class si{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new S,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver((t=>{for(let e of t)this.queue.push(e);(X.ie&&X.ie_version<=11||X.ios&&e.composing)&&t.some((e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length))?this.flushSoon():this.flush()})),!window.EditContext||!1===e.constructor.EDIT_CONTEXT||X.chrome&&X.chrome_version<126||(this.editContext=new ai(e),e.state.facet(rt)&&(e.contentDOM.editContext=this.editContext.editContext)),ii&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),"function"==typeof ResizeObserver&&(this.resizeScroll=new ResizeObserver((()=>{var e;(null===(e=this.view.docView)||void 0===e?void 0:e.lastUpdate)<Date.now()-75&&this.onResize()})),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver((e=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),e.length>0&&e[e.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))}),{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver((e=>{e.length>0&&e[e.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))}),{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout((()=>{this.resizeTimeout=-1,this.view.requestMeasure()}),50))}onPrint(e){("change"!=e.type&&e.type||e.matches)&&(this.view.viewState.printing=!0,this.view.measure(),setTimeout((()=>{this.view.viewState.printing=!1,this.view.requestMeasure()}),500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some(((t,n)=>t!=e[n])))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:n}=this,i=this.selectionRange;if(n.state.facet(rt)?n.root.activeElement!=this.dom:!d(n.dom,i))return;let s=i.anchorNode&&n.docView.nearest(i.anchorNode);s&&s.ignoreEvent(e)?t||(this.selectionChanged=!1):(X.ie&&X.ie_version<=11||X.android&&X.chrome)&&!n.state.selection.main.empty&&i.focusNode&&m(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=u(e.root);if(!t)return!1;let n=X.safari&&11==e.root.nodeType&&function(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}(this.dom.ownerDocument)==this.dom&&function(e,t){if(t.getComposedRanges){let n=t.getComposedRanges(e.root)[0];if(n)return oi(e,n)}let n=null;function i(e){e.preventDefault(),e.stopImmediatePropagation(),n=e.getTargetRanges()[0]}return e.contentDOM.addEventListener("beforeinput",i,!0),e.dom.ownerDocument.execCommand("indent"),e.contentDOM.removeEventListener("beforeinput",i,!0),n?oi(e,n):null}(this.view,t)||t;if(!n||this.selectionRange.eq(n))return!1;let i=d(this.dom,n);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&function(e,t){let n=t.focusNode,i=t.focusOffset;if(!n||t.anchorNode!=n||t.anchorOffset!=i)return!1;for(i=Math.min(i,v(n));;)if(i){if(1!=n.nodeType)return!1;let e=n.childNodes[i-1];"false"==e.contentEditable?i--:(n=e,i=v(n))}else{if(n==e)return!0;i=g(n),n=n.parentNode}}(this.dom,n)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(n),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let n=this.dom;n;)if(1==n.nodeType)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==n?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(n),n=n.assignedSlot||n.parentNode;else{if(11!=n.nodeType)break;n=n.host}if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let e of this.scrollTargets)e.removeEventListener("scroll",this.onScroll);for(let e of this.scrollTargets=t)e.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,ni),ii&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),ii&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var n;if(!this.delayedAndroidKey){let e=()=>{let e=this.delayedAndroidKey;e&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=e.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&e.force&&_(this.dom,e.key,e.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(e)}this.delayedAndroidKey&&"Enter"!=e||(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(null===(n=this.delayedAndroidKey)||void 0===n?void 0:n.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame((()=>{this.delayedFlush=-1,this.flush()})))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,n=-1,i=!1;for(let s of e){let e=this.readMutation(s);e&&(e.typeOver&&(i=!0),-1==t?({from:t,to:n}=e):(t=Math.min(e.from,t),n=Math.max(e.to,n)))}return{from:t,to:n,typeOver:i}}readChange(){let{from:e,to:t,typeOver:n}=this.processRecords(),i=this.selectionChanged&&d(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new Ht(this.view,e,t,n);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let n=this.view.state,i=qt(this.view,t);return this.view.state==n&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty("attributes"==e.type),"attributes"==e.type&&(t.flags|=4),"childList"==e.type){let n=ri(t,e.previousSibling||e.target.previousSibling,-1),i=ri(t,e.nextSibling||e.target.nextSibling,1);return{from:n?t.posAfter(n):t.posAtStart,to:i?t.posBefore(i):t.posAtEnd,typeOver:!1}}return"characterData"==e.type?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(rt)!=e.state.facet(rt)&&(e.view.contentDOM.editContext=e.state.facet(rt)?this.editContext.editContext:null))}destroy(){var e,t,n;this.stop(),null===(e=this.intersection)||void 0===e||e.disconnect(),null===(t=this.gapIntersection)||void 0===t||t.disconnect(),null===(n=this.resizeScroll)||void 0===n||n.disconnect();for(let e of this.scrollTargets)e.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function ri(e,t,n){for(;t;){let i=j.get(t);if(i&&i.parent==e)return i;let s=t.parentNode;t=s!=e.dom?s:n>0?t.nextSibling:t.previousSibling}return null}function oi(e,t){let n=t.startContainer,i=t.startOffset,s=t.endContainer,r=t.endOffset,o=e.docView.domAtPos(e.state.selection.main.anchor);return m(o.node,o.offset,s,r)&&([n,i,s,r]=[s,r,n,i]),{anchorNode:n,anchorOffset:i,focusNode:s,focusOffset:r}}class ai{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=t=>{let{anchor:n}=e.state.selection.main,s={from:this.toEditorPos(t.updateRangeStart),to:this.toEditorPos(t.updateRangeEnd),insert:i.EY.of(t.text.split("\n"))};s.from==this.from&&n<this.from?s.from=n:s.to==this.to&&n>this.to&&(s.to=n),(s.from!=s.to||s.insert.length)&&(this.pendingContextChange=s,e.state.readOnly||Vt(e,s,i.OF.single(this.toEditorPos(t.selectionStart),this.toEditorPos(t.selectionEnd))),this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)))},this.handlers.characterboundsupdate=n=>{let i=[],s=null;for(let t=this.toEditorPos(n.rangeStart),r=this.toEditorPos(n.rangeEnd);t<r;t++){let n=e.coordsForChar(t);s=n&&new DOMRect(n.left,n.top,n.right-n.left,n.bottom-n.top)||s||new DOMRect,i.push(s)}t.updateCharacterBounds(n.rangeStart,i)},this.handlers.textformatupdate=t=>{let n=[];for(let e of t.getTextFormats()){let t=e.underlineStyle,i=e.underlineThickness;if("None"!=t&&"None"!=i){let s=`text-decoration: underline ${"Dashed"==t?"dashed ":"Squiggle"==t?"wavy ":""}${"Thin"==i?1:2}px`;n.push(fe.mark({attributes:{style:s}}).range(this.toEditorPos(e.rangeStart),this.toEditorPos(e.rangeEnd)))}}e.dispatch({effects:it.of(fe.set(n))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{e.inputState.composing=-1,e.inputState.compositionFirstChange=null};for(let e in this.handlers)t.addEventListener(e,this.handlers[e]);this.measureReq={read:e=>{this.editContext.updateControlBounds(e.contentDOM.getBoundingClientRect());let t=u(e.root);t&&t.rangeCount&&this.editContext.updateSelectionBounds(t.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,n=!1,i=this.pendingContextChange;return e.changes.iterChanges(((s,r,o,a,l)=>{if(n)return;let h=l.length-(r-s);if(i&&r>=i.to){if(i.from==s&&i.to==r&&i.insert.eq(l))return i=this.pendingContextChange=null,t+=h,void(this.to+=h);i=null,this.revertPending(e.state)}if(s+=t,(r+=t)<=this.from)this.from+=h,this.to+=h;else if(s<this.to){if(s<this.from||r>this.to||this.to-this.from+l.length>3e4)return void(n=!0);this.editContext.updateText(this.toContextPos(s),this.toContextPos(r),l.toString()),this.to+=h}t+=h})),i&&!n&&this.revertPending(e.state),!n}update(e){let t=this.pendingContextChange;this.applyEdits(e)&&this.rangeIsValid(e.state)?(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state):(this.pendingContextChange=null,this.resetRange(e.state),this.editContext.updateText(0,this.editContext.text.length,e.state.doc.sliceString(this.from,this.to)),this.setSelection(e.state)),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,n=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),i=this.toContextPos(t.head);this.editContext.selectionStart==n&&this.editContext.selectionEnd==i||this.editContext.updateSelection(n,i)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>3e4)}toEditorPos(e){return e+this.from}toContextPos(e){return e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class li{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:n}=e;this.dispatchTransactions=e.dispatchTransactions||n&&(e=>e.forEach((e=>n(e,this))))||(e=>this.update(e)),this.dispatch=this.dispatch.bind(this),this._root=e.root||function(e){for(;e;){if(e&&(9==e.nodeType||11==e.nodeType&&e.host))return e;e=e.assignedSlot||e.parentNode}return null}(e.parent)||document,this.viewState=new zn(e.state||i.$t.create(e)),e.scrollTo&&e.scrollTo.is(nt)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(at).map((e=>new ht(e)));for(let e of this.plugins)e.update(this);this.observer=new si(this),this.inputState=new Wt(this),this.inputState.ensureHandlers(this.plugins),this.docView=new kt(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),(null===(t=document.fonts)||void 0===t?void 0:t.ready)&&document.fonts.ready.then((()=>this.requestMeasure()))}dispatch(...e){let t=1==e.length&&e[0]instanceof i.ZX?e:1==e.length&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(0!=this.updateState)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t,n=!1,s=!1,r=this.state;for(let t of e){if(t.startState!=r)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");r=t.state}if(this.destroyed)return void(this.viewState.state=r);let o=this.hasFocus,a=0,l=null;e.some((e=>e.annotation(gn)))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=bn(r,o),l||(a=1));let h=this.observer.delayedAndroidKey,c=null;if(h?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(r.doc)||!this.state.selection.eq(r.selection))&&(c=null)):this.observer.clear(),r.facet(i.$t.phrases)!=this.state.facet(i.$t.phrases))return this.setState(r);t=wt.create(this,r,e),t.flags|=a;let u=this.viewState.scrollTarget;try{this.updateState=2;for(let t of e){if(u&&(u=u.map(t.changes)),t.scrollIntoView){let{main:e}=t.state.selection;u=new tt(e.empty?e:i.OF.cursor(e.head,e.head>e.anchor?-1:1))}for(let e of t.effects)e.is(nt)&&(u=e.value.clip(this.state))}this.viewState.update(t,u),this.bidiCache=ui.update(this.bidiCache,t.changes),t.empty||(this.updatePlugins(t),this.inputState.update(t)),n=this.docView.update(t),this.state.facet(vt)!=this.styleModules&&this.mountStyles(),s=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some((e=>e.isUserEvent("select.pointer"))))}finally{this.updateState=0}if(t.startState.facet(Kn)!=t.state.facet(Kn)&&(this.viewState.mustMeasureContent=!0),(n||s||u||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!t.empty)for(let e of this.state.facet(Ue))try{e(t)}catch(e){st(this.state,e,"update listener")}(l||c)&&Promise.resolve().then((()=>{l&&this.state==l.startState&&this.dispatch(l),c&&!qt(this,c)&&h.force&&_(this.contentDOM,h.key,h.keyCode)}))}setState(e){if(0!=this.updateState)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed)return void(this.viewState.state=e);this.updateState=2;let t=this.hasFocus;try{for(let e of this.plugins)e.destroy(this);this.viewState=new zn(e),this.plugins=e.facet(at).map((e=>new ht(e))),this.pluginMap.clear();for(let e of this.plugins)e.update(this);this.docView.destroy(),this.docView=new kt(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(at),n=e.state.facet(at);if(t!=n){let i=[];for(let s of n){let n=t.indexOf(s);if(n<0)i.push(new ht(s));else{let t=this.plugins[n];t.mustUpdate=e,i.push(t)}}for(let t of this.plugins)t.mustUpdate!=e&&t.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let t of this.plugins)t.mustUpdate=e;for(let e=0;e<this.plugins.length;e++)this.plugins[e].update(this);t!=n&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(e){st(this.state,e,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey)return this.measureScheduled=-1,void this.requestMeasure();this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,n=this.scrollDOM,i=n.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:r}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(r=-1),this.viewState.scrollAnchorHeight=-1;try{for(let e=0;;e++){if(r<0)if(E(n))s=-1,r=this.viewState.heightMap.height;else{let e=this.viewState.scrollAnchorAt(i);s=e.from,r=e.top}this.updateState=1;let o=this.viewState.measure(this);if(!o&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(e>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let a=[];4&o||([this.measureRequests,a]=[a,this.measureRequests]);let l=a.map((e=>{try{return e.read(this)}catch(e){return st(this.state,e),ci}})),h=wt.create(this,this.state,[]),c=!1;h.flags|=o,t?t.flags|=o:t=h,this.updateState=2,h.empty||(this.updatePlugins(h),this.inputState.update(h),this.updateAttrs(),c=this.docView.update(h),c&&this.docViewUpdate());for(let e=0;e<a.length;e++)if(l[e]!=ci)try{let t=a[e];t.write&&t.write(l[e],this)}catch(e){st(this.state,e)}if(c&&this.docView.updateSelection(!0),!h.viewportChanged&&0==this.measureRequests.length){if(this.viewState.editorHeight){if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,r=-1;continue}{let e=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-r;if(e>1||e<-1){i+=e,n.scrollTop=i/this.scaleY,r=-1;continue}}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let e of this.state.facet(Ue))e(t)}get themeClasses(){return Yn+" "+(this.state.facet(Jn)?Qn:Xn)+" "+this.state.facet(Kn)}updateAttrs(){let e=fi(this,ct,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(rt)?"true":"false",class:"cm-content",style:`${X.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),fi(this,ut,t);let n=this.observer.ignore((()=>{let n=le(this.contentDOM,this.contentAttrs,t),i=le(this.dom,this.editorAttrs,e);return n||i}));return this.editorAttrs=e,this.contentAttrs=t,n}showAnnouncements(e){let t=!0;for(let n of e)for(let e of n.effects)e.is(li.announce)&&(t&&(this.announceDOM.textContent=""),t=!1,this.announceDOM.appendChild(document.createElement("div")).textContent=e.value)}mountStyles(){this.styleModules=this.state.facet(vt);let e=this.state.facet(li.cspNonce);s.G.mount(this.root,this.styleModules.concat(ti).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(2==this.updateState)throw new Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame((()=>this.measure()))),e){if(this.measureRequests.indexOf(e)>-1)return;if(null!=e.key)for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key)return void(this.measureRequests[t]=e);this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(void 0===t||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find((t=>t.spec==e))||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,n){return Bt(this,e,jt(this,e,t,n))}moveByGroup(e,t){return Bt(this,e,jt(this,e,t,(t=>function(e,t,n){let s=e.state.charCategorizer(t),r=s(n);return e=>{let t=s(e);return r==i.Je.Space&&(r=t),r==t}}(this,e.head,t))))}visualLineSide(e,t){let n=this.bidiSpans(e),s=this.textDirectionAt(e.from),r=n[t?n.length-1:0];return i.OF.cursor(r.side(t,s)+e.from,r.forward(!t,s)?1:-1)}moveToLineBoundary(e,t,n=!0){return function(e,t,n,s){let r=Rt(e,t.head),o=s&&r.type==ue.Text&&(e.lineWrapping||r.widgetLineBreaks)?e.coordsAtPos(t.assoc<0&&t.head>r.from?t.head-1:t.head):null;if(o){let t=e.dom.getBoundingClientRect(),s=e.textDirectionAt(r.from),a=e.posAtCoords({x:n==(s==Ce.LTR)?t.right-1:t.left+1,y:(o.top+o.bottom)/2});if(null!=a)return i.OF.cursor(a,n?-1:1)}return i.OF.cursor(n?r.to:r.from,n?-1:1)}(this,e,t,n)}moveVertically(e,t,n){return Bt(this,e,function(e,t,n,s){let r=t.head,o=n?1:-1;if(r==(n?e.state.doc.length:0))return i.OF.cursor(r,t.assoc);let a,l=t.goalColumn,h=e.contentDOM.getBoundingClientRect(),c=e.coordsAtPos(r,t.assoc||-1),u=e.documentTop;if(c)null==l&&(l=c.left-h.left),a=o<0?c.top:c.bottom;else{let t=e.viewState.lineBlockAt(r);null==l&&(l=Math.min(h.right-h.left,e.defaultCharacterWidth*(r-t.from))),a=(o<0?t.top:t.bottom)+u}let f=h.left+l,d=null!=s?s:e.viewState.heightOracle.textHeight>>1;for(let t=0;;t+=10){let n=a+(d+t)*o,s=Dt(e,{x:f,y:n},!1,o);if(n<h.top||n>h.bottom||(o<0?s<r:s>r)){let t=e.docView.coordsForChar(s),r=!t||n<t.top?-1:1;return i.OF.cursor(s,r,void 0,l)}}}(this,e,t,n))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),Dt(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let n=this.docView.coordsAt(e,t);if(!n||n.left==n.right)return n;let i=this.state.doc.lineAt(e),s=this.bidiSpans(i);return x(n,s[Re.find(s,e-i.from,-1,t)].dir==Ce.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(Qe)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>hi)return Fe(e.length);let t,n=this.textDirectionAt(e.from);for(let i of this.bidiCache)if(i.from==e.from&&i.dir==n&&(i.fresh||je(i.isolates,t=gt(this,e))))return i.order;t||(t=gt(this,e));let i=function(e,t,n){if(!e)return[new Re(0,0,t==Oe?1:0)];if(t==Ae&&!n.length&&!Pe.test(e))return Fe(e.length);if(n.length)for(;e.length>Le.length;)Le[Le.length]=256;let i=[],s=t==Ae?0:1;return Ie(e,s,s,n,0,e.length,i),i}(e.text,n,t);return this.bidiCache.push(new ui(e.from,e.to,n,t,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||X.safari&&(null===(e=this.inputState)||void 0===e?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore((()=>{O(this.contentDOM),this.docView.updateSelection()}))}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((9==e.nodeType?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return nt.of(new tt("number"==typeof e?i.OF.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,n=this.viewState.scrollAnchorAt(e);return nt.of(new tt(i.OF.cursor(n.from),"start","start",n.top-e,t,!0))}setTabFocusMode(e){null==e?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:"boolean"==typeof e?this.inputState.tabFocusMode=e?0:-1:0!=this.inputState.tabFocusMode&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return lt.define((()=>({})),{eventHandlers:e})}static domEventObservers(e){return lt.define((()=>({})),{eventObservers:e})}static theme(e,t){let n=s.G.newName(),i=[Kn.of(n),vt.of(ei(`.${n}`,e))];return t&&t.dark&&i.push(Jn.of(!0)),i}static baseTheme(e){return i.Nb.lowest(vt.of(ei("."+Yn,e,Zn)))}static findFromDOM(e){var t;let n=e.querySelector(".cm-content"),i=n&&j.get(n)||j.get(e);return(null===(t=null==i?void 0:i.rootView)||void 0===t?void 0:t.view)||null}}li.styleModule=vt,li.inputHandler=Ke,li.clipboardInputFilter=Ye,li.clipboardOutputFilter=Xe,li.scrollHandler=et,li.focusChangeEffect=Je,li.perLineTextDirection=Qe,li.exceptionSink=Ge,li.updateListener=Ue,li.editable=rt,li.mouseSelectionStyle=We,li.dragMovesSelection=Ve,li.clickAddsSelectionRange=qe,li.decorations=ft,li.outerDecorations=dt,li.atomicRanges=pt,li.bidiIsolatedRanges=mt,li.scrollMargins=bt,li.darkTheme=Jn,li.cspNonce=i.sj.define({combine:e=>e.length?e[0]:""}),li.contentAttributes=ut,li.editorAttributes=ct,li.lineWrapping=li.contentAttributes.of({class:"cm-lineWrapping"}),li.announce=i.Pe.define();const hi=4096,ci={};class ui{constructor(e,t,n,i,s,r){this.from=e,this.to=t,this.dir=n,this.isolates=i,this.fresh=s,this.order=r}static update(e,t){if(t.empty&&!e.some((e=>e.fresh)))return e;let n=[],i=e.length?e[e.length-1].dir:Ce.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let r=e[s];r.dir!=i||t.touchesRange(r.from,r.to)||n.push(new ui(t.mapPos(r.from,1),t.mapPos(r.to,-1),r.dir,r.isolates,!1,r.order))}return n}}function fi(e,t,n){for(let i=e.state.facet(t),s=i.length-1;s>=0;s--){let t=i[s],r="function"==typeof t?t(e):t;r&&re(r,n)}return n}const di=X.mac?"mac":X.windows?"win":X.linux?"linux":"key";function pi(e,t,n){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==n&&t.shiftKey&&(e="Shift-"+e),e}const mi=i.Nb.default(li.domEventHandlers({keydown:(e,t)=>Si(yi(t.state),e,t,"editor")})),gi=i.sj.define({enables:mi}),bi=new WeakMap;function yi(e){let t=e.facet(gi),n=bi.get(t);return n||bi.set(t,n=function(e,t=di){let n=Object.create(null),i=Object.create(null),s=(e,t)=>{let n=i[e];if(null==n)i[e]=t;else if(n!=t)throw new Error("Key binding "+e+" is used both as a regular binding and as a multi-stroke prefix")},r=(e,i,r,o,a)=>{var l,h;let c=n[e]||(n[e]=Object.create(null)),u=i.split(/ (?!$)/).map((e=>function(e,t){const n=e.split(/-(?!$)/);let i,s,r,o,a=n[n.length-1];"Space"==a&&(a=" ");for(let e=0;e<n.length-1;++e){const a=n[e];if(/^(cmd|meta|m)$/i.test(a))o=!0;else if(/^a(lt)?$/i.test(a))i=!0;else if(/^(c|ctrl|control)$/i.test(a))s=!0;else if(/^s(hift)?$/i.test(a))r=!0;else{if(!/^mod$/i.test(a))throw new Error("Unrecognized modifier name: "+a);"mac"==t?o=!0:s=!0}}return i&&(a="Alt-"+a),s&&(a="Ctrl-"+a),o&&(a="Meta-"+a),r&&(a="Shift-"+a),a}(e,t)));for(let t=1;t<u.length;t++){let n=u.slice(0,t).join(" ");s(n,!0),c[n]||(c[n]={preventDefault:!0,stopPropagation:!1,run:[t=>{let i=xi={view:t,prefix:n,scope:e};return setTimeout((()=>{xi==i&&(xi=null)}),wi),!0}]})}let f=u.join(" ");s(f,!1);let d=c[f]||(c[f]={preventDefault:!1,stopPropagation:!1,run:(null===(h=null===(l=c._any)||void 0===l?void 0:l.run)||void 0===h?void 0:h.slice())||[]});r&&d.run.push(r),o&&(d.preventDefault=!0),a&&(d.stopPropagation=!0)};for(let i of e){let e=i.scope?i.scope.split(" "):["editor"];if(i.any)for(let t of e){let e=n[t]||(n[t]=Object.create(null));e._any||(e._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:s}=i;for(let t in e)e[t].run.push((e=>s(e,ki)))}let s=i[t]||i.key;if(s)for(let t of e)r(t,s,i.run,i.preventDefault,i.stopPropagation),i.shift&&r(t,"Shift-"+s,i.shift,i.preventDefault,i.stopPropagation)}return n}(t.reduce(((e,t)=>e.concat(t)),[]))),n}function vi(e,t,n){return Si(yi(e.state),t,e,n)}let xi=null;const wi=4e3;let ki=null;function Si(e,t,n,s){ki=t;let h=function(e){var t=!(a&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||l&&e.shiftKey&&e.key&&1==e.key.length||"Unidentified"==e.key)&&e.key||(e.shiftKey?o:r)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}(t),c=(0,i.vS)(h,0),u=(0,i.Fh)(c)==h.length&&" "!=h,f="",d=!1,p=!1,m=!1;xi&&xi.view==n&&xi.scope==s&&(f=xi.prefix+" ",Yt.indexOf(t.keyCode)<0&&(p=!0,xi=null));let g,b,y=new Set,v=e=>{if(e){for(let t of e.run)if(!y.has(t)&&(y.add(t),t(n)))return e.stopPropagation&&(m=!0),!0;e.preventDefault&&(e.stopPropagation&&(m=!0),p=!0)}return!1},x=e[s];return x&&(v(x[f+pi(h,t,!u)])?d=!0:u&&(t.altKey||t.metaKey||t.ctrlKey)&&!(X.windows&&t.ctrlKey&&t.altKey)&&(g=r[t.keyCode])&&g!=h?(v(x[f+pi(g,t,!0)])||t.shiftKey&&(b=o[t.keyCode])!=h&&b!=g&&v(x[f+pi(b,t,!1)]))&&(d=!0):u&&t.shiftKey&&v(x[f+pi(h,t,!0)])&&(d=!0),!d&&v(x._any)&&(d=!0)),p&&(d=!0),d&&m&&t.stopPropagation(),ki=null,d}class Ci{constructor(e,t,n,i,s){this.className=e,this.left=t,this.top=n,this.width=i,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className==this.className&&(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",null!=this.width&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,n){if(n.empty){let i=e.coordsAtPos(n.head,n.assoc||1);if(!i)return[];let s=Ai(e);return[new Ci(t,i.left-s.left,i.top-s.top,null,i.bottom-i.top)]}return function(e,t,n){if(n.to<=e.viewport.from||n.from>=e.viewport.to)return[];let i=Math.max(n.from,e.viewport.from),s=Math.min(n.to,e.viewport.to),r=e.textDirection==Ce.LTR,o=e.contentDOM,a=o.getBoundingClientRect(),l=Ai(e),h=o.querySelector(".cm-line"),c=h&&window.getComputedStyle(h),u=a.left+(c?parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)):0),f=a.right-(c?parseInt(c.paddingRight):0),d=Rt(e,i),p=Rt(e,s),m=d.type==ue.Text?d:null,g=p.type==ue.Text?p:null;if(m&&(e.lineWrapping||d.widgetLineBreaks)&&(m=Oi(e,i,1,m)),g&&(e.lineWrapping||p.widgetLineBreaks)&&(g=Oi(e,s,-1,g)),m&&g&&m.from==g.from&&m.to==g.to)return y(v(n.from,n.to,m));{let t=m?v(n.from,null,m):x(d,!1),i=g?v(null,n.to,g):x(p,!0),s=[];return(m||d).to<(g||p).from-(m&&g?1:0)||d.widgetLineBreaks>1&&t.bottom+e.defaultLineHeight/2<i.top?s.push(b(u,t.bottom,f,i.top)):t.bottom<i.top&&e.elementAtHeight((t.bottom+i.top)/2).type==ue.Text&&(t.bottom=i.top=(t.bottom+i.top)/2),y(t).concat(s).concat(y(i))}function b(e,n,i,s){return new Ci(t,e-l.left,n-l.top-.01,i-e,s-n+.01)}function y({top:e,bottom:t,horizontal:n}){let i=[];for(let s=0;s<n.length;s+=2)i.push(b(n[s],e,n[s+1],t));return i}function v(t,n,i){let s=1e9,o=-1e9,a=[];function l(t,n,l,h,c){let d=e.coordsAtPos(t,t==i.to?-2:2),p=e.coordsAtPos(l,l==i.from?2:-2);d&&p&&(s=Math.min(d.top,p.top,s),o=Math.max(d.bottom,p.bottom,o),c==Ce.LTR?a.push(r&&n?u:d.left,r&&h?f:p.right):a.push(!r&&h?u:p.left,!r&&n?f:d.right))}let h=null!=t?t:i.from,c=null!=n?n:i.to;for(let i of e.visibleRanges)if(i.to>h&&i.from<c)for(let s=Math.max(i.from,h),r=Math.min(i.to,c);;){let i=e.state.doc.lineAt(s);for(let o of e.bidiSpans(i)){let e=o.from+i.from,a=o.to+i.from;if(e>=r)break;a>s&&l(Math.max(e,s),null==t&&e<=h,Math.min(a,r),null==n&&a>=c,o.dir)}if(s=i.to+1,s>=r)break}return 0==a.length&&l(h,null==t,c,null==n,e.textDirection),{top:s,bottom:o,horizontal:a}}function x(e,t){let n=a.top+(t?e.top:e.bottom);return{top:n,bottom:n,horizontal:[]}}}(e,t,n)}}function Ai(e){let t=e.scrollDOM.getBoundingClientRect();return{left:(e.textDirection==Ce.LTR?t.left:t.right-e.scrollDOM.clientWidth*e.scaleX)-e.scrollDOM.scrollLeft*e.scaleX,top:t.top-e.scrollDOM.scrollTop*e.scaleY}}function Oi(e,t,n,i){let s=e.coordsAtPos(t,2*n);if(!s)return i;let r=e.dom.getBoundingClientRect(),o=(s.top+s.bottom)/2,a=e.posAtCoords({x:r.left+1,y:o}),l=e.posAtCoords({x:r.right-1,y:o});return null==a||null==l?i:{from:Math.max(i.from,Math.min(a,l)),to:Math.min(i.to,Math.max(a,l))}}class Mi{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(_i)!=e.state.facet(_i)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){!1!==this.layer.updateOnDocViewUpdate&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,n=e.facet(_i);for(;t<n.length&&n[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;e==this.scaleX&&t==this.scaleY||(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some(((e,t)=>{return n=e,i=this.drawn[t],!(n.constructor==i.constructor&&n.eq(i));var n,i}))){let t=this.dom.firstChild,n=0;for(let i of e)i.update&&t&&i.constructor&&this.drawn[n].constructor&&i.update(t,this.drawn[n])?(t=t.nextSibling,n++):this.dom.insertBefore(i.draw(),t);for(;t;){let e=t.nextSibling;t.remove(),t=e}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const _i=i.sj.define();function Ti(e){return[lt.define((t=>new Mi(t,e))),_i.of(e)]}const Ei=!X.ios,Ni=i.sj.define({combine:e=>(0,i.QR)(e,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})});function Di(e={}){return[Ni.of(e),Ri,Li,Ii,Ze.of(!0)]}function Pi(e){return e.startState.facet(Ni)!=e.state.facet(Ni)}const Ri=Ti({above:!0,markers(e){let{state:t}=e,n=t.facet(Ni),s=[];for(let r of t.selection.ranges){let o=r==t.selection.main;if(r.empty?!o||Ei:n.drawRangeCursor){let t=o?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",n=r.empty?r:i.OF.cursor(r.head,r.head>r.anchor?-1:1);for(let i of Ci.forRange(e,t,n))s.push(i)}}return s},update(e,t){e.transactions.some((e=>e.selection))&&(t.style.animationName="cm-blink"==t.style.animationName?"cm-blink2":"cm-blink");let n=Pi(e);return n&&ji(e.state,t),e.docChanged||e.selectionSet||n},mount(e,t){ji(t.state,e)},class:"cm-cursorLayer"});function ji(e,t){t.style.animationDuration=e.facet(Ni).cursorBlinkRate+"ms"}const Li=Ti({above:!1,markers:e=>e.state.selection.ranges.map((t=>t.empty?[]:Ci.forRange(e,"cm-selectionBackground",t))).reduce(((e,t)=>e.concat(t))),update:(e,t)=>e.docChanged||e.selectionSet||e.viewportChanged||Pi(e),class:"cm-selectionLayer"}),Bi={".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"}},".cm-content":{"& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}};Ei&&(Bi[".cm-line"].caretColor=Bi[".cm-content"].caretColor="transparent !important");const Ii=i.Nb.highest(li.theme(Bi));function Fi(e,t,n,i,s){t.lastIndex=0;for(let r,o=e.iterRange(n,i),a=n;!o.next().done;a+=o.value.length)if(!o.lineBreak)for(;r=t.exec(o.value);)s(a+r.index,r)}class $i{constructor(e){const{regexp:t,decoration:n,decorate:i,boundary:s,maxLength:r=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,i)this.addMatch=(e,t,n,s)=>i(s,n,n+e[0].length,e,t);else if("function"==typeof n)this.addMatch=(e,t,i,s)=>{let r=n(e,t,i);r&&s(i,i+e[0].length,r)};else{if(!n)throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.addMatch=(e,t,i,s)=>s(i,i+e[0].length,n)}this.boundary=s,this.maxLength=r}createDeco(e){let t=new i.vB,n=t.add.bind(t);for(let{from:t,to:i}of function(e,t){let n=e.visibleRanges;if(1==n.length&&n[0].from==e.viewport.from&&n[0].to==e.viewport.to)return n;let i=[];for(let{from:s,to:r}of n)s=Math.max(e.state.doc.lineAt(s).from,s-t),r=Math.min(e.state.doc.lineAt(r).to,r+t),i.length&&i[i.length-1].to>=s?i[i.length-1].to=r:i.push({from:s,to:r});return i}(e,this.maxLength))Fi(e.state.doc,this.regexp,t,i,((t,i)=>this.addMatch(i,e,t,n)));return t.finish()}updateDeco(e,t){let n=1e9,i=-1;return e.docChanged&&e.changes.iterChanges(((t,s,r,o)=>{o>e.view.viewport.from&&r<e.view.viewport.to&&(n=Math.min(r,n),i=Math.max(o,i))})),e.viewportChanged||i-n>1e3?this.createDeco(e.view):i>-1?this.updateRange(e.view,t.map(e.changes),n,i):t}updateRange(e,t,n,i){for(let s of e.visibleRanges){let r=Math.max(s.from,n),o=Math.min(s.to,i);if(o>r){let n=e.state.doc.lineAt(r),i=n.to<o?e.state.doc.lineAt(o):n,a=Math.max(s.from,n.from),l=Math.min(s.to,i.to);if(this.boundary){for(;r>n.from;r--)if(this.boundary.test(n.text[r-1-n.from])){a=r;break}for(;o<i.to;o++)if(this.boundary.test(i.text[o-i.from])){l=o;break}}let h,c=[],u=(e,t,n)=>c.push(n.range(e,t));if(n==i)for(this.regexp.lastIndex=a-n.from;(h=this.regexp.exec(n.text))&&h.index<l-n.from;)this.addMatch(h,e,h.index+n.from,u);else Fi(e.state.doc,this.regexp,a,l,((t,n)=>this.addMatch(n,e,t,u)));t=t.update({filterFrom:a,filterTo:l,filter:(e,t)=>e<a||t>l,add:c})}}return t}}const zi=null!=/x/.unicode?"gu":"g",Hi=new RegExp("[\0-\b\n--ÂŸÂ­Øœâ€‹â€Žâ€\u2028\u2029â€­â€®â¦â§â©\ufeffï¿¹-ï¿¼]",zi),qi={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Vi=null;const Wi=i.sj.define({combine(e){let t=(0,i.QR)(e,{render:null,specialChars:Hi,addSpecialChars:null});return(t.replaceTabs=!function(){var e;if(null==Vi&&"undefined"!=typeof document&&document.body){let t=document.body.style;Vi=null!=(null!==(e=t.tabSize)&&void 0!==e?e:t.MozTabSize)}return Vi||!1}())&&(t.specialChars=new RegExp("\t|"+t.specialChars.source,zi)),t.addSpecialChars&&(t.specialChars=new RegExp(t.specialChars.source+"|"+t.addSpecialChars.source,zi)),t}});function Gi(e={}){return[Wi.of(e),Ui||(Ui=lt.fromClass(class{constructor(e){this.view=e,this.decorations=fe.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(e.state.facet(Wi)),this.decorations=this.decorator.createDeco(e)}makeDecorator(e){return new $i({regexp:e.specialChars,decoration:(t,n,s)=>{let{doc:r}=n.state,o=(0,i.vS)(t[0],0);if(9==o){let e=r.lineAt(s),t=n.state.tabSize,o=(0,i.y$)(e.text,t,s-e.from);return fe.replace({widget:new Ji((t-o%t)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[o]||(this.decorationCache[o]=fe.replace({widget:new Ki(e,o)}))},boundary:e.replaceTabs?void 0:/[^]/})}update(e){let t=e.state.facet(Wi);e.startState.facet(Wi)!=t?(this.decorator=this.makeDecorator(t),this.decorations=this.decorator.createDeco(e.view)):this.decorations=this.decorator.updateDeco(e,this.decorations)}},{decorations:e=>e.decorations}))]}let Ui=null;class Ki extends ce{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=function(e){return e>=32?"â€¢":10==e?"â¤":String.fromCharCode(9216+e)}(this.code),n=e.state.phrase("Control character")+" "+(qi[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,n,t);if(i)return i;let s=document.createElement("span");return s.textContent=t,s.title=n,s.setAttribute("aria-label",n),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class Ji extends ce{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="\t",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}const Yi=lt.fromClass(class{constructor(){this.height=1e3,this.attrs={style:"padding-bottom: 1000px"}}update(e){let{view:t}=e,n=t.viewState.editorHeight-t.defaultLineHeight-t.documentPadding.top-.5;n>=0&&n!=this.height&&(this.height=n,this.attrs={style:`padding-bottom: ${n}px`})}});function Xi(){return[Yi,ut.of((e=>{var t;return(null===(t=e.plugin(Yi))||void 0===t?void 0:t.attrs)||null}))]}function Qi(){return es}const Zi=fe.line({class:"cm-activeLine"}),es=lt.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.docChanged||e.selectionSet)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let t=-1,n=[];for(let i of e.state.selection.ranges){let s=e.lineBlockAt(i.head);s.from>t&&(n.push(Zi.range(s.from)),t=s.from)}return fe.set(n)}},{decorations:e=>e.decorations}),ts=2e3;function ns(e,t){let n=e.posAtCoords({x:t.clientX,y:t.clientY},!1),s=e.state.doc.lineAt(n),r=n-s.from,o=r>ts?-1:r==s.length?function(e,t){let n=e.coordsAtPos(e.viewport.from);return n?Math.round(Math.abs((n.left-t)/e.defaultCharacterWidth)):-1}(e,t.clientX):(0,i.y$)(s.text,e.state.tabSize,n-s.from);return{line:s.number,col:o,off:r}}function is(e){let t=(null==e?void 0:e.eventFilter)||(e=>e.altKey&&0==e.button);return li.mouseSelectionStyle.of(((e,n)=>t(n)?function(e,t){let n=ns(e,t),s=e.state.selection;return n?{update(e){if(e.docChanged){let t=e.changes.mapPos(e.startState.doc.line(n.line).from),i=e.state.doc.lineAt(t);n={line:i.number,col:n.col,off:Math.min(n.off,i.length)},s=s.map(e.changes)}},get(t,r,o){let a=ns(e,t);if(!a)return s;let l=function(e,t,n){let s=Math.min(t.line,n.line),r=Math.max(t.line,n.line),o=[];if(t.off>ts||n.off>ts||t.col<0||n.col<0){let a=Math.min(t.off,n.off),l=Math.max(t.off,n.off);for(let t=s;t<=r;t++){let n=e.doc.line(t);n.length<=l&&o.push(i.OF.range(n.from+a,n.to+l))}}else{let a=Math.min(t.col,n.col),l=Math.max(t.col,n.col);for(let t=s;t<=r;t++){let n=e.doc.line(t),s=(0,i.kn)(n.text,a,e.tabSize,!0);if(s<0)o.push(i.OF.cursor(n.to));else{let t=(0,i.kn)(n.text,l,e.tabSize);o.push(i.OF.range(n.from+s,n.from+t))}}}return o}(e.state,n,a);return l.length?o?i.OF.create(l.concat(s.ranges)):i.OF.create(l):s}}:null}(e,n):null))}const ss={Alt:[18,e=>!!e.altKey],Control:[17,e=>!!e.ctrlKey],Shift:[16,e=>!!e.shiftKey],Meta:[91,e=>!!e.metaKey]},rs={style:"cursor: crosshair"};function os(e={}){let[t,n]=ss[e.key||"Alt"],i=lt.fromClass(class{constructor(e){this.view=e,this.isDown=!1}set(e){this.isDown!=e&&(this.isDown=e,this.view.update([]))}},{eventObservers:{keydown(e){this.set(e.keyCode==t||n(e))},keyup(e){e.keyCode!=t&&n(e)||this.set(!1)},mousemove(e){this.set(n(e))}}});return[i,li.contentAttributes.of((e=>{var t;return(null===(t=e.plugin(i))||void 0===t?void 0:t.isDown)?rs:null}))]}const as="-10000px";class ls{constructor(e,t,n,i){this.facet=t,this.createTooltipView=n,this.removeTooltipView=i,this.input=e.state.facet(t),this.tooltips=this.input.filter((e=>e));let s=null;this.tooltipViews=this.tooltips.map((e=>s=n(e,s)))}update(e,t){var n;let i=e.state.facet(this.facet),s=i.filter((e=>e));if(i===this.input){for(let t of this.tooltipViews)t.update&&t.update(e);return!1}let r=[],o=t?[]:null;for(let n=0;n<s.length;n++){let i=s[n],a=-1;if(i){for(let e=0;e<this.tooltips.length;e++){let t=this.tooltips[e];t&&t.create==i.create&&(a=e)}if(a<0)r[n]=this.createTooltipView(i,n?r[n-1]:null),o&&(o[n]=!!i.above);else{let i=r[n]=this.tooltipViews[a];o&&(o[n]=t[a]),i.update&&i.update(e)}}}for(let e of this.tooltipViews)r.indexOf(e)<0&&(this.removeTooltipView(e),null===(n=e.destroy)||void 0===n||n.call(e));return t&&(o.forEach(((e,n)=>t[n]=e)),t.length=o.length),this.input=i,this.tooltips=s,this.tooltipViews=r,!0}}function hs(e={}){return us.of(e)}function cs(e){let{win:t}=e;return{top:0,left:0,bottom:t.innerHeight,right:t.innerWidth}}const us=i.sj.define({combine:e=>{var t,n,i;return{position:X.ios?"absolute":(null===(t=e.find((e=>e.position)))||void 0===t?void 0:t.position)||"fixed",parent:(null===(n=e.find((e=>e.parent)))||void 0===n?void 0:n.parent)||null,tooltipSpace:(null===(i=e.find((e=>e.tooltipSpace)))||void 0===i?void 0:i.tooltipSpace)||cs}}}),fs=new WeakMap,ds=lt.fromClass(class{constructor(e){this.view=e,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let t=e.state.facet(us);this.position=t.position,this.parent=t.parent,this.classes=e.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver="function"==typeof ResizeObserver?new ResizeObserver((()=>this.measureSoon())):null,this.manager=new ls(e,gs,((e,t)=>this.createTooltip(e,t)),(e=>{this.resizeObserver&&this.resizeObserver.unobserve(e.dom),e.dom.remove()})),this.above=this.manager.tooltips.map((e=>!!e.above)),this.intersectionObserver="function"==typeof IntersectionObserver?new IntersectionObserver((e=>{Date.now()>this.lastTransaction-50&&e.length>0&&e[e.length-1].intersectionRatio<1&&this.measureSoon()}),{threshold:[1]}):null,this.observeIntersection(),e.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let e of this.manager.tooltipViews)this.intersectionObserver.observe(e.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout((()=>{this.measureTimeout=-1,this.maybeMeasure()}),50))}update(e){e.transactions.length&&(this.lastTransaction=Date.now());let t=this.manager.update(e,this.above);t&&this.observeIntersection();let n=t||e.geometryChanged,i=e.state.facet(us);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let e of this.manager.tooltipViews)e.dom.style.position=this.position;n=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let e of this.manager.tooltipViews)this.container.appendChild(e.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(e,t){let n=e.create(this.view),i=t?t.dom:null;if(n.dom.classList.add("cm-tooltip"),e.arrow&&!n.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let e=document.createElement("div");e.className="cm-tooltip-arrow",n.dom.appendChild(e)}return n.dom.style.position=this.position,n.dom.style.top=as,n.dom.style.left="0px",this.container.insertBefore(n.dom,i),n.mount&&n.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(n.dom),n}destroy(){var e,t,n;this.view.win.removeEventListener("resize",this.measureSoon);for(let t of this.manager.tooltipViews)t.dom.remove(),null===(e=t.destroy)||void 0===e||e.call(t);this.parent&&this.container.remove(),null===(t=this.resizeObserver)||void 0===t||t.disconnect(),null===(n=this.intersectionObserver)||void 0===n||n.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let e=this.view.dom.getBoundingClientRect(),t=1,n=1,i=!1;if("fixed"==this.position&&this.manager.tooltipViews.length){let{dom:e}=this.manager.tooltipViews[0];if(X.gecko)i=e.offsetParent!=this.container.ownerDocument.body;else if(e.style.top==as&&"0px"==e.style.left){let t=e.getBoundingClientRect();i=Math.abs(t.top+1e4)>1||Math.abs(t.left)>1}}if(i||"absolute"==this.position)if(this.parent){let e=this.parent.getBoundingClientRect();e.width&&e.height&&(t=e.width/this.parent.offsetWidth,n=e.height/this.parent.offsetHeight)}else({scaleX:t,scaleY:n}=this.view.viewState);return{editor:e,parent:this.parent?this.container.getBoundingClientRect():e,pos:this.manager.tooltips.map(((e,t)=>{let n=this.manager.tooltipViews[t];return n.getCoords?n.getCoords(e.pos):this.view.coordsAtPos(e.pos)})),size:this.manager.tooltipViews.map((({dom:e})=>e.getBoundingClientRect())),space:this.view.state.facet(us).tooltipSpace(this.view),scaleX:t,scaleY:n,makeAbsolute:i}}writeMeasure(e){var t;if(e.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let e of this.manager.tooltipViews)e.dom.style.position="absolute"}let{editor:n,space:i,scaleX:s,scaleY:r}=e,o=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],h=this.manager.tooltipViews[a],{dom:c}=h,u=e.pos[a],f=e.size[a];if(!u||u.bottom<=Math.max(n.top,i.top)||u.top>=Math.min(n.bottom,i.bottom)||u.right<Math.max(n.left,i.left)-.1||u.left>Math.min(n.right,i.right)+.1){c.style.top=as;continue}let d=l.arrow?h.dom.querySelector(".cm-tooltip-arrow"):null,p=d?7:0,m=f.right-f.left,g=null!==(t=fs.get(h))&&void 0!==t?t:f.bottom-f.top,b=h.offset||ms,y=this.view.textDirection==Ce.LTR,v=f.width>i.right-i.left?y?i.left:i.right-f.width:y?Math.max(i.left,Math.min(u.left-(d?14:0)+b.x,i.right-m)):Math.min(Math.max(i.left,u.left-m+(d?14:0)-b.x),i.right-m),x=this.above[a];!l.strictSide&&(x?u.top-(f.bottom-f.top)-b.y<i.top:u.bottom+(f.bottom-f.top)+b.y>i.bottom)&&x==i.bottom-u.bottom>u.top-i.top&&(x=this.above[a]=!x);let w=(x?u.top-i.top:i.bottom-u.bottom)-p;if(w<g&&!1!==h.resize){if(w<this.view.defaultLineHeight){c.style.top=as;continue}fs.set(h,g),c.style.height=(g=w)/r+"px"}else c.style.height&&(c.style.height="");let k=x?u.top-g-p-b.y:u.bottom+p+b.y,S=v+m;if(!0!==h.overlap)for(let e of o)e.left<S&&e.right>v&&e.top<k+g&&e.bottom>k&&(k=x?e.top-g-2-p:e.bottom+p+2);if("absolute"==this.position?(c.style.top=(k-e.parent.top)/r+"px",c.style.left=(v-e.parent.left)/s+"px"):(c.style.top=k/r+"px",c.style.left=v/s+"px"),d){let e=u.left+(y?b.x:-b.x)-(v+14-7);d.style.left=e/s+"px"}!0!==h.overlap&&o.push({left:v,top:k,right:S,bottom:k+g}),c.classList.toggle("cm-tooltip-above",x),c.classList.toggle("cm-tooltip-below",!x),h.positioned&&h.positioned(e.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let e of this.manager.tooltipViews)e.dom.style.top=as}},{eventObservers:{scroll(){this.maybeMeasure()}}}),ps=li.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),ms={x:0,y:0},gs=i.sj.define({enables:[ds,ps]});function bs(e,t){let n=e.plugin(ds);if(!n)return null;let i=n.manager.tooltips.indexOf(t);return i<0?null:n.manager.tooltipViews[i]}const ys=i.sj.define({combine(e){let t,n;for(let i of e)t=t||i.topContainer,n=n||i.bottomContainer;return{topContainer:t,bottomContainer:n}}});function vs(e,t){let n=e.plugin(xs),i=n?n.specs.indexOf(t):-1;return i>-1?n.panels[i]:null}const xs=lt.fromClass(class{constructor(e){this.input=e.state.facet(Ss),this.specs=this.input.filter((e=>e)),this.panels=this.specs.map((t=>t(e)));let t=e.state.facet(ys);this.top=new ws(e,!0,t.topContainer),this.bottom=new ws(e,!1,t.bottomContainer),this.top.sync(this.panels.filter((e=>e.top))),this.bottom.sync(this.panels.filter((e=>!e.top)));for(let e of this.panels)e.dom.classList.add("cm-panel"),e.mount&&e.mount()}update(e){let t=e.state.facet(ys);this.top.container!=t.topContainer&&(this.top.sync([]),this.top=new ws(e.view,!0,t.topContainer)),this.bottom.container!=t.bottomContainer&&(this.bottom.sync([]),this.bottom=new ws(e.view,!1,t.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=e.state.facet(Ss);if(n!=this.input){let t=n.filter((e=>e)),i=[],s=[],r=[],o=[];for(let n of t){let t,a=this.specs.indexOf(n);a<0?(t=n(e.view),o.push(t)):(t=this.panels[a],t.update&&t.update(e)),i.push(t),(t.top?s:r).push(t)}this.specs=t,this.panels=i,this.top.sync(s),this.bottom.sync(r);for(let e of o)e.dom.classList.add("cm-panel"),e.mount&&e.mount()}else for(let t of this.panels)t.update&&t.update(e)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:e=>li.scrollMargins.of((t=>{let n=t.plugin(e);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}}))});class ws{constructor(e,t,n){this.view=e,this.top=t,this.container=n,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(0==this.panels.length)return void(this.dom&&(this.dom.remove(),this.dom=void 0));if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let e=this.container||this.view.dom;e.insertBefore(this.dom,this.top?e.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=ks(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=ks(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(this.container&&this.classes!=this.view.themeClasses){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function ks(e){let t=e.nextSibling;return e.remove(),t}const Ss=i.sj.define({enables:xs});class Cs extends i.FB{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Cs.prototype.elementClass="",Cs.prototype.toDOM=void 0,Cs.prototype.mapMode=i.iR.TrackBefore,Cs.prototype.startSide=Cs.prototype.endSide=-1,Cs.prototype.point=!0;const As=i.sj.define(),Os=i.sj.define(),Ms={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>i.om.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},_s=i.sj.define();function Ts(e){return[Ns(),_s.of(Object.assign(Object.assign({},Ms),e))]}const Es=i.sj.define({combine:e=>e.some((e=>e))});function Ns(e){let t=[Ds];return e&&!1===e.fixed&&t.push(Es.of(!0)),t}const Ds=lt.fromClass(class{constructor(e){this.view=e,this.prevViewport=e.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=e.state.facet(_s).map((t=>new Ls(e,t)));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!e.state.facet(Es),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),e.scrollDOM.insertBefore(this.dom,e.contentDOM)}update(e){if(this.updateGutters(e)){let t=this.prevViewport,n=e.view.viewport,i=Math.min(t.to,n.to)-Math.max(t.from,n.from);this.syncGutters(i<.8*(n.to-n.from))}e.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(Es)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=e.view.viewport}syncGutters(e){let t=this.dom.nextSibling;e&&this.dom.remove();let n=i.om.iter(this.view.state.facet(As),this.view.viewport.from),s=[],r=this.gutters.map((e=>new js(e,this.view.viewport,-this.view.documentPadding.top)));for(let e of this.view.viewportLineBlocks)if(s.length&&(s=[]),Array.isArray(e.type)){let t=!0;for(let i of e.type)if(i.type==ue.Text&&t){Rs(n,s,i.from);for(let e of r)e.line(this.view,i,s);t=!1}else if(i.widget)for(let e of r)e.widget(this.view,i)}else if(e.type==ue.Text){Rs(n,s,e.from);for(let t of r)t.line(this.view,e,s)}else if(e.widget)for(let t of r)t.widget(this.view,e);for(let e of r)e.finish();e&&this.view.scrollDOM.insertBefore(this.dom,t)}updateGutters(e){let t=e.startState.facet(_s),n=e.state.facet(_s),s=e.docChanged||e.heightChanged||e.viewportChanged||!i.om.eq(e.startState.facet(As),e.state.facet(As),e.view.viewport.from,e.view.viewport.to);if(t==n)for(let t of this.gutters)t.update(e)&&(s=!0);else{s=!0;let i=[];for(let s of n){let n=t.indexOf(s);n<0?i.push(new Ls(this.view,s)):(this.gutters[n].update(e),i.push(this.gutters[n]))}for(let e of this.gutters)e.dom.remove(),i.indexOf(e)<0&&e.destroy();for(let e of i)this.dom.appendChild(e.dom);this.gutters=i}return s}destroy(){for(let e of this.gutters)e.destroy();this.dom.remove()}},{provide:e=>li.scrollMargins.of((t=>{let n=t.plugin(e);return n&&0!=n.gutters.length&&n.fixed?t.textDirection==Ce.LTR?{left:n.dom.offsetWidth*t.scaleX}:{right:n.dom.offsetWidth*t.scaleX}:null}))});function Ps(e){return Array.isArray(e)?e:[e]}function Rs(e,t,n){for(;e.value&&e.from<=n;)e.from==n&&t.push(e.value),e.next()}class js{constructor(e,t,n){this.gutter=e,this.height=n,this.i=0,this.cursor=i.om.iter(e.markers,t.from)}addElement(e,t,n){let{gutter:i}=this,s=(t.top-this.height)/e.scaleY,r=t.height/e.scaleY;if(this.i==i.elements.length){let t=new Bs(e,r,s,n);i.elements.push(t),i.dom.appendChild(t.dom)}else i.elements[this.i].update(e,r,s,n);this.height=t.bottom,this.i++}line(e,t,n){let i=[];Rs(this.cursor,i,t.from),n.length&&(i=i.concat(n));let s=this.gutter.config.lineMarker(e,t,i);s&&i.unshift(s);let r=this.gutter;(0!=i.length||r.config.renderEmptyElements)&&this.addElement(e,t,i)}widget(e,t){let n=this.gutter.config.widgetMarker(e,t.widget,t),i=n?[n]:null;for(let n of e.state.facet(Os)){let s=n(e,t.widget,t);s&&(i||(i=[])).push(s)}i&&this.addElement(e,t,i)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class Ls{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let n in t.domEventHandlers)this.dom.addEventListener(n,(i=>{let s,r=i.target;if(r!=this.dom&&this.dom.contains(r)){for(;r.parentNode!=this.dom;)r=r.parentNode;let e=r.getBoundingClientRect();s=(e.top+e.bottom)/2}else s=i.clientY;let o=e.lineBlockAtHeight(s-e.documentTop);t.domEventHandlers[n](e,o,i)&&i.preventDefault()}));this.markers=Ps(t.markers(e)),t.initialSpacer&&(this.spacer=new Bs(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=Ps(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let t=this.config.updateSpacer(this.spacer.markers[0],e);t!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[t])}let n=e.view.viewport;return!i.om.eq(this.markers,t,n.from,n.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(e)}destroy(){for(let e of this.elements)e.destroy()}}class Bs{constructor(e,t,n,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,n,i)}update(e,t,n,i){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),function(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].compare(t[n]))return!1;return!0}(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,t){let n="cm-gutterElement",i=this.dom.firstChild;for(let s=0,r=0;;){let o=r,a=s<t.length?t[s++]:null,l=!1;if(a){let e=a.elementClass;e&&(n+=" "+e);for(let e=r;e<this.markers.length;e++)if(this.markers[e].compare(a)){o=e,l=!0;break}}else o=this.markers.length;for(;r<o;){let e=this.markers[r++];if(e.toDOM){e.destroy(i);let t=i.nextSibling;i.remove(),i=t}}if(!a)break;a.toDOM&&(l?i=i.nextSibling:this.dom.insertBefore(a.toDOM(e),i)),l&&r++}this.dom.className=n,this.markers=t}destroy(){this.setMarkers(null,[])}}const Is=i.sj.define(),Fs=i.sj.define(),$s=i.sj.define({combine:e=>(0,i.QR)(e,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let n=Object.assign({},e);for(let e in t){let i=n[e],s=t[e];n[e]=i?(e,t,n)=>i(e,t,n)||s(e,t,n):s}return n}})});class zs extends Cs{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Hs(e,t){return e.state.facet($s).formatNumber(t,e.state)}const qs=_s.compute([$s],(e=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers:e=>e.state.facet(Is),lineMarker:(e,t,n)=>n.some((e=>e.toDOM))?null:new zs(Hs(e,e.state.doc.lineAt(t.from).number)),widgetMarker:(e,t,n)=>{for(let i of e.state.facet(Fs)){let s=i(e,t,n);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet($s)!=e.state.facet($s),initialSpacer:e=>new zs(Hs(e,Ws(e.state.doc.lines))),updateSpacer(e,t){let n=Hs(t.view,Ws(t.view.state.doc.lines));return n==e.number?e:new zs(n)},domEventHandlers:e.facet($s).domEventHandlers})));function Vs(e={}){return[$s.of(e),Ns(),qs]}function Ws(e){let t=9;for(;t<e;)t=10*t+9;return t}const Gs=new Map;function Us(e){return lt.define((t=>({decorations:e.createDeco(t),update(t){this.decorations=e.updateDeco(t,this.decorations)}})),{decorations:e=>e.decorations})}const Ks=Us(new $i({regexp:/\t| +/g,decoration:e=>function(e){let t=Gs.get(e);return t||Gs.set(e,t=fe.mark({attributes:"\t"===e?{class:"cm-highlightTab"}:{class:"cm-highlightSpace","data-display":e.replace(/ /g,"Â·")}})),t}(e[0]),boundary:/\S/}));function Js(){return Ks}const Ys=Us(new $i({regexp:/\s+$/g,decoration:fe.mark({class:"cm-trailingSpace"}),boundary:/\S/}));function Xs(){return Ys}},79066:(e,t,n)=>{"use strict";n.d(t,{$g:()=>L,PH:()=>p,Qj:()=>d,RY:()=>D,Z6:()=>h,cF:()=>i,fI:()=>c,iX:()=>R,rr:()=>P,uY:()=>o});const i=1024;let s=0;class r{constructor(e,t){this.from=e,this.to=t}}class o{constructor(e={}){this.id=s++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof e&&(e=h.match(e)),t=>{let n=e(t);return void 0===n?null:[this,n]}}}o.closedBy=new o({deserialize:e=>e.split(" ")}),o.openedBy=new o({deserialize:e=>e.split(" ")}),o.group=new o({deserialize:e=>e.split(" ")}),o.isolate=new o({deserialize:e=>{if(e&&"rtl"!=e&&"ltr"!=e&&"auto"!=e)throw new RangeError("Invalid value for isolate: "+e);return e||"auto"}}),o.contextHash=new o({perNode:!0}),o.lookAhead=new o({perNode:!0}),o.mounted=new o({perNode:!0});class a{constructor(e,t,n){this.tree=e,this.overlay=t,this.parser=n}static get(e){return e&&e.props&&e.props[o.mounted.id]}}const l=Object.create(null);class h{constructor(e,t,n,i=0){this.name=e,this.props=t,this.id=n,this.flags=i}static define(e){let t=e.props&&e.props.length?Object.create(null):l,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(null==e.name?8:0),i=new h(e.name||"",t,e.id,n);if(e.props)for(let n of e.props)if(Array.isArray(n)||(n=n(i)),n){if(n[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[n[0].id]=n[1]}return i}prop(e){return this.props[e.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(e){if("string"==typeof e){if(this.name==e)return!0;let t=this.prop(o.group);return!!t&&t.indexOf(e)>-1}return this.id==e}static match(e){let t=Object.create(null);for(let n in e)for(let i of n.split(" "))t[i]=e[n];return e=>{for(let n=e.prop(o.group),i=-1;i<(n?n.length:0);i++){let s=t[i<0?e.name:n[i]];if(s)return s}}}}h.none=new h("",Object.create(null),0,8);class c{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let n of this.types){let i=null;for(let t of e){let e=t(n);e&&(i||(i=Object.assign({},n.props)),i[e[0].id]=e[1])}t.push(i?new h(n.name,i,n.id,n.flags):n)}return new c(t)}}const u=new WeakMap,f=new WeakMap;var d;!function(e){e[e.ExcludeBuffers=1]="ExcludeBuffers",e[e.IncludeAnonymous=2]="IncludeAnonymous",e[e.IgnoreMounts=4]="IgnoreMounts",e[e.IgnoreOverlays=8]="IgnoreOverlays"}(d||(d={}));class p{constructor(e,t,n,i,s){if(this.type=e,this.children=t,this.positions=n,this.length=i,this.props=null,s&&s.length){this.props=Object.create(null);for(let[e,t]of s)this.props["number"==typeof e?e:e.id]=t}}toString(){let e=a.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let e of this.children){let n=e.toString();n&&(t&&(t+=","),t+=n)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new M(this.topNode,e)}cursorAt(e,t=0,n=0){let i=u.get(this)||this.topNode,s=new M(i);return s.moveTo(e,t),u.set(this,s._tree),s}get topNode(){return new x(this,0,0,null)}resolve(e,t=0){let n=y(u.get(this)||this.topNode,e,t,!1);return u.set(this,n),n}resolveInner(e,t=0){let n=y(f.get(this)||this.topNode,e,t,!0);return f.set(this,n),n}resolveStack(e,t=0){return function(e,t,n){let i=e.resolveInner(t,n),s=null;for(let e=i instanceof x?i:i.context.parent;e;e=e.parent)if(e.index<0){let r=e.parent;(s||(s=[i])).push(r.resolve(t,n)),e=r}else{let r=a.get(e.tree);if(r&&r.overlay&&r.overlay[0].from<=t&&r.overlay[r.overlay.length-1].to>=t){let o=new x(r.tree,r.overlay[0].from+e.from,-1,e);(s||(s=[i])).push(y(o,t,n,!1))}}return s?A(s):i}(this,e,t)}iterate(e){let{enter:t,leave:n,from:i=0,to:s=this.length}=e,r=e.mode||0,o=(r&d.IncludeAnonymous)>0;for(let e=this.cursor(r|d.IncludeAnonymous);;){let r=!1;if(e.from<=s&&e.to>=i&&(!o&&e.type.isAnonymous||!1!==t(e))){if(e.firstChild())continue;r=!0}for(;r&&n&&(o||!e.type.isAnonymous)&&n(e),!e.nextSibling();){if(!e.parent())return;r=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:N(h.none,this.children,this.positions,0,this.children.length,0,this.length,((e,t,n)=>new p(this.type,e,t,n,this.propValues)),e.makeTree||((e,t,n)=>new p(h.none,e,t,n)))}static build(e){return function(e){var t;let{buffer:n,nodeSet:s,maxBufferLength:r=i,reused:a=[],minRepeatType:l=s.types.length}=e,h=Array.isArray(n)?new m(n,n.length):n,c=s.types,u=0,f=0;function d(e,t,n,i,m,w){let{id:k,start:S,end:C,size:A}=h,O=f;for(;A<0;){if(h.next(),-1==A){let t=a[k];return n.push(t),void i.push(S-e)}if(-3==A)return void(u=k);if(-4==A)return void(f=k);throw new RangeError(`Unrecognized record size: ${A}`)}let M,_,T=c[k],E=S-e;if(C-S<=r&&(_=function(e,t){let n=h.fork(),i=0,s=0,o=0,a=n.end-r,c={size:0,start:0,skip:0};e:for(let r=n.pos-e;n.pos>r;){let e=n.size;if(n.id==t&&e>=0){c.size=i,c.start=s,c.skip=o,o+=4,i+=4,n.next();continue}let h=n.pos-e;if(e<0||h<r||n.start<a)break;let u=n.id>=l?4:0,f=n.start;for(n.next();n.pos>h;){if(n.size<0){if(-3!=n.size)break e;u+=4}else n.id>=l&&(u+=4);n.next()}s=f,i+=e,o+=u}return(t<0||i==e)&&(c.size=i,c.start=s,c.skip=o),c.size>4?c:void 0}(h.pos-t,m))){let t=new Uint16Array(_.size-_.skip),n=h.pos-_.size,i=t.length;for(;h.pos>n;)i=x(_.start,t,i);M=new g(t,C-_.start,s),E=_.start-e}else{let e=h.pos-A;h.next();let t=[],n=[],i=k>=l?k:-1,s=0,a=C;for(;h.pos>e;)i>=0&&h.id==i&&h.size>=0?(h.end<=a-r&&(y(t,n,S,s,h.end,a,i,O),s=t.length,a=h.end),h.next()):w>2500?b(S,e,t,n):d(S,e,t,n,i,w+1);if(i>=0&&s>0&&s<t.length&&y(t,n,S,s,S,a,i,O),t.reverse(),n.reverse(),i>-1&&s>0){let e=function(e){return(t,n,i)=>{let s,r,a=0,l=t.length-1;if(l>=0&&(s=t[l])instanceof p){if(!l&&s.type==e&&s.length==i)return s;(r=s.prop(o.lookAhead))&&(a=n[l]+s.length+r)}return v(e,t,n,i,a)}}(T);M=N(T,t,n,0,t.length,0,C-S,e,e)}else M=v(T,t,n,C-S,O-C)}n.push(M),i.push(E)}function b(e,t,n,i){let o=[],a=0,l=-1;for(;h.pos>t;){let{id:e,start:t,end:n,size:i}=h;if(i>4)h.next();else{if(l>-1&&t<l)break;l<0&&(l=n-r),o.push(e,t,n),a++,h.next()}}if(a){let t=new Uint16Array(4*a),r=o[o.length-2];for(let e=o.length-3,n=0;e>=0;e-=3)t[n++]=o[e],t[n++]=o[e+1]-r,t[n++]=o[e+2]-r,t[n++]=n;n.push(new g(t,o[2]-r,s)),i.push(r-e)}}function y(e,t,n,i,r,o,a,l){let h=[],c=[];for(;e.length>i;)h.push(e.pop()),c.push(t.pop()+n-r);e.push(v(s.types[a],h,c,o-r,l-o)),t.push(r-n)}function v(e,t,n,i,s=0,r){if(u){let e=[o.contextHash,u];r=r?[e].concat(r):[e]}if(s>25){let e=[o.lookAhead,s];r=r?[e].concat(r):[e]}return new p(e,t,n,i,r)}function x(e,t,n){let{id:i,start:s,end:r,size:o}=h;if(h.next(),o>=0&&i<l){let a=n;if(o>4){let i=h.pos-(o-4);for(;h.pos>i;)n=x(e,t,n)}t[--n]=a,t[--n]=r-e,t[--n]=s-e,t[--n]=i}else-3==o?u=i:-4==o&&(f=i);return n}let w=[],k=[];for(;h.pos>0;)d(e.start||0,e.bufferStart||0,w,k,-1,0);let S=null!==(t=e.length)&&void 0!==t?t:w.length?k[0]+w[0].length:0;return new p(c[e.topID],w.reverse(),k.reverse(),S)}(e)}}p.empty=new p(h.none,[],[],0);class m{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new m(this.buffer,this.index)}}class g{constructor(e,t,n){this.buffer=e,this.length=t,this.set=n}get type(){return h.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],n=this.buffer[e+3],i=this.set.types[t],s=i.name;if(/\W/.test(s)&&!i.isError&&(s=JSON.stringify(s)),n==(e+=4))return s;let r=[];for(;e<n;)r.push(this.childString(e)),e=this.buffer[e+3];return s+"("+r.join(",")+")"}findChild(e,t,n,i,s){let{buffer:r}=this,o=-1;for(let a=e;a!=t&&!(b(s,i,r[a+1],r[a+2])&&(o=a,n>0));a=r[a+3]);return o}slice(e,t,n){let i=this.buffer,s=new Uint16Array(t-e),r=0;for(let o=e,a=0;o<t;){s[a++]=i[o++],s[a++]=i[o++]-n;let t=s[a++]=i[o++]-n;s[a++]=i[o++]-e,r=Math.max(r,t)}return new g(s,r,this.set)}}function b(e,t,n,i){switch(e){case-2:return n<t;case-1:return i>=t&&n<t;case 0:return n<t&&i>t;case 1:return n<=t&&i>t;case 2:return i>t;case 4:return!0}}function y(e,t,n,i){for(var s;e.from==e.to||(n<1?e.from>=t:e.from>t)||(n>-1?e.to<=t:e.to<t);){let t=!i&&e instanceof x&&e.index<0?null:e.parent;if(!t)return e;e=t}let r=i?0:d.IgnoreOverlays;if(i)for(let i=e,o=i.parent;o;i=o,o=i.parent)i instanceof x&&i.index<0&&(null===(s=o.enter(t,n,r))||void 0===s?void 0:s.from)!=i.from&&(e=o);for(;;){let i=e.enter(t,n,r);if(!i)return e;e=i}}class v{cursor(e=0){return new M(this,e)}getChild(e,t=null,n=null){let i=w(this,e,t,n);return i.length?i[0]:null}getChildren(e,t=null,n=null){return w(this,e,t,n)}resolve(e,t=0){return y(this,e,t,!1)}resolveInner(e,t=0){return y(this,e,t,!0)}matchContext(e){return k(this,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),n=this;for(;t;){let e=t.lastChild;if(!e||e.to!=t.to)break;e.type.isError&&e.from==e.to?(n=t,t=e.prevSibling):t=e}return n}get node(){return this}get next(){return this.parent}}class x extends v{constructor(e,t,n,i){super(),this._tree=e,this.from=t,this.index=n,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,n,i,s=0){for(let r=this;;){for(let{children:o,positions:l}=r._tree,h=t>0?o.length:-1;e!=h;e+=t){let h=o[e],c=l[e]+r.from;if(b(i,n,c,c+h.length))if(h instanceof g){if(s&d.ExcludeBuffers)continue;let o=h.findChild(0,h.buffer.length,t,n-c,i);if(o>-1)return new C(new S(r,h,e,c),null,o)}else if(s&d.IncludeAnonymous||!h.type.isAnonymous||_(h)){let o;if(!(s&d.IgnoreMounts)&&(o=a.get(h))&&!o.overlay)return new x(o.tree,c,e,r);let l=new x(h,c,e,r);return s&d.IncludeAnonymous||!l.type.isAnonymous?l:l.nextChild(t<0?h.children.length-1:0,t,n,i)}}if(s&d.IncludeAnonymous||!r.type.isAnonymous)return null;if(e=r.index>=0?r.index+t:t<0?-1:r._parent._tree.children.length,r=r._parent,!r)return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,n=0){let i;if(!(n&d.IgnoreOverlays)&&(i=a.get(this._tree))&&i.overlay){let n=e-this.from;for(let{from:e,to:s}of i.overlay)if((t>0?e<=n:e<n)&&(t<0?s>=n:s>n))return new x(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,n)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function w(e,t,n,i){let s=e.cursor(),r=[];if(!s.firstChild())return r;if(null!=n)for(let e=!1;!e;)if(e=s.type.is(n),!s.nextSibling())return r;for(;;){if(null!=i&&s.type.is(i))return r;if(s.type.is(t)&&r.push(s.node),!s.nextSibling())return null==i?r:[]}}function k(e,t,n=t.length-1){for(let i=e.parent;n>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(t[n]&&t[n]!=i.name)return!1;n--}}return!0}class S{constructor(e,t,n,i){this.parent=e,this.buffer=t,this.index=n,this.start=i}}class C extends v{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,n){super(),this.context=e,this._parent=t,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}child(e,t,n){let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.context.start,n);return s<0?null:new C(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,n=0){if(n&d.ExcludeBuffers)return null;let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return s<0?null:new C(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new C(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new C(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:n}=this.context,i=this.index+4,s=n.buffer[this.index+3];if(s>i){let r=n.buffer[this.index+1];e.push(n.slice(i,s,r)),t.push(0)}return new p(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function A(e){if(!e.length)return null;let t=0,n=e[0];for(let i=1;i<e.length;i++){let s=e[i];(s.from>n.from||s.to<n.to)&&(n=s,t=i)}let i=n instanceof x&&n.index<0?null:n.parent,s=e.slice();return i?s[t]=i:s.splice(t,1),new O(s,n)}class O{constructor(e,t){this.heads=e,this.node=t}get next(){return A(this.heads)}}class M{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof x)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let t=e._parent;t;t=t._parent)this.stack.unshift(t.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return!!e&&(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0)}yieldBuf(e,t){this.index=e;let{start:n,buffer:i}=this.buffer;return this.type=t||i.set.types[i.buffer[e]],this.from=n+i.buffer[e+1],this.to=n+i.buffer[e+2],!0}yield(e){return!!e&&(e instanceof x?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,n,this.mode));let{buffer:i}=this.buffer,s=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.buffer.start,n);return!(s<0)&&(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,n=this.mode){return this.buffer?!(n&d.ExcludeBuffers)&&this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&d.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&d.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode));let{buffer:t}=this.buffer,n=this.stack.length-1;if(e<0){let e=n<0?0:this.stack[n]+4;if(this.index!=e)return this.yieldBuf(t.findChild(e,this.index,-1,0,4))}else{let e=t.buffer[this.index+3];if(e<(n<0?t.buffer.length:t.buffer[this.stack[n]+3]))return this.yieldBuf(e)}return n<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,n,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let e=0;e<this.index;e++)if(i.buffer.buffer[e+3]<this.index)return!1;({index:t,parent:n}=i)}else({index:t,_parent:n}=this._tree);for(;n;({index:t,_parent:n}=n))if(t>-1)for(let i=t+e,s=e<0?-1:n._tree.children.length;i!=s;i+=e){let e=n._tree.children[i];if(this.mode&d.IncludeAnonymous||e instanceof g||!e.type.isAnonymous||_(e))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,n=0;if(e&&e.context==this.buffer)e:for(let i=this.index,s=this.stack.length;s>=0;){for(let r=e;r;r=r._parent)if(r.index==i){if(i==this.index)return r;t=r,n=s+1;break e}i=this.stack[--s]}for(let e=n;e<this.stack.length;e++)t=new C(this.buffer,t,this.stack[e]);return this.bufferNode=new C(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let n=0;;){let i=!1;if(this.type.isAnonymous||!1!==e(this)){if(this.firstChild()){n++;continue}this.type.isAnonymous||(i=!0)}for(;i&&t&&t(this),i=this.type.isAnonymous,!this.nextSibling();){if(!n)return;this.parent(),n--,i=!0}}}matchContext(e){if(!this.buffer)return k(this.node,e);let{buffer:t}=this.buffer,{types:n}=t.set;for(let i=e.length-1,s=this.stack.length-1;i>=0;s--){if(s<0)return k(this.node,e,i);let r=n[t.buffer[this.stack[s]]];if(!r.isAnonymous){if(e[i]&&e[i]!=r.name)return!1;i--}}return!0}}function _(e){return e.children.some((e=>e instanceof g||!e.type.isAnonymous||_(e)))}const T=new WeakMap;function E(e,t){if(!e.isAnonymous||t instanceof g||t.type!=e)return 1;let n=T.get(t);if(null==n){n=1;for(let i of t.children){if(i.type!=e||!(i instanceof p)){n=1;break}n+=E(e,i)}T.set(t,n)}return n}function N(e,t,n,i,s,r,o,a,l){let h=0;for(let n=i;n<s;n++)h+=E(e,t[n]);let c=Math.ceil(1.5*h/8),u=[],f=[];return function t(n,i,s,o,a){for(let h=s;h<o;){let s=h,d=i[h],p=E(e,n[h]);for(h++;h<o;h++){let t=E(e,n[h]);if(p+t>=c)break;p+=t}if(h==s+1){if(p>c){let e=n[s];t(e.children,e.positions,0,e.children.length,i[s]+a);continue}u.push(n[s])}else{let t=i[h-1]+n[h-1].length-d;u.push(N(e,n,i,s,h,d,t,null,l))}f.push(d+a-r)}}(t,n,i,s,0),(a||l)(u,f,o)}class D{constructor(){this.map=new WeakMap}setBuffer(e,t,n){let i=this.map.get(e);i||this.map.set(e,i=new Map),i.set(t,n)}getBuffer(e,t){let n=this.map.get(e);return n&&n.get(t)}set(e,t){e instanceof C?this.setBuffer(e.context.buffer,e.index,t):e instanceof x&&this.map.set(e.tree,t)}get(e){return e instanceof C?this.getBuffer(e.context.buffer,e.index):e instanceof x?this.map.get(e.tree):void 0}cursorSet(e,t){e.buffer?this.setBuffer(e.buffer.buffer,e.index,t):this.map.set(e.tree,t)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class P{constructor(e,t,n,i,s=!1,r=!1){this.from=e,this.to=t,this.tree=n,this.offset=i,this.open=(s?1:0)|(r?2:0)}get openStart(){return(1&this.open)>0}get openEnd(){return(2&this.open)>0}static addTree(e,t=[],n=!1){let i=[new P(0,e.length,e,0,!1,n)];for(let n of t)n.to>e.length&&i.push(n);return i}static applyChanges(e,t,n=128){if(!t.length)return e;let i=[],s=1,r=e.length?e[0]:null;for(let o=0,a=0,l=0;;o++){let h=o<t.length?t[o]:null,c=h?h.fromA:1e9;if(c-a>=n)for(;r&&r.from<c;){let t=r;if(a>=t.from||c<=t.to||l){let e=Math.max(t.from,a)-l,n=Math.min(t.to,c)-l;t=e>=n?null:new P(e,n,t.tree,t.offset+l,o>0,!!h)}if(t&&i.push(t),r.to>c)break;r=s<e.length?e[s++]:null}if(!h)break;a=h.toA,l=h.toA-h.toB}return i}}class R{startParse(e,t,n){return"string"==typeof e&&(e=new j(e)),n=n?n.length?n.map((e=>new r(e.from,e.to))):[new r(0,0)]:[new r(0,e.length)],this.createParse(e,t||[],n)}parse(e,t,n){let i=this.startParse(e,t,n);for(;;){let e=i.advance();if(e)return e}}}class j{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}function L(e){return(t,n,i,s)=>new z(t,e,n,i,s)}class B{constructor(e,t,n,i,s){this.parser=e,this.parse=t,this.overlay=n,this.target=i,this.from=s}}function I(e){if(!e.length||e.some((e=>e.from>=e.to)))throw new RangeError("Invalid inner parse ranges given: "+JSON.stringify(e))}class F{constructor(e,t,n,i,s,r,o){this.parser=e,this.predicate=t,this.mounts=n,this.index=i,this.start=s,this.target=r,this.prev=o,this.depth=0,this.ranges=[]}}const $=new o({perNode:!0});class z{constructor(e,t,n,i,s){this.nest=t,this.input=n,this.fragments=i,this.ranges=s,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=e}advance(){if(this.baseParse){let e=this.baseParse.advance();if(!e)return null;if(this.baseParse=null,this.baseTree=e,this.startInner(),null!=this.stoppedAt)for(let e of this.inner)e.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let e=this.baseTree;return null!=this.stoppedAt&&(e=new p(e.type,e.children,e.positions,e.length,e.propValues.concat([[$,this.stoppedAt]]))),e}let e=this.inner[this.innerDone],t=e.parse.advance();if(t){this.innerDone++;let n=Object.assign(Object.create(null),e.target.props);n[o.mounted.id]=new a(t,e.overlay,e.parser),e.target.props=n}return null}get parsedPos(){if(this.baseParse)return 0;let e=this.input.length;for(let t=this.innerDone;t<this.inner.length;t++)this.inner[t].from<e&&(e=Math.min(e,this.inner[t].parse.parsedPos));return e}stopAt(e){if(this.stoppedAt=e,this.baseParse)this.baseParse.stopAt(e);else for(let t=this.innerDone;t<this.inner.length;t++)this.inner[t].parse.stopAt(e)}startInner(){let e=new G(this.fragments),t=null,n=null,i=new M(new x(this.baseTree,this.ranges[0].from,0,null),d.IncludeAnonymous|d.IgnoreMounts);e:for(let s,o;;){let a,l=!0;if(null!=this.stoppedAt&&i.from>=this.stoppedAt)l=!1;else if(e.hasNode(i)){if(t){let e=t.mounts.find((e=>e.frag.from<=i.from&&e.frag.to>=i.to&&e.mount.overlay));if(e)for(let n of e.mount.overlay){let s=n.from+e.pos,r=n.to+e.pos;s>=i.from&&r<=i.to&&!t.ranges.some((e=>e.from<r&&e.to>s))&&t.ranges.push({from:s,to:r})}}l=!1}else if(n&&(o=H(n.ranges,i.from,i.to)))l=2!=o;else if(!i.type.isAnonymous&&(s=this.nest(i,this.input))&&(i.from<i.to||!s.overlay)){i.tree||V(i);let o=e.findMounts(i.from,s.parser);if("function"==typeof s.overlay)t=new F(s.parser,s.overlay,o,this.inner.length,i.from,i.tree,t);else{let e=U(this.ranges,s.overlay||(i.from<i.to?[new r(i.from,i.to)]:[]));e.length&&I(e),!e.length&&s.overlay||this.inner.push(new B(s.parser,e.length?s.parser.startParse(this.input,J(o,e),e):s.parser.startParse(""),s.overlay?s.overlay.map((e=>new r(e.from-i.from,e.to-i.from))):null,i.tree,e.length?e[0].from:i.from)),s.overlay?e.length&&(n={ranges:e,depth:0,prev:n}):l=!1}}else t&&(a=t.predicate(i))&&(!0===a&&(a=new r(i.from,i.to)),a.from<a.to&&t.ranges.push(a));if(l&&i.firstChild())t&&t.depth++,n&&n.depth++;else for(;!i.nextSibling();){if(!i.parent())break e;if(t&&! --t.depth){let e=U(this.ranges,t.ranges);e.length&&(I(e),this.inner.splice(t.index,0,new B(t.parser,t.parser.startParse(this.input,J(t.mounts,e),e),t.ranges.map((e=>new r(e.from-t.start,e.to-t.start))),t.target,e[0].from))),t=t.prev}n&&! --n.depth&&(n=n.prev)}}}}function H(e,t,n){for(let i of e){if(i.from>=n)break;if(i.to>t)return i.from<=t&&i.to>=n?2:1}return 0}function q(e,t,n,i,s,r){if(t<n){let o=e.buffer[t+1];i.push(e.slice(t,n,o)),s.push(o-r)}}function V(e){let{node:t}=e,n=[],i=t.context.buffer;do{n.push(e.index),e.parent()}while(!e.tree);let s=e.tree,r=s.children.indexOf(i),o=s.children[r],a=o.buffer,l=[r];s.children[r]=function e(i,s,r,h,c,u){let f=n[u],d=[],m=[];q(o,i,f,d,m,h);let g=a[f+1],b=a[f+2];l.push(d.length);let y=u?e(f+4,a[f+3],o.set.types[a[f]],g,b-g,u-1):t.toTree();return d.push(y),m.push(g-h),q(o,a[f+3],s,d,m,h),new p(r,d,m,c)}(0,a.length,h.none,0,o.length,n.length-1);for(let t of l){let n=e.tree.children[t],i=e.tree.positions[t];e.yield(new x(n,i+e.from,t,e._tree))}}class W{constructor(e,t){this.offset=t,this.done=!1,this.cursor=e.cursor(d.IncludeAnonymous|d.IgnoreMounts)}moveTo(e){let{cursor:t}=this,n=e-this.offset;for(;!this.done&&t.from<n;)t.to>=e&&t.enter(n,1,d.IgnoreOverlays|d.ExcludeBuffers)||t.next(!1)||(this.done=!0)}hasNode(e){if(this.moveTo(e.from),!this.done&&this.cursor.from+this.offset==e.from&&this.cursor.tree)for(let t=this.cursor.tree;;){if(t==e.tree)return!0;if(!(t.children.length&&0==t.positions[0]&&t.children[0]instanceof p))break;t=t.children[0]}return!1}}class G{constructor(e){var t;if(this.fragments=e,this.curTo=0,this.fragI=0,e.length){let n=this.curFrag=e[0];this.curTo=null!==(t=n.tree.prop($))&&void 0!==t?t:n.to,this.inner=new W(n.tree,-n.offset)}else this.curFrag=this.inner=null}hasNode(e){for(;this.curFrag&&e.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=e.from&&this.curTo>=e.to&&this.inner.hasNode(e)}nextFrag(){var e;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let t=this.curFrag=this.fragments[this.fragI];this.curTo=null!==(e=t.tree.prop($))&&void 0!==e?e:t.to,this.inner=new W(t.tree,-t.offset)}}findMounts(e,t){var n;let i=[];if(this.inner){this.inner.cursor.moveTo(e,1);for(let e=this.inner.cursor.node;e;e=e.parent){let s=null===(n=e.tree)||void 0===n?void 0:n.prop(o.mounted);if(s&&s.parser==t)for(let t=this.fragI;t<this.fragments.length;t++){let n=this.fragments[t];if(n.from>=e.to)break;n.tree==this.curFrag.tree&&i.push({frag:n,pos:e.from-n.offset,mount:s})}}}return i}}function U(e,t){let n=null,i=t;for(let s=1,o=0;s<e.length;s++){let a=e[s-1].to,l=e[s].from;for(;o<i.length;o++){let e=i[o];if(e.from>=l)break;e.to<=a||(n||(i=n=t.slice()),e.from<a?(n[o]=new r(e.from,a),e.to>l&&n.splice(o+1,0,new r(l,e.to))):e.to>l?n[o--]=new r(l,e.to):n.splice(o--,1))}}return i}function K(e,t,n,i){let s=0,o=0,a=!1,l=!1,h=-1e9,c=[];for(;;){let u=s==e.length?1e9:a?e[s].to:e[s].from,f=o==t.length?1e9:l?t[o].to:t[o].from;if(a!=l){let e=Math.max(h,n),t=Math.min(u,f,i);e<t&&c.push(new r(e,t))}if(h=Math.min(u,f),1e9==h)break;u==h&&(a?(a=!1,s++):a=!0),f==h&&(l?(l=!1,o++):l=!0)}return c}function J(e,t){let n=[];for(let{pos:i,mount:s,frag:o}of e){let e=i+(s.overlay?s.overlay[0].from:0),a=e+s.tree.length,l=Math.max(o.from,e),h=Math.min(o.to,a);if(s.overlay){let a=K(t,s.overlay.map((e=>new r(e.from+i,e.to+i))),l,h);for(let t=0,i=l;;t++){let r=t==a.length,l=r?h:a[t].from;if(l>i&&n.push(new P(i,l,s.tree,-e,o.from>=i||o.openStart,o.to<=l||o.openEnd)),r)break;i=a[t].to}}else n.push(new P(l,h,s.tree,-e,o.from>=e||o.openStart,o.to<=a||o.openEnd))}return n}},49913:(e,t,n)=>{"use strict";n.d(t,{DM:()=>f,_A:()=>T,az:()=>u,pn:()=>l,vw:()=>r});var i=n(79066);let s=0;class r{constructor(e,t,n,i){this.name=e,this.set=t,this.base=n,this.modified=i,this.id=s++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let n="string"==typeof e?e:"?";if(e instanceof r&&(t=e),null==t?void 0:t.base)throw new Error("Can not derive from a modified tag");let i=new r(n,[],null,[]);if(i.set.push(i),t)for(let e of t.set)i.set.push(e);return i}static defineModifier(e){let t=new a(e);return e=>e.modified.indexOf(t)>-1?e:a.get(e.base||e,e.modified.concat(t).sort(((e,t)=>e.id-t.id)))}}let o=0;class a{constructor(e){this.name=e,this.instances=[],this.id=o++}static get(e,t){if(!t.length)return e;let n=t[0].instances.find((n=>{return n.base==e&&(i=t,s=n.modified,i.length==s.length&&i.every(((e,t)=>e==s[t])));var i,s}));if(n)return n;let i=[],s=new r(e.name,i,e,t);for(let e of t)e.instances.push(s);let o=function(e){let t=[[]];for(let n=0;n<e.length;n++)for(let i=0,s=t.length;i<s;i++)t.push(t[i].concat(e[n]));return t.sort(((e,t)=>t.length-e.length))}(t);for(let t of e.set)if(!t.modified.length)for(let e of o)i.push(a.get(t,e));return s}}function l(e){let t=Object.create(null);for(let n in e){let i=e[n];Array.isArray(i)||(i=[i]);for(let e of n.split(" "))if(e){let n=[],s=2,r=e;for(let t=0;;){if("..."==r&&t>0&&t+3==e.length){s=1;break}let i=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(r);if(!i)throw new RangeError("Invalid path: "+e);if(n.push("*"==i[0]?"":'"'==i[0][0]?JSON.parse(i[0]):i[0]),t+=i[0].length,t==e.length)break;let o=e[t++];if(t==e.length&&"!"==o){s=0;break}if("/"!=o)throw new RangeError("Invalid path: "+e);r=e.slice(t)}let o=n.length-1,a=n[o];if(!a)throw new RangeError("Invalid path: "+e);let l=new c(i,s,o>0?n.slice(0,o):null);t[a]=l.sort(t[a])}}return h.add(t)}const h=new i.uY;class c{constructor(e,t,n,i){this.tags=e,this.mode=t,this.context=n,this.next=i}get opaque(){return 0==this.mode}get inherit(){return 1==this.mode}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}function u(e,t){let n=Object.create(null);for(let t of e)if(Array.isArray(t.tag))for(let e of t.tag)n[e.id]=t.class;else n[t.tag.id]=t.class;let{scope:i,all:s=null}=t||{};return{style:e=>{let t=s;for(let i of e)for(let e of i.set){let i=n[e.id];if(i){t=t?t+" "+i:i;break}}return t},scope:i}}function f(e,t,n,i=0,s=e.length){let r=new d(i,Array.isArray(t)?t:[t],n);r.highlightRange(e.cursor(),i,s,"",r.highlighters),r.flush(s)}c.empty=new c([],2,null);class d{constructor(e,t,n){this.at=e,this.highlighters=t,this.span=n,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,n,s,r){let{type:o,from:a,to:l}=e;if(a>=n||l<=t)return;o.isTop&&(r=this.highlighters.filter((e=>!e.scope||e.scope(o))));let u=s,f=function(e){let t=e.type.prop(h);for(;t&&t.context&&!e.matchContext(t.context);)t=t.next;return t||null}(e)||c.empty,d=function(e,t){let n=null;for(let i of e){let e=i.style(t);e&&(n=n?n+" "+e:e)}return n}(r,f.tags);if(d&&(u&&(u+=" "),u+=d,1==f.mode&&(s+=(s?" ":"")+d)),this.startSpan(Math.max(t,a),u),f.opaque)return;let p=e.tree&&e.tree.prop(i.uY.mounted);if(p&&p.overlay){let i=e.node.enter(p.overlay[0].from+a,1),o=this.highlighters.filter((e=>!e.scope||e.scope(p.tree.type))),h=e.firstChild();for(let c=0,f=a;;c++){let d=c<p.overlay.length?p.overlay[c]:null,m=d?d.from+a:l,g=Math.max(t,f),b=Math.min(n,m);if(g<b&&h)for(;e.from<b&&(this.highlightRange(e,g,b,s,r),this.startSpan(Math.min(b,e.to),u),!(e.to>=m)&&e.nextSibling()););if(!d||m>n)break;f=d.to+a,f>t&&(this.highlightRange(i.cursor(),Math.max(t,d.from+a),Math.min(n,f),"",o),this.startSpan(Math.min(n,f),u))}h&&e.parent()}else if(e.firstChild()){p&&(s="");do{if(!(e.to<=t)){if(e.from>=n)break;this.highlightRange(e,t,n,s,r),this.startSpan(Math.min(n,e.to),u)}}while(e.nextSibling());e.parent()}}}const p=r.define,m=p(),g=p(),b=p(g),y=p(g),v=p(),x=p(v),w=p(v),k=p(),S=p(k),C=p(),A=p(),O=p(),M=p(O),_=p(),T={comment:m,lineComment:p(m),blockComment:p(m),docComment:p(m),name:g,variableName:p(g),typeName:b,tagName:p(b),propertyName:y,attributeName:p(y),className:p(g),labelName:p(g),namespace:p(g),macroName:p(g),literal:v,string:x,docString:p(x),character:p(x),attributeValue:p(x),number:w,integer:p(w),float:p(w),bool:p(v),regexp:p(v),escape:p(v),color:p(v),url:p(v),keyword:C,self:p(C),null:p(C),atom:p(C),unit:p(C),modifier:p(C),operatorKeyword:p(C),controlKeyword:p(C),definitionKeyword:p(C),moduleKeyword:p(C),operator:A,derefOperator:p(A),arithmeticOperator:p(A),logicOperator:p(A),bitwiseOperator:p(A),compareOperator:p(A),updateOperator:p(A),definitionOperator:p(A),typeOperator:p(A),controlOperator:p(A),punctuation:O,separator:p(O),bracket:M,angleBracket:p(M),squareBracket:p(M),paren:p(M),brace:p(M),content:k,heading:S,heading1:p(S),heading2:p(S),heading3:p(S),heading4:p(S),heading5:p(S),heading6:p(S),contentSeparator:p(k),list:p(k),quote:p(k),emphasis:p(k),strong:p(k),link:p(k),monospace:p(k),strikethrough:p(k),inserted:p(),deleted:p(),changed:p(),invalid:p(),meta:_,documentMeta:p(_),annotation:p(_),processingInstruction:p(_),definition:r.defineModifier("definition"),constant:r.defineModifier("constant"),function:r.defineModifier("function"),standard:r.defineModifier("standard"),local:r.defineModifier("local"),special:r.defineModifier("special")};for(let e in T){let t=T[e];t instanceof r&&(t.name=e)}u([{tag:T.link,class:"tok-link"},{tag:T.heading,class:"tok-heading"},{tag:T.emphasis,class:"tok-emphasis"},{tag:T.strong,class:"tok-strong"},{tag:T.keyword,class:"tok-keyword"},{tag:T.atom,class:"tok-atom"},{tag:T.bool,class:"tok-bool"},{tag:T.url,class:"tok-url"},{tag:T.labelName,class:"tok-labelName"},{tag:T.inserted,class:"tok-inserted"},{tag:T.deleted,class:"tok-deleted"},{tag:T.literal,class:"tok-literal"},{tag:T.string,class:"tok-string"},{tag:T.number,class:"tok-number"},{tag:[T.regexp,T.escape,T.special(T.string)],class:"tok-string2"},{tag:T.variableName,class:"tok-variableName"},{tag:T.local(T.variableName),class:"tok-variableName tok-local"},{tag:T.definition(T.variableName),class:"tok-variableName tok-definition"},{tag:T.special(T.variableName),class:"tok-variableName2"},{tag:T.definition(T.propertyName),class:"tok-propertyName tok-definition"},{tag:T.typeName,class:"tok-typeName"},{tag:T.namespace,class:"tok-namespace"},{tag:T.className,class:"tok-className"},{tag:T.macroName,class:"tok-macroName"},{tag:T.propertyName,class:"tok-propertyName"},{tag:T.operator,class:"tok-operator"},{tag:T.comment,class:"tok-comment"},{tag:T.meta,class:"tok-meta"},{tag:T.invalid,class:"tok-invalid"},{tag:T.punctuation,class:"tok-punctuation"}])},73643:(e,t,n)=>{"use strict";n.d(t,{Aj:()=>M,Lu:()=>p,U1:()=>_,uC:()=>d});var i=n(79066);class s{constructor(e,t,n,i,s,r,o,a,l,h=0,c){this.p=e,this.stack=t,this.state=n,this.reducePos=i,this.pos=s,this.score=r,this.buffer=o,this.bufferBase=a,this.curContext=l,this.lookAhead=h,this.parent=c}toString(){return`[${this.stack.filter(((e,t)=>t%3==0)).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,n=0){let i=e.parser.context;return new s(e,[],t,n,n,0,[],0,i?new r(i,i.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let n=e>>19,i=65535&e,{parser:s}=this.p,r=this.reducePos<this.pos-25;r&&this.setLookAhead(this.pos);let o=s.dynamicPrecedence(i);if(o&&(this.score+=o),0==n)return this.pushState(s.getGoto(this.state,i,!0),this.reducePos),i<s.minRepeatTerm&&this.storeNode(i,this.reducePos,this.reducePos,r?8:4,!0),void this.reduceContext(i,this.reducePos);let a=this.stack.length-3*(n-1)-(262144&e?6:0),l=a?this.stack[a-2]:this.p.ranges[0].from,h=this.reducePos-l;h>=2e3&&!(null===(t=this.p.parser.nodeSet.types[i])||void 0===t?void 0:t.isAnonymous)&&(l==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=h):this.p.lastBigReductionSize<h&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=l,this.p.lastBigReductionSize=h));let c=a?this.stack[a-1]:0,u=this.bufferBase+this.buffer.length-c;if(i<s.minRepeatTerm||131072&e){let e=s.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(i,l,e,u+4,!0)}if(262144&e)this.state=this.stack[a];else{let e=this.stack[a-3];this.state=s.getGoto(e,i,!0)}for(;this.stack.length>a;)this.stack.pop();this.reduceContext(i,l)}storeNode(e,t,n,i=4,s=!1){if(0==e&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let e=this,i=this.buffer.length;if(0==i&&e.parent&&(i=e.bufferBase-e.parent.bufferBase,e=e.parent),i>0&&0==e.buffer[i-4]&&e.buffer[i-1]>-1){if(t==n)return;if(e.buffer[i-2]>=t)return void(e.buffer[i-2]=n)}}if(s&&this.pos!=n){let s=this.buffer.length;if(s>0&&0!=this.buffer[s-4]){let e=!1;for(let t=s;t>0&&this.buffer[t-2]>n;t-=4)if(this.buffer[t-1]>=0){e=!0;break}if(e)for(;s>0&&this.buffer[s-2]>n;)this.buffer[s]=this.buffer[s-4],this.buffer[s+1]=this.buffer[s-3],this.buffer[s+2]=this.buffer[s-2],this.buffer[s+3]=this.buffer[s-1],s-=4,i>4&&(i-=4)}this.buffer[s]=e,this.buffer[s+1]=t,this.buffer[s+2]=n,this.buffer[s+3]=i}else this.buffer.push(e,t,n,i)}shift(e,t,n,i){if(131072&e)this.pushState(65535&e,this.pos);else if(262144&e)this.pos=i,this.shiftContext(t,n),t<=this.p.parser.maxNode&&this.buffer.push(t,n,i,4);else{let s=e,{parser:r}=this.p;(i>this.pos||t<=r.maxNode)&&(this.pos=i,r.stateFlag(s,1)||(this.reducePos=i)),this.pushState(s,n),this.shiftContext(t,n),t<=r.maxNode&&this.buffer.push(t,n,i,4)}}apply(e,t,n,i){65536&e?this.reduce(e):this.shift(e,t,n,i)}useNode(e,t){let n=this.p.reused.length-1;(n<0||this.p.reused[n]!=e)&&(this.p.reused.push(e),n++);let i=this.pos;this.reducePos=this.pos=i+e.length,this.pushState(t,i),this.buffer.push(n,i,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let n=e.buffer.slice(t),i=e.bufferBase+t;for(;e&&i==e.bufferBase;)e=e.parent;return new s(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,n,i,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let n=e<=this.p.parser.maxNode;n&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,n?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new o(this);;){let n=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(0==n)return!1;if(!(65536&n))return!0;t.reduce(n)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let n=[];for(let i,s=0;s<t.length;s+=2)(i=t[s+1])!=this.state&&this.p.parser.hasAction(i,e)&&n.push(t[s],i);if(this.stack.length<120)for(let e=0;n.length<8&&e<t.length;e+=2){let i=t[e+1];n.some(((e,t)=>1&t&&e==i))||n.push(t[e],i)}t=n}let n=[];for(let e=0;e<t.length&&n.length<4;e+=2){let i=t[e+1];if(i==this.state)continue;let s=this.split();s.pushState(i,this.pos),s.storeNode(0,s.pos,s.pos,4,!0),s.shiftContext(t[e],this.pos),s.reducePos=this.pos,s.score-=200,n.push(s)}return n}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if(!(65536&t))return!1;if(!e.validAction(this.state,t)){let n=t>>19,i=65535&t,s=this.stack.length-3*n;if(s<0||e.getGoto(this.stack[s],i,!1)<0){let e=this.findForcedReduction();if(null==e)return!1;t=e}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],n=(i,s)=>{if(!t.includes(i))return t.push(i),e.allActions(i,(t=>{if(393216&t);else if(65536&t){let n=(t>>19)-s;if(n>1){let i=65535&t,s=this.stack.length-3*n;if(s>=0&&e.getGoto(this.stack[s],i,!1)>=0)return n<<19|65536|i}}else{let e=n(t,s+1);if(null!=e)return e}}))};return n(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(3!=this.stack.length)return!1;let{parser:e}=this.p;return 65535==e.data[e.stateSlot(this.state,1)]&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||-3!=this.buffer[e])&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||-4!=this.buffer[e])&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new r(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class r{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class o{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=65535&e,n=e>>19;0==n?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=3*(n-1);let i=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=i}}class a{constructor(e,t,n){this.stack=e,this.pos=t,this.index=n,this.buffer=e.buffer,0==this.index&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new a(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;null!=e&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,0==this.index&&this.maybeNext()}fork(){return new a(this.stack,this.pos,this.index)}}function l(e,t=Uint16Array){if("string"!=typeof e)return e;let n=null;for(let i=0,s=0;i<e.length;){let r=0;for(;;){let t=e.charCodeAt(i++),n=!1;if(126==t){r=65535;break}t>=92&&t--,t>=34&&t--;let s=t-32;if(s>=46&&(s-=46,n=!0),r+=s,n)break;r*=46}n?n[s++]=r:n=new t(r)}return n}class h{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const c=new h;class u{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=c,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let n=this.range,i=this.rangeIndex,s=this.pos+e;for(;s<n.from;){if(!i)return null;let e=this.ranges[--i];s-=n.from-e.to,n=e}for(;t<0?s>n.to:s>=n.to;){if(i==this.ranges.length-1)return null;let e=this.ranges[++i];s+=e.from-n.to,n=e}return s}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t,n,i=this.chunkOff+e;if(i>=0&&i<this.chunk.length)t=this.pos+e,n=this.chunk.charCodeAt(i);else{let i=this.resolveOffset(e,1);if(null==i)return-1;if(t=i,t>=this.chunk2Pos&&t<this.chunk2Pos+this.chunk2.length)n=this.chunk2.charCodeAt(t-this.chunk2Pos);else{let e=this.rangeIndex,i=this.range;for(;i.to<=t;)i=this.ranges[++e];this.chunk2=this.input.chunk(this.chunk2Pos=t),t+this.chunk2.length>i.to&&(this.chunk2=this.chunk2.slice(0,i.to-t)),n=this.chunk2.charCodeAt(0)}}return t>=this.token.lookAhead&&(this.token.lookAhead=t+1),n}acceptToken(e,t=0){let n=t?this.resolveOffset(t,-1):this.pos;if(null==n||n<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=n}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=c,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let n="";for(let i of this.ranges){if(i.from>=t)break;i.to>e&&(n+=this.input.read(Math.max(i.from,e),Math.min(i.to,t)))}return n}}class f{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:n}=t.p;m(this.data,e,t,this.id,n.data,n.tokenPrecTable)}}f.prototype.contextual=f.prototype.fallback=f.prototype.extend=!1;class d{constructor(e,t,n){this.precTable=t,this.elseToken=n,this.data="string"==typeof e?l(e):e}token(e,t){let n=e.pos,i=0;for(;;){let n=e.next<0,s=e.resolveOffset(1,1);if(m(this.data,e,t,0,this.data,this.precTable),e.token.value>-1)break;if(null==this.elseToken)return;if(n||i++,null==s)break;e.reset(s,e.token)}i&&(e.reset(n,e.token),e.acceptToken(this.elseToken,i))}}d.prototype.contextual=f.prototype.fallback=f.prototype.extend=!1;class p{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}}function m(e,t,n,i,s,r){let o=0,a=1<<i,{dialect:l}=n.p.parser;e:for(;a&e[o];){let n=e[o+1];for(let i=o+3;i<n;i+=2)if((e[i+1]&a)>0){let n=e[i];if(l.allows(n)&&(-1==t.token.value||t.token.value==n||b(n,t.token.value,s,r))){t.acceptToken(n);break}}let i=t.next,h=0,c=e[o+2];if(!(t.next<0&&c>h&&65535==e[n+3*c-3])){for(;h<c;){let s=h+c>>1,r=n+s+(s<<1),a=e[r],l=e[r+1]||65536;if(i<a)c=s;else{if(!(i>=l)){o=e[r+2],t.advance();continue e}h=s+1}}break}o=e[n+3*c-1]}}function g(e,t,n){for(let i,s=t;65535!=(i=e[s]);s++)if(i==n)return s-t;return-1}function b(e,t,n,i){let s=g(n,i,t);return s<0||g(n,i,e)<s}const y="undefined"!=typeof process&&{}&&/\bparse\b/.test({}.LOG);let v=null;function x(e,t,n){let s=e.cursor(i.Qj.IncludeAnonymous);for(s.moveTo(t);;)if(!(n<0?s.childBefore(t):s.childAfter(t)))for(;;){if((n<0?s.to<t:s.from>t)&&!s.type.isError)return n<0?Math.max(0,Math.min(s.to-1,t-25)):Math.min(e.length,Math.max(s.from+1,t+25));if(n<0?s.prevSibling():s.nextSibling())break;if(!s.parent())return n<0?0:e.length}}class w{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?x(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?x(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let n=this.trees[t],s=this.index[t];if(s==n.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let r=n.children[s],o=this.start[t]+n.positions[s];if(o>e)return this.nextStart=o,null;if(r instanceof i.PH){if(o==e){if(o<this.safeFrom)return null;let e=o+r.length;if(e<=this.safeTo){let t=r.prop(i.uY.lookAhead);if(!t||e+t<this.fragment.to)return r}}this.index[t]++,o+r.length>=Math.max(this.safeFrom,e)&&(this.trees.push(r),this.start.push(o),this.index.push(0))}else this.index[t]++,this.nextStart=o+r.length}}}class k{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map((e=>new h))}getActions(e){let t=0,n=null,{parser:i}=e.p,{tokenizers:s}=i,r=i.stateSlot(e.state,3),o=e.curContext?e.curContext.hash:0,a=0;for(let i=0;i<s.length;i++){if(!(1<<i&r))continue;let l=s[i],h=this.tokens[i];if((!n||l.fallback)&&((l.contextual||h.start!=e.pos||h.mask!=r||h.context!=o)&&(this.updateCachedToken(h,l,e),h.mask=r,h.context=o),h.lookAhead>h.end+25&&(a=Math.max(h.lookAhead,a)),0!=h.value)){let i=t;if(h.extended>-1&&(t=this.addActions(e,h.extended,h.end,t)),t=this.addActions(e,h.value,h.end,t),!l.extend&&(n=h,t>i))break}}for(;this.actions.length>t;)this.actions.pop();return a&&e.setLookAhead(a),n||e.pos!=this.stream.end||(n=new h,n.value=e.p.parser.eofTerm,n.start=n.end=e.pos,t=this.addActions(e,n.value,n.end,t)),this.mainToken=n,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new h,{pos:n,p:i}=e;return t.start=n,t.end=Math.min(n+1,i.stream.end),t.value=n==i.stream.end?i.parser.eofTerm:0,t}updateCachedToken(e,t,n){let i=this.stream.clipPos(n.pos);if(t.token(this.stream.reset(i,e),n),e.value>-1){let{parser:t}=n.p;for(let i=0;i<t.specialized.length;i++)if(t.specialized[i]==e.value){let s=t.specializers[i](this.stream.read(e.start,e.end),n);if(s>=0&&n.p.parser.dialect.allows(s>>1)){1&s?e.extended=s>>1:e.value=s>>1;break}}}else e.value=0,e.end=this.stream.clipPos(i+1)}putAction(e,t,n,i){for(let t=0;t<i;t+=3)if(this.actions[t]==e)return i;return this.actions[i++]=e,this.actions[i++]=t,this.actions[i++]=n,i}addActions(e,t,n,i){let{state:s}=e,{parser:r}=e.p,{data:o}=r;for(let e=0;e<2;e++)for(let a=r.stateSlot(s,e?2:1);;a+=3){if(65535==o[a]){if(1!=o[a+1]){0==i&&2==o[a+1]&&(i=this.putAction(T(o,a+2),t,n,i));break}a=T(o,a+2)}o[a]==t&&(i=this.putAction(T(o,a+1),t,n,i))}return i}}class S{constructor(e,t,n,i){this.parser=e,this.input=t,this.ranges=i,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new u(t,i),this.tokens=new k(e,this.stream),this.topTerm=e.top[1];let{from:r}=i[0];this.stacks=[s.start(this,e.top[0],r)],this.fragments=n.length&&this.stream.end-r>4*e.bufferLength?new w(n,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e,t,n=this.stacks,i=this.minStackPos,s=this.stacks=[];if(this.bigReductionCount>300&&1==n.length){let[e]=n;for(;e.forceReduce()&&e.stack.length&&e.stack[e.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let r=0;r<n.length;r++){let o=n[r];for(;;){if(this.tokens.mainToken=null,o.pos>i)s.push(o);else{if(this.advanceStack(o,s,n))continue;{e||(e=[],t=[]),e.push(o);let n=this.tokens.getMainToken(o);t.push(n.value,n.end)}}break}}if(!s.length){let t=e&&function(e){let t=null;for(let n of e){let e=n.p.stoppedAt;(n.pos==n.p.stream.end||null!=e&&n.pos>e)&&n.p.parser.stateFlag(n.state,2)&&(!t||t.score<n.score)&&(t=n)}return t}(e);if(t)return y&&console.log("Finish with "+this.stackID(t)),this.stackToTree(t);if(this.parser.strict)throw y&&e&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+i);this.recovering||(this.recovering=5)}if(this.recovering&&e){let n=null!=this.stoppedAt&&e[0].pos>this.stoppedAt?e[0]:this.runRecovery(e,t,s);if(n)return y&&console.log("Force-finish "+this.stackID(n)),this.stackToTree(n.forceAll())}if(this.recovering){let e=1==this.recovering?1:3*this.recovering;if(s.length>e)for(s.sort(((e,t)=>t.score-e.score));s.length>e;)s.pop();s.some((e=>e.reducePos>i))&&this.recovering--}else if(s.length>1){e:for(let e=0;e<s.length-1;e++){let t=s[e];for(let n=e+1;n<s.length;n++){let i=s[n];if(t.sameState(i)||t.buffer.length>500&&i.buffer.length>500){if(!((t.score-i.score||t.buffer.length-i.buffer.length)>0)){s.splice(e--,1);continue e}s.splice(n--,1)}}}s.length>12&&s.splice(12,s.length-12)}this.minStackPos=s[0].pos;for(let e=1;e<s.length;e++)s[e].pos<this.minStackPos&&(this.minStackPos=s[e].pos);return null}stopAt(e){if(null!=this.stoppedAt&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,n){let s=e.pos,{parser:r}=this,o=y?this.stackID(e)+" -> ":"";if(null!=this.stoppedAt&&s>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let t=e.curContext&&e.curContext.tracker.strict,n=t?e.curContext.hash:0;for(let a=this.fragments.nodeAt(s);a;){let s=this.parser.nodeSet.types[a.type.id]==a.type?r.getGoto(e.state,a.type.id):-1;if(s>-1&&a.length&&(!t||(a.prop(i.uY.contextHash)||0)==n))return e.useNode(a,s),y&&console.log(o+this.stackID(e)+` (via reuse of ${r.getName(a.type.id)})`),!0;if(!(a instanceof i.PH)||0==a.children.length||a.positions[0]>0)break;let l=a.children[0];if(!(l instanceof i.PH&&0==a.positions[0]))break;a=l}}let a=r.stateSlot(e.state,4);if(a>0)return e.reduce(a),y&&console.log(o+this.stackID(e)+` (via always-reduce ${r.getName(65535&a)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let l=this.tokens.getActions(e);for(let i=0;i<l.length;){let a=l[i++],h=l[i++],c=l[i++],u=i==l.length||!n,f=u?e:e.split(),d=this.tokens.mainToken;if(f.apply(a,h,d?d.start:f.pos,c),y&&console.log(o+this.stackID(f)+` (via ${65536&a?`reduce of ${r.getName(65535&a)}`:"shift"} for ${r.getName(h)} @ ${s}${f==e?"":", split"})`),u)return!0;f.pos>s?t.push(f):n.push(f)}return!1}advanceFully(e,t){let n=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>n)return C(e,t),!0}}runRecovery(e,t,n){let i=null,s=!1;for(let r=0;r<e.length;r++){let o=e[r],a=t[r<<1],l=t[1+(r<<1)],h=y?this.stackID(o)+" -> ":"";if(o.deadEnd){if(s)continue;if(s=!0,o.restart(),y&&console.log(h+this.stackID(o)+" (restarted)"),this.advanceFully(o,n))continue}let c=o.split(),u=h;for(let e=0;c.forceReduce()&&e<10&&(y&&console.log(u+this.stackID(c)+" (via force-reduce)"),!this.advanceFully(c,n));e++)y&&(u=this.stackID(c)+" -> ");for(let e of o.recoverByInsert(a))y&&console.log(h+this.stackID(e)+" (via recover-insert)"),this.advanceFully(e,n);this.stream.end>o.pos?(l==o.pos&&(l++,a=0),o.recoverByDelete(a,l),y&&console.log(h+this.stackID(o)+` (via recover-delete ${this.parser.getName(a)})`),C(o,n)):(!i||i.score<o.score)&&(i=o)}return i}stackToTree(e){return e.close(),i.PH.build({buffer:a.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(v||(v=new WeakMap)).get(e);return t||v.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function C(e,t){for(let n=0;n<t.length;n++){let i=t[n];if(i.pos==e.pos&&i.sameState(e))return void(t[n].score<e.score&&(t[n]=e))}t.push(e)}class A{constructor(e,t,n){this.source=e,this.flags=t,this.disabled=n}allows(e){return!this.disabled||0==this.disabled[e]}}const O=e=>e;class M{constructor(e){this.start=e.start,this.shift=e.shift||O,this.reduce=e.reduce||O,this.reuse=e.reuse||O,this.hash=e.hash||(()=>0),this.strict=!1!==e.strict}}class _ extends i.iX{constructor(e){if(super(),this.wrappers=[],14!=e.version)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let n=0;n<e.repeatNodeCount;n++)t.push("");let n=Object.keys(e.topRules).map((t=>e.topRules[t][1])),s=[];for(let e=0;e<t.length;e++)s.push([]);function r(e,t,n){s[e].push([t,t.deserialize(String(n))])}if(e.nodeProps)for(let t of e.nodeProps){let e=t[0];"string"==typeof e&&(e=i.uY[e]);for(let n=1;n<t.length;){let i=t[n++];if(i>=0)r(i,e,t[n++]);else{let s=t[n+-i];for(let o=-i;o>0;o--)r(t[n++],e,s);n++}}}this.nodeSet=new i.fI(t.map(((t,r)=>i.Z6.define({name:r>=this.minRepeatTerm?void 0:t,id:r,props:s[r],top:n.indexOf(r)>-1,error:0==r,skipped:e.skippedNodes&&e.skippedNodes.indexOf(r)>-1})))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=i.cF;let o=l(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let e=0;e<this.specializerSpecs.length;e++)this.specialized[e]=this.specializerSpecs[e].term;this.specializers=this.specializerSpecs.map(E),this.states=l(e.states,Uint32Array),this.data=l(e.stateData),this.goto=l(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map((e=>"number"==typeof e?new f(o,e):e)),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,n){let i=new S(this,e,t,n);for(let s of this.wrappers)i=s(i,e,t,n);return i}getGoto(e,t,n=!1){let i=this.goto;if(t>=i[0])return-1;for(let s=i[t+1];;){let t=i[s++],r=1&t,o=i[s++];if(r&&n)return o;for(let n=s+(t>>1);s<n;s++)if(i[s]==e)return o;if(r)return-1}}hasAction(e,t){let n=this.data;for(let i=0;i<2;i++)for(let s,r=this.stateSlot(e,i?2:1);;r+=3){if(65535==(s=n[r])){if(1!=n[r+1]){if(2==n[r+1])return T(n,r+2);break}s=n[r=T(n,r+2)]}if(s==t||0==s)return T(n,r+1)}return 0}stateSlot(e,t){return this.states[6*e+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,(e=>e==t||null))}allActions(e,t){let n=this.stateSlot(e,4),i=n?t(n):void 0;for(let n=this.stateSlot(e,1);null==i;n+=3){if(65535==this.data[n]){if(1!=this.data[n+1])break;n=T(this.data,n+2)}i=t(T(this.data,n+1))}return i}nextStates(e){let t=[];for(let n=this.stateSlot(e,1);;n+=3){if(65535==this.data[n]){if(1!=this.data[n+1])break;n=T(this.data,n+2)}if(!(1&this.data[n+2])){let e=this.data[n+1];t.some(((t,n)=>1&n&&t==e))||t.push(this.data[n],e)}}return t}configure(e){let t=Object.assign(Object.create(_.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let n=this.topRules[e.top];if(!n)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=n}return e.tokenizers&&(t.tokenizers=this.tokenizers.map((t=>{let n=e.tokenizers.find((e=>e.from==t));return n?n.to:t}))),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map(((n,i)=>{let s=e.specializers.find((e=>e.from==n.external));if(!s)return n;let r=Object.assign(Object.assign({},n),{external:s.to});return t.specializers[i]=E(r),r}))),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),null!=e.strict&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),null!=e.bufferLength&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return null==t?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),n=t.map((()=>!1));if(e)for(let i of e.split(" ")){let e=t.indexOf(i);e>=0&&(n[e]=!0)}let i=null;for(let e=0;e<t.length;e++)if(!n[e])for(let n,s=this.dialects[t[e]];65535!=(n=this.data[s++]);)(i||(i=new Uint8Array(this.maxTerm+1)))[n]=1;return new A(e,n,i)}static deserialize(e){return new _(e)}}function T(e,t){return e[t]|e[t+1]<<16}function E(e){if(e.external){let t=e.extend?1:0;return(n,i)=>e.external(n,i)<<1|t}return e.get}},98104:(e,t,n)=>{"use strict";n.d(t,{G:()=>o});const i="undefined"==typeof Symbol?"__Í¼":Symbol.for("Í¼"),s="undefined"==typeof Symbol?"__styleSet"+Math.floor(1e8*Math.random()):Symbol("styleSet"),r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:{};class o{constructor(e,t){this.rules=[];let{finish:n}=t||{};function i(e){return/^@/.test(e)?[e]:e.split(/,\s*/)}function s(e,t,r,o){let a=[],l=/^@(\w+)\b/.exec(e[0]),h=l&&"keyframes"==l[1];if(l&&null==t)return r.push(e[0]+";");for(let n in t){let o=t[n];if(/&/.test(n))s(n.split(/,\s*/).map((t=>e.map((e=>t.replace(/&/,e))))).reduce(((e,t)=>e.concat(t))),o,r);else if(o&&"object"==typeof o){if(!l)throw new RangeError("The value of a property ("+n+") should be a primitive value.");s(i(n),o,a,h)}else null!=o&&a.push(n.replace(/_.*/,"").replace(/[A-Z]/g,(e=>"-"+e.toLowerCase()))+": "+o+";")}(a.length||h)&&r.push((!n||l||o?e:e.map(n)).join(", ")+" {"+a.join(" ")+"}")}for(let t in e)s(i(t),e[t],this.rules)}getRules(){return this.rules.join("\n")}static newName(){let e=r[i]||1;return r[i]=e+1,"Í¼"+e.toString(36)}static mount(e,t,n){let i=e[s],r=n&&n.nonce;i?r&&i.setNonce(r):i=new l(e,r),i.mount(Array.isArray(t)?t:[t],e)}}let a=new Map;class l{constructor(e,t){let n=e.ownerDocument||e,i=n.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let t=a.get(n);if(t)return e[s]=t;this.sheet=new i.CSSStyleSheet,a.set(n,this)}else this.styleTag=n.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[s]=this}mount(e,t){let n=this.sheet,i=0,s=0;for(let t=0;t<e.length;t++){let r=e[t],o=this.modules.indexOf(r);if(o<s&&o>-1&&(this.modules.splice(o,1),s--,o=-1),-1==o){if(this.modules.splice(s++,0,r),n)for(let e=0;e<r.rules.length;e++)n.insertRule(r.rules[e],i++)}else{for(;s<o;)i+=this.modules[s++].rules.length;i+=r.rules.length,s++}}if(n)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let e="";for(let t=0;t<this.modules.length;t++)e+=this.modules[t].getRules()+"\n";this.styleTag.textContent=e;let n=t.head||t;this.styleTag.parentNode!=n&&n.insertBefore(this.styleTag,n.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}}}]);
//# sourceMappingURL=2817.thebe-core.min.js.map